/*! For license information please see main.a71ecab5.js.LICENSE.txt */
!function(){var e={647:function(){},110:function(e,t,n){"use strict";var i=n(309),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return i.isMemo(e)?o:s[e.$$typeof]||r}s[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[i.Memo]=o;var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,i){if("string"!==typeof n){if(p){var r=f(n);r&&r!==p&&e(t,r,i)}var o=c(n);h&&(o=o.concat(h(n)));for(var s=u(t),v=u(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!i||!i[y])&&(!v||!v[y])&&(!s||!s[y])){var g=d(n,y);try{l(t,y,g)}catch(_){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,k=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case c:case h:case a:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case d:case m:case v:case u:return e;default:return t}}case r:return t}}}function b(e){return w(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=l,t.ContextProvider=u,t.Element=i,t.ForwardRef=d,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=r,t.Profiler=s,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return b(e)||w(e)===c},t.isConcurrentMode=b,t.isContextConsumer=function(e){return w(e)===l},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===r},t.isProfiler=function(e){return w(e)===s},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===u||e.$$typeof===l||e.$$typeof===d||e.$$typeof===g||e.$$typeof===_||e.$$typeof===k||e.$$typeof===y)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},370:function(e,t,n){var i,r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}window.cash=function(){var e,t=document,n=window,i=Array.prototype,r=i.slice,a=i.filter,o=i.push,s=function(){},u=function(e){return typeof e===typeof s&&e.call},l=function(e){return"string"===typeof e},c=/^#[\w-]*$/,h=/^\.[\w-]*$/,d=/<.+>/,f=/^\w+$/;function p(e,n){return n=n||t,h.test(e)?n.getElementsByClassName(e.slice(1)):f.test(e)?n.getElementsByTagName(e):n.querySelectorAll(e)}function v(n){if(!e){var i=(e=t.implementation.createHTMLDocument(null)).createElement("base");i.href=t.location.href,e.head.appendChild(i)}return e.body.innerHTML=n,e.body.childNodes}function m(e){"loading"!==t.readyState?e():t.addEventListener("DOMContentLoaded",e)}function y(e,i){if(!e)return this;if(e.cash&&e!==n)return e;var r,a=e,o=0;if(l(e))a=c.test(e)?t.getElementById(e.slice(1)):d.test(e)?v(e):p(e,i);else if(u(e))return m(e),this;if(!a)return this;if(a.nodeType||a===n)this[0]=a,this.length=1;else for(r=this.length=a.length;o<r;o++)this[o]=a[o];return this}function g(e,t){return new y(e,t)}var _=g.fn=g.prototype=y.prototype={cash:!0,length:0,push:o,splice:i.splice,map:i.map,init:y};function k(e,t){for(var n=e.length,i=0;i<n&&!1!==t.call(e[i],e[i],i,e);i++);}function w(e,t){var n=e&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector);return!!n&&n.call(e,t)}function b(e){return l(e)?w:e.cash?function(t){return e.is(t)}:function(e,t){return e===t}}function x(e){return g(r.call(e).filter((function(e,t,n){return n.indexOf(e)===t})))}Object.defineProperty(_,"constructor",{value:g}),g.parseHTML=v,g.noop=s,g.isFunction=u,g.isString=l,g.extend=_.extend=function(e){e=e||{};var t=r.call(arguments),n=t.length,i=1;for(1===t.length&&(e=this,i=0);i<n;i++)if(t[i])for(var a in t[i])t[i].hasOwnProperty(a)&&(e[a]=t[i][a]);return e},g.extend({merge:function(e,t){for(var n=+t.length,i=e.length,r=0;r<n;i++,r++)e[i]=t[r];return e.length=i,e},each:k,matches:w,unique:x,isArray:Array.isArray,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}});var E=g.uid="_cash"+Date.now();function C(e){return e[E]=e[E]||{}}function T(e,t,n){return C(e)[t]=n}function I(e,t){var n=C(e);return void 0===n[t]&&(n[t]=e.dataset?e.dataset[t]:g(e).attr("data-"+t)),n[t]}function S(e,t){var n=C(e);n?delete n[t]:e.dataset?delete e.dataset[t]:g(e).removeAttr("data-"+name)}_.extend({data:function(e,t){if(l(e))return void 0===t?I(this[0],e):this.each((function(n){return T(n,e,t)}));for(var n in e)this.data(n,e[n]);return this},removeData:function(e){return this.each((function(t){return S(t,e)}))}});var O=/\S+/g;function A(e){return l(e)&&e.match(O)}function D(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function M(e,t,n){e.classList?e.classList.add(t):n.indexOf(" "+t+" ")&&(e.className+=" "+t)}function R(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(t,"")}_.extend({addClass:function(e){var t=A(e);return t?this.each((function(e){var n=" "+e.className+" ";k(t,(function(t){M(e,t,n)}))})):this},attr:function(e,t){if(e){if(l(e))return void 0===t?this[0]?this[0].getAttribute?this[0].getAttribute(e):this[0][e]:void 0:this.each((function(n){n.setAttribute?n.setAttribute(e,t):n[e]=t}));for(var n in e)this.attr(n,e[n]);return this}},hasClass:function(e){var t=!1,n=A(e);return n&&n.length&&this.each((function(e){return!(t=D(e,n[0]))})),t},prop:function(e,t){if(l(e))return void 0===t?this[0][e]:this.each((function(n){n[e]=t}));for(var n in e)this.prop(n,e[n]);return this},removeAttr:function(e){return this.each((function(t){t.removeAttribute?t.removeAttribute(e):delete t[e]}))},removeClass:function(e){if(!arguments.length)return this.attr("class","");var t=A(e);return t?this.each((function(e){k(t,(function(t){R(e,t)}))})):this},removeProp:function(e){return this.each((function(t){delete t[e]}))},toggleClass:function(e,t){if(void 0!==t)return this[t?"addClass":"removeClass"](e);var n=A(e);return n?this.each((function(e){var t=" "+e.className+" ";k(n,(function(n){D(e,n)?R(e,n):M(e,n,t)}))})):this}}),_.extend({add:function(e,t){return x(g.merge(this,g(e,t)))},each:function(e){return k(this,e),this},eq:function(e){return g(this.get(e))},filter:function(e){if(!e)return this;var t=u(e)?e:b(e);return g(a.call(this,(function(n){return t(n,e)})))},first:function(){return this.eq(0)},get:function(e){return void 0===e?r.call(this):e<0?this[e+this.length]:this[e]},index:function(e){var t=e?g(e)[0]:this[0],n=e?this:g(t).parent().children();return r.call(n).indexOf(t)},last:function(){return this.eq(-1)}});var P=function(){var e=/(?:^\w|[A-Z]|\b\w)/g,t=/[\s-_]+/g;return function(n){return n.replace(e,(function(e,t){return e[0===t?"toLowerCase":"toUpperCase"]()})).replace(t,"")}}(),N=function(){var e={},t=document.createElement("div").style;return function(n){if(n=P(n),e[n])return e[n];var i=n.charAt(0).toUpperCase()+n.slice(1);return k((n+" "+["webkit","moz","ms","o"].join(i+" ")+i).split(" "),(function(i){if(i in t)return e[i]=n=e[n]=i,!1})),e[n]}}();function L(e,t){return parseInt(n.getComputedStyle(e[0],null)[t],10)||0}function B(e,t,n){var i=I(e,"_cashEvents")||T(e,"_cashEvents",{});i[t]=i[t]||[],i[t].push(n),e.addEventListener(t,n)}function F(e,t,n){var i,r=I(e,"_cashEvents"),a=r&&r[t];a&&(n?(e.removeEventListener(t,n),(i=a.indexOf(n))>=0&&a.splice(i,1)):(k(a,(function(n){e.removeEventListener(t,n)})),a=[]))}function j(e,t){return"&"+encodeURIComponent(e)+"="+encodeURIComponent(t).replace(/%20/g,"+")}function U(e){var t=[];return k(e.options,(function(e){e.selected&&t.push(e.value)})),t.length?t:null}function V(e){var t=e.selectedIndex;return t>=0?e.options[t].value:null}function q(e){var t=e.type;if(!t)return null;switch(t.toLowerCase()){case"select-one":return V(e);case"select-multiple":return U(e);case"radio":case"checkbox":return e.checked?e.value:null;default:return e.value?e.value:null}}function $(e,t,n){if(n){var i=e.childNodes[0];e.insertBefore(t,i)}else e.appendChild(t)}function W(e,t,n){var i=l(t);i||!t.length?k(e,i?function(e){return e.insertAdjacentHTML(n?"afterbegin":"beforeend",t)}:function(e,i){return $(e,0===i?t:t.cloneNode(!0),n)}):k(t,(function(t){return W(e,t,n)}))}g.prefixedProp=N,g.camelCase=P,_.extend({css:function(e,t){if(l(e))return e=N(e),arguments.length>1?this.each((function(n){return n.style[e]=t})):n.getComputedStyle(this[0])[e];for(var i in e)this.css(i,e[i]);return this}}),k(["Width","Height"],(function(e){var t=e.toLowerCase();_[t]=function(){return this[0].getBoundingClientRect()[t]},_["inner"+e]=function(){return this[0]["client"+e]},_["outer"+e]=function(t){return this[0]["offset"+e]+(t?L(this,"margin"+("Width"===e?"Left":"Top"))+L(this,"margin"+("Width"===e?"Right":"Bottom")):0)}})),_.extend({off:function(e,t){return this.each((function(n){return F(n,e,t)}))},on:function(e,t,n,i){var r;if(!l(e)){for(var a in e)this.on(a,t,e[a]);return this}return u(t)&&(n=t,t=null),"ready"===e?(m(n),this):(t&&(r=n,n=function(e){for(var n=e.target;!w(n,t);){if(n===this||null===n)return!1;n=n.parentNode}n&&r.call(n,e)}),this.each((function(t){var r=n;i&&(r=function(){n.apply(this,arguments),F(t,e,r)}),B(t,e,r)})))},one:function(e,t,n){return this.on(e,t,n,!0)},ready:m,trigger:function(e,t){if(document.createEvent){var n=document.createEvent("HTMLEvents");return n.initEvent(e,!0,!1),n=this.extend(n,t),this.each((function(e){return e.dispatchEvent(n)}))}}}),_.extend({serialize:function(){var e="";return k(this[0].elements||this,(function(t){if(!t.disabled&&"FIELDSET"!==t.tagName){var n=t.name;switch(t.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var i=q(t);null!==i&&k(i,(function(t){e+=j(n,t)}));break;default:var r=q(t);null!==r&&(e+=j(n,r))}}})),e.substr(1)},val:function(e){return void 0===e?q(this[0]):this.each((function(t){return t.value=e}))}}),_.extend({after:function(e){return g(e).insertAfter(this),this},append:function(e){return W(this,e),this},appendTo:function(e){return W(g(e),this),this},before:function(e){return g(e).insertBefore(this),this},clone:function(){return g(this.map((function(e){return e.cloneNode(!0)})))},empty:function(){return this.html(""),this},html:function(e){if(void 0===e)return this[0].innerHTML;var t=e.nodeType?e[0].outerHTML:e;return this.each((function(e){return e.innerHTML=t}))},insertAfter:function(e){var t=this;return g(e).each((function(e,n){var i=e.parentNode,r=e.nextSibling;t.each((function(e){i.insertBefore(0===n?e:e.cloneNode(!0),r)}))})),this},insertBefore:function(e){var t=this;return g(e).each((function(e,n){var i=e.parentNode;t.each((function(t){i.insertBefore(0===n?t:t.cloneNode(!0),e)}))})),this},prepend:function(e){return W(this,e,!0),this},prependTo:function(e){return W(g(e),this,!0),this},remove:function(){return this.each((function(e){if(e.parentNode)return e.parentNode.removeChild(e)}))},text:function(e){return void 0===e?this[0].textContent:this.each((function(t){return t.textContent=e}))}});var z=t.documentElement;return _.extend({position:function(){var e=this[0];return{left:e.offsetLeft,top:e.offsetTop}},offset:function(){var e=this[0].getBoundingClientRect();return{top:e.top+n.pageYOffset-z.clientTop,left:e.left+n.pageXOffset-z.clientLeft}},offsetParent:function(){return g(this[0].offsetParent)}}),_.extend({children:function(e){var t=[];return this.each((function(e){o.apply(t,e.children)})),t=x(t),e?t.filter((function(t){return w(t,e)})):t},closest:function(e){return!e||this.length<1?g():this.is(e)?this.filter(e):this.parent().closest(e)},is:function(e){if(!e)return!1;var t=!1,n=b(e);return this.each((function(i){return!(t=n(i,e))})),t},find:function(e){if(!e||e.nodeType)return g(e&&this.has(e).length?e:null);var t=[];return this.each((function(n){o.apply(t,p(e,n))})),x(t)},has:function(e){var t=l(e)?function(t){return 0!==p(e,t).length}:function(t){return t.contains(e)};return this.filter(t)},next:function(){return g(this[0].nextElementSibling)},not:function(e){if(!e)return this;var t=b(e);return this.filter((function(n){return!t(n,e)}))},parent:function(){var e=[];return this.each((function(t){t&&t.parentNode&&e.push(t.parentNode)})),x(e)},parents:function(e){var n,i=[];return this.each((function(r){for(n=r;n&&n.parentNode&&n!==t.body.parentNode;)n=n.parentNode,(!e||e&&w(n,e))&&i.push(n)})),x(i)},prev:function(){return g(this[0].previousElementSibling)},siblings:function(e){var t=this.parent().children(e),n=this[0];return t.filter((function(e){return e!==n}))}}),g}();var l=function(){function e(t,n,i){u(this,e),n instanceof Element||console.error(Error(n+" is not an HTML Element"));var r=t.getInstance(n);r&&r.destroy(),this.el=n,this.$el=cash(n)}return a(e,null,[{key:"init",value:function(e,t,n){var i=null;if(t instanceof Element)i=new e(t,n);else if(t&&(t.jquery||t.cash||t instanceof NodeList)){for(var r=[],a=0;a<t.length;a++)r.push(new e(t[a],n));i=r}return i}}]),e}();!function(e){e.Package?M={}:e.M={},M.jQueryLoaded=!!e.jQuery}(window),void 0===(i=function(){return M}.apply(t,[]))||(e.exports=i),M.version="1.0.0",M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;document.addEventListener("keydown",(function(e){M.keyDown=!0,e.which!==M.keys.TAB&&e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||(M.tabPressed=!0)}),!0),document.addEventListener("keyup",(function(e){M.keyDown=!1,e.which!==M.keys.TAB&&e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||(M.tabPressed=!1)}),!0),document.addEventListener("focus",(function(e){M.keyDown&&document.body.classList.add("keyboard-focused")}),!0),document.addEventListener("blur",(function(e){document.body.classList.remove("keyboard-focused")}),!0),M.initializeJqueryWrapper=function(e,t,n){jQuery.fn[t]=function(i){if(e.prototype[i]){var r=Array.prototype.slice.call(arguments,1);if("get"===i.slice(0,3)){var a=this.first()[0][n];return a[i].apply(a,r)}return this.each((function(){var e=this[n];e[i].apply(e,r)}))}if("object"===typeof i||!i)return e.init(this,arguments[0]),this;jQuery.error("Method "+i+" does not exist on jQuery."+t)}},M.AutoInit=function(e){var t=e||document.body,n={Autocomplete:t.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:t.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:t.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:t.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:t.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:t.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:t.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:t.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:t.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:t.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:t.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:t.querySelectorAll("select:not(.no-autoinit)"),Sidenav:t.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:t.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:t.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:t.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:t.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:t.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var i in n){M[i].init(n[i])}},M.objectSelectorString=function(e){return((e.prop("tagName")||"")+(e.attr("id")||"")+(e.attr("class")||"")).replace(/\s/g,"")},M.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),M.escapeHash=function(e){return e.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(e){var t=$(e),n=t.add(t.parents()),i=!1;return n.each((function(){if("fixed"===$(this).css("position"))return i=!0,!1})),i},M.checkWithinContainer=function(e,t,n){var i={top:!1,right:!1,bottom:!1,left:!1},r=e.getBoundingClientRect(),a=e===document.body?Math.max(r.bottom,window.innerHeight):r.bottom,o=e.scrollLeft,s=e.scrollTop,u=t.left-o,l=t.top-s;return(u<r.left+n||u<n)&&(i.left=!0),(u+t.width>r.right-n||u+t.width>window.innerWidth-n)&&(i.right=!0),(l<r.top+n||l<n)&&(i.top=!0),(l+t.height>a-n||l+t.height>window.innerHeight-n)&&(i.bottom=!0),i},M.checkPossibleAlignments=function(e,t,n,i){var r={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},a="visible"===getComputedStyle(t).overflow,o=t.getBoundingClientRect(),s=Math.min(o.height,window.innerHeight),u=Math.min(o.width,window.innerWidth),l=e.getBoundingClientRect(),c=t.scrollLeft,h=t.scrollTop,d=n.left-c,f=n.top-h,p=n.top+l.height-h;return r.spaceOnRight=a?window.innerWidth-(l.left+n.width):u-(d+n.width),r.spaceOnRight<0&&(r.left=!1),r.spaceOnLeft=a?l.right-n.width:d-n.width+l.width,r.spaceOnLeft<0&&(r.right=!1),r.spaceOnBottom=a?window.innerHeight-(l.top+n.height+i):s-(f+n.height+i),r.spaceOnBottom<0&&(r.top=!1),r.spaceOnTop=a?l.bottom-(n.height+i):p-(n.height-i),r.spaceOnTop<0&&(r.bottom=!1),r},M.getOverflowParent=function(e){return null==e?null:e===document.body||"visible"!==getComputedStyle(e).overflow?e:M.getOverflowParent(e.parentElement)},M.getIdFromTrigger=function(e){var t=e.getAttribute("data-target");return t||(t=(t=e.getAttribute("href"))?t.slice(1):""),t},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};var c=Date.now||function(){return(new Date).getTime()};M.throttle=function(e,t,n){var i=void 0,r=void 0,a=void 0,o=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:c(),o=null,a=e.apply(i,r),i=r=null};return function(){var l=c();s||!1!==n.leading||(s=l);var h=t-(l-s);return i=this,r=arguments,h<=0?(clearTimeout(o),o=null,s=l,a=e.apply(i,r),i=r=null):o||!1===n.trailing||(o=setTimeout(u,h)),a}};var h={scope:{}};h.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},h.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof n.g&&null!=n.g?n.g:e},h.global=h.getGlobal(this),h.SYMBOL_PREFIX="jscomp_symbol_",h.initSymbol=function(){h.initSymbol=function(){},h.global.Symbol||(h.global.Symbol=h.Symbol)},h.symbolCounter_=0,h.Symbol=function(e){return h.SYMBOL_PREFIX+(e||"")+h.symbolCounter_++},h.initSymbolIterator=function(){h.initSymbol();var e=h.global.Symbol.iterator;e||(e=h.global.Symbol.iterator=h.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&h.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return h.arrayIterator(this)}}),h.initSymbolIterator=function(){}},h.arrayIterator=function(e){var t=0;return h.iteratorPrototype((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))},h.iteratorPrototype=function(e){return h.initSymbolIterator(),(e={next:e})[h.global.Symbol.iterator]=function(){return this},e},h.array=h.array||{},h.iteratorFromArray=function(e,t){h.initSymbolIterator(),e instanceof String&&(e+="");var n=0,i={next:function(){if(n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i},h.polyfill=function(e,t,n,i){if(t){for(n=h.global,e=e.split("."),i=0;i<e.length-1;i++){var r=e[i];r in n||(n[r]={}),n=n[r]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&h.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},h.polyfill("Array.prototype.keys",(function(e){return e||function(){return h.iteratorFromArray(this,(function(e){return e}))}}),"es6-impl","es3");var d=this;M.anime=function(){function e(e){if(!F.col(e))try{return document.querySelectorAll(e)}catch(t){}}function t(e,t){for(var n=e.length,i=2<=arguments.length?arguments[1]:void 0,r=[],a=0;a<n;a++)if(a in e){var o=e[a];t.call(i,o,a,e)&&r.push(o)}return r}function n(e){return e.reduce((function(e,t){return e.concat(F.arr(t)?n(t):t)}),[])}function i(t){return F.arr(t)?t:(F.str(t)&&(t=e(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function r(e,t){return e.some((function(e){return e===t}))}function a(e){var t,n={};for(t in e)n[t]=e[t];return n}function o(e,t){var n,i=a(e);for(n in e)i[n]=t.hasOwnProperty(n)?t[n]:e[n];return i}function s(e,t){var n,i=a(e);for(n in t)i[n]=F.und(e[n])?t[n]:e[n];return i}function u(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,i){return t+t+n+n+i+i}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba("+(e=parseInt(t[1],16))+","+parseInt(t[2],16)+","+(t=parseInt(t[3],16))+",1)"}function l(e){function t(e,t,n){return 0>n&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:.5>n?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e);e=parseInt(n[1])/360;var i=parseInt(n[2])/100,r=parseInt(n[3])/100;if(n=n[4]||1,0==i)r=i=e=r;else{var a=.5>r?r*(1+i):r+i-r*i,o=2*r-a;r=t(o,a,e+1/3),i=t(o,a,e),e=t(o,a,e-1/3)}return"rgba("+255*r+","+255*i+","+255*e+","+n+")"}function c(e){if(e=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e))return e[2]}function h(e){return-1<e.indexOf("translate")||"perspective"===e?"px":-1<e.indexOf("rotate")||-1<e.indexOf("skew")?"deg":void 0}function f(e,t){return F.fnc(e)?e(t.target,t.id,t.total):e}function p(e,t){if(t in e.style)return getComputedStyle(e).getPropertyValue(t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function v(e,t){return F.dom(e)&&r(B,t)?"transform":F.dom(e)&&(e.getAttribute(t)||F.svg(e)&&e[t])?"attribute":F.dom(e)&&"transform"!==t&&p(e,t)?"css":null!=e[t]?"object":void 0}function m(e,n){var i=h(n);if(i=-1<n.indexOf("scale")?1:0+i,!(e=e.style.transform))return i;for(var r=[],a=[],o=[],s=/(\w+)\((.+?)\)/g;r=s.exec(e);)a.push(r[1]),o.push(r[2]);return e=t(o,(function(e,t){return a[t]===n})),e.length?e[0]:i}function y(e,t){switch(v(e,t)){case"transform":return m(e,t);case"css":return p(e,t);case"attribute":return e.getAttribute(t)}return e[t]||0}function g(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var i=c(e)||0;switch(t=parseFloat(t),e=parseFloat(e.replace(n[0],"")),n[0][0]){case"+":return t+e+i;case"-":return t-e+i;case"*":return t*e+i}}function _(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function k(e){e=e.points;for(var t,n=0,i=0;i<e.numberOfItems;i++){var r=e.getItem(i);0<i&&(n+=_(t,r)),t=r}return n}function w(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return 2*Math.PI*e.getAttribute("r");case"rect":return 2*e.getAttribute("width")+2*e.getAttribute("height");case"line":return _({x:e.getAttribute("x1"),y:e.getAttribute("y1")},{x:e.getAttribute("x2"),y:e.getAttribute("y2")});case"polyline":return k(e);case"polygon":var t=e.points;return k(e)+_(t.getItem(t.numberOfItems-1),t.getItem(0))}}function b(e,t){function n(n){return n=void 0===n?0:n,e.el.getPointAtLength(1<=t+n?t+n:0)}var i=n(),r=n(-1),a=n(1);switch(e.property){case"x":return i.x;case"y":return i.y;case"angle":return 180*Math.atan2(a.y-r.y,a.x-r.x)/Math.PI}}function x(e,t){var n,i=/-?\d*\.?\d+/g;if(n=F.pth(e)?e.totalLength:e,F.col(n))if(F.rgb(n)){var r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);n=r?"rgba("+r[1]+",1)":n}else n=F.hex(n)?u(n):F.hsl(n)?l(n):void 0;else r=(r=c(n))?n.substr(0,n.length-r.length):n,n=t&&!/\s/g.test(n)?r+t:r;return{original:n+="",numbers:n.match(i)?n.match(i).map(Number):[0],strings:F.str(e)||t?n.split(i):[]}}function E(e){return t(e=e?n(F.arr(e)?e.map(i):i(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function C(e){var t=E(e);return t.map((function(e,n){return{target:e,id:n,total:t.length}}))}function T(e,t){var n=a(t);if(F.arr(e)){var r=e.length;2!==r||F.obj(e[0])?F.fnc(t.duration)||(n.duration=t.duration/r):e={value:e}}return i(e).map((function(e,n){return n=n?0:t.delay,e=F.obj(e)&&!F.pth(e)?e:{value:e},F.und(e.delay)&&(e.delay=n),e})).map((function(e){return s(e,n)}))}function I(e,t){var n,i={};for(n in e){var r=f(e[n],t);F.arr(r)&&(r=r.map((function(e){return f(e,t)})),1===r.length&&(r=r[0])),i[n]=r}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}function S(e){return F.arr(e)?j.apply(this,e):U[e]}function O(e,t){var n;return e.tweens.map((function(i){var r=(i=I(i,t)).value,a=y(t.target,e.name),o=n?n.to.original:a,s=(o=F.arr(r)?r[0]:o,g(F.arr(r)?r[1]:r,o));return a=c(s)||c(o)||c(a),i.from=x(o,a),i.to=x(s,a),i.start=n?n.end:e.offset,i.end=i.start+i.delay+i.duration,i.easing=S(i.easing),i.elasticity=(1e3-Math.min(Math.max(i.elasticity,1),999))/1e3,i.isPath=F.pth(r),i.isColor=F.col(i.from.original),i.isColor&&(i.round=1),n=i}))}function A(e,i){return t(n(e.map((function(e){return i.map((function(t){var n=v(e.target,t.name);if(n){var i=O(t,e);t={type:n,property:t.name,animatable:e,tweens:i,duration:i[i.length-1].end,delay:i[0].delay}}else t=void 0;return t}))}))),(function(e){return!F.und(e)}))}function D(e,t,n,i){var r="delay"===e;return t.length?(r?Math.min:Math.max).apply(Math,t.map((function(t){return t[e]}))):r?i.delay:n.offset+i.delay+i.duration}function M(e){var t,n=o(N,e),i=o(L,e),r=C(e.targets),a=[],u=s(n,i);for(t in e)u.hasOwnProperty(t)||"targets"===t||a.push({name:t,offset:u.offset,tweens:T(e[t],i)});return s(n,{children:[],animatables:r,animations:e=A(r,a),duration:D("duration",e,n,i),delay:D("delay",e,n,i)})}function R(e){function n(){return window.Promise&&new Promise((function(e){return h=e}))}function i(e){return f.reversed?f.duration-e:e}function r(e){for(var n=0,i={},r=f.animations,a=r.length;n<a;){var o=r[n],s=o.animatable,u=(l=o.tweens)[d=l.length-1];d&&(u=t(l,(function(t){return e<t.end}))[0]||u);for(var l=Math.min(Math.max(e-u.start-u.delay,0),u.duration)/u.duration,c=isNaN(l)?1:u.easing(l,u.elasticity),h=(l=u.to.strings,u.round),d=[],v=void 0,m=(v=u.to.numbers.length,0);m<v;m++){var y=void 0,g=(y=u.to.numbers[m],u.from.numbers[m]);y=u.isPath?b(u.value,c*y):g+c*(y-g),h&&(u.isColor&&2<m||(y=Math.round(y*h)/h)),d.push(y)}if(u=l.length)for(v=l[0],c=0;c<u;c++)h=l[c+1],m=d[c],isNaN(m)||(v=h?v+(m+h):v+(m+" "));else v=d[0];V[o.type](s.target,o.property,v,i,s.id),o.currentValue=v,n++}if(n=Object.keys(i).length)for(r=0;r<n;r++)P||(P=p(document.body,"transform")?"transform":"-webkit-transform"),f.animatables[r].target.style[P]=i[r].join(" ");f.currentTime=e,f.progress=e/f.duration*100}function a(e){f[e]&&f[e](f)}function o(){f.remaining&&!0!==f.remaining&&f.remaining--}function s(e){var t=f.duration,s=f.offset,p=s+f.delay,v=f.currentTime,m=f.reversed,y=i(e);if(f.children.length){var g=f.children,_=g.length;if(y>=f.currentTime)for(var k=0;k<_;k++)g[k].seek(y);else for(;_--;)g[_].seek(y)}(y>=p||!t)&&(f.began||(f.began=!0,a("begin")),a("run")),y>s&&y<t?r(y):(y<=s&&0!==v&&(r(0),m&&o()),(y>=t&&v!==t||!t)&&(r(t),m||o())),a("update"),e>=t&&(f.remaining?(l=u,"alternate"===f.direction&&(f.reversed=!f.reversed)):(f.pause(),f.completed||(f.completed=!0,a("complete"),"Promise"in window&&(h(),d=n()))),c=0)}e=void 0===e?{}:e;var u,l,c=0,h=null,d=n(),f=M(e);return f.reset=function(){var e=f.direction,t=f.loop;for(f.currentTime=0,f.progress=0,f.paused=!0,f.began=!1,f.completed=!1,f.reversed="reverse"===e,f.remaining="alternate"===e&&1===t?2:t,r(0),e=f.children.length;e--;)f.children[e].reset()},f.tick=function(e){u=e,l||(l=u),s((c+u-l)*R.speed)},f.seek=function(e){s(i(e))},f.pause=function(){var e=q.indexOf(f);-1<e&&q.splice(e,1),f.paused=!0},f.play=function(){f.paused&&(f.paused=!1,l=0,c=i(f.currentTime),q.push(f),$||W())},f.reverse=function(){f.reversed=!f.reversed,l=0,c=i(f.currentTime)},f.restart=function(){f.pause(),f.reset(),f.play()},f.finished=d,f.reset(),f.autoplay&&f.play(),f}var P,N={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},L={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},B="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),F={arr:function(e){return Array.isArray(e)},obj:function(e){return-1<Object.prototype.toString.call(e).indexOf("Object")},pth:function(e){return F.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},dom:function(e){return e.nodeType||F.svg(e)},str:function(e){return"string"===typeof e},fnc:function(e){return"function"===typeof e},und:function(e){return"undefined"===typeof e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return F.hex(e)||F.rgb(e)||F.hsl(e)}},j=function(){function e(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}return function(t,n,i,r){if(0<=t&&1>=t&&0<=i&&1>=i){var a=new Float32Array(11);if(t!==n||i!==r)for(var o=0;11>o;++o)a[o]=e(.1*o,t,i);return function(o){if(t===n&&i===r)return o;if(0===o)return 0;if(1===o)return 1;for(var s=0,u=1;10!==u&&a[u]<=o;++u)s+=.1;--u,u=s+(o-a[u])/(a[u+1]-a[u])*.1;var l=3*(1-3*i+3*t)*u*u+2*(3*i-6*t)*u+3*t;if(.001<=l){for(s=0;4>s&&0!==(l=3*(1-3*i+3*t)*u*u+2*(3*i-6*t)*u+3*t);++s){var c=e(u,t,i)-o;u-=c/l}o=u}else if(0===l)o=u;else{u=s,s+=.1;var h=0;do{0<(l=e(c=u+(s-u)/2,t,i)-o)?s=c:u=c}while(1e-7<Math.abs(l)&&10>++h);o=c}return e(o,n,r)}}}}(),U=function(){function e(e,t){return 0===e||1===e?e:-Math.pow(2,10*(e-1))*Math.sin(2*(e-1-t/(2*Math.PI)*Math.asin(1))*Math.PI/t)}var t,n="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),i={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],e],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(t,n){return 1-e(1-t,n)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(t,n){return.5>t?e(2*t,n)/2:1-e(-2*t+2,n)/2}]},r={linear:j(.25,.25,.75,.75)},a={};for(t in i)a.type=t,i[a.type].forEach(function(e){return function(t,i){r["ease"+e.type+n[i]]=F.fnc(t)?t:j.apply(d,t)}}(a)),a={type:a.type};return r}(),V={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,i,r){i[r]||(i[r]=[]),i[r].push(t+"("+n+")")}},q=[],$=0,W=function(){function e(){$=requestAnimationFrame(t)}function t(t){var n=q.length;if(n){for(var i=0;i<n;)q[i]&&q[i].tick(t),i++;e()}else cancelAnimationFrame($),$=0}return e}();return R.version="2.2.0",R.speed=1,R.running=q,R.remove=function(e){e=E(e);for(var t=q.length;t--;)for(var n=q[t],i=n.animations,a=i.length;a--;)r(e,i[a].animatable.target)&&(i.splice(a,1),i.length||n.pause())},R.getValue=y,R.path=function(t,n){var i=F.str(t)?e(t)[0]:t,r=n||100;return function(e){return{el:i,property:e,totalLength:w(i)*(r/100)}}},R.setDashoffset=function(e){var t=w(e);return e.setAttribute("stroke-dasharray",t),t},R.bezier=j,R.easings=U,R.timeline=function(e){var t=R(e);return t.pause(),t.duration=0,t.add=function(n){return t.children.forEach((function(e){e.began=!0,e.completed=!0})),i(n).forEach((function(n){var i=s(n,o(L,e||{}));i.targets=i.targets||e.targets,n=t.duration;var r=i.offset;i.autoplay=!1,i.direction=t.direction,i.offset=F.und(r)?n:g(r,n),t.began=!0,t.completed=!0,t.seek(i.offset),(i=R(i)).began=!0,i.completed=!0,i.duration>n&&(t.duration=i.duration),t.children.push(i)})),t.seek(0),t.reset(),t.autoplay&&t.restart(),t},t},R.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},R}(),function(e,t){"use strict";var n={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));i.el.M_Collapsible=i,i.options=e.extend({},l.defaults,n),i.$headers=i.$el.children("li").children(".collapsible-header"),i.$headers.attr("tabindex",0),i._setupEventHandlers();var r=i.$el.children("li.active").children(".collapsible-body");return i.options.accordion?r.first().css("display","block"):r.css("display","block"),i}return s(l,i),a(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each((function(t){t.addEventListener("keydown",e._handleCollapsibleKeydownBound)}))}},{key:"_removeEventHandlers",value:function(){var e=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each((function(t){t.removeEventListener("keydown",e._handleCollapsibleKeydownBound)}))}},{key:"_handleCollapsibleClick",value:function(t){var n=e(t.target).closest(".collapsible-header");if(t.target&&n.length){var i=n.closest(".collapsible");if(i[0]===this.el){var r=n.closest("li"),a=i.children("li"),o=r[0].classList.contains("active"),s=a.index(r);o?this.close(s):this.open(s)}}}},{key:"_handleCollapsibleKeydown",value:function(e){13===e.keyCode&&this._handleCollapsibleClickBound(e)}},{key:"_animateIn",value:function(e){var n=this,i=this.$el.children("li").eq(e);if(i.length){var r=i.children(".collapsible-body");t.remove(r[0]),r.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var a=r.css("padding-top"),o=r.css("padding-bottom"),s=r[0].scrollHeight;r.css({paddingTop:0,paddingBottom:0}),t({targets:r[0],height:s,paddingTop:a,paddingBottom:o,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(e){r.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),"function"===typeof n.options.onOpenEnd&&n.options.onOpenEnd.call(n,i[0])}})}}},{key:"_animateOut",value:function(e){var n=this,i=this.$el.children("li").eq(e);if(i.length){var r=i.children(".collapsible-body");t.remove(r[0]),r.css("overflow","hidden"),t({targets:r[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){r.css({height:"",overflow:"",padding:"",display:""}),"function"===typeof n.options.onCloseEnd&&n.options.onCloseEnd.call(n,i[0])}})}}},{key:"open",value:function(t){var n=this,i=this.$el.children("li").eq(t);if(i.length&&!i[0].classList.contains("active")){if("function"===typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,i[0]),this.options.accordion){var r=this.$el.children("li");this.$el.children("li.active").each((function(t){var i=r.index(e(t));n.close(i)}))}i[0].classList.add("active"),this._animateIn(t)}}},{key:"close",value:function(e){var t=this.$el.children("li").eq(e);t.length&&t[0].classList.contains("active")&&("function"===typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,t[0]),t[0].classList.remove("active"),this._animateOut(e))}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Collapsible}},{key:"defaults",get:function(){return n}}]),l}(l);M.Collapsible=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"collapsible","M_Collapsible")}(cash,M.anime),function(e,t){"use strict";var n={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Dropdown=i,l._dropdowns.push(i),i.id=M.getIdFromTrigger(t),i.dropdownEl=document.getElementById(i.id),i.$dropdownEl=e(i.dropdownEl),i.options=e.extend({},l.defaults,n),i.isOpen=!1,i.isScrollable=!1,i.isTouchMoving=!1,i.focusedIndex=-1,i.filterQuery=[],i.options.container?e(i.options.container).append(i.dropdownEl):i.$el.after(i.dropdownEl),i._makeDropdownFocusable(),i._resetFilterQueryBound=i._resetFilterQuery.bind(i),i._handleDocumentClickBound=i._handleDocumentClick.bind(i),i._handleDocumentTouchmoveBound=i._handleDocumentTouchmove.bind(i),i._handleDropdownClickBound=i._handleDropdownClick.bind(i),i._handleDropdownKeydownBound=i._handleDropdownKeydown.bind(i),i._handleTriggerKeydownBound=i._handleTriggerKeydown.bind(i),i._setupEventHandlers(),i}return s(l,i),a(l,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),l._dropdowns.splice(l._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(e){e.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(t){var n=t.toElement||t.relatedTarget,i=!!e(n).closest(".dropdown-content").length,r=!1,a=e(n).closest(".dropdown-trigger");a.length&&a[0].M_Dropdown&&a[0].M_Dropdown.isOpen&&(r=!0),r||i||this.close()}},{key:"_handleDocumentClick",value:function(t){var n=this,i=e(t.target);this.options.closeOnClick&&i.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout((function(){n.close()}),0):!i.closest(".dropdown-trigger").length&&i.closest(".dropdown-content").length||setTimeout((function(){n.close()}),0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(e){e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ENTER||this.isOpen||(e.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(t){e(t.target).closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(t){if("function"===typeof this.options.onItemClick){var n=e(t.target).closest("li")[0];this.options.onItemClick.call(this,n)}}},{key:"_handleDropdownKeydown",value:function(t){if(t.which===M.keys.TAB)t.preventDefault(),this.close();else if(t.which!==M.keys.ARROW_DOWN&&t.which!==M.keys.ARROW_UP||!this.isOpen)if(t.which===M.keys.ENTER&&this.isOpen){var n=this.dropdownEl.children[this.focusedIndex],i=e(n).find("a, button").first();i.length?i[0].click():n&&n.click()}else t.which===M.keys.ESC&&this.isOpen&&(t.preventDefault(),this.close());else{t.preventDefault();var r=t.which===M.keys.ARROW_DOWN?1:-1,a=this.focusedIndex,o=!1;do{if(a+=r,this.dropdownEl.children[a]&&-1!==this.dropdownEl.children[a].tabIndex){o=!0;break}}while(a<this.dropdownEl.children.length&&a>=0);o&&(this.focusedIndex=a,this._focusFocusedItem())}var s=String.fromCharCode(t.which).toLowerCase();if(s&&-1===[9,13,27,38,40].indexOf(t.which)){this.filterQuery.push(s);var u=this.filterQuery.join(""),l=e(this.dropdownEl).find("li").filter((function(t){return 0===e(t).text().toLowerCase().indexOf(u)}))[0];l&&(this.focusedIndex=e(l).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,e(this.dropdownEl).children().each((function(e){e.getAttribute("tabindex")||e.setAttribute("tabindex",0)}))}},{key:"_focusFocusedItem",value:function(){this.focusedIndex>=0&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var e=this.el.getBoundingClientRect(),t=this.dropdownEl.getBoundingClientRect(),n=t.height,i=t.width,r=e.left-t.left,a=e.top-t.top,o={left:r,top:a,height:n,width:i},s=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,u=M.checkPossibleAlignments(this.el,s,o,this.options.coverTrigger?0:e.height),l="top",c=this.options.alignment;if(a+=this.options.coverTrigger?0:e.height,this.isScrollable=!1,u.top||(u.bottom?l="bottom":(this.isScrollable=!0,u.spaceOnTop>u.spaceOnBottom?(l="bottom",n+=u.spaceOnTop,a-=u.spaceOnTop):n+=u.spaceOnBottom)),!u[c]){var h="left"===c?"right":"left";u[h]?c=h:u.spaceOnLeft>u.spaceOnRight?(c="right",i+=u.spaceOnLeft,r-=u.spaceOnLeft):(c="left",i+=u.spaceOnRight)}return"bottom"===l&&(a=a-t.height+(this.options.coverTrigger?e.height:0)),"right"===c&&(r=r-t.width+e.width),{x:r,y:a,verticalAlignment:l,horizontalAlignment:c,height:n,width:i}}},{key:"_animateIn",value:function(){var e=this;t.remove(this.dropdownEl),t({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(t){e.options.autoFocus&&e.dropdownEl.focus(),"function"===typeof e.options.onOpenEnd&&e.options.onOpenEnd.call(e,e.el)}})}},{key:"_animateOut",value:function(){var e=this;t.remove(this.dropdownEl),t({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(t){e._resetDropdownStyles(),"function"===typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e,e.el)}})}},{key:"_placeDropdown",value:function(){var e=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=e+"px";var t=this._getDropdownPosition();this.dropdownEl.style.left=t.x+"px",this.dropdownEl.style.top=t.y+"px",this.dropdownEl.style.height=t.height+"px",this.dropdownEl.style.width=t.width+"px",this.dropdownEl.style.transformOrigin=("left"===t.horizontalAlignment?"0":"100%")+" "+("top"===t.verticalAlignment?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,"function"===typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,"function"===typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Dropdown}},{key:"defaults",get:function(){return n}}]),l}(l);i._dropdowns=[],M.Dropdown=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"dropdown","M_Dropdown")}(cash,M.anime),function(e,t){"use strict";var n={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Modal=i,i.options=e.extend({},l.defaults,n),i.isOpen=!1,i.id=i.$el.attr("id"),i._openingTrigger=void 0,i.$overlay=e('<div class="modal-overlay"></div>'),i.el.tabIndex=0,i._nthModalOpened=0,l._count++,i._setupEventHandlers(),i}return s(l,i),a(l,[{key:"destroy",value:function(){l._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),1===l._count&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){0===l._count&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(t){var n=e(t.target).closest(".modal-trigger");if(n.length){var i=M.getIdFromTrigger(n[0]),r=document.getElementById(i).M_Modal;r&&r.open(n),t.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(t){e(t.target).closest(".modal-close").length&&this.close()}},{key:"_handleKeydown",value:function(e){27===e.keyCode&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(e){this.el.contains(e.target)||this._nthModalOpened!==l._modalsOpen||this.el.focus()}},{key:"_animateIn",value:function(){var n=this;e.extend(this.el.style,{display:"block",opacity:0}),e.extend(this.$overlay[0].style,{display:"block",opacity:0}),t({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var i={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){"function"===typeof n.options.onOpenEnd&&n.options.onOpenEnd.call(n,n.el,n._openingTrigger)}};this.el.classList.contains("bottom-sheet")?(e.extend(i,{bottom:0,opacity:1}),t(i)):(e.extend(i,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),t(i))}},{key:"_animateOut",value:function(){var n=this;t({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var i={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){n.el.style.display="none",n.$overlay.remove(),"function"===typeof n.options.onCloseEnd&&n.options.onCloseEnd.call(n,n.el)}};this.el.classList.contains("bottom-sheet")?(e.extend(i,{bottom:"-100%",opacity:0}),t(i)):(e.extend(i,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),t(i))}},{key:"open",value:function(e){if(!this.isOpen)return this.isOpen=!0,l._modalsOpen++,this._nthModalOpened=l._modalsOpen,this.$overlay[0].style.zIndex=1e3+2*l._modalsOpen,this.el.style.zIndex=1e3+2*l._modalsOpen+1,this._openingTrigger=e?e[0]:void 0,"function"===typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),t.remove(this.el),t.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,l._modalsOpen--,this._nthModalOpened=0,"function"===typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),0===l._modalsOpen&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),t.remove(this.el),t.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Modal}},{key:"defaults",get:function(){return n}}]),l}(l);i._modalsOpen=0,i._count=0,M.Modal=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"modal","M_Modal")}(cash,M.anime),function(e,t){"use strict";var n={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Materialbox=i,i.options=e.extend({},l.defaults,n),i.overlayActive=!1,i.doneAnimating=!0,i.placeholder=e("<div></div>").addClass("material-placeholder"),i.originalWidth=0,i.originalHeight=0,i.originInlineStyles=i.$el.attr("style"),i.caption=i.el.getAttribute("data-caption")||"",i.$el.before(i.placeholder),i.placeholder.append(i.$el),i._setupEventHandlers(),i}return s(l,i),a(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,e(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(e){!1===this.doneAnimating||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(e){27===e.keyCode&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=e();for(var t=this.placeholder[0].parentNode;null!==t&&!e(t).is(document);){var n=e(t);"visible"!==n.css("overflow")&&(n.css("overflow","visible"),void 0===this.ancestorsChanged?this.ancestorsChanged=n:this.ancestorsChanged=this.ancestorsChanged.add(n)),t=t.parentNode}}},{key:"_animateImageIn",value:function(){var e=this,n={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){e.doneAnimating=!0,"function"===typeof e.options.onOpenEnd&&e.options.onOpenEnd.call(e,e.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),"none"!==this.maxWidth&&(n.maxWidth=this.newWidth),"none"!==this.maxHeight&&(n.maxHeight=this.newHeight),t(n)}},{key:"_animateImageOut",value:function(){var e=this,n={targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.placeholder.css({height:"",width:"",position:"",top:"",left:""}),e.attrWidth&&e.$el.attr("width",e.attrWidth),e.attrHeight&&e.$el.attr("height",e.attrHeight),e.$el.removeAttr("style"),e.originInlineStyles&&e.$el.attr("style",e.originInlineStyles),e.$el.removeClass("active"),e.doneAnimating=!0,e.ancestorsChanged.length&&e.ancestorsChanged.css("overflow",""),"function"===typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e,e.el)}};t(n)}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var n=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,"function"===typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=e('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",(function(){n.doneAnimating&&n.close()})),this.$el.before(this.$overlay);var i=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*i.left+"px",top:-1*i.top+"px"}),t.remove(this.el),t.remove(this.$overlay[0]),t({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),""!==this.caption&&(this.$photocaption&&t.remove(this.$photoCaption[0]),this.$photoCaption=e('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),e("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),t({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var r=0,a=this.originalWidth/this.windowWidth,o=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,a>o?(r=this.originalHeight/this.originalWidth,this.newWidth=.9*this.windowWidth,this.newHeight=.9*this.windowWidth*r):(r=this.originalWidth/this.originalHeight,this.newWidth=.9*this.windowHeight*r,this.newHeight=.9*this.windowHeight),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var e=this;this._updateVars(),this.doneAnimating=!1,"function"===typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),t.remove(this.el),t.remove(this.$overlay[0]),""!==this.caption&&t.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),t({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.overlayActive=!1,e.$overlay.remove()}}),this._animateImageOut(),""!==this.caption&&t({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.$photoCaption.remove()}})}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Materialbox}},{key:"defaults",get:function(){return n}}]),l}(l);M.Materialbox=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"materialbox","M_Materialbox")}(cash,M.anime),function(e){"use strict";var t={responsiveThreshold:0},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_Parallax=r,r.options=e.extend({},i.defaults,n),r._enabled=window.innerWidth>r.options.responsiveThreshold,r.$img=r.$el.find("img").first(),r.$img.each((function(){this.complete&&e(this).trigger("load")})),r._updateParallax(),r._setupEventHandlers(),r._setupStyles(),i._parallaxes.push(r),r}return s(i,n),a(i,[{key:"destroy",value:function(){i._parallaxes.splice(i._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),0===i._parallaxes.length&&(i._handleScrollThrottled=M.throttle(i._handleScroll,5),window.addEventListener("scroll",i._handleScrollThrottled),i._handleWindowResizeThrottled=M.throttle(i._handleWindowResize,5),window.addEventListener("resize",i._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),0===i._parallaxes.length&&(window.removeEventListener("scroll",i._handleScrollThrottled),window.removeEventListener("resize",i._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var e=this.$el.height()>0?this.el.parentNode.offsetHeight:500,t=this.$img[0].offsetHeight-e,n=this.$el.offset().top+e,i=this.$el.offset().top,r=M.getDocumentScrollTop(),a=window.innerHeight,o=t*((r+a-i)/(e+a));this._enabled?n>r&&i<r+a&&(this.$img[0].style.transform="translate3D(-50%, "+o+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Parallax}},{key:"_handleScroll",value:function(){for(var e=0;e<i._parallaxes.length;e++){var t=i._parallaxes[e];t._updateParallax.call(t)}}},{key:"_handleWindowResize",value:function(){for(var e=0;e<i._parallaxes.length;e++){var t=i._parallaxes[e];t._enabled=window.innerWidth>t.options.responsiveThreshold}}},{key:"defaults",get:function(){return t}}]),i}(l);n._parallaxes=[],M.Parallax=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"parallax","M_Parallax")}(cash),function(e,t){"use strict";var n={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Tabs=i,i.options=e.extend({},l.defaults,n),i.$tabLinks=i.$el.children("li.tab").children("a"),i.index=0,i._setupActiveTabLink(),i.options.swipeable?i._setupSwipeableTabs():i._setupNormalTabs(),i._setTabsAndTabWidth(),i._createIndicator(),i._setupEventHandlers(),i}return s(l,i),a(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),0!==this.tabWidth&&0!==this.tabsWidth&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(t){var n=this,i=e(t.target).closest("li.tab"),r=e(t.target).closest("a");if(r.length&&r.parent().hasClass("tab"))if(i.hasClass("disabled"))t.preventDefault();else if(!r.attr("target")){this.$activeTabLink.removeClass("active");var a=this.$content;this.$activeTabLink=r,this.$content=e(M.escapeHash(r[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var o=this.index;this.index=Math.max(this.$tabLinks.index(r),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,(function(){"function"===typeof n.options.onShow&&n.options.onShow.call(n,n.$content[0])})):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),"function"===typeof this.options.onShow&&this.options.onShow.call(this,this.$content[0]),a.length&&!a.is(this.$content)&&(a[0].style.display="none",a.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(o),t.preventDefault()}}},{key:"_createIndicator",value:function(){var e=this,t=document.createElement("li");t.classList.add("indicator"),this.el.appendChild(t),this._indicator=t,setTimeout((function(){e._indicator.style.left=e._calcLeftPos(e.$activeTabLink)+"px",e._indicator.style.right=e._calcRightPos(e.$activeTabLink)+"px"}),0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=e(this.$tabLinks.filter('[href="'+location.hash+'"]')),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=e(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var t=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var n=e();this.$tabLinks.each((function(t){var i=e(M.escapeHash(t.hash));i.addClass("carousel-item"),n=n.add(i)}));var i=e('<div class="tabs-content carousel carousel-slider"></div>');n.first().before(i),i.append(n),n[0].style.display="";var r=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(i[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(n){var i=t.index;t.index=e(n).index(),t.$activeTabLink.removeClass("active"),t.$activeTabLink=t.$tabLinks.eq(t.index),t.$activeTabLink.addClass("active"),t._animateIndicator(i),"function"===typeof t.options.onShow&&t.options.onShow.call(t,t.$content[0])}}),this._tabsCarousel.set(r)}},{key:"_teardownSwipeableTabs",value:function(){var e=this._tabsCarousel.$el;this._tabsCarousel.destroy(),e.after(e.children()),e.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each((function(t){if(t.hash){var n=e(M.escapeHash(t.hash));n.length&&(n[0].style.display="none")}}))}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each((function(t){if(t.hash){var n=e(M.escapeHash(t.hash));n.length&&(n[0].style.display="")}}))}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(e){return Math.ceil(this.tabsWidth-e.position().left-e[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(e){return Math.floor(e.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(e){var n=0,i=0;this.index-e>=0?n=90:i=90;var r={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:n},right:{value:this._calcRightPos(this.$activeTabLink),delay:i},duration:this.options.duration,easing:"easeOutQuad"};t.remove(this._indicator),t(r)}},{key:"select",value:function(e){var t=this.$tabLinks.filter('[href="#'+e+'"]');t.length&&t.trigger("click")}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Tabs}},{key:"defaults",get:function(){return n}}]),l}(l);M.Tabs=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"tabs","M_Tabs")}(cash,M.anime),function(e,t){"use strict";var n={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Tooltip=i,i.options=e.extend({},l.defaults,n),i.isOpen=!1,i.isHovered=!1,i.isFocused=!1,i._appendTooltipEl(),i._setupEventHandlers(),i}return s(l,i),a(l,[{key:"destroy",value:function(){e(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var e=document.createElement("div");e.classList.add("material-tooltip"),this.tooltipEl=e;var t=document.createElement("div");t.classList.add("tooltip-content"),t.innerHTML=this.options.html,e.appendChild(t),document.body.appendChild(e)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(t){this.isOpen||(t=void 0===t||void 0,this.isOpen=!0,this.options=e.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(t))}},{key:"close",value:function(){this.isOpen&&(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var e=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout((function(){e.isHovered||e.isFocused||e._animateOut()}),this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(e){var t=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout((function(){(t.isHovered||t.isFocused||e)&&t._animateIn()}),this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var t,n=this.el,i=this.tooltipEl,r=n.offsetHeight,a=n.offsetWidth,o=i.offsetHeight,s=i.offsetWidth,u=this.options.margin,l=void 0,c=void 0;this.xMovement=0,this.yMovement=0,l=n.getBoundingClientRect().top+M.getDocumentScrollTop(),c=n.getBoundingClientRect().left+M.getDocumentScrollLeft(),"top"===this.options.position?(l+=-o-u,c+=a/2-s/2,this.yMovement=-this.options.transitionMovement):"right"===this.options.position?(l+=r/2-o/2,c+=a+u,this.xMovement=this.options.transitionMovement):"left"===this.options.position?(l+=r/2-o/2,c+=-s-u,this.xMovement=-this.options.transitionMovement):(l+=r+u,c+=a/2-s/2,this.yMovement=this.options.transitionMovement),t=this._repositionWithinScreen(c,l,s,o),e(i).css({top:t.y+"px",left:t.x+"px"})}},{key:"_repositionWithinScreen",value:function(e,t,n,i){var r=M.getDocumentScrollLeft(),a=M.getDocumentScrollTop(),o=e-r,s=t-a,u={left:o,top:s,width:n,height:i},l=this.options.margin+this.options.transitionMovement,c=M.checkWithinContainer(document.body,u,l);return c.left?o=l:c.right&&(o-=o+n-window.innerWidth),c.top?s=l:c.bottom&&(s-=s+i-window.innerHeight),{x:o+r,y:s+a}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",t.remove(this.tooltipEl),t({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){t.remove(this.tooltipEl),t({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var e={},t=this.el.getAttribute("data-tooltip"),n=this.el.getAttribute("data-position");return t&&(e.html=t),n&&(e.position=n),e}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Tooltip}},{key:"defaults",get:function(){return n}}]),l}(l);M.Tooltip=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"tooltip","M_Tooltip")}(cash,M.anime),function(e){"use strict";var t=t||{},n=document.querySelectorAll.bind(document);function i(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t}var r={duration:750,show:function(e,t){if(2===e.button)return!1;var n=t||this,a=document.createElement("div");a.className="waves-ripple",n.appendChild(a);var o=function(e){var t,n,i={top:0,left:0},r=e&&e.ownerDocument;return t=r.documentElement,"undefined"!==typeof e.getBoundingClientRect&&(i=e.getBoundingClientRect()),n=function(e){return null!==(t=e)&&t===t.window?e:9===e.nodeType&&e.defaultView;var t}(r),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}}(n),s=e.pageY-o.top,u=e.pageX-o.left,l="scale("+n.clientWidth/100*10+")";"touches"in e&&(s=e.touches[0].pageY-o.top,u=e.touches[0].pageX-o.left),a.setAttribute("data-hold",Date.now()),a.setAttribute("data-scale",l),a.setAttribute("data-x",u),a.setAttribute("data-y",s);var c={top:s+"px",left:u+"px"};a.className=a.className+" waves-notransition",a.setAttribute("style",i(c)),a.className=a.className.replace("waves-notransition",""),c["-webkit-transform"]=l,c["-moz-transform"]=l,c["-ms-transform"]=l,c["-o-transform"]=l,c.transform=l,c.opacity="1",c["-webkit-transition-duration"]=r.duration+"ms",c["-moz-transition-duration"]=r.duration+"ms",c["-o-transition-duration"]=r.duration+"ms",c["transition-duration"]=r.duration+"ms",c["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",c["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",c["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",c["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",a.setAttribute("style",i(c))},hide:function(e){a.touchup(e);var t=this,n=(t.clientWidth,null),o=t.getElementsByClassName("waves-ripple");if(!(o.length>0))return!1;var s=(n=o[o.length-1]).getAttribute("data-x"),u=n.getAttribute("data-y"),l=n.getAttribute("data-scale"),c=350-(Date.now()-Number(n.getAttribute("data-hold")));c<0&&(c=0),setTimeout((function(){var a={top:u+"px",left:s+"px",opacity:"0","-webkit-transition-duration":r.duration+"ms","-moz-transition-duration":r.duration+"ms","-o-transition-duration":r.duration+"ms","transition-duration":r.duration+"ms","-webkit-transform":l,"-moz-transform":l,"-ms-transform":l,"-o-transform":l,transform:l};n.setAttribute("style",i(a)),setTimeout((function(){try{t.removeChild(n)}catch(e){return!1}}),r.duration)}),c)},wrapInput:function(e){for(var t=0;t<e.length;t++){var n=e[t];if("input"===n.tagName.toLowerCase()){var i=n.parentNode;if("i"===i.tagName.toLowerCase()&&-1!==i.className.indexOf("waves-effect"))continue;var r=document.createElement("i");r.className=n.className+" waves-input-wrapper";var a=n.getAttribute("style");a||(a=""),r.setAttribute("style",a),n.className="waves-button-input",n.removeAttribute("style"),i.replaceChild(r,n),r.appendChild(n)}}}},a={touches:0,allowEvent:function(e){var t=!0;return"touchstart"===e.type?a.touches+=1:"touchend"===e.type||"touchcancel"===e.type?setTimeout((function(){a.touches>0&&(a.touches-=1)}),500):"mousedown"===e.type&&a.touches>0&&(t=!1),t},touchup:function(e){a.allowEvent(e)}};function o(t){var n=function(e){if(!1===a.allowEvent(e))return null;for(var t=null,n=e.target||e.srcElement;null!==n.parentNode;){if(!(n instanceof SVGElement)&&-1!==n.className.indexOf("waves-effect")){t=n;break}n=n.parentNode}return t}(t);null!==n&&(r.show(t,n),"ontouchstart"in e&&(n.addEventListener("touchend",r.hide,!1),n.addEventListener("touchcancel",r.hide,!1)),n.addEventListener("mouseup",r.hide,!1),n.addEventListener("mouseleave",r.hide,!1),n.addEventListener("dragend",r.hide,!1))}t.displayEffect=function(t){"duration"in(t=t||{})&&(r.duration=t.duration),r.wrapInput(n(".waves-effect")),"ontouchstart"in e&&document.body.addEventListener("touchstart",o,!1),document.body.addEventListener("mousedown",o,!1)},t.attach=function(t){"input"===t.tagName.toLowerCase()&&(r.wrapInput([t]),t=t.parentNode),"ontouchstart"in e&&t.addEventListener("touchstart",o,!1),t.addEventListener("mousedown",o,!1)},e.Waves=t,document.addEventListener("DOMContentLoaded",(function(){t.displayEffect()}),!1)}(window),function(e,t){"use strict";var n={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},i=function(){function i(t){u(this,i),this.options=e.extend({},i.defaults,t),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,0===i._toasts.length&&i._createContainer(),i._toasts.push(this);var n=this._createToast();n.M_Toast=this,this.el=n,this.$el=e(n),this._animateIn(),this._setTimer()}return a(i,[{key:"_createToast",value:function(){var t=document.createElement("div");return t.classList.add("toast"),this.options.classes.length&&e(t).addClass(this.options.classes),("object"===typeof HTMLElement?this.message instanceof HTMLElement:this.message&&"object"===typeof this.message&&null!==this.message&&1===this.message.nodeType&&"string"===typeof this.message.nodeName)?t.appendChild(this.message):this.message.jquery?e(t).append(this.message[0]):t.innerHTML=this.message,i._container.appendChild(t),t}},{key:"_animateIn",value:function(){t({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var e=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval((function(){e.panning||(e.timeRemaining-=20),e.timeRemaining<=0&&e.dismiss()}),20))}},{key:"dismiss",value:function(){var e=this;window.clearInterval(this.counterInterval);var n=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+n+"px)",this.el.style.opacity=0),t({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){"function"===typeof e.options.completeCallback&&e.options.completeCallback(),e.$el.remove(),i._toasts.splice(i._toasts.indexOf(e),1),0===i._toasts.length&&i._removeContainer()}})}}],[{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Toast}},{key:"_createContainer",value:function(){var e=document.createElement("div");e.setAttribute("id","toast-container"),e.addEventListener("touchstart",i._onDragStart),e.addEventListener("touchmove",i._onDragMove),e.addEventListener("touchend",i._onDragEnd),e.addEventListener("mousedown",i._onDragStart),document.addEventListener("mousemove",i._onDragMove),document.addEventListener("mouseup",i._onDragEnd),document.body.appendChild(e),i._container=e}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",i._onDragMove),document.removeEventListener("mouseup",i._onDragEnd),e(i._container).remove(),i._container=null}},{key:"_onDragStart",value:function(t){if(t.target&&e(t.target).closest(".toast").length){var n=e(t.target).closest(".toast")[0].M_Toast;n.panning=!0,i._draggedToast=n,n.el.classList.add("panning"),n.el.style.transition="",n.startingXPos=i._xPos(t),n.time=Date.now(),n.xPos=i._xPos(t)}}},{key:"_onDragMove",value:function(e){if(i._draggedToast){e.preventDefault();var t=i._draggedToast;t.deltaX=Math.abs(t.xPos-i._xPos(e)),t.xPos=i._xPos(e),t.velocityX=t.deltaX/(Date.now()-t.time),t.time=Date.now();var n=t.xPos-t.startingXPos,r=t.el.offsetWidth*t.options.activationPercent;t.el.style.transform="translateX("+n+"px)",t.el.style.opacity=1-Math.abs(n/r)}}},{key:"_onDragEnd",value:function(){if(i._draggedToast){var e=i._draggedToast;e.panning=!1,e.el.classList.remove("panning");var t=e.xPos-e.startingXPos,n=e.el.offsetWidth*e.options.activationPercent;Math.abs(t)>n||e.velocityX>1?(e.wasSwiped=!0,e.dismiss()):(e.el.style.transition="transform .2s, opacity .2s",e.el.style.transform="",e.el.style.opacity=""),i._draggedToast=null}}},{key:"_xPos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}},{key:"dismissAll",value:function(){for(var e in i._toasts)i._toasts[e].dismiss()}},{key:"defaults",get:function(){return n}}]),i}();i._toasts=[],i._container=null,i._draggedToast=null,M.Toast=i,M.toast=function(e){return new i(e)}}(cash,M.anime),function(e,t){"use strict";var n={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Sidenav=i,i.id=i.$el.attr("id"),i.options=e.extend({},l.defaults,n),i.isOpen=!1,i.isFixed=i.el.classList.contains("sidenav-fixed"),i.isDragged=!1,i.lastWindowWidth=window.innerWidth,i.lastWindowHeight=window.innerHeight,i._createOverlay(),i._createDragTarget(),i._setupEventHandlers(),i._setupClasses(),i._setupFixed(),l._sidenavs.push(i),i}return s(l,i),a(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var e=l._sidenavs.indexOf(this);e>=0&&l._sidenavs.splice(e,1)}},{key:"_createOverlay",value:function(){var e=document.createElement("div");this._closeBound=this.close.bind(this),e.classList.add("sidenav-overlay"),e.addEventListener("click",this._closeBound),document.body.appendChild(e),this._overlay=e}},{key:"_setupEventHandlers",value:function(){0===l._sidenavs.length&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){1===l._sidenavs.length&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(t){var n=e(t.target).closest(".sidenav-trigger");if(t.target&&n.length){var i=M.getIdFromTrigger(n[0]),r=document.getElementById(i).M_Sidenav;r&&r.open(n),t.preventDefault()}}},{key:"_startDrag",value:function(e){var n=e.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=n,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,t.remove(this.el),t.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(e){var t=e.targetTouches[0].clientX,n=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-t),this._xPos=t,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==n&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(e){if(this.options.draggable&&!this._isCurrentlyFixed()&&!this._verticallyScrolling){this.isDragged||this._startDrag(e),this._dragMoveUpdate(e);var t=this._xPos-this._startingXpos,n=t>0?"right":"left";t=Math.min(this._width,Math.abs(t)),this.options.edge===n&&(t=0);var i=t,r="translateX(-100%)";"right"===this.options.edge&&(r="translateX(100%)",i=-i),this.percentOpen=Math.min(1,t/this._width),this.el.style.transform=r+" translateX("+i+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(this.percentOpen>.2?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(e){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(e),this._dragMoveUpdate(e);var t=this._xPos-this._startingXpos,n=t>0?"right":"left";t=Math.min(this._width,Math.abs(t)),this.options.edge!==n&&(t=0);var i=-t;"right"===this.options.edge&&(i=-i),this.percentOpen=Math.min(1,1-t/this._width),this.el.style.transform="translateX("+i+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(this.percentOpen>.8?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(t){e(t.target).closest(".sidenav-close").length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(window.innerWidth>992?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){"right"===this.options.edge&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&window.innerWidth>992}},{key:"_createDragTarget",value:function(){var e=document.createElement("div");e.classList.add("drag-target"),document.body.appendChild(e),this.dragTarget=e}},{key:"_preventBodyScrolling",value:function(){document.body.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){document.body.style.overflow=""}},{key:"open",value:function(){!0!==this.isOpen&&(this.isOpen=!0,"function"===typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(t.remove(this.el),t({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),this.isDragged&&1==this.percentOpen||this._animateIn()))}},{key:"close",value:function(){if(!1!==this.isOpen)if(this.isOpen=!1,"function"===typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){var e="left"===this.options.edge?"-105%":"105%";this.el.style.transform="translateX("+e+")"}else this._enableBodyScrolling(),this.isDragged&&0==this.percentOpen?this._overlay.style.display="none":this._animateOut()}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var e=this,n="left"===this.options.edge?-1:1;this.isDragged&&(n="left"===this.options.edge?n+this.percentOpen:n-this.percentOpen),t.remove(this.el),t({targets:this.el,translateX:[100*n+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){"function"===typeof e.options.onOpenEnd&&e.options.onOpenEnd.call(e,e.el)}})}},{key:"_animateOverlayIn",value:function(){var n=0;this.isDragged?n=this.percentOpen:e(this._overlay).css({display:"block"}),t.remove(this._overlay),t({targets:this._overlay,opacity:[n,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var e=this,n="left"===this.options.edge?-1:1,i=0;this.isDragged&&(i="left"===this.options.edge?n+this.percentOpen:n-this.percentOpen),t.remove(this.el),t({targets:this.el,translateX:[100*i+"%",105*n+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){"function"===typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e,e.el)}})}},{key:"_animateOverlayOut",value:function(){var n=this;t.remove(this._overlay),t({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e(n._overlay).css("display","none")}})}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Sidenav}},{key:"defaults",get:function(){return n}}]),l}(l);i._sidenavs=[],M.Sidenav=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"sidenav","M_Sidenav")}(cash,M.anime),function(e,t){"use strict";var n={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(e){return'a[href="#'+e+'"]'}},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_ScrollSpy=i,i.options=e.extend({},l.defaults,n),l._elements.push(i),l._count++,l._increment++,i.tickId=-1,i.id=l._increment,i._setupEventHandlers(),i._handleWindowScroll(),i}return s(l,i),a(l,[{key:"destroy",value:function(){l._elements.splice(l._elements.indexOf(this),1),l._elementsInView.splice(l._elementsInView.indexOf(this),1),l._visibleElements.splice(l._visibleElements.indexOf(this.$el),1),l._count--,this._removeEventHandlers(),e(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var e=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=e.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),1===l._count&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){0===l._count&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(n){for(var i=e(n.target),r=l._elements.length-1;r>=0;r--){var a=l._elements[r];if(i.is('a[href="#'+a.$el.attr("id")+'"]')){n.preventDefault();var o=a.$el.offset().top+1;t({targets:[document.documentElement,document.body],scrollTop:o-a.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){l._ticks++;for(var e=M.getDocumentScrollTop(),t=M.getDocumentScrollLeft(),n=t+window.innerWidth,i=e+window.innerHeight,r=l._findElements(e,n,i,t),a=0;a<r.length;a++){var o=r[a];o.tickId<0&&o._enter(),o.tickId=l._ticks}for(var s=0;s<l._elementsInView.length;s++){var u=l._elementsInView[s],c=u.tickId;c>=0&&c!==l._ticks&&(u._exit(),u.tickId=-1)}l._elementsInView=r}},{key:"_enter",value:function(){l._visibleElements=l._visibleElements.filter((function(e){return 0!=e.height()})),l._visibleElements[0]?(e(this.options.getActiveElement(l._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),l._visibleElements[0][0].M_ScrollSpy&&this.id<l._visibleElements[0][0].M_ScrollSpy.id?l._visibleElements.unshift(this.$el):l._visibleElements.push(this.$el)):l._visibleElements.push(this.$el),e(this.options.getActiveElement(l._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var t=this;l._visibleElements=l._visibleElements.filter((function(e){return 0!=e.height()})),l._visibleElements[0]&&(e(this.options.getActiveElement(l._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),l._visibleElements=l._visibleElements.filter((function(e){return e.attr("id")!=t.$el.attr("id")})),l._visibleElements[0]&&e(this.options.getActiveElement(l._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_ScrollSpy}},{key:"_findElements",value:function(e,t,n,i){for(var r=[],a=0;a<l._elements.length;a++){var o=l._elements[a],s=e+o.options.scrollOffset||200;if(o.$el.height()>0){var u=o.$el.offset().top,c=o.$el.offset().left,h=c+o.$el.width(),d=u+o.$el.height();!(c>t||h<i||u>n||d<s)&&r.push(o)}}return r}},{key:"defaults",get:function(){return n}}]),l}(l);i._elements=[],i._elementsInView=[],i._visibleElements=[],i._count=0,i._increment=0,i._ticks=0,M.ScrollSpy=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(e){"use strict";var t={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(e,t,n){return e.indexOf(n)-t.indexOf(n)}},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_Autocomplete=r,r.options=e.extend({},i.defaults,n),r.isOpen=!1,r.count=0,r.activeIndex=-1,r.oldVal,r.$inputField=r.$el.closest(".input-field"),r.$active=e(),r._mousedown=!1,r._setupDropdown(),r._setupEventHandlers(),r}return s(i,n),a(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),"undefined"!==typeof window.ontouchstart&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),"undefined"!==typeof window.ontouchstart&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var t=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),e(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(n){t.selectOption(e(n))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(e){"keyup"===e.type&&(i._keydown=!1),this.count=0;var t=this.el.value.toLowerCase();13!==e.keyCode&&38!==e.keyCode&&40!==e.keyCode&&(this.oldVal===t||!M.tabPressed&&"focus"===e.type||this.open(),this.oldVal=t)}},{key:"_handleInputKeydown",value:function(t){i._keydown=!0;var n=t.keyCode,r=void 0,a=e(this.container).children("li").length;n===M.keys.ENTER&&this.activeIndex>=0?(r=e(this.container).children("li").eq(this.activeIndex)).length&&(this.selectOption(r),t.preventDefault()):n!==M.keys.ARROW_UP&&n!==M.keys.ARROW_DOWN||(t.preventDefault(),n===M.keys.ARROW_UP&&this.activeIndex>0&&this.activeIndex--,n===M.keys.ARROW_DOWN&&this.activeIndex<a-1&&this.activeIndex++,this.$active.removeClass("active"),this.activeIndex>=0&&(this.$active=e(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(e){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(e){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(e){this._mousedown=!1}},{key:"_highlight",value:function(e,t){var n=t.find("img"),i=t.text().toLowerCase().indexOf(""+e.toLowerCase()),r=i+e.length-1,a=t.text().slice(0,i),o=t.text().slice(i,r+1),s=t.text().slice(r+1);t.html("<span>"+a+"<span class='highlight'>"+o+"</span>"+s+"</span>"),n.length&&t.prepend(n)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){e(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(e){var t=e.text().trim();this.el.value=t,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),"function"===typeof this.options.onAutocomplete&&this.options.onAutocomplete.call(this,t)}},{key:"_renderDropdown",value:function(t,n){var i=this;this._resetAutocomplete();var r=[];for(var a in t)if(t.hasOwnProperty(a)&&-1!==a.toLowerCase().indexOf(n)){if(this.count>=this.options.limit)break;var o={data:t[a],key:a};r.push(o),this.count++}if(this.options.sortFunction){r.sort((function(e,t){return i.options.sortFunction(e.key.toLowerCase(),t.key.toLowerCase(),n.toLowerCase())}))}for(var s=0;s<r.length;s++){var u=r[s],l=e("<li></li>");u.data?l.append('<img src="'+u.data+'" class="right circle"><span>'+u.key+"</span>"):l.append("<span>"+u.key+"</span>"),e(this.container).append(l),this._highlight(n,l)}}},{key:"open",value:function(){var e=this.el.value.toLowerCase();this._resetAutocomplete(),e.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,e)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(e){var t=this.el.value.toLowerCase();this.options.data=e,this.isOpen&&this._renderDropdown(e,t)}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Autocomplete}},{key:"defaults",get:function(){return t}}]),i}(l);n._keydown=!1,M.Autocomplete=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"autocomplete","M_Autocomplete")}(cash),function(e){M.updateTextFields=function(){e("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea").each((function(t,n){var i=e(this);t.value.length>0||e(t).is(":focus")||t.autofocus||null!==i.attr("placeholder")?i.siblings("label").addClass("active"):t.validity?i.siblings("label").toggleClass("active",!0===t.validity.badInput):i.siblings("label").removeClass("active")}))},M.validate_field=function(e){var t=null!==e.attr("data-length"),n=parseInt(e.attr("data-length")),i=e[0].value.length;0!==i||!1!==e[0].validity.badInput||e.is(":required")?e.hasClass("validate")&&(e.is(":valid")&&t&&i<=n||e.is(":valid")&&!t?(e.removeClass("invalid"),e.addClass("valid")):(e.removeClass("valid"),e.addClass("invalid"))):e.hasClass("validate")&&(e.removeClass("valid"),e.removeClass("invalid"))},M.textareaAutoResize=function(t){if(t instanceof Element&&(t=e(t)),t.length){var n=e(".hiddendiv").first();n.length||(n=e('<div class="hiddendiv common"></div>'),e("body").append(n));var i=t.css("font-family"),r=t.css("font-size"),a=t.css("line-height"),o=t.css("padding-top"),s=t.css("padding-right"),u=t.css("padding-bottom"),l=t.css("padding-left");r&&n.css("font-size",r),i&&n.css("font-family",i),a&&n.css("line-height",a),o&&n.css("padding-top",o),s&&n.css("padding-right",s),u&&n.css("padding-bottom",u),l&&n.css("padding-left",l),t.data("original-height")||t.data("original-height",t.height()),"off"===t.attr("wrap")&&n.css("overflow-wrap","normal").css("white-space","pre"),n.text(t[0].value+"\n");var c=n.html().replace(/\n/g,"<br>");n.html(c),t[0].offsetWidth>0&&t[0].offsetHeight>0?n.css("width",t.width()+"px"):n.css("width",window.innerWidth/2+"px"),t.data("original-height")<=n.innerHeight()?t.css("height",n.innerHeight()+"px"):t[0].value.length<t.data("previous-length")&&t.css("height",t.data("original-height")+"px"),t.data("previous-length",t[0].value.length)}else console.error("No textarea element found")},e(document).ready((function(){var t="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";e(document).on("change",t,(function(){0===this.value.length&&null===e(this).attr("placeholder")||e(this).siblings("label").addClass("active"),M.validate_field(e(this))})),e(document).ready((function(){M.updateTextFields()})),e(document).on("reset",(function(n){var i=e(n.target);i.is("form")&&(i.find(t).removeClass("valid").removeClass("invalid"),i.find(t).each((function(t){this.value.length&&e(this).siblings("label").removeClass("active")})),setTimeout((function(){i.find("select").each((function(){this.M_FormSelect&&e(this).trigger("change")}))}),0))})),document.addEventListener("focus",(function(n){e(n.target).is(t)&&e(n.target).siblings("label, .prefix").addClass("active")}),!0),document.addEventListener("blur",(function(n){var i=e(n.target);if(i.is(t)){var r=".prefix";0===i[0].value.length&&!0!==i[0].validity.badInput&&null===i.attr("placeholder")&&(r+=", label"),i.siblings(r).removeClass("active"),M.validate_field(i)}}),!0);e(document).on("keyup","input[type=radio], input[type=checkbox]",(function(t){if(t.which===M.keys.TAB)return e(this).addClass("tabbed"),void e(this).one("blur",(function(t){e(this).removeClass("tabbed")}))}));var n=".materialize-textarea";e(n).each((function(){var t=e(this);t.data("original-height",t.height()),t.data("previous-length",this.value.length),M.textareaAutoResize(t)})),e(document).on("keyup",n,(function(){M.textareaAutoResize(e(this))})),e(document).on("keydown",n,(function(){M.textareaAutoResize(e(this))})),e(document).on("change",'.file-field input[type="file"]',(function(){for(var t=e(this).closest(".file-field").find("input.file-path"),n=e(this)[0].files,i=[],r=0;r<n.length;r++)i.push(n[r].name);t[0].value=i.join(", "),t.trigger("change")}))}))}(cash),function(e,t){"use strict";var n={indicators:!0,height:400,duration:500,interval:6e3},i=function(i){function l(n,i){u(this,l);var r=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,n,i));return r.el.M_Slider=r,r.options=e.extend({},l.defaults,i),r.$slider=r.$el.find(".slides"),r.$slides=r.$slider.children("li"),r.activeIndex=r.$slides.filter((function(t){return e(t).hasClass("active")})).first().index(),-1!=r.activeIndex&&(r.$active=r.$slides.eq(r.activeIndex)),r._setSliderHeight(),r.$slides.find(".caption").each((function(e){r._animateCaptionIn(e,0)})),r.$slides.find("img").each((function(t){var n="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";e(t).attr("src")!==n&&(e(t).css("background-image",'url("'+e(t).attr("src")+'")'),e(t).attr("src",n))})),r._setupIndicators(),r.$active?r.$active.css("display","block"):(r.$slides.first().addClass("active"),t({targets:r.$slides.first()[0],opacity:1,duration:r.options.duration,easing:"easeOutQuad"}),r.activeIndex=0,r.$active=r.$slides.eq(r.activeIndex),r.options.indicators&&r.$indicators.eq(r.activeIndex).addClass("active")),r.$active.find("img").each((function(e){t({targets:r.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:r.options.duration,easing:"easeOutQuad"})})),r._setupEventHandlers(),r.start(),r}return s(l,i),a(l,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each((function(t){t.addEventListener("click",e._handleIndicatorClickBound)}))}},{key:"_removeEventHandlers",value:function(){var e=this;this.options.indicators&&this.$indicators.each((function(t){t.removeEventListener("click",e._handleIndicatorClickBound)}))}},{key:"_handleIndicatorClick",value:function(t){var n=e(t.target).index();this.set(n)}},{key:"_handleInterval",value:function(){var e=this.$slider.find(".active").index();this.$slides.length===e+1?e=0:e+=1,this.set(e)}},{key:"_animateCaptionIn",value:function(n,i){var r={targets:n,opacity:0,duration:i,easing:"easeOutQuad"};e(n).hasClass("center-align")?r.translateY=-100:e(n).hasClass("right-align")?r.translateX=100:e(n).hasClass("left-align")&&(r.translateX=-100),t(r)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var t=this;this.options.indicators&&(this.$indicators=e('<ul class="indicators"></ul>'),this.$slides.each((function(n,i){var r=e('<li class="indicator-item"></li>');t.$indicators.append(r[0])})),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(e){var n=this;if(e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.activeIndex!=e){this.$active=this.$slides.eq(this.activeIndex);var i=this.$active.find(".caption");this.$active.removeClass("active"),t({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){n.$slides.not(".active").each((function(e){t({targets:e,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})}))}}),this._animateCaptionIn(i[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(e).addClass("active")),t({targets:this.$slides.eq(e)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),t({targets:this.$slides.eq(e).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(e).addClass("active"),this.activeIndex=e,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var e=this.activeIndex+1;e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.set(e)}},{key:"prev",value:function(){var e=this.activeIndex-1;e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.set(e)}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Slider}},{key:"defaults",get:function(){return n}}]),l}(l);M.Slider=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"slider","M_Slider")}(cash,M.anime),function(e,t){e(document).on("click",".card",(function(n){if(e(this).children(".card-reveal").length){var i=e(n.target).closest(".card");void 0===i.data("initialOverflow")&&i.data("initialOverflow",void 0===i.css("overflow")?"":i.css("overflow"));var r=e(this).find(".card-reveal");e(n.target).is(e(".card-reveal .card-title"))||e(n.target).is(e(".card-reveal .card-title i"))?t({targets:r[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(t){var n=t.animatables[0].target;e(n).css({display:"none"}),i.css("overflow",i.data("initialOverflow"))}}):(e(n.target).is(e(".card .activator"))||e(n.target).is(e(".card .activator i")))&&(i.css("overflow","hidden"),r.css({display:"block"}),t({targets:r[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}}))}(cash,M.anime),function(e){"use strict";var t={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_Chips=r,r.options=e.extend({},i.defaults,n),r.$el.addClass("chips input-field"),r.chipsData=[],r.$chips=e(),r._setupInput(),r.hasAutocomplete=Object.keys(r.options.autocompleteOptions).length>0,r.$input.attr("id")||r.$input.attr("id",M.guid()),r.options.data.length&&(r.chipsData=r.options.data,r._renderChips(r.chipsData)),r.hasAutocomplete&&r._setupAutocomplete(),r._setPlaceholder(),r._setupLabel(),r._setupEventHandlers(),r}return s(i,n),a(i,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",i._handleChipsKeydown),document.addEventListener("keyup",i._handleChipsKeyup),this.el.addEventListener("blur",i._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",i._handleChipsKeydown),document.removeEventListener("keyup",i._handleChipsKeyup),this.el.removeEventListener("blur",i._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(t){var n=e(t.target).closest(".chip"),i=e(t.target).is(".close");if(n.length){var r=n.index();i?(this.deleteChip(r),this.$input[0].focus()):this.selectChip(r)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(e){if(i._keydown=!0,13===e.keyCode){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;e.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else 8!==e.keyCode&&37!==e.keyCode||""!==this.$input[0].value||!this.chipsData.length||(e.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(t){if(t.tag){var n=document.createElement("div"),i=document.createElement("i");if(n.classList.add("chip"),n.textContent=t.tag,n.setAttribute("tabindex",0),e(i).addClass("material-icons close"),i.textContent="close",t.image){var r=document.createElement("img");r.setAttribute("src",t.image),n.insertBefore(r,n.firstChild)}return n.appendChild(i),n}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var e=0;e<this.chipsData.length;e++){var t=this._renderChip(this.chipsData[e]);this.$el.append(t),this.$chips.add(t)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var e=this;this.options.autocompleteOptions.onAutocomplete=function(t){e.addChip({tag:t}),e.$input[0].value="",e.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=e("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){void 0!==this.chipsData&&!this.chipsData.length&&this.options.placeholder?e(this.$input).prop("placeholder",this.options.placeholder):(void 0===this.chipsData||this.chipsData.length)&&this.options.secondaryPlaceholder&&e(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(e){if(e.hasOwnProperty("tag")&&""!==e.tag){for(var t=!1,n=0;n<this.chipsData.length;n++)if(this.chipsData[n].tag===e.tag){t=!0;break}return!t}return!1}},{key:"addChip",value:function(t){if(this._isValid(t)&&!(this.chipsData.length>=this.options.limit)){var n=this._renderChip(t);this.$chips.add(n),this.chipsData.push(t),e(this.$input).before(n),this._setPlaceholder(),"function"===typeof this.options.onChipAdd&&this.options.onChipAdd.call(this,this.$el,n)}}},{key:"deleteChip",value:function(t){var n=this.$chips.eq(t);this.$chips.eq(t).remove(),this.$chips=this.$chips.filter((function(t){return e(t).index()>=0})),this.chipsData.splice(t,1),this._setPlaceholder(),"function"===typeof this.options.onChipDelete&&this.options.onChipDelete.call(this,this.$el,n[0])}},{key:"selectChip",value:function(e){var t=this.$chips.eq(e);this._selectedChip=t,t[0].focus(),"function"===typeof this.options.onChipSelect&&this.options.onChipSelect.call(this,this.$el,t[0])}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Chips}},{key:"_handleChipsKeydown",value:function(t){i._keydown=!0;var n=e(t.target).closest(".chips"),r=t.target&&n.length;if(!e(t.target).is("input, textarea")&&r){var a=n[0].M_Chips;if(8===t.keyCode||46===t.keyCode){t.preventDefault();var o=a.chipsData.length;if(a._selectedChip){var s=a._selectedChip.index();a.deleteChip(s),a._selectedChip=null,o=Math.max(s-1,0)}a.chipsData.length&&a.selectChip(o)}else if(37===t.keyCode){if(a._selectedChip){var u=a._selectedChip.index()-1;if(u<0)return;a.selectChip(u)}}else if(39===t.keyCode&&a._selectedChip){var l=a._selectedChip.index()+1;l>=a.chipsData.length?a.$input[0].focus():a.selectChip(l)}}}},{key:"_handleChipsKeyup",value:function(e){i._keydown=!1}},{key:"_handleChipsBlur",value:function(t){i._keydown||(e(t.target).closest(".chips")[0].M_Chips._selectedChip=null)}},{key:"defaults",get:function(){return t}}]),i}(l);n._keydown=!1,M.Chips=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"chips","M_Chips"),e(document).ready((function(){e(document.body).on("click",".chip .close",(function(){var t=e(this).closest(".chips");t.length&&t[0].M_Chips||e(this).closest(".chip").remove()}))}))}(cash),function(e){"use strict";var t={top:0,bottom:1/0,offset:0,onPositionChange:null},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_Pushpin=r,r.options=e.extend({},i.defaults,n),r.originalOffset=r.el.offsetTop,i._pushpins.push(r),r._setupEventHandlers(),r._updatePosition(),r}return s(i,n),a(i,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var e=i._pushpins.indexOf(this);i._pushpins.splice(e,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",i._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",i._updateElements)}},{key:"_updatePosition",value:function(){var e=M.getDocumentScrollTop()+this.options.offset;this.options.top<=e&&this.options.bottom>=e&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),"function"===typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pinned")),e<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),"function"===typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-top")),e>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px","function"===typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Pushpin}},{key:"_updateElements",value:function(){for(var e in i._pushpins){i._pushpins[e]._updatePosition()}}},{key:"defaults",get:function(){return t}}]),i}(l);n._pushpins=[],M.Pushpin=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"pushpin","M_Pushpin")}(cash),function(e,t){"use strict";var n={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};e.fn.reverse=[].reverse;var i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_FloatingActionButton=i,i.options=e.extend({},l.defaults,n),i.isOpen=!1,i.$anchor=i.$el.children("a").first(),i.$menu=i.$el.children("ul").first(),i.$floatingBtns=i.$el.find("ul .btn-floating"),i.$floatingBtnsReverse=i.$el.find("ul .btn-floating").reverse(),i.offsetY=0,i.offsetX=0,i.$el.addClass("direction-"+i.options.direction),"top"===i.options.direction?i.offsetY=40:"right"===i.options.direction?i.offsetX=-40:"bottom"===i.options.direction?i.offsetY=-40:i.offsetX=40,i._setupEventHandlers(),i}return s(l,i),a(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(t){e(t.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){this.isOpen&&(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var e=this;this.$el.addClass("active");var n=0;this.$floatingBtnsReverse.each((function(i){t({targets:i,opacity:1,scale:[.4,1],translateY:[e.offsetY,0],translateX:[e.offsetX,0],duration:275,delay:n,easing:"easeInOutQuad"}),n+=40}))}},{key:"_animateOutFAB",value:function(){var e=this;this.$floatingBtnsReverse.each((function(n){t.remove(n),t({targets:n,opacity:0,scale:.4,translateY:e.offsetY,translateX:e.offsetX,duration:175,easing:"easeOutQuad",complete:function(){e.$el.removeClass("active")}})}))}},{key:"_animateInToolbar",value:function(){var t,n=this,i=window.innerWidth,r=window.innerHeight,a=this.el.getBoundingClientRect(),o=e('<div class="fab-backdrop"></div>'),s=this.$anchor.css("background-color");this.$anchor.append(o),this.offsetX=a.left-i/2+a.width/2,this.offsetY=r-a.bottom,t=i/o[0].clientWidth,this.btnBottom=a.bottom,this.btnLeft=a.left,this.btnWidth=a.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),o.css({"background-color":s}),setTimeout((function(){n.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),n.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout((function(){n.$el.css({overflow:"hidden","background-color":s}),o.css({transform:"scale("+t+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),n.$menu.children("li").children("a").css({opacity:1}),n._handleDocumentClickBound=n._handleDocumentClick.bind(n),window.addEventListener("scroll",n._handleCloseBound,!0),document.body.addEventListener("click",n._handleDocumentClickBound,!0)}),100)}),0)}},{key:"_animateOutToolbar",value:function(){var e=this,t=window.innerWidth,n=window.innerHeight,i=this.$el.find(".fab-backdrop"),r=this.$anchor.css("background-color");this.offsetX=this.btnLeft-t/2+this.btnWidth/2,this.offsetY=n-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),i.css({transform:"scale(0)","background-color":r}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout((function(){i.remove(),e.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-e.offsetX+"px,0,0)"}),e.$anchor.css({overflow:"",transform:"translate3d(0,"+e.offsetY+"px,0)"}),setTimeout((function(){e.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),e.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})}),20)}),200)}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_FloatingActionButton}},{key:"defaults",get:function(){return n}}]),l}(l);M.FloatingActionButton=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(e){"use strict";var t={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"\u2039",nextMonth:"\u203a",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));r.el.M_Datepicker=r,r.options=e.extend({},i.defaults,n),n&&n.hasOwnProperty("i18n")&&"object"===typeof n.i18n&&(r.options.i18n=e.extend({},i.defaults.i18n,n.i18n)),r.options.minDate&&r.options.minDate.setHours(0,0,0,0),r.options.maxDate&&r.options.maxDate.setHours(0,0,0,0),r.id=M.guid(),r._setupVariables(),r._insertHTMLIntoDOM(),r._setupModal(),r._setupEventHandlers(),r.options.defaultDate||(r.options.defaultDate=new Date(Date.parse(r.el.value)));var a=r.options.defaultDate;return i._isDate(a)?r.options.setDefaultDate?(r.setDate(a,!0),r.setInputValue()):r.gotoDate(a):r.gotoDate(new Date),r.isOpen=!1,r}return s(i,n),a(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),e(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var e=this.calendarEl.querySelector(".orig-select-year");e&&M.FormSelect.getInstance(e).destroy();var t=this.calendarEl.querySelector(".orig-select-month");t&&M.FormSelect.getInstance(t).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(e(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var e=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){e.isOpen=!1}})}},{key:"toString",value:function(e){var t=this;return e=e||this.options.format,i._isDate(this.date)?e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g).map((function(e){return t.formats[e]?t.formats[e]():e})).join(""):""}},{key:"setDate",value:function(e,t){if(!e)return this.date=null,this._renderDateDisplay(),this.draw();if("string"===typeof e&&(e=new Date(Date.parse(e))),i._isDate(e)){var n=this.options.minDate,r=this.options.maxDate;i._isDate(n)&&e<n?e=n:i._isDate(r)&&e>r&&(e=r),this.date=new Date(e.getTime()),this._renderDateDisplay(),i._setToStartOfDay(this.date),this.gotoDate(this.date),t||"function"!==typeof this.options.onSelect||this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var e=i._isDate(this.date)?this.date:new Date,t=this.options.i18n,n=t.weekdaysShort[e.getDay()],r=t.monthsShort[e.getMonth()],a=e.getDate();this.yearTextEl.innerHTML=e.getFullYear(),this.dateTextEl.innerHTML=n+", "+r+" "+a}},{key:"gotoDate",value:function(e){var t=!0;if(i._isDate(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),r=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),a=e.getTime();r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),t=a<n.getTime()||r.getTime()<a}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(e,t,n){var r=this.options,a=new Date,o=i._getDaysInMonth(e,t),s=new Date(e,t,1).getDay(),u=[],l=[];i._setToStartOfDay(a),r.firstDay>0&&(s-=r.firstDay)<0&&(s+=7);for(var c=0===t?11:t-1,h=11===t?0:t+1,d=0===t?e-1:e,f=11===t?e+1:e,p=i._getDaysInMonth(d,c),v=o+s,m=v;m>7;)m-=7;v+=7-m;for(var y=!1,g=0,_=0;g<v;g++){var k=new Date(e,t,g-s+1),w=!!i._isDate(this.date)&&i._compareDates(k,this.date),b=i._compareDates(k,a),x=-1!==r.events.indexOf(k.toDateString()),E=g<s||g>=o+s,C=g-s+1,T=t,I=e,S=r.startRange&&i._compareDates(r.startRange,k),O=r.endRange&&i._compareDates(r.endRange,k),A=r.startRange&&r.endRange&&r.startRange<k&&k<r.endRange;E&&(g<s?(C=p+C,T=c,I=d):(C-=o,T=h,I=f));var D={day:C,month:T,year:I,hasEvent:x,isSelected:w,isToday:b,isDisabled:r.minDate&&k<r.minDate||r.maxDate&&k>r.maxDate||r.disableWeekends&&i._isWeekend(k)||r.disableDayFn&&r.disableDayFn(k),isEmpty:E,isStartRange:S,isEndRange:O,isInRange:A,showDaysInNextAndPreviousMonths:r.showDaysInNextAndPreviousMonths};l.push(this.renderDay(D)),7===++_&&(u.push(this.renderRow(l,r.isRTL,y)),l=[],_=0,y=!1)}return this.renderTable(r,u,n)}},{key:"renderDay",value:function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month"),t.push("is-selection-disabled")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),n="true"),e.hasEvent&&t.push("has-event"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"><button class="datepicker-day-button" type="button" data-year="'+e.year+'" data-month="'+e.month+'" data-day="'+e.day+'">'+e.day+"</button></td>"}},{key:"renderRow",value:function(e,t,n){return'<tr class="datepicker-row'+(n?" is-selected":"")+'">'+(t?e.reverse():e).join("")+"</tr>"}},{key:"renderTable",value:function(e,t,n){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+n+'">'+this.renderHead(e)+this.renderBody(t)+"</table></div>"}},{key:"renderHead",value:function(e){var t=void 0,n=[];for(t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+this.renderDayName(e,t)+'">'+this.renderDayName(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?n.reverse():n).join("")+"</tr></thead>"}},{key:"renderBody",value:function(e){return"<tbody>"+e.join("")+"</tbody>"}},{key:"renderTitle",value:function(t,n,i,r,a,o){var s,u,l=void 0,c=void 0,h=void 0,d=this.options,f=i===d.minYear,p=i===d.maxYear,v='<div id="'+o+'" class="datepicker-controls" role="heading" aria-live="assertive">',m=!0,y=!0;for(h=[],l=0;l<12;l++)h.push('<option value="'+(i===a?l-n:12+l-n)+'"'+(l===r?' selected="selected"':"")+(f&&l<d.minMonth||p&&l>d.maxMonth?'disabled="disabled"':"")+">"+d.i18n.months[l]+"</option>");for(s='<select class="datepicker-select orig-select-month" tabindex="-1">'+h.join("")+"</select>",e.isArray(d.yearRange)?(l=d.yearRange[0],c=d.yearRange[1]+1):(l=i-d.yearRange,c=1+i+d.yearRange),h=[];l<c&&l<=d.maxYear;l++)l>=d.minYear&&h.push('<option value="'+l+'" '+(l===i?'selected="selected"':"")+">"+l+"</option>");u='<select class="datepicker-select orig-select-year" tabindex="-1">'+h.join("")+"</select>";v+='<button class="month-prev'+(m?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></button>',v+='<div class="selects-container">',d.showMonthAfterYear?v+=u+s:v+=s+u,v+="</div>",f&&(0===r||d.minMonth>=r)&&(m=!1),p&&(11===r||d.maxMonth<=r)&&(y=!1);return(v+='<button class="month-next'+(y?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></button>')+"</div>"}},{key:"draw",value:function(e){if(this.isOpen||e){var t,n=this.options,i=n.minYear,r=n.maxYear,a=n.minMonth,o=n.maxMonth,s="";this._y<=i&&(this._y=i,!isNaN(a)&&this._m<a&&(this._m=a)),this._y>=r&&(this._y=r,!isNaN(o)&&this._m>o&&(this._m=o)),t="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var u=0;u<1;u++)this._renderDateDisplay(),s+=this.renderTitle(this,u,this.calendars[u].year,this.calendars[u].month,this.calendars[0].year,t)+this.render(this.calendars[u].year,this.calendars[u].month,t);this.destroySelects(),this.calendarEl.innerHTML=s;var l=this.calendarEl.querySelector(".orig-select-year"),c=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(l,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(c,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),l.addEventListener("change",this._handleYearChange.bind(this)),c.addEventListener("change",this._handleMonthChange.bind(this)),"function"===typeof this.options.onDraw&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var t=this;this.$modalEl=e(i._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return t.date.getDate()},dd:function(){var e=t.date.getDate();return(e<10?"0":"")+e},ddd:function(){return t.options.i18n.weekdaysShort[t.date.getDay()]},dddd:function(){return t.options.i18n.weekdays[t.date.getDay()]},m:function(){return t.date.getMonth()+1},mm:function(){var e=t.date.getMonth()+1;return(e<10?"0":"")+e},mmm:function(){return t.options.i18n.monthsShort[t.date.getMonth()]},mmmm:function(){return t.options.i18n.months[t.date.getMonth()]},yy:function(){return(""+t.date.getFullYear()).slice(2)},yyyy:function(){return t.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(e){e.which===M.keys.ENTER&&(e.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(t){if(this.isOpen){var n=e(t.target);n.hasClass("is-disabled")||(!n.hasClass("datepicker-day-button")||n.hasClass("is-empty")||n.parent().hasClass("is-disabled")?n.closest(".month-prev").length?this.prevMonth():n.closest(".month-next").length&&this.nextMonth():(this.setDate(new Date(t.target.getAttribute("data-year"),t.target.getAttribute("data-month"),t.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()))}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(e){this.gotoMonth(e.target.value)}},{key:"_handleYearChange",value:function(e){this.gotoYear(e.target.value)}},{key:"gotoMonth",value:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())}},{key:"gotoYear",value:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(e){var t=void 0;e.firedBy!==this&&(t=this.options.parse?this.options.parse(this.el.value,this.options.format):new Date(Date.parse(this.el.value)),i._isDate(t)&&this.setDate(t))}},{key:"renderDayName",value:function(e,t,n){for(t+=e.firstDay;t>=7;)t-=7;return n?e.i18n.weekdaysAbbrev[t]:e.i18n.weekdays[t]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,"function"===typeof this.options.onOpen&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,"function"===typeof this.options.onClose&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"_isDate",value:function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())}},{key:"_isWeekend",value:function(e){var t=e.getDay();return 0===t||6===t}},{key:"_setToStartOfDay",value:function(e){i._isDate(e)&&e.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(e,t){return[31,i._isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}},{key:"_isLeapYear",value:function(e){return e%4===0&&e%100!==0||e%400===0}},{key:"_compareDates",value:function(e,t){return e.getTime()===t.getTime()}},{key:"_setToStartOfDay",value:function(e){i._isDate(e)&&e.setHours(0,0,0,0)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Datepicker}},{key:"defaults",get:function(){return t}}]),i}(l);n._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"datepicker","M_Datepicker")}(cash),function(e){"use strict";var t={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_Timepicker=r,r.options=e.extend({},i.defaults,n),r.id=M.guid(),r._insertHTMLIntoDOM(),r._setupModal(),r._setupVariables(),r._setupEventHandlers(),r._clockSetup(),r._pickerSetup(),r}return s(i,n),a(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),e(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),e(this.spanHours).on("click",this.showView.bind(this,"hours")),e(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(e){e.which===M.keys.ENTER&&(e.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(e){e.preventDefault();var t=this.plate.getBoundingClientRect(),n=t.left,r=t.top;this.x0=n+this.options.dialRadius,this.y0=r+this.options.dialRadius,this.moved=!1;var a=i._Pos(e);this.dx=a.x-this.x0,this.dy=a.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(e){e.preventDefault();var t=i._Pos(e),n=t.x-this.x0,r=t.y-this.y0;this.moved=!0,this.setHand(n,r,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(t){var n=this;t.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var r=i._Pos(t),a=r.x-this.x0,o=r.y-this.y0;this.moved&&a===this.dx&&o===this.dy&&this.setHand(a,o),"hours"===this.currentView?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(e(this.minutesView).addClass("timepicker-dial-out"),setTimeout((function(){n.done()}),this.options.duration/2)),"function"===typeof this.options.onSelect&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=e(i._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var t=document.querySelector(this.options.container);this.options.container&&t?this.$modalEl.appendTo(t):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var e=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){"function"===typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e),e.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var t=e('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&t.css({visibility:""});var n=e('<div class="confirmation-btns"></div>');e('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(n).on("click",this.close.bind(this)),e('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(n).on("click",this.done.bind(this)),n.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=e('<div class="am-btn">AM</div>'),this.$pmBtn=e('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var e=this.options.dialRadius,t=this.options.tickRadius,n=2*e,r=i._createSVGEl("svg");r.setAttribute("class","timepicker-svg"),r.setAttribute("width",n),r.setAttribute("height",n);var a=i._createSVGEl("g");a.setAttribute("transform","translate("+e+","+e+")");var o=i._createSVGEl("circle");o.setAttribute("class","timepicker-canvas-bearing"),o.setAttribute("cx",0),o.setAttribute("cy",0),o.setAttribute("r",4);var s=i._createSVGEl("line");s.setAttribute("x1",0),s.setAttribute("y1",0);var u=i._createSVGEl("circle");u.setAttribute("class","timepicker-canvas-bg"),u.setAttribute("r",t),a.appendChild(s),a.appendChild(u),a.appendChild(o),r.appendChild(a),this._canvas.appendChild(r),this.hand=s,this.bg=u,this.bearing=o,this.g=a}},{key:"_buildHoursView",value:function(){var t=e('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var n=1;n<13;n+=1){var i=t.clone(),r=n/6*Math.PI,a=this.options.outerRadius;i.css({left:this.options.dialRadius+Math.sin(r)*a-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(r)*a-this.options.tickRadius+"px"}),i.html(0===n?"00":n),this.hoursView.appendChild(i[0])}else for(var o=0;o<24;o+=1){var s=t.clone(),u=o/6*Math.PI,l=o>0&&o<13?this.options.innerRadius:this.options.outerRadius;s.css({left:this.options.dialRadius+Math.sin(u)*l-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(u)*l-this.options.tickRadius+"px"}),s.html(0===o?"00":o),this.hoursView.appendChild(s[0])}}},{key:"_buildMinutesView",value:function(){for(var t=e('<div class="timepicker-tick"></div>'),n=0;n<60;n+=5){var r=t.clone(),a=n/30*Math.PI;r.css({left:this.options.dialRadius+Math.sin(a)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(a)*this.options.outerRadius-this.options.tickRadius+"px"}),r.html(i._addLeadingZero(n)),this.minutesView.appendChild(r[0])}}},{key:"_handleAmPmClick",value:function(t){var n=e(t.target);this.amOrPm=n.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary","AM"===this.amOrPm),this.$pmBtn.toggleClass("text-primary","PM"===this.amOrPm))}},{key:"_updateTimeFromInput",value:function(){var e=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&"undefined"!==typeof e[1]&&(e[1].toUpperCase().indexOf("AM")>0?this.amOrPm="AM":this.amOrPm="PM",e[1]=e[1].replace("AM","").replace("PM","")),"now"===e[0]){var t=new Date(+new Date+this.options.fromNow);e=[t.getHours(),t.getMinutes()],this.options.twelveHour&&(this.amOrPm=e[0]>=12&&e[0]<24?"PM":"AM")}this.hours=+e[0]||0,this.minutes=+e[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=i._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(t,n){"minutes"===t&&e(this.hoursView).css("visibility");var i="hours"===t,r=i?this.hoursView:this.minutesView,a=i?this.minutesView:this.hoursView;this.currentView=t,e(this.spanHours).toggleClass("text-primary",i),e(this.spanMinutes).toggleClass("text-primary",!i),a.classList.add("timepicker-dial-out"),e(r).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(n),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout((function(){e(a).css("visibility","hidden")}),this.options.duration)}},{key:"resetClock",value:function(t){var n=this.currentView,i=this[n],r="hours"===n,a=i*(Math.PI/(r?6:30)),o=r&&i>0&&i<13?this.options.innerRadius:this.options.outerRadius,s=Math.sin(a)*o,u=-Math.cos(a)*o,l=this;t?(e(this.canvas).addClass("timepicker-canvas-out"),setTimeout((function(){e(l.canvas).removeClass("timepicker-canvas-out"),l.setHand(s,u)}),t)):this.setHand(s,u)}},{key:"setHand",value:function(e,t,n){var r=this,a=Math.atan2(e,-t),o="hours"===this.currentView,s=Math.PI/(o||n?6:30),u=Math.sqrt(e*e+t*t),l=o&&u<(this.options.outerRadius+this.options.innerRadius)/2,c=l?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(c=this.options.outerRadius),a<0&&(a=2*Math.PI+a);var h=Math.round(a/s);a=h*s,this.options.twelveHour?o?0===h&&(h=12):(n&&(h*=5),60===h&&(h=0)):o?(12===h&&(h=0),h=l?0===h?12:h:0===h?0:h+12):(n&&(h*=5),60===h&&(h=0)),this[this.currentView]!==h&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout((function(){r.vibrateTimer=null}),100))),this[this.currentView]=h,o?this.spanHours.innerHTML=h:this.spanMinutes.innerHTML=i._addLeadingZero(h);var d=Math.sin(a)*(c-this.options.tickRadius),f=-Math.cos(a)*(c-this.options.tickRadius),p=Math.sin(a)*c,v=-Math.cos(a)*c;this.hand.setAttribute("x2",d),this.hand.setAttribute("y2",f),this.bg.setAttribute("cx",p),this.bg.setAttribute("cy",v)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(e,t){var n=this.el.value,r=t?"":i._addLeadingZero(this.hours)+":"+i._addLeadingZero(this.minutes);this.time=r,!t&&this.options.twelveHour&&(r=r+" "+this.amOrPm),this.el.value=r,r!==n&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"_addLeadingZero",value:function(e){return(e<10?"0":"")+e}},{key:"_createSVGEl",value:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}},{key:"_Pos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?{x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY}:{x:e.clientX,y:e.clientY}}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Timepicker}},{key:"defaults",get:function(){return t}}]),i}(l);n._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"timepicker","M_Timepicker")}(cash),function(e){"use strict";var t={},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_CharacterCounter=r,r.options=e.extend({},i.defaults,n),r.isInvalid=!1,r.isValidLength=!1,r._setupCounter(),r._setupEventHandlers(),r}return s(i,n),a(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),e(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){e(this.counterEl).remove()}},{key:"updateCounter",value:function(){var t=+this.$el.attr("data-length"),n=this.el.value.length;this.isValidLength=n<=t;var i=n;t&&(i+="/"+t,this._validateInput()),e(this.counterEl).html(i)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):this.isValidLength||this.isInvalid||(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_CharacterCounter}},{key:"defaults",get:function(){return t}}]),i}(l);M.CharacterCounter=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"characterCounter","M_CharacterCounter")}(cash),function(e){"use strict";var t={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_Carousel=r,r.options=e.extend({},i.defaults,n),r.hasMultipleSlides=r.$el.find(".carousel-item").length>1,r.showIndicators=r.options.indicators&&r.hasMultipleSlides,r.noWrap=r.options.noWrap||!r.hasMultipleSlides,r.pressed=!1,r.dragged=!1,r.offset=r.target=0,r.images=[],r.itemWidth=r.$el.find(".carousel-item").first().innerWidth(),r.itemHeight=r.$el.find(".carousel-item").first().innerHeight(),r.dim=2*r.itemWidth+r.options.padding||1,r._autoScrollBound=r._autoScroll.bind(r),r._trackBound=r._track.bind(r),r.options.fullWidth&&(r.options.dist=0,r._setCarouselHeight(),r.showIndicators&&r.$el.find(".carousel-fixed-item").addClass("with-indicators")),r.$indicators=e('<ul class="indicators"></ul>'),r.$el.find(".carousel-item").each((function(t,n){if(r.images.push(t),r.showIndicators){var i=e('<li class="indicator-item"></li>');0===n&&i[0].classList.add("active"),r.$indicators.append(i)}})),r.showIndicators&&r.$el.append(r.$indicators),r.count=r.images.length,r.options.numVisible=Math.min(r.count,r.options.numVisible),r.xform="transform",["webkit","Moz","O","ms"].every((function(e){var t=e+"Transform";return"undefined"===typeof document.body.style[t]||(r.xform=t,!1)})),r._setupEventHandlers(),r._scroll(r.offset),r}return s(i,n),a(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),"undefined"!==typeof window.ontouchstart&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each((function(t,n){t.addEventListener("click",e._handleIndicatorClickBound)})));var t=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=t.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var e=this;"undefined"!==typeof window.ontouchstart&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each((function(t,n){t.removeEventListener("click",e._handleIndicatorClickBound)})),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(t){"mousedown"===t.type&&e(t.target).is("img")&&t.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(t),this.referenceY=this._ypos(t),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(e){var t=void 0,n=void 0,i=void 0;if(this.pressed)if(t=this._xpos(e),n=this._ypos(e),i=this.reference-t,Math.abs(this.referenceY-n)<30&&!this.verticalDragged)(i>2||i<-2)&&(this.dragged=!0,this.reference=t,this._scroll(this.offset+i));else{if(this.dragged)return e.preventDefault(),e.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return e.preventDefault(),e.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(e){if(this.pressed)return this.pressed=!1,clearInterval(this.ticker),this.target=this.offset,(this.velocity>10||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(t){if(this.dragged)return t.preventDefault(),t.stopPropagation(),!1;if(!this.options.fullWidth){var n=e(t.target).closest(".carousel-item").index();0!==this._wrap(this.center)-n&&(t.preventDefault(),t.stopPropagation()),this._cycleTo(n)}}},{key:"_handleIndicatorClick",value:function(t){t.stopPropagation();var n=e(t.target).closest(".indicator-item");n.length&&this._cycleTo(n.index())}},{key:"_handleResize",value:function(e){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=2*this.itemWidth+this.options.padding,this.offset=2*this.center*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(e){var t=this,n=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),i=n.find("img").first();if(i.length)if(i[0].complete){var r=i.height();if(r>0)this.$el.css("height",r+"px");else{var a=i[0].naturalWidth,o=i[0].naturalHeight,s=this.$el.width()/a*o;this.$el.css("height",s+"px")}}else i.one("load",(function(e,n){t.$el.css("height",e.offsetHeight+"px")}));else if(!e){var u=n.height();this.$el.css("height",u+"px")}}},{key:"_xpos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}},{key:"_ypos",value:function(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}},{key:"_wrap",value:function(e){return e>=this.count?e%this.count:e<0?this._wrap(this.count+e%this.count):e}},{key:"_track",value:function(){var e,t,n,i;t=(e=Date.now())-this.timestamp,this.timestamp=e,n=this.offset-this.frame,this.frame=this.offset,i=1e3*n/(1+t),this.velocity=.8*i+.2*this.velocity}},{key:"_autoScroll",value:function(){var e=void 0,t=void 0;this.amplitude&&(e=Date.now()-this.timestamp,(t=this.amplitude*Math.exp(-e/this.options.duration))>2||t<-2?(this._scroll(this.target-t),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(t){var n=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),null!=this.scrollingTimeout&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout((function(){n.$el.removeClass("scrolling")}),this.options.duration);var i,r,a,o,s=void 0,u=void 0,l=void 0,c=void 0,h=void 0,d=void 0,f=this.center,p=1/this.options.numVisible;if(this.offset="number"===typeof t?t:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),o=-(a=(r=this.offset-this.center*this.dim)<0?1:-1)*r*2/this.dim,i=this.count>>1,this.options.fullWidth?(l="translateX(0)",d=1):(l="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",l+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",d=1-p*o),this.showIndicators){var v=this.center%this.count,m=this.$indicators.find(".indicator-item.active");m.index()!==v&&(m.removeClass("active"),this.$indicators.find(".indicator-item").eq(v)[0].classList.add("active"))}if(!this.noWrap||this.center>=0&&this.center<this.count){u=this.images[this._wrap(this.center)],e(u).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),u.classList.add("active"));var y=l+" translateX("+-r/2+"px) translateX("+a*this.options.shift*o*s+"px) translateZ("+this.options.dist*o+"px)";this._updateItemStyle(u,d,0,y)}for(s=1;s<=i;++s){if(this.options.fullWidth?(c=this.options.dist,h=s===i&&r<0?1-o:1):(c=this.options.dist*(2*s+o*a),h=1-p*(2*s+o*a)),!this.noWrap||this.center+s<this.count){u=this.images[this._wrap(this.center+s)];var g=l+" translateX("+(this.options.shift+(this.dim*s-r)/2)+"px) translateZ("+c+"px)";this._updateItemStyle(u,h,-s,g)}if(this.options.fullWidth?(c=this.options.dist,h=s===i&&r>0?1-o:1):(c=this.options.dist*(2*s-o*a),h=1-p*(2*s-o*a)),!this.noWrap||this.center-s>=0){u=this.images[this._wrap(this.center-s)];var _=l+" translateX("+(-this.options.shift+(-this.dim*s-r)/2)+"px) translateZ("+c+"px)";this._updateItemStyle(u,h,-s,_)}}if(!this.noWrap||this.center>=0&&this.center<this.count){u=this.images[this._wrap(this.center)];var k=l+" translateX("+-r/2+"px) translateX("+a*this.options.shift*o+"px) translateZ("+this.options.dist*o+"px)";this._updateItemStyle(u,d,0,k)}var w=this.$el.find(".carousel-item").eq(this._wrap(this.center));f!==this.center&&"function"===typeof this.options.onCycleTo&&this.options.onCycleTo.call(this,w[0],this.dragged),"function"===typeof this.oneTimeCallback&&(this.oneTimeCallback.call(this,w[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(e,t,n,i){e.style[this.xform]=i,e.style.zIndex=n,e.style.opacity=t,e.style.visibility="visible"}},{key:"_cycleTo",value:function(e,t){var n=this.center%this.count-e;this.noWrap||(n<0?Math.abs(n+this.count)<Math.abs(n)&&(n+=this.count):n>0&&Math.abs(n-this.count)<n&&(n-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),n<0?this.target+=this.dim*Math.abs(n):n>0&&(this.target-=this.dim*n),"function"===typeof t&&(this.oneTimeCallback=t),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(e){(void 0===e||isNaN(e))&&(e=1);var t=this.center+e;if(t>=this.count||t<0){if(this.noWrap)return;t=this._wrap(t)}this._cycleTo(t)}},{key:"prev",value:function(e){(void 0===e||isNaN(e))&&(e=1);var t=this.center-e;if(t>=this.count||t<0){if(this.noWrap)return;t=this._wrap(t)}this._cycleTo(t)}},{key:"set",value:function(e,t){if((void 0===e||isNaN(e))&&(e=0),e>this.count||e<0){if(this.noWrap)return;e=this._wrap(e)}this._cycleTo(e,t)}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Carousel}},{key:"defaults",get:function(){return t}}]),i}(l);M.Carousel=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"carousel","M_Carousel")}(cash),function(e){"use strict";var t={onOpen:void 0,onClose:void 0},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.el.M_TapTarget=r,r.options=e.extend({},i.defaults,n),r.isOpen=!1,r.$origin=e("#"+r.$el.attr("data-target")),r._setup(),r._calculatePositioning(),r._setupEventHandlers(),r}return s(i,n),a(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var e=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=e.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(e){this.open()}},{key:"_handleOriginClick",value:function(e){this.close()}},{key:"_handleResize",value:function(e){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(t){e(t.target).closest(".tap-target-wrapper").length||(this.close(),t.preventDefault(),t.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=e(this.wrapper).find(".tap-target-wave")[0],this.originEl=e(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],e(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(e(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var t="fixed"===this.$origin.css("position");if(!t)for(var n=this.$origin.parents(),i=0;i<n.length&&!(t="fixed"==e(n[i]).css("position"));i++);var r=this.$origin.outerWidth(),a=this.$origin.outerHeight(),o=t?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,s=t?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,u=window.innerWidth,l=window.innerHeight,c=u/2,h=l/2,d=s<=c,f=s>c,p=o<=h,v=o>h,m=s>=.25*u&&s<=.75*u,y=this.$el.outerWidth(),g=this.$el.outerHeight(),_=o+a/2-g/2,k=s+r/2-y/2,w=t?"fixed":"absolute",b=m?y:y/2+r,x=g/2,E=p?g/2:0,C=d&&!m?y/2-r:0,T=r,I=v?"bottom":"top",S=2*r,O=S,A=g/2-O/2,D=y/2-S/2,R={};R.top=p?_+"px":"",R.right=f?u-k-y+"px":"",R.bottom=v?l-_-g+"px":"",R.left=d?k+"px":"",R.position=w,e(this.wrapper).css(R),e(this.contentEl).css({width:b+"px",height:x+"px",top:E+"px",right:"0px",bottom:"0px",left:C+"px",padding:T+"px",verticalAlign:I}),e(this.waveEl).css({top:A+"px",left:D+"px",width:S+"px",height:O+"px"})}},{key:"open",value:function(){this.isOpen||("function"===typeof this.options.onOpen&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){this.isOpen&&("function"===typeof this.options.onClose&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_TapTarget}},{key:"defaults",get:function(){return t}}]),i}(l);M.TapTarget=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"tapTarget","M_TapTarget")}(cash),function(e){"use strict";var t={classes:"",dropdownOptions:{}},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.$el.hasClass("browser-default")?o(r):(r.el.M_FormSelect=r,r.options=e.extend({},i.defaults,n),r.isMultiple=r.$el.prop("multiple"),r.el.tabIndex=-1,r._keysSelected={},r._valueDict={},r._setupDropdown(),r._setupEventHandlers(),r)}return s(i,n),a(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var t=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),e(this.dropdownOptions).find("li:not(.optgroup)").each((function(e){e.addEventListener("click",t._handleOptionClickBound)})),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var t=this;e(this.dropdownOptions).find("li:not(.optgroup)").each((function(e){e.removeEventListener("click",t._handleOptionClickBound)})),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(e){this._setValueToInput()}},{key:"_handleOptionClick",value:function(t){t.preventDefault();var n=e(t.target).closest("li")[0],i=n.id;if(!e(n).hasClass("disabled")&&!e(n).hasClass("optgroup")&&i.length){var r=!0;if(this.isMultiple){var a=e(this.dropdownOptions).find("li.disabled.selected");a.length&&(a.removeClass("selected"),a.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(a[0].id)),r=this._toggleEntryFromArray(i)}else e(this.dropdownOptions).find("li").removeClass("selected"),e(n).toggleClass("selected",r);e(this._valueDict[i].el).prop("selected")!==r&&(e(this._valueDict[i].el).prop("selected",r),this.$el.trigger("change"))}t.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var t=this;this.wrapper=document.createElement("div"),e(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(e(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),e(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each((function(n){if(e(n).is("option")){var i=void 0;i=t.isMultiple?t._appendOptionWithIcon(t.$el,n,"multiple"):t._appendOptionWithIcon(t.$el,n),t._addOptionToValueDict(n,i)}else if(e(n).is("optgroup")){var r=e(n).children("option");e(t.dropdownOptions).append(e('<li class="optgroup"><span>'+n.getAttribute("label")+"</span></li>")[0]),r.each((function(e){var n=t._appendOptionWithIcon(t.$el,e,"optgroup-option");t._addOptionToValueDict(e,n)}))}})),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),e(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&e(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var n=e('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(n[0]),!this.el.disabled){var i=e.extend({},this.options.dropdownOptions);i.onOpenEnd=function(n){var i=e(t.dropdownOptions).find(".selected").first();if(i.length&&(M.keyDown=!0,t.dropdown.focusedIndex=i.index(),t.dropdown._focusFocusedItem(),M.keyDown=!1,t.dropdown.isScrollable)){var r=i[0].getBoundingClientRect().top-t.dropdownOptions.getBoundingClientRect().top;r-=t.dropdownOptions.clientHeight/2,t.dropdownOptions.scrollTop=r}},this.isMultiple&&(i.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,i)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(e,t){var n=Object.keys(this._valueDict).length,i=this.dropdownOptions.id+n,r={};t.id=i,r.el=e,r.optionEl=t,this._valueDict[i]=r}},{key:"_removeDropdown",value:function(){e(this.wrapper).find(".caret").remove(),e(this.input).remove(),e(this.dropdownOptions).remove(),e(this.wrapper).before(this.$el),e(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(t,n,i){var r=n.disabled?"disabled ":"",a="optgroup-option"===i?"optgroup-option ":"",o=this.isMultiple?'<label><input type="checkbox"'+r+'"/><span>'+n.innerHTML+"</span></label>":n.innerHTML,s=e("<li></li>"),u=e("<span></span>");u.html(o),s.addClass(r+" "+a),s.append(u);var l=n.getAttribute("data-icon");if(l){var c=e('<img alt="" src="'+l+'">');s.prepend(c)}return e(this.dropdownOptions).append(s[0]),s[0]}},{key:"_toggleEntryFromArray",value:function(t){var n=!this._keysSelected.hasOwnProperty(t),i=e(this._valueDict[t].optionEl);return n?this._keysSelected[t]=!0:delete this._keysSelected[t],i.toggleClass("selected",n),i.find('input[type="checkbox"]').prop("checked",n),i.prop("selected",n),n}},{key:"_setValueToInput",value:function(){var t=[];if(this.$el.find("option").each((function(n){if(e(n).prop("selected")){var i=e(n).text();t.push(i)}})),!t.length){var n=this.$el.find("option:disabled").eq(0);n.length&&""===n[0].value&&t.push(n.text())}this.input.value=t.join(", ")}},{key:"_setSelectedStates",value:function(){for(var t in this._keysSelected={},this._valueDict){var n=this._valueDict[t],i=e(n.el).prop("selected");e(n.optionEl).find('input[type="checkbox"]').prop("checked",i),i?(this._activateOption(e(this.dropdownOptions),e(n.optionEl)),this._keysSelected[t]=!0):e(n.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(t,n){n&&(this.isMultiple||t.find("li.selected").removeClass("selected"),e(n).addClass("selected"))}},{key:"getSelectedValues",value:function(){var e=[];for(var t in this._keysSelected)e.push(this._valueDict[t].el.value);return e}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_FormSelect}},{key:"defaults",get:function(){return t}}]),i}(l);M.FormSelect=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"formSelect","M_FormSelect")}(cash),function(e,t){"use strict";var n={},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Range=i,i.options=e.extend({},l.defaults,n),i._mousedown=!1,i._setupThumb(),i._setupEventHandlers(),i}return s(l,i),a(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){e(this.value).html(this.$el.val()),e(this.thumb).hasClass("active")||this._showRangeBubble();var t=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",t+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(t){if(e(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),e(this.thumb).hasClass("active")||this._showRangeBubble(),"input"!==t.type){var n=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",n+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){e(this.thumb).hasClass("active")||this._showRangeBubble();var t=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",t+"px"),e(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var n=7+parseInt(this.$el.css("padding-left"))+"px";e(this.thumb).hasClass("active")&&(t.remove(this.thumb),t({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:n,duration:100})),e(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),e(this.thumb).addClass("thumb"),e(this.value).addClass("value"),e(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){e(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var n=-7+parseInt(e(this.thumb).parent().css("padding-left"))+"px";t.remove(this.thumb),t({targets:this.thumb,height:30,width:30,top:-30,marginLeft:n,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var e=this.$el.width()-15,t=parseFloat(this.$el.attr("max"))||100,n=parseFloat(this.$el.attr("min"))||0;return(parseFloat(this.$el.val())-n)/(t-n)*e}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Range}},{key:"defaults",get:function(){return n}}]),l}(l);M.Range=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"range","M_Range"),i.init(e("input[type=range]"))}(cash,M.anime)},851:function(e,t,n){var i,r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}window.cash=function(){var e,t=document,n=window,i=Array.prototype,r=i.slice,a=i.filter,o=i.push,s=function(){},u=function(e){return typeof e==typeof s&&e.call},l=function(e){return"string"==typeof e},c=/^#[\w-]*$/,h=/^\.[\w-]*$/,d=/<.+>/,f=/^\w+$/;function p(e,n){return n=n||t,h.test(e)?n.getElementsByClassName(e.slice(1)):f.test(e)?n.getElementsByTagName(e):n.querySelectorAll(e)}function v(n){if(!e){var i=(e=t.implementation.createHTMLDocument(null)).createElement("base");i.href=t.location.href,e.head.appendChild(i)}return e.body.innerHTML=n,e.body.childNodes}function m(e){"loading"!==t.readyState?e():t.addEventListener("DOMContentLoaded",e)}function y(e,i){if(!e)return this;if(e.cash&&e!==n)return e;var r,a=e,o=0;if(l(e))a=c.test(e)?t.getElementById(e.slice(1)):d.test(e)?v(e):p(e,i);else if(u(e))return m(e),this;if(!a)return this;if(a.nodeType||a===n)this[0]=a,this.length=1;else for(r=this.length=a.length;o<r;o++)this[o]=a[o];return this}function g(e,t){return new y(e,t)}var _=g.fn=g.prototype=y.prototype={cash:!0,length:0,push:o,splice:i.splice,map:i.map,init:y};function k(e,t){for(var n=e.length,i=0;i<n&&!1!==t.call(e[i],e[i],i,e);i++);}function w(e,t){var n=e&&(e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector);return!!n&&n.call(e,t)}function b(e){return l(e)?w:e.cash?function(t){return e.is(t)}:function(e,t){return e===t}}function x(e){return g(r.call(e).filter((function(e,t,n){return n.indexOf(e)===t})))}Object.defineProperty(_,"constructor",{value:g}),g.parseHTML=v,g.noop=s,g.isFunction=u,g.isString=l,g.extend=_.extend=function(e){e=e||{};var t=r.call(arguments),n=t.length,i=1;for(1===t.length&&(e=this,i=0);i<n;i++)if(t[i])for(var a in t[i])t[i].hasOwnProperty(a)&&(e[a]=t[i][a]);return e},g.extend({merge:function(e,t){for(var n=+t.length,i=e.length,r=0;r<n;i++,r++)e[i]=t[r];return e.length=i,e},each:k,matches:w,unique:x,isArray:Array.isArray,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)}});var E=g.uid="_cash"+Date.now();function C(e){return e[E]=e[E]||{}}function T(e,t,n){return C(e)[t]=n}function I(e,t){var n=C(e);return void 0===n[t]&&(n[t]=e.dataset?e.dataset[t]:g(e).attr("data-"+t)),n[t]}_.extend({data:function(e,t){if(l(e))return void 0===t?I(this[0],e):this.each((function(n){return T(n,e,t)}));for(var n in e)this.data(n,e[n]);return this},removeData:function(e){return this.each((function(t){return i=e,void((r=C(n=t))?delete r[i]:n.dataset?delete n.dataset[i]:g(n).removeAttr("data-"+name));var n,i,r}))}});var S=/\S+/g;function O(e){return l(e)&&e.match(S)}function A(e,t){return e.classList?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}function D(e,t,n){e.classList?e.classList.add(t):n.indexOf(" "+t+" ")&&(e.className+=" "+t)}function M(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(t,"")}_.extend({addClass:function(e){var t=O(e);return t?this.each((function(e){var n=" "+e.className+" ";k(t,(function(t){D(e,t,n)}))})):this},attr:function(e,t){if(e){if(l(e))return void 0===t?this[0]?this[0].getAttribute?this[0].getAttribute(e):this[0][e]:void 0:this.each((function(n){n.setAttribute?n.setAttribute(e,t):n[e]=t}));for(var n in e)this.attr(n,e[n]);return this}},hasClass:function(e){var t=!1,n=O(e);return n&&n.length&&this.each((function(e){return!(t=A(e,n[0]))})),t},prop:function(e,t){if(l(e))return void 0===t?this[0][e]:this.each((function(n){n[e]=t}));for(var n in e)this.prop(n,e[n]);return this},removeAttr:function(e){return this.each((function(t){t.removeAttribute?t.removeAttribute(e):delete t[e]}))},removeClass:function(e){if(!arguments.length)return this.attr("class","");var t=O(e);return t?this.each((function(e){k(t,(function(t){M(e,t)}))})):this},removeProp:function(e){return this.each((function(t){delete t[e]}))},toggleClass:function(e,t){if(void 0!==t)return this[t?"addClass":"removeClass"](e);var n=O(e);return n?this.each((function(e){var t=" "+e.className+" ";k(n,(function(n){A(e,n)?M(e,n):D(e,n,t)}))})):this}}),_.extend({add:function(e,t){return x(g.merge(this,g(e,t)))},each:function(e){return k(this,e),this},eq:function(e){return g(this.get(e))},filter:function(e){if(!e)return this;var t=u(e)?e:b(e);return g(a.call(this,(function(n){return t(n,e)})))},first:function(){return this.eq(0)},get:function(e){return void 0===e?r.call(this):e<0?this[e+this.length]:this[e]},index:function(e){var t=e?g(e)[0]:this[0],n=e?this:g(t).parent().children();return r.call(n).indexOf(t)},last:function(){return this.eq(-1)}});var R,P,N,L,B,F=(L=/(?:^\w|[A-Z]|\b\w)/g,B=/[\s-_]+/g,function(e){return e.replace(L,(function(e,t){return e[0===t?"toLowerCase":"toUpperCase"]()})).replace(B,"")}),j=(R={},P=document.createElement("div"),N=P.style,function(e){if(e=F(e),R[e])return R[e];var t=e.charAt(0).toUpperCase()+e.slice(1);return k((e+" "+["webkit","moz","ms","o"].join(t+" ")+t).split(" "),(function(t){if(t in N)return R[t]=e=R[e]=t,!1})),R[e]});function U(e,t){return parseInt(n.getComputedStyle(e[0],null)[t],10)||0}function V(e,t,n){var i,r=I(e,"_cashEvents"),a=r&&r[t];a&&(n?(e.removeEventListener(t,n),0<=(i=a.indexOf(n))&&a.splice(i,1)):(k(a,(function(n){e.removeEventListener(t,n)})),a=[]))}function q(e,t){return"&"+encodeURIComponent(e)+"="+encodeURIComponent(t).replace(/%20/g,"+")}function $(e){var t,n,i,r=e.type;if(!r)return null;switch(r.toLowerCase()){case"select-one":return 0<=(i=(n=e).selectedIndex)?n.options[i].value:null;case"select-multiple":return t=[],k(e.options,(function(e){e.selected&&t.push(e.value)})),t.length?t:null;case"radio":case"checkbox":return e.checked?e.value:null;default:return e.value?e.value:null}}function W(e,t,n){var i=l(t);i||!t.length?k(e,i?function(e){return e.insertAdjacentHTML(n?"afterbegin":"beforeend",t)}:function(e,i){return function(e,t,n){if(n){var i=e.childNodes[0];e.insertBefore(t,i)}else e.appendChild(t)}(e,0===i?t:t.cloneNode(!0),n)}):k(t,(function(t){return W(e,t,n)}))}g.prefixedProp=j,g.camelCase=F,_.extend({css:function(e,t){if(l(e))return e=j(e),1<arguments.length?this.each((function(n){return n.style[e]=t})):n.getComputedStyle(this[0])[e];for(var i in e)this.css(i,e[i]);return this}}),k(["Width","Height"],(function(e){var t=e.toLowerCase();_[t]=function(){return this[0].getBoundingClientRect()[t]},_["inner"+e]=function(){return this[0]["client"+e]},_["outer"+e]=function(t){return this[0]["offset"+e]+(t?U(this,"margin"+("Width"===e?"Left":"Top"))+U(this,"margin"+("Width"===e?"Right":"Bottom")):0)}})),_.extend({off:function(e,t){return this.each((function(n){return V(n,e,t)}))},on:function(e,t,n,i){var r;if(!l(e)){for(var a in e)this.on(a,t,e[a]);return this}return u(t)&&(n=t,t=null),"ready"===e?(m(n),this):(t&&(r=n,n=function(e){for(var n=e.target;!w(n,t);){if(n===this||null===n)return!1;n=n.parentNode}n&&r.call(n,e)}),this.each((function(t){var r,a,o,s,u=n;i&&(u=function(){n.apply(this,arguments),V(t,e,u)}),a=e,o=u,(s=I(r=t,"_cashEvents")||T(r,"_cashEvents",{}))[a]=s[a]||[],s[a].push(o),r.addEventListener(a,o)})))},one:function(e,t,n){return this.on(e,t,n,!0)},ready:m,trigger:function(e,t){if(document.createEvent){var n=document.createEvent("HTMLEvents");return n.initEvent(e,!0,!1),n=this.extend(n,t),this.each((function(e){return e.dispatchEvent(n)}))}}}),_.extend({serialize:function(){var e="";return k(this[0].elements||this,(function(t){if(!t.disabled&&"FIELDSET"!==t.tagName){var n=t.name;switch(t.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var i=$(t);null!==i&&k(i,(function(t){e+=q(n,t)}));break;default:var r=$(t);null!==r&&(e+=q(n,r))}}})),e.substr(1)},val:function(e){return void 0===e?$(this[0]):this.each((function(t){return t.value=e}))}}),_.extend({after:function(e){return g(e).insertAfter(this),this},append:function(e){return W(this,e),this},appendTo:function(e){return W(g(e),this),this},before:function(e){return g(e).insertBefore(this),this},clone:function(){return g(this.map((function(e){return e.cloneNode(!0)})))},empty:function(){return this.html(""),this},html:function(e){if(void 0===e)return this[0].innerHTML;var t=e.nodeType?e[0].outerHTML:e;return this.each((function(e){return e.innerHTML=t}))},insertAfter:function(e){var t=this;return g(e).each((function(e,n){var i=e.parentNode,r=e.nextSibling;t.each((function(e){i.insertBefore(0===n?e:e.cloneNode(!0),r)}))})),this},insertBefore:function(e){var t=this;return g(e).each((function(e,n){var i=e.parentNode;t.each((function(t){i.insertBefore(0===n?t:t.cloneNode(!0),e)}))})),this},prepend:function(e){return W(this,e,!0),this},prependTo:function(e){return W(g(e),this,!0),this},remove:function(){return this.each((function(e){if(e.parentNode)return e.parentNode.removeChild(e)}))},text:function(e){return void 0===e?this[0].textContent:this.each((function(t){return t.textContent=e}))}});var z=t.documentElement;return _.extend({position:function(){var e=this[0];return{left:e.offsetLeft,top:e.offsetTop}},offset:function(){var e=this[0].getBoundingClientRect();return{top:e.top+n.pageYOffset-z.clientTop,left:e.left+n.pageXOffset-z.clientLeft}},offsetParent:function(){return g(this[0].offsetParent)}}),_.extend({children:function(e){var t=[];return this.each((function(e){o.apply(t,e.children)})),t=x(t),e?t.filter((function(t){return w(t,e)})):t},closest:function(e){return!e||this.length<1?g():this.is(e)?this.filter(e):this.parent().closest(e)},is:function(e){if(!e)return!1;var t=!1,n=b(e);return this.each((function(i){return!(t=n(i,e))})),t},find:function(e){if(!e||e.nodeType)return g(e&&this.has(e).length?e:null);var t=[];return this.each((function(n){o.apply(t,p(e,n))})),x(t)},has:function(e){var t=l(e)?function(t){return 0!==p(e,t).length}:function(t){return t.contains(e)};return this.filter(t)},next:function(){return g(this[0].nextElementSibling)},not:function(e){if(!e)return this;var t=b(e);return this.filter((function(n){return!t(n,e)}))},parent:function(){var e=[];return this.each((function(t){t&&t.parentNode&&e.push(t.parentNode)})),x(e)},parents:function(e){var n,i=[];return this.each((function(r){for(n=r;n&&n.parentNode&&n!==t.body.parentNode;)n=n.parentNode,(!e||e&&w(n,e))&&i.push(n)})),x(i)},prev:function(){return g(this[0].previousElementSibling)},siblings:function(e){var t=this.parent().children(e),n=this[0];return t.filter((function(e){return e!==n}))}}),g}();var l,c=function(){function e(t,n,i){u(this,e),n instanceof Element||console.error(Error(n+" is not an HTML Element"));var r=t.getInstance(n);r&&r.destroy(),this.el=n,this.$el=cash(n)}return a(e,null,[{key:"init",value:function(e,t,n){var i=null;if(t instanceof Element)i=new e(t,n);else if(t&&(t.jquery||t.cash||t instanceof NodeList)){for(var r=[],a=0;a<t.length;a++)r.push(new e(t[a],n));i=r}return i}}]),e}();(l=window).Package?M={}:l.M={},M.jQueryLoaded=!!l.jQuery,void 0!==(i=function(){return M}.apply(t,[]))&&(e.exports=i),M.version="1.0.0",M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;document.addEventListener("keydown",(function(e){M.keyDown=!0,e.which!==M.keys.TAB&&e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||(M.tabPressed=!0)}),!0),document.addEventListener("keyup",(function(e){M.keyDown=!1,e.which!==M.keys.TAB&&e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ARROW_UP||(M.tabPressed=!1)}),!0),document.addEventListener("focus",(function(e){M.keyDown&&document.body.classList.add("keyboard-focused")}),!0),document.addEventListener("blur",(function(e){document.body.classList.remove("keyboard-focused")}),!0),M.initializeJqueryWrapper=function(e,t,n){jQuery.fn[t]=function(i){if(e.prototype[i]){var r=Array.prototype.slice.call(arguments,1);if("get"===i.slice(0,3)){var a=this.first()[0][n];return a[i].apply(a,r)}return this.each((function(){var e=this[n];e[i].apply(e,r)}))}if("object"==typeof i||!i)return e.init(this,i),this;jQuery.error("Method "+i+" does not exist on jQuery."+t)}},M.AutoInit=function(e){var t=e||document.body,n={Autocomplete:t.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:t.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:t.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:t.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:t.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:t.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:t.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:t.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:t.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:t.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:t.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:t.querySelectorAll("select:not(.no-autoinit)"),Sidenav:t.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:t.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:t.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:t.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:t.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:t.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var i in n)M[i].init(n[i])},M.objectSelectorString=function(e){return((e.prop("tagName")||"")+(e.attr("id")||"")+(e.attr("class")||"")).replace(/\s/g,"")},M.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}(),M.escapeHash=function(e){return e.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(e){var t=$(e),n=t.add(t.parents()),i=!1;return n.each((function(){if("fixed"===$(this).css("position"))return!(i=!0)})),i},M.checkWithinContainer=function(e,t,n){var i={top:!1,right:!1,bottom:!1,left:!1},r=e.getBoundingClientRect(),a=e===document.body?Math.max(r.bottom,window.innerHeight):r.bottom,o=e.scrollLeft,s=e.scrollTop,u=t.left-o,l=t.top-s;return(u<r.left+n||u<n)&&(i.left=!0),(u+t.width>r.right-n||u+t.width>window.innerWidth-n)&&(i.right=!0),(l<r.top+n||l<n)&&(i.top=!0),(l+t.height>a-n||l+t.height>window.innerHeight-n)&&(i.bottom=!0),i},M.checkPossibleAlignments=function(e,t,n,i){var r={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},a="visible"===getComputedStyle(t).overflow,o=t.getBoundingClientRect(),s=Math.min(o.height,window.innerHeight),u=Math.min(o.width,window.innerWidth),l=e.getBoundingClientRect(),c=t.scrollLeft,h=t.scrollTop,d=n.left-c,f=n.top-h,p=n.top+l.height-h;return r.spaceOnRight=a?window.innerWidth-(l.left+n.width):u-(d+n.width),r.spaceOnRight<0&&(r.left=!1),r.spaceOnLeft=a?l.right-n.width:d-n.width+l.width,r.spaceOnLeft<0&&(r.right=!1),r.spaceOnBottom=a?window.innerHeight-(l.top+n.height+i):s-(f+n.height+i),r.spaceOnBottom<0&&(r.top=!1),r.spaceOnTop=a?l.bottom-(n.height+i):p-(n.height-i),r.spaceOnTop<0&&(r.bottom=!1),r},M.getOverflowParent=function(e){return null==e?null:e===document.body||"visible"!==getComputedStyle(e).overflow?e:M.getOverflowParent(e.parentElement)},M.getIdFromTrigger=function(e){var t=e.getAttribute("data-target");return t||(t=(t=e.getAttribute("href"))?t.slice(1):""),t},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};var h=Date.now||function(){return(new Date).getTime()};M.throttle=function(e,t,n){var i=void 0,r=void 0,a=void 0,o=null,s=0;n||(n={});var u=function(){s=!1===n.leading?0:h(),o=null,a=e.apply(i,r),i=r=null};return function(){var l=h();s||!1!==n.leading||(s=l);var c=t-(l-s);return i=this,r=arguments,c<=0?(clearTimeout(o),o=null,s=l,a=e.apply(i,r),i=r=null):o||!1===n.trailing||(o=setTimeout(u,c)),a}};var d={scope:{}};d.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},d.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof n.g&&null!=n.g?n.g:e},d.global=d.getGlobal(this),d.SYMBOL_PREFIX="jscomp_symbol_",d.initSymbol=function(){d.initSymbol=function(){},d.global.Symbol||(d.global.Symbol=d.Symbol)},d.symbolCounter_=0,d.Symbol=function(e){return d.SYMBOL_PREFIX+(e||"")+d.symbolCounter_++},d.initSymbolIterator=function(){d.initSymbol();var e=d.global.Symbol.iterator;e||(e=d.global.Symbol.iterator=d.global.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&d.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return d.arrayIterator(this)}}),d.initSymbolIterator=function(){}},d.arrayIterator=function(e){var t=0;return d.iteratorPrototype((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))},d.iteratorPrototype=function(e){return d.initSymbolIterator(),(e={next:e})[d.global.Symbol.iterator]=function(){return this},e},d.array=d.array||{},d.iteratorFromArray=function(e,t){d.initSymbolIterator(),e instanceof String&&(e+="");var n=0,i={next:function(){if(n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i},d.polyfill=function(e,t,n,i){if(t){for(n=d.global,e=e.split("."),i=0;i<e.length-1;i++){var r=e[i];r in n||(n[r]={}),n=n[r]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&d.defineProperty(n,e,{configurable:!0,writable:!0,value:t})}},d.polyfill("Array.prototype.keys",(function(e){return e||function(){return d.iteratorFromArray(this,(function(e){return e}))}}),"es6-impl","es3");var f,p,v,m=this;M.anime=function(){function e(e){if(!A.col(e))try{return document.querySelectorAll(e)}catch(e){}}function t(e,t){for(var n=e.length,i=2<=arguments.length?t:void 0,r=[],a=0;a<n;a++)if(a in e){var o=e[a];t.call(i,o,a,e)&&r.push(o)}return r}function n(e){return e.reduce((function(e,t){return e.concat(A.arr(t)?n(t):t)}),[])}function i(t){return A.arr(t)?t:(A.str(t)&&(t=e(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function r(e,t){return e.some((function(e){return e===t}))}function a(e){var t,n={};for(t in e)n[t]=e[t];return n}function o(e,t){var n,i=a(e);for(n in e)i[n]=t.hasOwnProperty(n)?t[n]:e[n];return i}function s(e,t){var n,i=a(e);for(n in t)i[n]=A.und(e[n])?t[n]:e[n];return i}function u(e){if(e=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e))return e[2]}function l(e,t){return A.fnc(e)?e(t.target,t.id,t.total):e}function c(e,t){if(t in e.style)return getComputedStyle(e).getPropertyValue(t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function h(e,t){return A.dom(e)&&r(O,t)?"transform":A.dom(e)&&(e.getAttribute(t)||A.svg(e)&&e[t])?"attribute":A.dom(e)&&"transform"!==t&&c(e,t)?"css":null!=e[t]?"object":void 0}function d(e,n){switch(h(e,n)){case"transform":return function(e,n){var i,r=-1<(i=n).indexOf("translate")||"perspective"===i?"px":-1<i.indexOf("rotate")||-1<i.indexOf("skew")?"deg":void 0;r=-1<n.indexOf("scale")?1:0+r;if(!(e=e.style.transform))return r;for(var a=[],o=[],s=[],u=/(\w+)\((.+?)\)/g;a=u.exec(e);)o.push(a[1]),s.push(a[2]);return(e=t(s,(function(e,t){return o[t]===n}))).length?e[0]:r}(e,n);case"css":return c(e,n);case"attribute":return e.getAttribute(n)}return e[n]||0}function f(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var i=u(e)||0;switch(t=parseFloat(t),e=parseFloat(e.replace(n[0],"")),n[0][0]){case"+":return t+e+i;case"-":return t-e+i;case"*":return t*e+i}}function p(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function v(e){e=e.points;for(var t,n=0,i=0;i<e.numberOfItems;i++){var r=e.getItem(i);0<i&&(n+=p(t,r)),t=r}return n}function y(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return 2*Math.PI*e.getAttribute("r");case"rect":return 2*e.getAttribute("width")+2*e.getAttribute("height");case"line":return p({x:e.getAttribute("x1"),y:e.getAttribute("y1")},{x:e.getAttribute("x2"),y:e.getAttribute("y2")});case"polyline":return v(e);case"polygon":var t=e.points;return v(e)+p(t.getItem(t.numberOfItems-1),t.getItem(0))}}function g(e,t){function n(n){return n=void 0===n?0:n,e.el.getPointAtLength(1<=t+n?t+n:0)}var i=n(),r=n(-1),a=n(1);switch(e.property){case"x":return i.x;case"y":return i.y;case"angle":return 180*Math.atan2(a.y-r.y,a.x-r.x)/Math.PI}}function _(e,t){var n,i=/-?\d*\.?\d+/g;if(n=A.pth(e)?e.totalLength:e,A.col(n))if(A.rgb(n)){var r=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(n);n=r?"rgba("+r[1]+",1)":n}else n=A.hex(n)?function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,i){return t+t+n+n+i+i}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba("+(e=parseInt(t[1],16))+","+parseInt(t[2],16)+","+(t=parseInt(t[3],16))+",1)"}(n):A.hsl(n)?function(e){function t(e,t,n){return n<0&&(n+=1),1<n&&--n,n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var n=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e);e=parseInt(n[1])/360;var i=parseInt(n[2])/100,r=parseInt(n[3])/100;n=n[4]||1;if(0==i)r=i=e=r;else{var a=r<.5?r*(1+i):r+i-r*i,o=2*r-a;r=t(o,a,e+1/3),i=t(o,a,e);e=t(o,a,e-1/3)}return"rgba("+255*r+","+255*i+","+255*e+","+n+")"}(n):void 0;else r=(r=u(n))?n.substr(0,n.length-r.length):n,n=t&&!/\s/g.test(n)?r+t:r;return{original:n+="",numbers:n.match(i)?n.match(i).map(Number):[0],strings:A.str(e)||t?n.split(i):[]}}function k(e){return t(e=e?n(A.arr(e)?e.map(i):i(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function w(e,t){var n=a(t);if(A.arr(e)){var r=e.length;2!==r||A.obj(e[0])?A.fnc(t.duration)||(n.duration=t.duration/r):e={value:e}}return i(e).map((function(e,n){return n=n?0:t.delay,e=A.obj(e)&&!A.pth(e)?e:{value:e},A.und(e.delay)&&(e.delay=n),e})).map((function(e){return s(e,n)}))}function b(e,t){var n;return e.tweens.map((function(i){var r=(i=function(e,t){var n,i={};for(n in e){var r=l(e[n],t);A.arr(r)&&1===(r=r.map((function(e){return l(e,t)}))).length&&(r=r[0]),i[n]=r}return i.duration=parseFloat(i.duration),i.delay=parseFloat(i.delay),i}(i,t)).value,a=d(t.target,e.name),o=n?n.to.original:a,s=(o=A.arr(r)?r[0]:o,f(A.arr(r)?r[1]:r,o));a=u(s)||u(o)||u(a);return i.from=_(o,a),i.to=_(s,a),i.start=n?n.end:e.offset,i.end=i.start+i.delay+i.duration,i.easing=function(e){return A.arr(e)?D.apply(this,e):M[e]}(i.easing),i.elasticity=(1e3-Math.min(Math.max(i.elasticity,1),999))/1e3,i.isPath=A.pth(r),i.isColor=A.col(i.from.original),i.isColor&&(i.round=1),n=i}))}function x(e,t,n,i){var r="delay"===e;return t.length?(r?Math.min:Math.max).apply(Math,t.map((function(t){return t[e]}))):r?i.delay:n.offset+i.delay+i.duration}function E(e){var i,r,a,u,l=o(I,e),c=o(S,e),d=(r=e.targets,(a=k(r)).map((function(e,t){return{target:e,id:t,total:a.length}}))),f=[],p=s(l,c);for(i in e)p.hasOwnProperty(i)||"targets"===i||f.push({name:i,offset:p.offset,tweens:w(e[i],c)});return u=f,e=t(n(d.map((function(e){return u.map((function(t){var n=h(e.target,t.name);if(n){var i=b(t,e);t={type:n,property:t.name,animatable:e,tweens:i,duration:i[i.length-1].end,delay:i[0].delay}}else t=void 0;return t}))}))),(function(e){return!A.und(e)})),s(l,{children:[],animatables:d,animations:e,duration:x("duration",e,l,c),delay:x("delay",e,l,c)})}function C(e){function n(){return window.Promise&&new Promise((function(e){return d=e}))}function i(e){return p.reversed?p.duration-e:e}function r(e){for(var n=0,i={},r=p.animations,a=r.length;n<a;){var o=r[n],s=o.animatable,u=(l=o.tweens)[f=l.length-1];f&&(u=t(l,(function(t){return e<t.end}))[0]||u);for(var l=Math.min(Math.max(e-u.start-u.delay,0),u.duration)/u.duration,h=isNaN(l)?1:u.easing(l,u.elasticity),d=(l=u.to.strings,u.round),f=[],v=void 0,m=(v=u.to.numbers.length,0);m<v;m++){var y=void 0,_=(y=u.to.numbers[m],u.from.numbers[m]);y=u.isPath?g(u.value,h*y):_+h*(y-_);d&&(u.isColor&&2<m||(y=Math.round(y*d)/d)),f.push(y)}if(u=l.length)for(v=l[0],h=0;h<u;h++)d=l[h+1],m=f[h],isNaN(m)||(v=d?v+(m+d):v+(m+" "));else v=f[0];R[o.type](s.target,o.property,v,i,s.id),o.currentValue=v,n++}if(n=Object.keys(i).length)for(r=0;r<n;r++)T||(T=c(document.body,"transform")?"transform":"-webkit-transform"),p.animatables[r].target.style[T]=i[r].join(" ");p.currentTime=e,p.progress=e/p.duration*100}function a(e){p[e]&&p[e](p)}function o(){p.remaining&&!0!==p.remaining&&p.remaining--}function s(e){var t=p.duration,s=p.offset,c=s+p.delay,v=p.currentTime,m=p.reversed,y=i(e);if(p.children.length){var g=p.children,_=g.length;if(y>=p.currentTime)for(var k=0;k<_;k++)g[k].seek(y);else for(;_--;)g[_].seek(y)}(c<=y||!t)&&(p.began||(p.began=!0,a("begin")),a("run")),s<y&&y<t?r(y):(y<=s&&0!==v&&(r(0),m&&o()),(t<=y&&v!==t||!t)&&(r(t),m||o())),a("update"),t<=e&&(p.remaining?(l=u,"alternate"===p.direction&&(p.reversed=!p.reversed)):(p.pause(),p.completed||(p.completed=!0,a("complete"),"Promise"in window&&(d(),f=n()))),h=0)}e=void 0===e?{}:e;var u,l,h=0,d=null,f=n(),p=E(e);return p.reset=function(){var e=p.direction,t=p.loop;for(p.currentTime=0,p.progress=0,p.paused=!0,p.began=!1,p.completed=!1,p.reversed="reverse"===e,p.remaining="alternate"===e&&1===t?2:t,r(0),e=p.children.length;e--;)p.children[e].reset()},p.tick=function(e){u=e,l||(l=u),s((h+u-l)*C.speed)},p.seek=function(e){s(i(e))},p.pause=function(){var e=P.indexOf(p);-1<e&&P.splice(e,1),p.paused=!0},p.play=function(){p.paused&&(p.paused=!1,l=0,h=i(p.currentTime),P.push(p),N||L())},p.reverse=function(){p.reversed=!p.reversed,l=0,h=i(p.currentTime)},p.restart=function(){p.pause(),p.reset(),p.play()},p.finished=f,p.reset(),p.autoplay&&p.play(),p}var T,I={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},S={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},O="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),A={arr:function(e){return Array.isArray(e)},obj:function(e){return-1<Object.prototype.toString.call(e).indexOf("Object")},pth:function(e){return A.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},dom:function(e){return e.nodeType||A.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return A.hex(e)||A.rgb(e)||A.hsl(e)}},D=function(){function e(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}return function(t,n,i,r){if(0<=t&&t<=1&&0<=i&&i<=1){var a=new Float32Array(11);if(t!==n||i!==r)for(var o=0;o<11;++o)a[o]=e(.1*o,t,i);return function(o){if(t===n&&i===r)return o;if(0===o)return 0;if(1===o)return 1;for(var s=0,u=1;10!==u&&a[u]<=o;++u)s+=.1;u=s+(o-a[--u])/(a[u+1]-a[u])*.1;var l=3*(1-3*i+3*t)*u*u+2*(3*i-6*t)*u+3*t;if(.001<=l){for(s=0;s<4&&0!=(l=3*(1-3*i+3*t)*u*u+2*(3*i-6*t)*u+3*t);++s){var c=e(u,t,i)-o;u=u-c/l}o=u}else if(0===l)o=u;else{u=s,s=s+.1;for(var h=0;0<(l=e(c=u+(s-u)/2,t,i)-o)?s=c:u=c,1e-7<Math.abs(l)&&++h<10;);o=c}return e(o,n,r)}}}}(),M=function(){function e(e,t){return 0===e||1===e?e:-Math.pow(2,10*(e-1))*Math.sin(2*(e-1-t/(2*Math.PI)*Math.asin(1))*Math.PI/t)}var t,n="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),i={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],e],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(t,n){return 1-e(1-t,n)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(t,n){return t<.5?e(2*t,n)/2:1-e(-2*t+2,n)/2}]},r={linear:D(.25,.25,.75,.75)},a={};for(t in i)a.type=t,i[a.type].forEach(function(e){return function(t,i){r["ease"+e.type+n[i]]=A.fnc(t)?t:D.apply(m,t)}}(a)),a={type:a.type};return r}(),R={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,i,r){i[r]||(i[r]=[]),i[r].push(t+"("+n+")")}},P=[],N=0,L=function(){function e(){N=requestAnimationFrame(t)}function t(t){var n=P.length;if(n){for(var i=0;i<n;)P[i]&&P[i].tick(t),i++;e()}else cancelAnimationFrame(N),N=0}return e}();return C.version="2.2.0",C.speed=1,C.running=P,C.remove=function(e){e=k(e);for(var t=P.length;t--;)for(var n=P[t],i=n.animations,a=i.length;a--;)r(e,i[a].animatable.target)&&(i.splice(a,1),i.length||n.pause())},C.getValue=d,C.path=function(t,n){var i=A.str(t)?e(t)[0]:t,r=n||100;return function(e){return{el:i,property:e,totalLength:y(i)*(r/100)}}},C.setDashoffset=function(e){var t=y(e);return e.setAttribute("stroke-dasharray",t),t},C.bezier=D,C.easings=M,C.timeline=function(e){var t=C(e);return t.pause(),t.duration=0,t.add=function(n){return t.children.forEach((function(e){e.began=!0,e.completed=!0})),i(n).forEach((function(n){var i=s(n,o(S,e||{}));i.targets=i.targets||e.targets,n=t.duration;var r=i.offset;i.autoplay=!1,i.direction=t.direction,i.offset=A.und(r)?n:f(r,n),t.began=!0,t.completed=!0,t.seek(i.offset),(i=C(i)).began=!0,i.completed=!0,i.duration>n&&(t.duration=i.duration),t.children.push(i)})),t.seek(0),t.reset(),t.autoplay&&t.restart(),t},t},C.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},C}(),function(e,t){"use strict";var n={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));(i.el.M_Collapsible=i).options=e.extend({},l.defaults,n),i.$headers=i.$el.children("li").children(".collapsible-header"),i.$headers.attr("tabindex",0),i._setupEventHandlers();var r=i.$el.children("li.active").children(".collapsible-body");return i.options.accordion?r.first().css("display","block"):r.css("display","block"),i}return s(l,c),a(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each((function(t){t.addEventListener("keydown",e._handleCollapsibleKeydownBound)}))}},{key:"_removeEventHandlers",value:function(){var e=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each((function(t){t.removeEventListener("keydown",e._handleCollapsibleKeydownBound)}))}},{key:"_handleCollapsibleClick",value:function(t){var n=e(t.target).closest(".collapsible-header");if(t.target&&n.length){var i=n.closest(".collapsible");if(i[0]===this.el){var r=n.closest("li"),a=i.children("li"),o=r[0].classList.contains("active"),s=a.index(r);o?this.close(s):this.open(s)}}}},{key:"_handleCollapsibleKeydown",value:function(e){13===e.keyCode&&this._handleCollapsibleClickBound(e)}},{key:"_animateIn",value:function(e){var n=this,i=this.$el.children("li").eq(e);if(i.length){var r=i.children(".collapsible-body");t.remove(r[0]),r.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var a=r.css("padding-top"),o=r.css("padding-bottom"),s=r[0].scrollHeight;r.css({paddingTop:0,paddingBottom:0}),t({targets:r[0],height:s,paddingTop:a,paddingBottom:o,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(e){r.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),"function"==typeof n.options.onOpenEnd&&n.options.onOpenEnd.call(n,i[0])}})}}},{key:"_animateOut",value:function(e){var n=this,i=this.$el.children("li").eq(e);if(i.length){var r=i.children(".collapsible-body");t.remove(r[0]),r.css("overflow","hidden"),t({targets:r[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){r.css({height:"",overflow:"",padding:"",display:""}),"function"==typeof n.options.onCloseEnd&&n.options.onCloseEnd.call(n,i[0])}})}}},{key:"open",value:function(t){var n=this,i=this.$el.children("li").eq(t);if(i.length&&!i[0].classList.contains("active")){if("function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,i[0]),this.options.accordion){var r=this.$el.children("li");this.$el.children("li.active").each((function(t){var i=r.index(e(t));n.close(i)}))}i[0].classList.add("active"),this._animateIn(t)}}},{key:"close",value:function(e){var t=this.$el.children("li").eq(e);t.length&&t[0].classList.contains("active")&&("function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,t[0]),t[0].classList.remove("active"),this._animateOut(e))}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Collapsible}},{key:"defaults",get:function(){return n}}]),l}();M.Collapsible=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"collapsible","M_Collapsible")}(cash,M.anime),function(e,t){"use strict";var n={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return i.el.M_Dropdown=i,l._dropdowns.push(i),i.id=M.getIdFromTrigger(t),i.dropdownEl=document.getElementById(i.id),i.$dropdownEl=e(i.dropdownEl),i.options=e.extend({},l.defaults,n),i.isOpen=!1,i.isScrollable=!1,i.isTouchMoving=!1,i.focusedIndex=-1,i.filterQuery=[],i.options.container?e(i.options.container).append(i.dropdownEl):i.$el.after(i.dropdownEl),i._makeDropdownFocusable(),i._resetFilterQueryBound=i._resetFilterQuery.bind(i),i._handleDocumentClickBound=i._handleDocumentClick.bind(i),i._handleDocumentTouchmoveBound=i._handleDocumentTouchmove.bind(i),i._handleDropdownClickBound=i._handleDropdownClick.bind(i),i._handleDropdownKeydownBound=i._handleDropdownKeydown.bind(i),i._handleTriggerKeydownBound=i._handleTriggerKeydown.bind(i),i._setupEventHandlers(),i}return s(l,c),a(l,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),l._dropdowns.splice(l._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(e){e.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(t){var n=t.toElement||t.relatedTarget,i=!!e(n).closest(".dropdown-content").length,r=!1,a=e(n).closest(".dropdown-trigger");a.length&&a[0].M_Dropdown&&a[0].M_Dropdown.isOpen&&(r=!0),r||i||this.close()}},{key:"_handleDocumentClick",value:function(t){var n=this,i=e(t.target);this.options.closeOnClick&&i.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout((function(){n.close()}),0):!i.closest(".dropdown-trigger").length&&i.closest(".dropdown-content").length||setTimeout((function(){n.close()}),0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(e){e.which!==M.keys.ARROW_DOWN&&e.which!==M.keys.ENTER||this.isOpen||(e.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(t){e(t.target).closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(t){if("function"==typeof this.options.onItemClick){var n=e(t.target).closest("li")[0];this.options.onItemClick.call(this,n)}}},{key:"_handleDropdownKeydown",value:function(t){if(t.which===M.keys.TAB)t.preventDefault(),this.close();else if(t.which!==M.keys.ARROW_DOWN&&t.which!==M.keys.ARROW_UP||!this.isOpen)if(t.which===M.keys.ENTER&&this.isOpen){var n=this.dropdownEl.children[this.focusedIndex],i=e(n).find("a, button").first();i.length?i[0].click():n&&n.click()}else t.which===M.keys.ESC&&this.isOpen&&(t.preventDefault(),this.close());else{t.preventDefault();var r=t.which===M.keys.ARROW_DOWN?1:-1,a=this.focusedIndex,o=!1;do{if(a+=r,this.dropdownEl.children[a]&&-1!==this.dropdownEl.children[a].tabIndex){o=!0;break}}while(a<this.dropdownEl.children.length&&0<=a);o&&(this.focusedIndex=a,this._focusFocusedItem())}var s=String.fromCharCode(t.which).toLowerCase();if(s&&-1===[9,13,27,38,40].indexOf(t.which)){this.filterQuery.push(s);var u=this.filterQuery.join(""),l=e(this.dropdownEl).find("li").filter((function(t){return 0===e(t).text().toLowerCase().indexOf(u)}))[0];l&&(this.focusedIndex=e(l).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,e(this.dropdownEl).children().each((function(e){e.getAttribute("tabindex")||e.setAttribute("tabindex",0)}))}},{key:"_focusFocusedItem",value:function(){0<=this.focusedIndex&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var e=this.el.getBoundingClientRect(),t=this.dropdownEl.getBoundingClientRect(),n=t.height,i=t.width,r=e.left-t.left,a=e.top-t.top,o={left:r,top:a,height:n,width:i},s=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,u=M.checkPossibleAlignments(this.el,s,o,this.options.coverTrigger?0:e.height),l="top",c=this.options.alignment;if(a+=this.options.coverTrigger?0:e.height,this.isScrollable=!1,u.top||(u.bottom?l="bottom":(this.isScrollable=!0,u.spaceOnTop>u.spaceOnBottom?(l="bottom",n+=u.spaceOnTop,a-=u.spaceOnTop):n+=u.spaceOnBottom)),!u[c]){var h="left"===c?"right":"left";u[h]?c=h:u.spaceOnLeft>u.spaceOnRight?(c="right",i+=u.spaceOnLeft,r-=u.spaceOnLeft):(c="left",i+=u.spaceOnRight)}return"bottom"===l&&(a=a-t.height+(this.options.coverTrigger?e.height:0)),"right"===c&&(r=r-t.width+e.width),{x:r,y:a,verticalAlignment:l,horizontalAlignment:c,height:n,width:i}}},{key:"_animateIn",value:function(){var e=this;t.remove(this.dropdownEl),t({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(t){e.options.autoFocus&&e.dropdownEl.focus(),"function"==typeof e.options.onOpenEnd&&e.options.onOpenEnd.call(e,e.el)}})}},{key:"_animateOut",value:function(){var e=this;t.remove(this.dropdownEl),t({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(t){e._resetDropdownStyles(),"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e,e.el)}})}},{key:"_placeDropdown",value:function(){var e=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=e+"px";var t=this._getDropdownPosition();this.dropdownEl.style.left=t.x+"px",this.dropdownEl.style.top=t.y+"px",this.dropdownEl.style.height=t.height+"px",this.dropdownEl.style.width=t.width+"px",this.dropdownEl.style.transformOrigin=("left"===t.horizontalAlignment?"0":"100%")+" "+("top"===t.verticalAlignment?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Dropdown}},{key:"defaults",get:function(){return n}}]),l}();i._dropdowns=[],M.Dropdown=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"dropdown","M_Dropdown")}(cash,M.anime),function(e,t){"use strict";var n={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return(i.el.M_Modal=i).options=e.extend({},l.defaults,n),i.isOpen=!1,i.id=i.$el.attr("id"),i._openingTrigger=void 0,i.$overlay=e('<div class="modal-overlay"></div>'),i.el.tabIndex=0,i._nthModalOpened=0,l._count++,i._setupEventHandlers(),i}return s(l,c),a(l,[{key:"destroy",value:function(){l._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),1===l._count&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){0===l._count&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(t){var n=e(t.target).closest(".modal-trigger");if(n.length){var i=M.getIdFromTrigger(n[0]),r=document.getElementById(i).M_Modal;r&&r.open(n),t.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(t){e(t.target).closest(".modal-close").length&&this.close()}},{key:"_handleKeydown",value:function(e){27===e.keyCode&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(e){this.el.contains(e.target)||this._nthModalOpened!==l._modalsOpen||this.el.focus()}},{key:"_animateIn",value:function(){var n=this;e.extend(this.el.style,{display:"block",opacity:0}),e.extend(this.$overlay[0].style,{display:"block",opacity:0}),t({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var i={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){"function"==typeof n.options.onOpenEnd&&n.options.onOpenEnd.call(n,n.el,n._openingTrigger)}};this.el.classList.contains("bottom-sheet")?e.extend(i,{bottom:0,opacity:1}):e.extend(i,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),t(i)}},{key:"_animateOut",value:function(){var n=this;t({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var i={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){n.el.style.display="none",n.$overlay.remove(),"function"==typeof n.options.onCloseEnd&&n.options.onCloseEnd.call(n,n.el)}};this.el.classList.contains("bottom-sheet")?e.extend(i,{bottom:"-100%",opacity:0}):e.extend(i,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),t(i)}},{key:"open",value:function(e){if(!this.isOpen)return this.isOpen=!0,l._modalsOpen++,this._nthModalOpened=l._modalsOpen,this.$overlay[0].style.zIndex=1e3+2*l._modalsOpen,this.el.style.zIndex=1e3+2*l._modalsOpen+1,this._openingTrigger=e?e[0]:void 0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),t.remove(this.el),t.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,l._modalsOpen--,this._nthModalOpened=0,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),0===l._modalsOpen&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),t.remove(this.el),t.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Modal}},{key:"defaults",get:function(){return n}}]),l}();i._modalsOpen=0,i._count=0,M.Modal=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"modal","M_Modal")}(cash,M.anime),function(e,t){"use strict";var n={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return(i.el.M_Materialbox=i).options=e.extend({},l.defaults,n),i.overlayActive=!1,i.doneAnimating=!0,i.placeholder=e("<div></div>").addClass("material-placeholder"),i.originalWidth=0,i.originalHeight=0,i.originInlineStyles=i.$el.attr("style"),i.caption=i.el.getAttribute("data-caption")||"",i.$el.before(i.placeholder),i.placeholder.append(i.$el),i._setupEventHandlers(),i}return s(l,c),a(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,e(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(e){!1===this.doneAnimating||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(e){27===e.keyCode&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=e();for(var t=this.placeholder[0].parentNode;null!==t&&!e(t).is(document);){var n=e(t);"visible"!==n.css("overflow")&&(n.css("overflow","visible"),void 0===this.ancestorsChanged?this.ancestorsChanged=n:this.ancestorsChanged=this.ancestorsChanged.add(n)),t=t.parentNode}}},{key:"_animateImageIn",value:function(){var e=this,n={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){e.doneAnimating=!0,"function"==typeof e.options.onOpenEnd&&e.options.onOpenEnd.call(e,e.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),"none"!==this.maxWidth&&(n.maxWidth=this.newWidth),"none"!==this.maxHeight&&(n.maxHeight=this.newHeight),t(n)}},{key:"_animateImageOut",value:function(){var e=this,n={targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.placeholder.css({height:"",width:"",position:"",top:"",left:""}),e.attrWidth&&e.$el.attr("width",e.attrWidth),e.attrHeight&&e.$el.attr("height",e.attrHeight),e.$el.removeAttr("style"),e.originInlineStyles&&e.$el.attr("style",e.originInlineStyles),e.$el.removeClass("active"),e.doneAnimating=!0,e.ancestorsChanged.length&&e.ancestorsChanged.css("overflow",""),"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e,e.el)}};t(n)}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var n=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=e('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",(function(){n.doneAnimating&&n.close()})),this.$el.before(this.$overlay);var i=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*i.left+"px",top:-1*i.top+"px"}),t.remove(this.el),t.remove(this.$overlay[0]),t({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),""!==this.caption&&(this.$photocaption&&t.remove(this.$photoCaption[0]),this.$photoCaption=e('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),e("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),t({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var r=0,a=this.originalWidth/this.windowWidth,o=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,o<a?(r=this.originalHeight/this.originalWidth,this.newWidth=.9*this.windowWidth,this.newHeight=.9*this.windowWidth*r):(r=this.originalWidth/this.originalHeight,this.newWidth=.9*this.windowHeight*r,this.newHeight=.9*this.windowHeight),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var e=this;this._updateVars(),this.doneAnimating=!1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),t.remove(this.el),t.remove(this.$overlay[0]),""!==this.caption&&t.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),t({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.overlayActive=!1,e.$overlay.remove()}}),this._animateImageOut(),""!==this.caption&&t({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e.$photoCaption.remove()}})}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Materialbox}},{key:"defaults",get:function(){return n}}]),l}();M.Materialbox=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"materialbox","M_Materialbox")}(cash,M.anime),function(e){"use strict";var t={responsiveThreshold:0},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return(r.el.M_Parallax=r).options=e.extend({},i.defaults,n),r._enabled=window.innerWidth>r.options.responsiveThreshold,r.$img=r.$el.find("img").first(),r.$img.each((function(){this.complete&&e(this).trigger("load")})),r._updateParallax(),r._setupEventHandlers(),r._setupStyles(),i._parallaxes.push(r),r}return s(i,c),a(i,[{key:"destroy",value:function(){i._parallaxes.splice(i._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),0===i._parallaxes.length&&(i._handleScrollThrottled=M.throttle(i._handleScroll,5),window.addEventListener("scroll",i._handleScrollThrottled),i._handleWindowResizeThrottled=M.throttle(i._handleWindowResize,5),window.addEventListener("resize",i._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),0===i._parallaxes.length&&(window.removeEventListener("scroll",i._handleScrollThrottled),window.removeEventListener("resize",i._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var e=0<this.$el.height()?this.el.parentNode.offsetHeight:500,t=this.$img[0].offsetHeight-e,n=this.$el.offset().top+e,i=this.$el.offset().top,r=M.getDocumentScrollTop(),a=window.innerHeight,o=t*((r+a-i)/(e+a));this._enabled?r<n&&i<r+a&&(this.$img[0].style.transform="translate3D(-50%, "+o+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Parallax}},{key:"_handleScroll",value:function(){for(var e=0;e<i._parallaxes.length;e++){var t=i._parallaxes[e];t._updateParallax.call(t)}}},{key:"_handleWindowResize",value:function(){for(var e=0;e<i._parallaxes.length;e++){var t=i._parallaxes[e];t._enabled=window.innerWidth>t.options.responsiveThreshold}}},{key:"defaults",get:function(){return t}}]),i}();n._parallaxes=[],M.Parallax=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"parallax","M_Parallax")}(cash),function(e,t){"use strict";var n={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return(i.el.M_Tabs=i).options=e.extend({},l.defaults,n),i.$tabLinks=i.$el.children("li.tab").children("a"),i.index=0,i._setupActiveTabLink(),i.options.swipeable?i._setupSwipeableTabs():i._setupNormalTabs(),i._setTabsAndTabWidth(),i._createIndicator(),i._setupEventHandlers(),i}return s(l,c),a(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),0!==this.tabWidth&&0!==this.tabsWidth&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(t){var n=this,i=e(t.target).closest("li.tab"),r=e(t.target).closest("a");if(r.length&&r.parent().hasClass("tab"))if(i.hasClass("disabled"))t.preventDefault();else if(!r.attr("target")){this.$activeTabLink.removeClass("active");var a=this.$content;this.$activeTabLink=r,this.$content=e(M.escapeHash(r[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var o=this.index;this.index=Math.max(this.$tabLinks.index(r),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,(function(){"function"==typeof n.options.onShow&&n.options.onShow.call(n,n.$content[0])})):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),"function"==typeof this.options.onShow&&this.options.onShow.call(this,this.$content[0]),a.length&&!a.is(this.$content)&&(a[0].style.display="none",a.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(o),t.preventDefault()}}},{key:"_createIndicator",value:function(){var e=this,t=document.createElement("li");t.classList.add("indicator"),this.el.appendChild(t),this._indicator=t,setTimeout((function(){e._indicator.style.left=e._calcLeftPos(e.$activeTabLink)+"px",e._indicator.style.right=e._calcRightPos(e.$activeTabLink)+"px"}),0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=e(this.$tabLinks.filter('[href="'+location.hash+'"]')),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),0===this.$activeTabLink.length&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=e(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var t=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var n=e();this.$tabLinks.each((function(t){var i=e(M.escapeHash(t.hash));i.addClass("carousel-item"),n=n.add(i)}));var i=e('<div class="tabs-content carousel carousel-slider"></div>');n.first().before(i),i.append(n),n[0].style.display="";var r=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(i[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(n){var i=t.index;t.index=e(n).index(),t.$activeTabLink.removeClass("active"),t.$activeTabLink=t.$tabLinks.eq(t.index),t.$activeTabLink.addClass("active"),t._animateIndicator(i),"function"==typeof t.options.onShow&&t.options.onShow.call(t,t.$content[0])}}),this._tabsCarousel.set(r)}},{key:"_teardownSwipeableTabs",value:function(){var e=this._tabsCarousel.$el;this._tabsCarousel.destroy(),e.after(e.children()),e.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each((function(t){if(t.hash){var n=e(M.escapeHash(t.hash));n.length&&(n[0].style.display="none")}}))}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each((function(t){if(t.hash){var n=e(M.escapeHash(t.hash));n.length&&(n[0].style.display="")}}))}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(e){return Math.ceil(this.tabsWidth-e.position().left-e[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(e){return Math.floor(e.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(e){var n=0,i=0;0<=this.index-e?n=90:i=90;var r={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:n},right:{value:this._calcRightPos(this.$activeTabLink),delay:i},duration:this.options.duration,easing:"easeOutQuad"};t.remove(this._indicator),t(r)}},{key:"select",value:function(e){var t=this.$tabLinks.filter('[href="#'+e+'"]');t.length&&t.trigger("click")}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Tabs}},{key:"defaults",get:function(){return n}}]),l}();M.Tabs=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"tabs","M_Tabs")}(cash,M.anime),function(e,t){"use strict";var n={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return(i.el.M_Tooltip=i).options=e.extend({},l.defaults,n),i.isOpen=!1,i.isHovered=!1,i.isFocused=!1,i._appendTooltipEl(),i._setupEventHandlers(),i}return s(l,c),a(l,[{key:"destroy",value:function(){e(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var e=document.createElement("div");e.classList.add("material-tooltip"),this.tooltipEl=e;var t=document.createElement("div");t.classList.add("tooltip-content"),t.innerHTML=this.options.html,e.appendChild(t),document.body.appendChild(e)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(t){this.isOpen||(t=void 0===t||void 0,this.isOpen=!0,this.options=e.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(t))}},{key:"close",value:function(){this.isOpen&&(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var e=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout((function(){e.isHovered||e.isFocused||e._animateOut()}),this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(e){var t=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout((function(){(t.isHovered||t.isFocused||e)&&t._animateIn()}),this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var t,n=this.el,i=this.tooltipEl,r=n.offsetHeight,a=n.offsetWidth,o=i.offsetHeight,s=i.offsetWidth,u=this.options.margin,l=void 0,c=void 0;this.xMovement=0,this.yMovement=0,l=n.getBoundingClientRect().top+M.getDocumentScrollTop(),c=n.getBoundingClientRect().left+M.getDocumentScrollLeft(),"top"===this.options.position?(l+=-o-u,c+=a/2-s/2,this.yMovement=-this.options.transitionMovement):"right"===this.options.position?(l+=r/2-o/2,c+=a+u,this.xMovement=this.options.transitionMovement):"left"===this.options.position?(l+=r/2-o/2,c+=-s-u,this.xMovement=-this.options.transitionMovement):(l+=r+u,c+=a/2-s/2,this.yMovement=this.options.transitionMovement),t=this._repositionWithinScreen(c,l,s,o),e(i).css({top:t.y+"px",left:t.x+"px"})}},{key:"_repositionWithinScreen",value:function(e,t,n,i){var r=M.getDocumentScrollLeft(),a=M.getDocumentScrollTop(),o=e-r,s=t-a,u={left:o,top:s,width:n,height:i},l=this.options.margin+this.options.transitionMovement,c=M.checkWithinContainer(document.body,u,l);return c.left?o=l:c.right&&(o-=o+n-window.innerWidth),c.top?s=l:c.bottom&&(s-=s+i-window.innerHeight),{x:o+r,y:s+a}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",t.remove(this.tooltipEl),t({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){t.remove(this.tooltipEl),t({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var e={},t=this.el.getAttribute("data-tooltip"),n=this.el.getAttribute("data-position");return t&&(e.html=t),n&&(e.position=n),e}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Tooltip}},{key:"defaults",get:function(){return n}}]),l}();M.Tooltip=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"tooltip","M_Tooltip")}(cash,M.anime),function(e){"use strict";var t=t||{},n=document.querySelectorAll.bind(document);function i(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t}var r={duration:750,show:function(e,t){if(2===e.button)return!1;var n=t||this,a=document.createElement("div");a.className="waves-ripple",n.appendChild(a);var o,s,u,l,c,h,d,f=(h={top:0,left:0},s=(d=(o=n)&&o.ownerDocument).documentElement,void 0!==o.getBoundingClientRect&&(h=o.getBoundingClientRect()),u=null!==(c=l=d)&&c===c.window?l:9===l.nodeType&&l.defaultView,{top:h.top+u.pageYOffset-s.clientTop,left:h.left+u.pageXOffset-s.clientLeft}),p=e.pageY-f.top,v=e.pageX-f.left,m="scale("+n.clientWidth/100*10+")";"touches"in e&&(p=e.touches[0].pageY-f.top,v=e.touches[0].pageX-f.left),a.setAttribute("data-hold",Date.now()),a.setAttribute("data-scale",m),a.setAttribute("data-x",v),a.setAttribute("data-y",p);var y={top:p+"px",left:v+"px"};a.className=a.className+" waves-notransition",a.setAttribute("style",i(y)),a.className=a.className.replace("waves-notransition",""),y["-webkit-transform"]=m,y["-moz-transform"]=m,y["-ms-transform"]=m,y["-o-transform"]=m,y.transform=m,y.opacity="1",y["-webkit-transition-duration"]=r.duration+"ms",y["-moz-transition-duration"]=r.duration+"ms",y["-o-transition-duration"]=r.duration+"ms",y["transition-duration"]=r.duration+"ms",y["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",y["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",y["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",y["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",a.setAttribute("style",i(y))},hide:function(e){a.touchup(e);var t=this,n=(t.clientWidth,null),o=t.getElementsByClassName("waves-ripple");if(!(0<o.length))return!1;var s=(n=o[o.length-1]).getAttribute("data-x"),u=n.getAttribute("data-y"),l=n.getAttribute("data-scale"),c=350-(Date.now()-Number(n.getAttribute("data-hold")));c<0&&(c=0),setTimeout((function(){var e={top:u+"px",left:s+"px",opacity:"0","-webkit-transition-duration":r.duration+"ms","-moz-transition-duration":r.duration+"ms","-o-transition-duration":r.duration+"ms","transition-duration":r.duration+"ms","-webkit-transform":l,"-moz-transform":l,"-ms-transform":l,"-o-transform":l,transform:l};n.setAttribute("style",i(e)),setTimeout((function(){try{t.removeChild(n)}catch(e){return!1}}),r.duration)}),c)},wrapInput:function(e){for(var t=0;t<e.length;t++){var n=e[t];if("input"===n.tagName.toLowerCase()){var i=n.parentNode;if("i"===i.tagName.toLowerCase()&&-1!==i.className.indexOf("waves-effect"))continue;var r=document.createElement("i");r.className=n.className+" waves-input-wrapper";var a=n.getAttribute("style");a||(a=""),r.setAttribute("style",a),n.className="waves-button-input",n.removeAttribute("style"),i.replaceChild(r,n),r.appendChild(n)}}}},a={touches:0,allowEvent:function(e){var t=!0;return"touchstart"===e.type?a.touches+=1:"touchend"===e.type||"touchcancel"===e.type?setTimeout((function(){0<a.touches&&(a.touches-=1)}),500):"mousedown"===e.type&&0<a.touches&&(t=!1),t},touchup:function(e){a.allowEvent(e)}};function o(t){var n=function(e){if(!1===a.allowEvent(e))return null;for(var t=null,n=e.target||e.srcElement;null!==n.parentNode;){if(!(n instanceof SVGElement)&&-1!==n.className.indexOf("waves-effect")){t=n;break}n=n.parentNode}return t}(t);null!==n&&(r.show(t,n),"ontouchstart"in e&&(n.addEventListener("touchend",r.hide,!1),n.addEventListener("touchcancel",r.hide,!1)),n.addEventListener("mouseup",r.hide,!1),n.addEventListener("mouseleave",r.hide,!1),n.addEventListener("dragend",r.hide,!1))}t.displayEffect=function(t){"duration"in(t=t||{})&&(r.duration=t.duration),r.wrapInput(n(".waves-effect")),"ontouchstart"in e&&document.body.addEventListener("touchstart",o,!1),document.body.addEventListener("mousedown",o,!1)},t.attach=function(t){"input"===t.tagName.toLowerCase()&&(r.wrapInput([t]),t=t.parentNode),"ontouchstart"in e&&t.addEventListener("touchstart",o,!1),t.addEventListener("mousedown",o,!1)},e.Waves=t,document.addEventListener("DOMContentLoaded",(function(){t.displayEffect()}),!1)}(window),function(e,t){"use strict";var n={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},i=function(){function i(t){u(this,i),this.options=e.extend({},i.defaults,t),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,0===i._toasts.length&&i._createContainer(),i._toasts.push(this);var n=this._createToast();(n.M_Toast=this).el=n,this.$el=e(n),this._animateIn(),this._setTimer()}return a(i,[{key:"_createToast",value:function(){var t=document.createElement("div");return t.classList.add("toast"),this.options.classes.length&&e(t).addClass(this.options.classes),("object"==typeof HTMLElement?this.message instanceof HTMLElement:this.message&&"object"==typeof this.message&&null!==this.message&&1===this.message.nodeType&&"string"==typeof this.message.nodeName)?t.appendChild(this.message):this.message.jquery?e(t).append(this.message[0]):t.innerHTML=this.message,i._container.appendChild(t),t}},{key:"_animateIn",value:function(){t({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var e=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval((function(){e.panning||(e.timeRemaining-=20),e.timeRemaining<=0&&e.dismiss()}),20))}},{key:"dismiss",value:function(){var e=this;window.clearInterval(this.counterInterval);var n=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+n+"px)",this.el.style.opacity=0),t({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){"function"==typeof e.options.completeCallback&&e.options.completeCallback(),e.$el.remove(),i._toasts.splice(i._toasts.indexOf(e),1),0===i._toasts.length&&i._removeContainer()}})}}],[{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Toast}},{key:"_createContainer",value:function(){var e=document.createElement("div");e.setAttribute("id","toast-container"),e.addEventListener("touchstart",i._onDragStart),e.addEventListener("touchmove",i._onDragMove),e.addEventListener("touchend",i._onDragEnd),e.addEventListener("mousedown",i._onDragStart),document.addEventListener("mousemove",i._onDragMove),document.addEventListener("mouseup",i._onDragEnd),document.body.appendChild(e),i._container=e}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",i._onDragMove),document.removeEventListener("mouseup",i._onDragEnd),e(i._container).remove(),i._container=null}},{key:"_onDragStart",value:function(t){if(t.target&&e(t.target).closest(".toast").length){var n=e(t.target).closest(".toast")[0].M_Toast;n.panning=!0,(i._draggedToast=n).el.classList.add("panning"),n.el.style.transition="",n.startingXPos=i._xPos(t),n.time=Date.now(),n.xPos=i._xPos(t)}}},{key:"_onDragMove",value:function(e){if(i._draggedToast){e.preventDefault();var t=i._draggedToast;t.deltaX=Math.abs(t.xPos-i._xPos(e)),t.xPos=i._xPos(e),t.velocityX=t.deltaX/(Date.now()-t.time),t.time=Date.now();var n=t.xPos-t.startingXPos,r=t.el.offsetWidth*t.options.activationPercent;t.el.style.transform="translateX("+n+"px)",t.el.style.opacity=1-Math.abs(n/r)}}},{key:"_onDragEnd",value:function(){if(i._draggedToast){var e=i._draggedToast;e.panning=!1,e.el.classList.remove("panning");var t=e.xPos-e.startingXPos,n=e.el.offsetWidth*e.options.activationPercent;Math.abs(t)>n||1<e.velocityX?(e.wasSwiped=!0,e.dismiss()):(e.el.style.transition="transform .2s, opacity .2s",e.el.style.transform="",e.el.style.opacity=""),i._draggedToast=null}}},{key:"_xPos",value:function(e){return e.targetTouches&&1<=e.targetTouches.length?e.targetTouches[0].clientX:e.clientX}},{key:"dismissAll",value:function(){for(var e in i._toasts)i._toasts[e].dismiss()}},{key:"defaults",get:function(){return n}}]),i}();i._toasts=[],i._container=null,i._draggedToast=null,M.Toast=i,M.toast=function(e){return new i(e)}}(cash,M.anime),function(e,t){"use strict";var n={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return(i.el.M_Sidenav=i).id=i.$el.attr("id"),i.options=e.extend({},l.defaults,n),i.isOpen=!1,i.isFixed=i.el.classList.contains("sidenav-fixed"),i.isDragged=!1,i.lastWindowWidth=window.innerWidth,i.lastWindowHeight=window.innerHeight,i._createOverlay(),i._createDragTarget(),i._setupEventHandlers(),i._setupClasses(),i._setupFixed(),l._sidenavs.push(i),i}return s(l,c),a(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var e=l._sidenavs.indexOf(this);0<=e&&l._sidenavs.splice(e,1)}},{key:"_createOverlay",value:function(){var e=document.createElement("div");this._closeBound=this.close.bind(this),e.classList.add("sidenav-overlay"),e.addEventListener("click",this._closeBound),document.body.appendChild(e),this._overlay=e}},{key:"_setupEventHandlers",value:function(){0===l._sidenavs.length&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){1===l._sidenavs.length&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(t){var n=e(t.target).closest(".sidenav-trigger");if(t.target&&n.length){var i=M.getIdFromTrigger(n[0]),r=document.getElementById(i).M_Sidenav;r&&r.open(n),t.preventDefault()}}},{key:"_startDrag",value:function(e){var n=e.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=n,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,t.remove(this.el),t.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(e){var t=e.targetTouches[0].clientX,n=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-t),this._xPos=t,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==n&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(e){if(this.options.draggable&&!this._isCurrentlyFixed()&&!this._verticallyScrolling){this.isDragged||this._startDrag(e),this._dragMoveUpdate(e);var t=this._xPos-this._startingXpos,n=0<t?"right":"left";t=Math.min(this._width,Math.abs(t)),this.options.edge===n&&(t=0);var i=t,r="translateX(-100%)";"right"===this.options.edge&&(r="translateX(100%)",i=-i),this.percentOpen=Math.min(1,t/this._width),this.el.style.transform=r+" translateX("+i+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(.2<this.percentOpen?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(e){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(e),this._dragMoveUpdate(e);var t=this._xPos-this._startingXpos,n=0<t?"right":"left";t=Math.min(this._width,Math.abs(t)),this.options.edge!==n&&(t=0);var i=-t;"right"===this.options.edge&&(i=-i),this.percentOpen=Math.min(1,1-t/this._width),this.el.style.transform="translateX("+i+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(.8<this.percentOpen?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(t){e(t.target).closest(".sidenav-close").length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(992<window.innerWidth?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){"right"===this.options.edge&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&992<window.innerWidth}},{key:"_createDragTarget",value:function(){var e=document.createElement("div");e.classList.add("drag-target"),document.body.appendChild(e),this.dragTarget=e}},{key:"_preventBodyScrolling",value:function(){document.body.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){document.body.style.overflow=""}},{key:"open",value:function(){!0!==this.isOpen&&(this.isOpen=!0,"function"==typeof this.options.onOpenStart&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(t.remove(this.el),t({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),this.isDragged&&1==this.percentOpen||this._animateIn()))}},{key:"close",value:function(){if(!1!==this.isOpen)if(this.isOpen=!1,"function"==typeof this.options.onCloseStart&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){var e="left"===this.options.edge?"-105%":"105%";this.el.style.transform="translateX("+e+")"}else this._enableBodyScrolling(),this.isDragged&&0==this.percentOpen?this._overlay.style.display="none":this._animateOut()}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var e=this,n="left"===this.options.edge?-1:1;this.isDragged&&(n="left"===this.options.edge?n+this.percentOpen:n-this.percentOpen),t.remove(this.el),t({targets:this.el,translateX:[100*n+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){"function"==typeof e.options.onOpenEnd&&e.options.onOpenEnd.call(e,e.el)}})}},{key:"_animateOverlayIn",value:function(){var n=0;this.isDragged?n=this.percentOpen:e(this._overlay).css({display:"block"}),t.remove(this._overlay),t({targets:this._overlay,opacity:[n,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var e=this,n="left"===this.options.edge?-1:1,i=0;this.isDragged&&(i="left"===this.options.edge?n+this.percentOpen:n-this.percentOpen),t.remove(this.el),t({targets:this.el,translateX:[100*i+"%",105*n+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e,e.el)}})}},{key:"_animateOverlayOut",value:function(){var n=this;t.remove(this._overlay),t({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){e(n._overlay).css("display","none")}})}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Sidenav}},{key:"defaults",get:function(){return n}}]),l}();i._sidenavs=[],M.Sidenav=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"sidenav","M_Sidenav")}(cash,M.anime),function(e,t){"use strict";var n={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(e){return'a[href="#'+e+'"]'}},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return(i.el.M_ScrollSpy=i).options=e.extend({},l.defaults,n),l._elements.push(i),l._count++,l._increment++,i.tickId=-1,i.id=l._increment,i._setupEventHandlers(),i._handleWindowScroll(),i}return s(l,c),a(l,[{key:"destroy",value:function(){l._elements.splice(l._elements.indexOf(this),1),l._elementsInView.splice(l._elementsInView.indexOf(this),1),l._visibleElements.splice(l._visibleElements.indexOf(this.$el),1),l._count--,this._removeEventHandlers(),e(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var e=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=e.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),1===l._count&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){0===l._count&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(n){for(var i=e(n.target),r=l._elements.length-1;0<=r;r--){var a=l._elements[r];if(i.is('a[href="#'+a.$el.attr("id")+'"]')){n.preventDefault();var o=a.$el.offset().top+1;t({targets:[document.documentElement,document.body],scrollTop:o-a.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){l._ticks++;for(var e=M.getDocumentScrollTop(),t=M.getDocumentScrollLeft(),n=t+window.innerWidth,i=e+window.innerHeight,r=l._findElements(e,n,i,t),a=0;a<r.length;a++){var o=r[a];o.tickId<0&&o._enter(),o.tickId=l._ticks}for(var s=0;s<l._elementsInView.length;s++){var u=l._elementsInView[s],c=u.tickId;0<=c&&c!==l._ticks&&(u._exit(),u.tickId=-1)}l._elementsInView=r}},{key:"_enter",value:function(){(l._visibleElements=l._visibleElements.filter((function(e){return 0!=e.height()})))[0]?(e(this.options.getActiveElement(l._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),l._visibleElements[0][0].M_ScrollSpy&&this.id<l._visibleElements[0][0].M_ScrollSpy.id?l._visibleElements.unshift(this.$el):l._visibleElements.push(this.$el)):l._visibleElements.push(this.$el),e(this.options.getActiveElement(l._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var t=this;(l._visibleElements=l._visibleElements.filter((function(e){return 0!=e.height()})))[0]&&(e(this.options.getActiveElement(l._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),(l._visibleElements=l._visibleElements.filter((function(e){return e.attr("id")!=t.$el.attr("id")})))[0]&&e(this.options.getActiveElement(l._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_ScrollSpy}},{key:"_findElements",value:function(e,t,n,i){for(var r=[],a=0;a<l._elements.length;a++){var o=l._elements[a],s=e+o.options.scrollOffset||200;if(0<o.$el.height()){var u=o.$el.offset().top,c=o.$el.offset().left,h=c+o.$el.width(),d=u+o.$el.height();!(t<c||h<i||n<u||d<s)&&r.push(o)}}return r}},{key:"defaults",get:function(){return n}}]),l}();i._elements=[],i._elementsInView=[],i._visibleElements=[],i._count=0,i._increment=0,i._ticks=0,M.ScrollSpy=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(e){"use strict";var t={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(e,t,n){return e.indexOf(n)-t.indexOf(n)}},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return(r.el.M_Autocomplete=r).options=e.extend({},i.defaults,n),r.isOpen=!1,r.count=0,r.activeIndex=-1,r.oldVal,r.$inputField=r.$el.closest(".input-field"),r.$active=e(),r._mousedown=!1,r._setupDropdown(),r._setupEventHandlers(),r}return s(i,c),a(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),void 0!==window.ontouchstart&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),void 0!==window.ontouchstart&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var t=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),e(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(n){t.selectOption(e(n))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(e){"keyup"===e.type&&(i._keydown=!1),this.count=0;var t=this.el.value.toLowerCase();13!==e.keyCode&&38!==e.keyCode&&40!==e.keyCode&&(this.oldVal===t||!M.tabPressed&&"focus"===e.type||this.open(),this.oldVal=t)}},{key:"_handleInputKeydown",value:function(t){i._keydown=!0;var n=t.keyCode,r=void 0,a=e(this.container).children("li").length;n===M.keys.ENTER&&0<=this.activeIndex?(r=e(this.container).children("li").eq(this.activeIndex)).length&&(this.selectOption(r),t.preventDefault()):n!==M.keys.ARROW_UP&&n!==M.keys.ARROW_DOWN||(t.preventDefault(),n===M.keys.ARROW_UP&&0<this.activeIndex&&this.activeIndex--,n===M.keys.ARROW_DOWN&&this.activeIndex<a-1&&this.activeIndex++,this.$active.removeClass("active"),0<=this.activeIndex&&(this.$active=e(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(e){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(e){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(e){this._mousedown=!1}},{key:"_highlight",value:function(e,t){var n=t.find("img"),i=t.text().toLowerCase().indexOf(""+e.toLowerCase()),r=i+e.length-1,a=t.text().slice(0,i),o=t.text().slice(i,r+1),s=t.text().slice(r+1);t.html("<span>"+a+"<span class='highlight'>"+o+"</span>"+s+"</span>"),n.length&&t.prepend(n)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){e(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(e){var t=e.text().trim();this.el.value=t,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),"function"==typeof this.options.onAutocomplete&&this.options.onAutocomplete.call(this,t)}},{key:"_renderDropdown",value:function(t,n){var i=this;this._resetAutocomplete();var r=[];for(var a in t)if(t.hasOwnProperty(a)&&-1!==a.toLowerCase().indexOf(n)){if(this.count>=this.options.limit)break;var o={data:t[a],key:a};r.push(o),this.count++}this.options.sortFunction&&r.sort((function(e,t){return i.options.sortFunction(e.key.toLowerCase(),t.key.toLowerCase(),n.toLowerCase())}));for(var s=0;s<r.length;s++){var u=r[s],l=e("<li></li>");u.data?l.append('<img src="'+u.data+'" class="right circle"><span>'+u.key+"</span>"):l.append("<span>"+u.key+"</span>"),e(this.container).append(l),this._highlight(n,l)}}},{key:"open",value:function(){var e=this.el.value.toLowerCase();this._resetAutocomplete(),e.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,e)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(e){var t=this.el.value.toLowerCase();this.options.data=e,this.isOpen&&this._renderDropdown(e,t)}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Autocomplete}},{key:"defaults",get:function(){return t}}]),i}();n._keydown=!1,M.Autocomplete=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"autocomplete","M_Autocomplete")}(cash),v=cash,M.updateTextFields=function(){v("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea").each((function(e,t){var n=v(this);0<e.value.length||v(e).is(":focus")||e.autofocus||null!==n.attr("placeholder")?n.siblings("label").addClass("active"):e.validity?n.siblings("label").toggleClass("active",!0===e.validity.badInput):n.siblings("label").removeClass("active")}))},M.validate_field=function(e){var t=null!==e.attr("data-length"),n=parseInt(e.attr("data-length")),i=e[0].value.length;0!==i||!1!==e[0].validity.badInput||e.is(":required")?e.hasClass("validate")&&(e.is(":valid")&&t&&i<=n||e.is(":valid")&&!t?(e.removeClass("invalid"),e.addClass("valid")):(e.removeClass("valid"),e.addClass("invalid"))):e.hasClass("validate")&&(e.removeClass("valid"),e.removeClass("invalid"))},M.textareaAutoResize=function(e){if(e instanceof Element&&(e=v(e)),e.length){var t=v(".hiddendiv").first();t.length||(t=v('<div class="hiddendiv common"></div>'),v("body").append(t));var n=e.css("font-family"),i=e.css("font-size"),r=e.css("line-height"),a=e.css("padding-top"),o=e.css("padding-right"),s=e.css("padding-bottom"),u=e.css("padding-left");i&&t.css("font-size",i),n&&t.css("font-family",n),r&&t.css("line-height",r),a&&t.css("padding-top",a),o&&t.css("padding-right",o),s&&t.css("padding-bottom",s),u&&t.css("padding-left",u),e.data("original-height")||e.data("original-height",e.height()),"off"===e.attr("wrap")&&t.css("overflow-wrap","normal").css("white-space","pre"),t.text(e[0].value+"\n");var l=t.html().replace(/\n/g,"<br>");t.html(l),0<e[0].offsetWidth&&0<e[0].offsetHeight?t.css("width",e.width()+"px"):t.css("width",window.innerWidth/2+"px"),e.data("original-height")<=t.innerHeight()?e.css("height",t.innerHeight()+"px"):e[0].value.length<e.data("previous-length")&&e.css("height",e.data("original-height")+"px"),e.data("previous-length",e[0].value.length)}else console.error("No textarea element found")},v(document).ready((function(){var e="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";v(document).on("change",e,(function(){0===this.value.length&&null===v(this).attr("placeholder")||v(this).siblings("label").addClass("active"),M.validate_field(v(this))})),v(document).ready((function(){M.updateTextFields()})),v(document).on("reset",(function(t){var n=v(t.target);n.is("form")&&(n.find(e).removeClass("valid").removeClass("invalid"),n.find(e).each((function(e){this.value.length&&v(this).siblings("label").removeClass("active")})),setTimeout((function(){n.find("select").each((function(){this.M_FormSelect&&v(this).trigger("change")}))}),0))})),document.addEventListener("focus",(function(t){v(t.target).is(e)&&v(t.target).siblings("label, .prefix").addClass("active")}),!0),document.addEventListener("blur",(function(t){var n=v(t.target);if(n.is(e)){var i=".prefix";0===n[0].value.length&&!0!==n[0].validity.badInput&&null===n.attr("placeholder")&&(i+=", label"),n.siblings(i).removeClass("active"),M.validate_field(n)}}),!0),v(document).on("keyup","input[type=radio], input[type=checkbox]",(function(e){if(e.which===M.keys.TAB)return v(this).addClass("tabbed"),void v(this).one("blur",(function(e){v(this).removeClass("tabbed")}))}));var t=".materialize-textarea";v(t).each((function(){var e=v(this);e.data("original-height",e.height()),e.data("previous-length",this.value.length),M.textareaAutoResize(e)})),v(document).on("keyup",t,(function(){M.textareaAutoResize(v(this))})),v(document).on("keydown",t,(function(){M.textareaAutoResize(v(this))})),v(document).on("change",'.file-field input[type="file"]',(function(){for(var e=v(this).closest(".file-field").find("input.file-path"),t=v(this)[0].files,n=[],i=0;i<t.length;i++)n.push(t[i].name);e[0].value=n.join(", "),e.trigger("change")}))})),function(e,t){"use strict";var n={indicators:!0,height:400,duration:500,interval:6e3},i=function(i){function l(n,i){u(this,l);var r=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,n,i));return(r.el.M_Slider=r).options=e.extend({},l.defaults,i),r.$slider=r.$el.find(".slides"),r.$slides=r.$slider.children("li"),r.activeIndex=r.$slides.filter((function(t){return e(t).hasClass("active")})).first().index(),-1!=r.activeIndex&&(r.$active=r.$slides.eq(r.activeIndex)),r._setSliderHeight(),r.$slides.find(".caption").each((function(e){r._animateCaptionIn(e,0)})),r.$slides.find("img").each((function(t){var n="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";e(t).attr("src")!==n&&(e(t).css("background-image",'url("'+e(t).attr("src")+'")'),e(t).attr("src",n))})),r._setupIndicators(),r.$active?r.$active.css("display","block"):(r.$slides.first().addClass("active"),t({targets:r.$slides.first()[0],opacity:1,duration:r.options.duration,easing:"easeOutQuad"}),r.activeIndex=0,r.$active=r.$slides.eq(r.activeIndex),r.options.indicators&&r.$indicators.eq(r.activeIndex).addClass("active")),r.$active.find("img").each((function(e){t({targets:r.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:r.options.duration,easing:"easeOutQuad"})})),r._setupEventHandlers(),r.start(),r}return s(l,c),a(l,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each((function(t){t.addEventListener("click",e._handleIndicatorClickBound)}))}},{key:"_removeEventHandlers",value:function(){var e=this;this.options.indicators&&this.$indicators.each((function(t){t.removeEventListener("click",e._handleIndicatorClickBound)}))}},{key:"_handleIndicatorClick",value:function(t){var n=e(t.target).index();this.set(n)}},{key:"_handleInterval",value:function(){var e=this.$slider.find(".active").index();this.$slides.length===e+1?e=0:e+=1,this.set(e)}},{key:"_animateCaptionIn",value:function(n,i){var r={targets:n,opacity:0,duration:i,easing:"easeOutQuad"};e(n).hasClass("center-align")?r.translateY=-100:e(n).hasClass("right-align")?r.translateX=100:e(n).hasClass("left-align")&&(r.translateX=-100),t(r)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var t=this;this.options.indicators&&(this.$indicators=e('<ul class="indicators"></ul>'),this.$slides.each((function(n,i){var r=e('<li class="indicator-item"></li>');t.$indicators.append(r[0])})),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(e){var n=this;if(e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.activeIndex!=e){this.$active=this.$slides.eq(this.activeIndex);var i=this.$active.find(".caption");this.$active.removeClass("active"),t({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){n.$slides.not(".active").each((function(e){t({targets:e,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})}))}}),this._animateCaptionIn(i[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(e).addClass("active")),t({targets:this.$slides.eq(e)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),t({targets:this.$slides.eq(e).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(e).addClass("active"),this.activeIndex=e,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var e=this.activeIndex+1;e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.set(e)}},{key:"prev",value:function(){var e=this.activeIndex-1;e>=this.$slides.length?e=0:e<0&&(e=this.$slides.length-1),this.set(e)}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Slider}},{key:"defaults",get:function(){return n}}]),l}();M.Slider=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"slider","M_Slider")}(cash,M.anime),f=cash,p=M.anime,f(document).on("click",".card",(function(e){if(f(this).children(".card-reveal").length){var t=f(e.target).closest(".card");void 0===t.data("initialOverflow")&&t.data("initialOverflow",void 0===t.css("overflow")?"":t.css("overflow"));var n=f(this).find(".card-reveal");f(e.target).is(f(".card-reveal .card-title"))||f(e.target).is(f(".card-reveal .card-title i"))?p({targets:n[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(e){var n=e.animatables[0].target;f(n).css({display:"none"}),t.css("overflow",t.data("initialOverflow"))}}):(f(e.target).is(f(".card .activator"))||f(e.target).is(f(".card .activator i")))&&(t.css("overflow","hidden"),n.css({display:"block"}),p({targets:n[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}})),function(e){"use strict";var t={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return(r.el.M_Chips=r).options=e.extend({},i.defaults,n),r.$el.addClass("chips input-field"),r.chipsData=[],r.$chips=e(),r._setupInput(),r.hasAutocomplete=0<Object.keys(r.options.autocompleteOptions).length,r.$input.attr("id")||r.$input.attr("id",M.guid()),r.options.data.length&&(r.chipsData=r.options.data,r._renderChips(r.chipsData)),r.hasAutocomplete&&r._setupAutocomplete(),r._setPlaceholder(),r._setupLabel(),r._setupEventHandlers(),r}return s(i,c),a(i,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",i._handleChipsKeydown),document.addEventListener("keyup",i._handleChipsKeyup),this.el.addEventListener("blur",i._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",i._handleChipsKeydown),document.removeEventListener("keyup",i._handleChipsKeyup),this.el.removeEventListener("blur",i._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(t){var n=e(t.target).closest(".chip"),i=e(t.target).is(".close");if(n.length){var r=n.index();i?(this.deleteChip(r),this.$input[0].focus()):this.selectChip(r)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(e){if(i._keydown=!0,13===e.keyCode){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;e.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else 8!==e.keyCode&&37!==e.keyCode||""!==this.$input[0].value||!this.chipsData.length||(e.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(t){if(t.tag){var n=document.createElement("div"),i=document.createElement("i");if(n.classList.add("chip"),n.textContent=t.tag,n.setAttribute("tabindex",0),e(i).addClass("material-icons close"),i.textContent="close",t.image){var r=document.createElement("img");r.setAttribute("src",t.image),n.insertBefore(r,n.firstChild)}return n.appendChild(i),n}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var e=0;e<this.chipsData.length;e++){var t=this._renderChip(this.chipsData[e]);this.$el.append(t),this.$chips.add(t)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var e=this;this.options.autocompleteOptions.onAutocomplete=function(t){e.addChip({tag:t}),e.$input[0].value="",e.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=e("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){void 0!==this.chipsData&&!this.chipsData.length&&this.options.placeholder?e(this.$input).prop("placeholder",this.options.placeholder):(void 0===this.chipsData||this.chipsData.length)&&this.options.secondaryPlaceholder&&e(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(e){if(e.hasOwnProperty("tag")&&""!==e.tag){for(var t=!1,n=0;n<this.chipsData.length;n++)if(this.chipsData[n].tag===e.tag){t=!0;break}return!t}return!1}},{key:"addChip",value:function(t){if(this._isValid(t)&&!(this.chipsData.length>=this.options.limit)){var n=this._renderChip(t);this.$chips.add(n),this.chipsData.push(t),e(this.$input).before(n),this._setPlaceholder(),"function"==typeof this.options.onChipAdd&&this.options.onChipAdd.call(this,this.$el,n)}}},{key:"deleteChip",value:function(t){var n=this.$chips.eq(t);this.$chips.eq(t).remove(),this.$chips=this.$chips.filter((function(t){return 0<=e(t).index()})),this.chipsData.splice(t,1),this._setPlaceholder(),"function"==typeof this.options.onChipDelete&&this.options.onChipDelete.call(this,this.$el,n[0])}},{key:"selectChip",value:function(e){var t=this.$chips.eq(e);(this._selectedChip=t)[0].focus(),"function"==typeof this.options.onChipSelect&&this.options.onChipSelect.call(this,this.$el,t[0])}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Chips}},{key:"_handleChipsKeydown",value:function(t){i._keydown=!0;var n=e(t.target).closest(".chips"),r=t.target&&n.length;if(!e(t.target).is("input, textarea")&&r){var a=n[0].M_Chips;if(8===t.keyCode||46===t.keyCode){t.preventDefault();var o=a.chipsData.length;if(a._selectedChip){var s=a._selectedChip.index();a.deleteChip(s),a._selectedChip=null,o=Math.max(s-1,0)}a.chipsData.length&&a.selectChip(o)}else if(37===t.keyCode){if(a._selectedChip){var u=a._selectedChip.index()-1;if(u<0)return;a.selectChip(u)}}else if(39===t.keyCode&&a._selectedChip){var l=a._selectedChip.index()+1;l>=a.chipsData.length?a.$input[0].focus():a.selectChip(l)}}}},{key:"_handleChipsKeyup",value:function(e){i._keydown=!1}},{key:"_handleChipsBlur",value:function(t){i._keydown||(e(t.target).closest(".chips")[0].M_Chips._selectedChip=null)}},{key:"defaults",get:function(){return t}}]),i}();n._keydown=!1,M.Chips=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"chips","M_Chips"),e(document).ready((function(){e(document.body).on("click",".chip .close",(function(){var t=e(this).closest(".chips");t.length&&t[0].M_Chips||e(this).closest(".chip").remove()}))}))}(cash),function(e){"use strict";var t={top:0,bottom:1/0,offset:0,onPositionChange:null},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return(r.el.M_Pushpin=r).options=e.extend({},i.defaults,n),r.originalOffset=r.el.offsetTop,i._pushpins.push(r),r._setupEventHandlers(),r._updatePosition(),r}return s(i,c),a(i,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var e=i._pushpins.indexOf(this);i._pushpins.splice(e,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",i._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",i._updateElements)}},{key:"_updatePosition",value:function(){var e=M.getDocumentScrollTop()+this.options.offset;this.options.top<=e&&this.options.bottom>=e&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),"function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pinned")),e<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),"function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-top")),e>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px","function"==typeof this.options.onPositionChange&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Pushpin}},{key:"_updateElements",value:function(){for(var e in i._pushpins)i._pushpins[e]._updatePosition()}},{key:"defaults",get:function(){return t}}]),i}();n._pushpins=[],M.Pushpin=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"pushpin","M_Pushpin")}(cash),function(e,t){"use strict";var n={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};e.fn.reverse=[].reverse;var i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return(i.el.M_FloatingActionButton=i).options=e.extend({},l.defaults,n),i.isOpen=!1,i.$anchor=i.$el.children("a").first(),i.$menu=i.$el.children("ul").first(),i.$floatingBtns=i.$el.find("ul .btn-floating"),i.$floatingBtnsReverse=i.$el.find("ul .btn-floating").reverse(),i.offsetY=0,i.offsetX=0,i.$el.addClass("direction-"+i.options.direction),"top"===i.options.direction?i.offsetY=40:"right"===i.options.direction?i.offsetX=-40:"bottom"===i.options.direction?i.offsetY=-40:i.offsetX=40,i._setupEventHandlers(),i}return s(l,c),a(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(t){e(t.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){this.isOpen&&(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var e=this;this.$el.addClass("active");var n=0;this.$floatingBtnsReverse.each((function(i){t({targets:i,opacity:1,scale:[.4,1],translateY:[e.offsetY,0],translateX:[e.offsetX,0],duration:275,delay:n,easing:"easeInOutQuad"}),n+=40}))}},{key:"_animateOutFAB",value:function(){var e=this;this.$floatingBtnsReverse.each((function(n){t.remove(n),t({targets:n,opacity:0,scale:.4,translateY:e.offsetY,translateX:e.offsetX,duration:175,easing:"easeOutQuad",complete:function(){e.$el.removeClass("active")}})}))}},{key:"_animateInToolbar",value:function(){var t,n=this,i=window.innerWidth,r=window.innerHeight,a=this.el.getBoundingClientRect(),o=e('<div class="fab-backdrop"></div>'),s=this.$anchor.css("background-color");this.$anchor.append(o),this.offsetX=a.left-i/2+a.width/2,this.offsetY=r-a.bottom,t=i/o[0].clientWidth,this.btnBottom=a.bottom,this.btnLeft=a.left,this.btnWidth=a.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),o.css({"background-color":s}),setTimeout((function(){n.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),n.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout((function(){n.$el.css({overflow:"hidden","background-color":s}),o.css({transform:"scale("+t+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),n.$menu.children("li").children("a").css({opacity:1}),n._handleDocumentClickBound=n._handleDocumentClick.bind(n),window.addEventListener("scroll",n._handleCloseBound,!0),document.body.addEventListener("click",n._handleDocumentClickBound,!0)}),100)}),0)}},{key:"_animateOutToolbar",value:function(){var e=this,t=window.innerWidth,n=window.innerHeight,i=this.$el.find(".fab-backdrop"),r=this.$anchor.css("background-color");this.offsetX=this.btnLeft-t/2+this.btnWidth/2,this.offsetY=n-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),i.css({transform:"scale(0)","background-color":r}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout((function(){i.remove(),e.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-e.offsetX+"px,0,0)"}),e.$anchor.css({overflow:"",transform:"translate3d(0,"+e.offsetY+"px,0)"}),setTimeout((function(){e.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),e.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})}),20)}),200)}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_FloatingActionButton}},{key:"defaults",get:function(){return n}}]),l}();M.FloatingActionButton=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(e){"use strict";var t={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"\u2039",nextMonth:"\u203a",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));(r.el.M_Datepicker=r).options=e.extend({},i.defaults,n),n&&n.hasOwnProperty("i18n")&&"object"==typeof n.i18n&&(r.options.i18n=e.extend({},i.defaults.i18n,n.i18n)),r.options.minDate&&r.options.minDate.setHours(0,0,0,0),r.options.maxDate&&r.options.maxDate.setHours(0,0,0,0),r.id=M.guid(),r._setupVariables(),r._insertHTMLIntoDOM(),r._setupModal(),r._setupEventHandlers(),r.options.defaultDate||(r.options.defaultDate=new Date(Date.parse(r.el.value)));var a=r.options.defaultDate;return i._isDate(a)?r.options.setDefaultDate?(r.setDate(a,!0),r.setInputValue()):r.gotoDate(a):r.gotoDate(new Date),r.isOpen=!1,r}return s(i,c),a(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),e(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var e=this.calendarEl.querySelector(".orig-select-year");e&&M.FormSelect.getInstance(e).destroy();var t=this.calendarEl.querySelector(".orig-select-month");t&&M.FormSelect.getInstance(t).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(e(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var e=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){e.isOpen=!1}})}},{key:"toString",value:function(e){var t=this;return e=e||this.options.format,i._isDate(this.date)?e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g).map((function(e){return t.formats[e]?t.formats[e]():e})).join(""):""}},{key:"setDate",value:function(e,t){if(!e)return this.date=null,this._renderDateDisplay(),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),i._isDate(e)){var n=this.options.minDate,r=this.options.maxDate;i._isDate(n)&&e<n?e=n:i._isDate(r)&&r<e&&(e=r),this.date=new Date(e.getTime()),this._renderDateDisplay(),i._setToStartOfDay(this.date),this.gotoDate(this.date),t||"function"!=typeof this.options.onSelect||this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var e=i._isDate(this.date)?this.date:new Date,t=this.options.i18n,n=t.weekdaysShort[e.getDay()],r=t.monthsShort[e.getMonth()],a=e.getDate();this.yearTextEl.innerHTML=e.getFullYear(),this.dateTextEl.innerHTML=n+", "+r+" "+a}},{key:"gotoDate",value:function(e){var t=!0;if(i._isDate(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),r=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),a=e.getTime();r.setMonth(r.getMonth()+1),r.setDate(r.getDate()-1),t=a<n.getTime()||r.getTime()<a}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),11<e.month&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(e,t,n){var r=this.options,a=new Date,o=i._getDaysInMonth(e,t),s=new Date(e,t,1).getDay(),u=[],l=[];i._setToStartOfDay(a),0<r.firstDay&&(s-=r.firstDay)<0&&(s+=7);for(var c=0===t?11:t-1,h=11===t?0:t+1,d=0===t?e-1:e,f=11===t?e+1:e,p=i._getDaysInMonth(d,c),v=o+s,m=v;7<m;)m-=7;v+=7-m;for(var y=!1,g=0,_=0;g<v;g++){var k=new Date(e,t,g-s+1),w=!!i._isDate(this.date)&&i._compareDates(k,this.date),b=i._compareDates(k,a),x=-1!==r.events.indexOf(k.toDateString()),E=g<s||o+s<=g,C=g-s+1,T=t,I=e,S=r.startRange&&i._compareDates(r.startRange,k),O=r.endRange&&i._compareDates(r.endRange,k),A=r.startRange&&r.endRange&&r.startRange<k&&k<r.endRange;E&&(g<s?(C=p+C,T=c,I=d):(C-=o,T=h,I=f));var D={day:C,month:T,year:I,hasEvent:x,isSelected:w,isToday:b,isDisabled:r.minDate&&k<r.minDate||r.maxDate&&k>r.maxDate||r.disableWeekends&&i._isWeekend(k)||r.disableDayFn&&r.disableDayFn(k),isEmpty:E,isStartRange:S,isEndRange:O,isInRange:A,showDaysInNextAndPreviousMonths:r.showDaysInNextAndPreviousMonths};l.push(this.renderDay(D)),7==++_&&(u.push(this.renderRow(l,r.isRTL,y)),_=0,y=!(l=[]))}return this.renderTable(r,u,n)}},{key:"renderDay",value:function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month"),t.push("is-selection-disabled")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),n="true"),e.hasEvent&&t.push("has-event"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"><button class="datepicker-day-button" type="button" data-year="'+e.year+'" data-month="'+e.month+'" data-day="'+e.day+'">'+e.day+"</button></td>"}},{key:"renderRow",value:function(e,t,n){return'<tr class="datepicker-row'+(n?" is-selected":"")+'">'+(t?e.reverse():e).join("")+"</tr>"}},{key:"renderTable",value:function(e,t,n){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+n+'">'+this.renderHead(e)+this.renderBody(t)+"</table></div>"}},{key:"renderHead",value:function(e){var t=void 0,n=[];for(t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+this.renderDayName(e,t)+'">'+this.renderDayName(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?n.reverse():n).join("")+"</tr></thead>"}},{key:"renderBody",value:function(e){return"<tbody>"+e.join("")+"</tbody>"}},{key:"renderTitle",value:function(t,n,i,r,a,o){var s,u,l=void 0,c=void 0,h=void 0,d=this.options,f=i===d.minYear,p=i===d.maxYear,v='<div id="'+o+'" class="datepicker-controls" role="heading" aria-live="assertive">',m=!0,y=!0;for(h=[],l=0;l<12;l++)h.push('<option value="'+(i===a?l-n:12+l-n)+'"'+(l===r?' selected="selected"':"")+(f&&l<d.minMonth||p&&l>d.maxMonth?'disabled="disabled"':"")+">"+d.i18n.months[l]+"</option>");for(s='<select class="datepicker-select orig-select-month" tabindex="-1">'+h.join("")+"</select>",e.isArray(d.yearRange)?(l=d.yearRange[0],c=d.yearRange[1]+1):(l=i-d.yearRange,c=1+i+d.yearRange),h=[];l<c&&l<=d.maxYear;l++)l>=d.minYear&&h.push('<option value="'+l+'" '+(l===i?'selected="selected"':"")+">"+l+"</option>");return u='<select class="datepicker-select orig-select-year" tabindex="-1">'+h.join("")+"</select>",v+='<button class="month-prev'+(m?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></button>',v+='<div class="selects-container">',d.showMonthAfterYear?v+=u+s:v+=s+u,v+="</div>",f&&(0===r||d.minMonth>=r)&&(m=!1),p&&(11===r||d.maxMonth<=r)&&(y=!1),(v+='<button class="month-next'+(y?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></button>')+"</div>"}},{key:"draw",value:function(e){if(this.isOpen||e){var t,n=this.options,i=n.minYear,r=n.maxYear,a=n.minMonth,o=n.maxMonth,s="";this._y<=i&&(this._y=i,!isNaN(a)&&this._m<a&&(this._m=a)),this._y>=r&&(this._y=r,!isNaN(o)&&this._m>o&&(this._m=o)),t="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var u=0;u<1;u++)this._renderDateDisplay(),s+=this.renderTitle(this,u,this.calendars[u].year,this.calendars[u].month,this.calendars[0].year,t)+this.render(this.calendars[u].year,this.calendars[u].month,t);this.destroySelects(),this.calendarEl.innerHTML=s;var l=this.calendarEl.querySelector(".orig-select-year"),c=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(l,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(c,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),l.addEventListener("change",this._handleYearChange.bind(this)),c.addEventListener("change",this._handleMonthChange.bind(this)),"function"==typeof this.options.onDraw&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var t=this;this.$modalEl=e(i._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return t.date.getDate()},dd:function(){var e=t.date.getDate();return(e<10?"0":"")+e},ddd:function(){return t.options.i18n.weekdaysShort[t.date.getDay()]},dddd:function(){return t.options.i18n.weekdays[t.date.getDay()]},m:function(){return t.date.getMonth()+1},mm:function(){var e=t.date.getMonth()+1;return(e<10?"0":"")+e},mmm:function(){return t.options.i18n.monthsShort[t.date.getMonth()]},mmmm:function(){return t.options.i18n.months[t.date.getMonth()]},yy:function(){return(""+t.date.getFullYear()).slice(2)},yyyy:function(){return t.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(e){e.which===M.keys.ENTER&&(e.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(t){if(this.isOpen){var n=e(t.target);n.hasClass("is-disabled")||(!n.hasClass("datepicker-day-button")||n.hasClass("is-empty")||n.parent().hasClass("is-disabled")?n.closest(".month-prev").length?this.prevMonth():n.closest(".month-next").length&&this.nextMonth():(this.setDate(new Date(t.target.getAttribute("data-year"),t.target.getAttribute("data-month"),t.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()))}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(e){this.gotoMonth(e.target.value)}},{key:"_handleYearChange",value:function(e){this.gotoYear(e.target.value)}},{key:"gotoMonth",value:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())}},{key:"gotoYear",value:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(e){var t=void 0;e.firedBy!==this&&(t=this.options.parse?this.options.parse(this.el.value,this.options.format):new Date(Date.parse(this.el.value)),i._isDate(t)&&this.setDate(t))}},{key:"renderDayName",value:function(e,t,n){for(t+=e.firstDay;7<=t;)t-=7;return n?e.i18n.weekdaysAbbrev[t]:e.i18n.weekdays[t]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,"function"==typeof this.options.onOpen&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,"function"==typeof this.options.onClose&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"_isDate",value:function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())}},{key:"_isWeekend",value:function(e){var t=e.getDay();return 0===t||6===t}},{key:"_setToStartOfDay",value:function(e){i._isDate(e)&&e.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(e,t){return[31,i._isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}},{key:"_isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"_compareDates",value:function(e,t){return e.getTime()===t.getTime()}},{key:"_setToStartOfDay",value:function(e){i._isDate(e)&&e.setHours(0,0,0,0)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Datepicker}},{key:"defaults",get:function(){return t}}]),i}();n._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"datepicker","M_Datepicker")}(cash),function(e){"use strict";var t={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return(r.el.M_Timepicker=r).options=e.extend({},i.defaults,n),r.id=M.guid(),r._insertHTMLIntoDOM(),r._setupModal(),r._setupVariables(),r._setupEventHandlers(),r._clockSetup(),r._pickerSetup(),r}return s(i,c),a(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),e(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),e(this.spanHours).on("click",this.showView.bind(this,"hours")),e(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(e){e.which===M.keys.ENTER&&(e.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(e){e.preventDefault();var t=this.plate.getBoundingClientRect(),n=t.left,r=t.top;this.x0=n+this.options.dialRadius,this.y0=r+this.options.dialRadius,this.moved=!1;var a=i._Pos(e);this.dx=a.x-this.x0,this.dy=a.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(e){e.preventDefault();var t=i._Pos(e),n=t.x-this.x0,r=t.y-this.y0;this.moved=!0,this.setHand(n,r,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(t){var n=this;t.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var r=i._Pos(t),a=r.x-this.x0,o=r.y-this.y0;this.moved&&a===this.dx&&o===this.dy&&this.setHand(a,o),"hours"===this.currentView?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(e(this.minutesView).addClass("timepicker-dial-out"),setTimeout((function(){n.done()}),this.options.duration/2)),"function"==typeof this.options.onSelect&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=e(i._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var t=document.querySelector(this.options.container);this.options.container&&t?this.$modalEl.appendTo(t):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var e=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){"function"==typeof e.options.onCloseEnd&&e.options.onCloseEnd.call(e),e.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var t=e('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&t.css({visibility:""});var n=e('<div class="confirmation-btns"></div>');e('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(n).on("click",this.close.bind(this)),e('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(n).on("click",this.done.bind(this)),n.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=e('<div class="am-btn">AM</div>'),this.$pmBtn=e('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var e=this.options.dialRadius,t=this.options.tickRadius,n=2*e,r=i._createSVGEl("svg");r.setAttribute("class","timepicker-svg"),r.setAttribute("width",n),r.setAttribute("height",n);var a=i._createSVGEl("g");a.setAttribute("transform","translate("+e+","+e+")");var o=i._createSVGEl("circle");o.setAttribute("class","timepicker-canvas-bearing"),o.setAttribute("cx",0),o.setAttribute("cy",0),o.setAttribute("r",4);var s=i._createSVGEl("line");s.setAttribute("x1",0),s.setAttribute("y1",0);var u=i._createSVGEl("circle");u.setAttribute("class","timepicker-canvas-bg"),u.setAttribute("r",t),a.appendChild(s),a.appendChild(u),a.appendChild(o),r.appendChild(a),this._canvas.appendChild(r),this.hand=s,this.bg=u,this.bearing=o,this.g=a}},{key:"_buildHoursView",value:function(){var t=e('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var n=1;n<13;n+=1){var i=t.clone(),r=n/6*Math.PI,a=this.options.outerRadius;i.css({left:this.options.dialRadius+Math.sin(r)*a-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(r)*a-this.options.tickRadius+"px"}),i.html(0===n?"00":n),this.hoursView.appendChild(i[0])}else for(var o=0;o<24;o+=1){var s=t.clone(),u=o/6*Math.PI,l=0<o&&o<13?this.options.innerRadius:this.options.outerRadius;s.css({left:this.options.dialRadius+Math.sin(u)*l-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(u)*l-this.options.tickRadius+"px"}),s.html(0===o?"00":o),this.hoursView.appendChild(s[0])}}},{key:"_buildMinutesView",value:function(){for(var t=e('<div class="timepicker-tick"></div>'),n=0;n<60;n+=5){var r=t.clone(),a=n/30*Math.PI;r.css({left:this.options.dialRadius+Math.sin(a)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(a)*this.options.outerRadius-this.options.tickRadius+"px"}),r.html(i._addLeadingZero(n)),this.minutesView.appendChild(r[0])}}},{key:"_handleAmPmClick",value:function(t){var n=e(t.target);this.amOrPm=n.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary","AM"===this.amOrPm),this.$pmBtn.toggleClass("text-primary","PM"===this.amOrPm))}},{key:"_updateTimeFromInput",value:function(){var e=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&void 0!==e[1]&&(0<e[1].toUpperCase().indexOf("AM")?this.amOrPm="AM":this.amOrPm="PM",e[1]=e[1].replace("AM","").replace("PM","")),"now"===e[0]){var t=new Date(+new Date+this.options.fromNow);e=[t.getHours(),t.getMinutes()],this.options.twelveHour&&(this.amOrPm=12<=e[0]&&e[0]<24?"PM":"AM")}this.hours=+e[0]||0,this.minutes=+e[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=i._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(t,n){"minutes"===t&&e(this.hoursView).css("visibility");var i="hours"===t,r=i?this.hoursView:this.minutesView,a=i?this.minutesView:this.hoursView;this.currentView=t,e(this.spanHours).toggleClass("text-primary",i),e(this.spanMinutes).toggleClass("text-primary",!i),a.classList.add("timepicker-dial-out"),e(r).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(n),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout((function(){e(a).css("visibility","hidden")}),this.options.duration)}},{key:"resetClock",value:function(t){var n=this.currentView,i=this[n],r="hours"===n,a=i*(Math.PI/(r?6:30)),o=r&&0<i&&i<13?this.options.innerRadius:this.options.outerRadius,s=Math.sin(a)*o,u=-Math.cos(a)*o,l=this;t?(e(this.canvas).addClass("timepicker-canvas-out"),setTimeout((function(){e(l.canvas).removeClass("timepicker-canvas-out"),l.setHand(s,u)}),t)):this.setHand(s,u)}},{key:"setHand",value:function(e,t,n){var r=this,a=Math.atan2(e,-t),o="hours"===this.currentView,s=Math.PI/(o||n?6:30),u=Math.sqrt(e*e+t*t),l=o&&u<(this.options.outerRadius+this.options.innerRadius)/2,c=l?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(c=this.options.outerRadius),a<0&&(a=2*Math.PI+a);var h=Math.round(a/s);a=h*s,this.options.twelveHour?o?0===h&&(h=12):(n&&(h*=5),60===h&&(h=0)):o?(12===h&&(h=0),h=l?0===h?12:h:0===h?0:h+12):(n&&(h*=5),60===h&&(h=0)),this[this.currentView]!==h&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout((function(){r.vibrateTimer=null}),100))),this[this.currentView]=h,o?this.spanHours.innerHTML=h:this.spanMinutes.innerHTML=i._addLeadingZero(h);var d=Math.sin(a)*(c-this.options.tickRadius),f=-Math.cos(a)*(c-this.options.tickRadius),p=Math.sin(a)*c,v=-Math.cos(a)*c;this.hand.setAttribute("x2",d),this.hand.setAttribute("y2",f),this.bg.setAttribute("cx",p),this.bg.setAttribute("cy",v)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(e,t){var n=this.el.value,r=t?"":i._addLeadingZero(this.hours)+":"+i._addLeadingZero(this.minutes);this.time=r,!t&&this.options.twelveHour&&(r=r+" "+this.amOrPm),(this.el.value=r)!==n&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"_addLeadingZero",value:function(e){return(e<10?"0":"")+e}},{key:"_createSVGEl",value:function(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}},{key:"_Pos",value:function(e){return e.targetTouches&&1<=e.targetTouches.length?{x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY}:{x:e.clientX,y:e.clientY}}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Timepicker}},{key:"defaults",get:function(){return t}}]),i}();n._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"timepicker","M_Timepicker")}(cash),function(e){"use strict";var t={},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return(r.el.M_CharacterCounter=r).options=e.extend({},i.defaults,n),r.isInvalid=!1,r.isValidLength=!1,r._setupCounter(),r._setupEventHandlers(),r}return s(i,c),a(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),e(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){e(this.counterEl).remove()}},{key:"updateCounter",value:function(){var t=+this.$el.attr("data-length"),n=this.el.value.length;this.isValidLength=n<=t;var i=n;t&&(i+="/"+t,this._validateInput()),e(this.counterEl).html(i)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):this.isValidLength||this.isInvalid||(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_CharacterCounter}},{key:"defaults",get:function(){return t}}]),i}();M.CharacterCounter=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"characterCounter","M_CharacterCounter")}(cash),function(e){"use strict";var t={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return(r.el.M_Carousel=r).options=e.extend({},i.defaults,n),r.hasMultipleSlides=1<r.$el.find(".carousel-item").length,r.showIndicators=r.options.indicators&&r.hasMultipleSlides,r.noWrap=r.options.noWrap||!r.hasMultipleSlides,r.pressed=!1,r.dragged=!1,r.offset=r.target=0,r.images=[],r.itemWidth=r.$el.find(".carousel-item").first().innerWidth(),r.itemHeight=r.$el.find(".carousel-item").first().innerHeight(),r.dim=2*r.itemWidth+r.options.padding||1,r._autoScrollBound=r._autoScroll.bind(r),r._trackBound=r._track.bind(r),r.options.fullWidth&&(r.options.dist=0,r._setCarouselHeight(),r.showIndicators&&r.$el.find(".carousel-fixed-item").addClass("with-indicators")),r.$indicators=e('<ul class="indicators"></ul>'),r.$el.find(".carousel-item").each((function(t,n){if(r.images.push(t),r.showIndicators){var i=e('<li class="indicator-item"></li>');0===n&&i[0].classList.add("active"),r.$indicators.append(i)}})),r.showIndicators&&r.$el.append(r.$indicators),r.count=r.images.length,r.options.numVisible=Math.min(r.count,r.options.numVisible),r.xform="transform",["webkit","Moz","O","ms"].every((function(e){var t=e+"Transform";return void 0===document.body.style[t]||(r.xform=t,!1)})),r._setupEventHandlers(),r._scroll(r.offset),r}return s(i,c),a(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var e=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),void 0!==window.ontouchstart&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each((function(t,n){t.addEventListener("click",e._handleIndicatorClickBound)})));var t=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=t.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var e=this;void 0!==window.ontouchstart&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each((function(t,n){t.removeEventListener("click",e._handleIndicatorClickBound)})),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(t){"mousedown"===t.type&&e(t.target).is("img")&&t.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(t),this.referenceY=this._ypos(t),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(e){var t=void 0,n=void 0,i=void 0;if(this.pressed)if(t=this._xpos(e),n=this._ypos(e),i=this.reference-t,Math.abs(this.referenceY-n)<30&&!this.verticalDragged)(2<i||i<-2)&&(this.dragged=!0,this.reference=t,this._scroll(this.offset+i));else{if(this.dragged)return e.preventDefault(),e.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return e.preventDefault(),e.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(e){if(this.pressed)return this.pressed=!1,clearInterval(this.ticker),this.target=this.offset,(10<this.velocity||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(e.preventDefault(),e.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(t){if(this.dragged)return t.preventDefault(),t.stopPropagation(),!1;if(!this.options.fullWidth){var n=e(t.target).closest(".carousel-item").index();0!==this._wrap(this.center)-n&&(t.preventDefault(),t.stopPropagation()),this._cycleTo(n)}}},{key:"_handleIndicatorClick",value:function(t){t.stopPropagation();var n=e(t.target).closest(".indicator-item");n.length&&this._cycleTo(n.index())}},{key:"_handleResize",value:function(e){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=2*this.itemWidth+this.options.padding,this.offset=2*this.center*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(e){var t=this,n=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),i=n.find("img").first();if(i.length)if(i[0].complete){var r=i.height();if(0<r)this.$el.css("height",r+"px");else{var a=i[0].naturalWidth,o=i[0].naturalHeight,s=this.$el.width()/a*o;this.$el.css("height",s+"px")}}else i.one("load",(function(e,n){t.$el.css("height",e.offsetHeight+"px")}));else if(!e){var u=n.height();this.$el.css("height",u+"px")}}},{key:"_xpos",value:function(e){return e.targetTouches&&1<=e.targetTouches.length?e.targetTouches[0].clientX:e.clientX}},{key:"_ypos",value:function(e){return e.targetTouches&&1<=e.targetTouches.length?e.targetTouches[0].clientY:e.clientY}},{key:"_wrap",value:function(e){return e>=this.count?e%this.count:e<0?this._wrap(this.count+e%this.count):e}},{key:"_track",value:function(){var e,t,n,i;t=(e=Date.now())-this.timestamp,this.timestamp=e,n=this.offset-this.frame,this.frame=this.offset,i=1e3*n/(1+t),this.velocity=.8*i+.2*this.velocity}},{key:"_autoScroll",value:function(){var e=void 0,t=void 0;this.amplitude&&(e=Date.now()-this.timestamp,2<(t=this.amplitude*Math.exp(-e/this.options.duration))||t<-2?(this._scroll(this.target-t),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(t){var n=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),null!=this.scrollingTimeout&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout((function(){n.$el.removeClass("scrolling")}),this.options.duration);var i,r,a,o,s=void 0,u=void 0,l=void 0,c=void 0,h=void 0,d=void 0,f=this.center,p=1/this.options.numVisible;if(this.offset="number"==typeof t?t:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),o=-(a=(r=this.offset-this.center*this.dim)<0?1:-1)*r*2/this.dim,i=this.count>>1,this.options.fullWidth?(l="translateX(0)",d=1):(l="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",l+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",d=1-p*o),this.showIndicators){var v=this.center%this.count,m=this.$indicators.find(".indicator-item.active");m.index()!==v&&(m.removeClass("active"),this.$indicators.find(".indicator-item").eq(v)[0].classList.add("active"))}if(!this.noWrap||0<=this.center&&this.center<this.count){u=this.images[this._wrap(this.center)],e(u).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),u.classList.add("active"));var y=l+" translateX("+-r/2+"px) translateX("+a*this.options.shift*o*s+"px) translateZ("+this.options.dist*o+"px)";this._updateItemStyle(u,d,0,y)}for(s=1;s<=i;++s){if(this.options.fullWidth?(c=this.options.dist,h=s===i&&r<0?1-o:1):(c=this.options.dist*(2*s+o*a),h=1-p*(2*s+o*a)),!this.noWrap||this.center+s<this.count){u=this.images[this._wrap(this.center+s)];var g=l+" translateX("+(this.options.shift+(this.dim*s-r)/2)+"px) translateZ("+c+"px)";this._updateItemStyle(u,h,-s,g)}if(this.options.fullWidth?(c=this.options.dist,h=s===i&&0<r?1-o:1):(c=this.options.dist*(2*s-o*a),h=1-p*(2*s-o*a)),!this.noWrap||0<=this.center-s){u=this.images[this._wrap(this.center-s)];var _=l+" translateX("+(-this.options.shift+(-this.dim*s-r)/2)+"px) translateZ("+c+"px)";this._updateItemStyle(u,h,-s,_)}}if(!this.noWrap||0<=this.center&&this.center<this.count){u=this.images[this._wrap(this.center)];var k=l+" translateX("+-r/2+"px) translateX("+a*this.options.shift*o+"px) translateZ("+this.options.dist*o+"px)";this._updateItemStyle(u,d,0,k)}var w=this.$el.find(".carousel-item").eq(this._wrap(this.center));f!==this.center&&"function"==typeof this.options.onCycleTo&&this.options.onCycleTo.call(this,w[0],this.dragged),"function"==typeof this.oneTimeCallback&&(this.oneTimeCallback.call(this,w[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(e,t,n,i){e.style[this.xform]=i,e.style.zIndex=n,e.style.opacity=t,e.style.visibility="visible"}},{key:"_cycleTo",value:function(e,t){var n=this.center%this.count-e;this.noWrap||(n<0?Math.abs(n+this.count)<Math.abs(n)&&(n+=this.count):0<n&&Math.abs(n-this.count)<n&&(n-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),n<0?this.target+=this.dim*Math.abs(n):0<n&&(this.target-=this.dim*n),"function"==typeof t&&(this.oneTimeCallback=t),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(e){(void 0===e||isNaN(e))&&(e=1);var t=this.center+e;if(t>=this.count||t<0){if(this.noWrap)return;t=this._wrap(t)}this._cycleTo(t)}},{key:"prev",value:function(e){(void 0===e||isNaN(e))&&(e=1);var t=this.center-e;if(t>=this.count||t<0){if(this.noWrap)return;t=this._wrap(t)}this._cycleTo(t)}},{key:"set",value:function(e,t){if((void 0===e||isNaN(e))&&(e=0),e>this.count||e<0){if(this.noWrap)return;e=this._wrap(e)}this._cycleTo(e,t)}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Carousel}},{key:"defaults",get:function(){return t}}]),i}();M.Carousel=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"carousel","M_Carousel")}(cash),function(e){"use strict";var t={onOpen:void 0,onClose:void 0},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return(r.el.M_TapTarget=r).options=e.extend({},i.defaults,n),r.isOpen=!1,r.$origin=e("#"+r.$el.attr("data-target")),r._setup(),r._calculatePositioning(),r._setupEventHandlers(),r}return s(i,c),a(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var e=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=e.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(e){this.open()}},{key:"_handleOriginClick",value:function(e){this.close()}},{key:"_handleResize",value:function(e){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(t){e(t.target).closest(".tap-target-wrapper").length||(this.close(),t.preventDefault(),t.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=e(this.wrapper).find(".tap-target-wave")[0],this.originEl=e(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],e(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(e(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var t="fixed"===this.$origin.css("position");if(!t)for(var n=this.$origin.parents(),i=0;i<n.length&&!(t="fixed"==e(n[i]).css("position"));i++);var r=this.$origin.outerWidth(),a=this.$origin.outerHeight(),o=t?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,s=t?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,u=window.innerWidth,l=window.innerHeight,c=u/2,h=l/2,d=s<=c,f=c<s,p=o<=h,v=h<o,m=.25*u<=s&&s<=.75*u,y=this.$el.outerWidth(),g=this.$el.outerHeight(),_=o+a/2-g/2,k=s+r/2-y/2,w=t?"fixed":"absolute",b=m?y:y/2+r,x=g/2,E=p?g/2:0,C=d&&!m?y/2-r:0,T=r,I=v?"bottom":"top",S=2*r,O=S,A=g/2-O/2,D=y/2-S/2,R={};R.top=p?_+"px":"",R.right=f?u-k-y+"px":"",R.bottom=v?l-_-g+"px":"",R.left=d?k+"px":"",R.position=w,e(this.wrapper).css(R),e(this.contentEl).css({width:b+"px",height:x+"px",top:E+"px",right:"0px",bottom:"0px",left:C+"px",padding:T+"px",verticalAlign:I}),e(this.waveEl).css({top:A+"px",left:D+"px",width:S+"px",height:O+"px"})}},{key:"open",value:function(){this.isOpen||("function"==typeof this.options.onOpen&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){this.isOpen&&("function"==typeof this.options.onClose&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_TapTarget}},{key:"defaults",get:function(){return t}}]),i}();M.TapTarget=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"tapTarget","M_TapTarget")}(cash),function(e){"use strict";var t={classes:"",dropdownOptions:{}},n=function(n){function i(t,n){u(this,i);var r=o(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,i,t,n));return r.$el.hasClass("browser-default")?o(r):((r.el.M_FormSelect=r).options=e.extend({},i.defaults,n),r.isMultiple=r.$el.prop("multiple"),r.el.tabIndex=-1,r._keysSelected={},r._valueDict={},r._setupDropdown(),r._setupEventHandlers(),r)}return s(i,c),a(i,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var t=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),e(this.dropdownOptions).find("li:not(.optgroup)").each((function(e){e.addEventListener("click",t._handleOptionClickBound)})),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var t=this;e(this.dropdownOptions).find("li:not(.optgroup)").each((function(e){e.removeEventListener("click",t._handleOptionClickBound)})),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(e){this._setValueToInput()}},{key:"_handleOptionClick",value:function(t){t.preventDefault();var n=e(t.target).closest("li")[0],i=n.id;if(!e(n).hasClass("disabled")&&!e(n).hasClass("optgroup")&&i.length){var r=!0;if(this.isMultiple){var a=e(this.dropdownOptions).find("li.disabled.selected");a.length&&(a.removeClass("selected"),a.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(a[0].id)),r=this._toggleEntryFromArray(i)}else e(this.dropdownOptions).find("li").removeClass("selected"),e(n).toggleClass("selected",r);e(this._valueDict[i].el).prop("selected")!==r&&(e(this._valueDict[i].el).prop("selected",r),this.$el.trigger("change"))}t.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var t=this;this.wrapper=document.createElement("div"),e(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(e(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),e(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each((function(n){if(e(n).is("option")){var i;i=t.isMultiple?t._appendOptionWithIcon(t.$el,n,"multiple"):t._appendOptionWithIcon(t.$el,n),t._addOptionToValueDict(n,i)}else if(e(n).is("optgroup")){var r=e(n).children("option");e(t.dropdownOptions).append(e('<li class="optgroup"><span>'+n.getAttribute("label")+"</span></li>")[0]),r.each((function(e){var n=t._appendOptionWithIcon(t.$el,e,"optgroup-option");t._addOptionToValueDict(e,n)}))}})),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),e(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&e(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var n=e('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(n[0]),!this.el.disabled){var i=e.extend({},this.options.dropdownOptions);i.onOpenEnd=function(n){var i=e(t.dropdownOptions).find(".selected").first();if(i.length&&(M.keyDown=!0,t.dropdown.focusedIndex=i.index(),t.dropdown._focusFocusedItem(),M.keyDown=!1,t.dropdown.isScrollable)){var r=i[0].getBoundingClientRect().top-t.dropdownOptions.getBoundingClientRect().top;r-=t.dropdownOptions.clientHeight/2,t.dropdownOptions.scrollTop=r}},this.isMultiple&&(i.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,i)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(e,t){var n=Object.keys(this._valueDict).length,i=this.dropdownOptions.id+n,r={};t.id=i,r.el=e,r.optionEl=t,this._valueDict[i]=r}},{key:"_removeDropdown",value:function(){e(this.wrapper).find(".caret").remove(),e(this.input).remove(),e(this.dropdownOptions).remove(),e(this.wrapper).before(this.$el),e(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(t,n,i){var r=n.disabled?"disabled ":"",a="optgroup-option"===i?"optgroup-option ":"",o=this.isMultiple?'<label><input type="checkbox"'+r+'"/><span>'+n.innerHTML+"</span></label>":n.innerHTML,s=e("<li></li>"),u=e("<span></span>");u.html(o),s.addClass(r+" "+a),s.append(u);var l=n.getAttribute("data-icon");if(l){var c=e('<img alt="" src="'+l+'">');s.prepend(c)}return e(this.dropdownOptions).append(s[0]),s[0]}},{key:"_toggleEntryFromArray",value:function(t){var n=!this._keysSelected.hasOwnProperty(t),i=e(this._valueDict[t].optionEl);return n?this._keysSelected[t]=!0:delete this._keysSelected[t],i.toggleClass("selected",n),i.find('input[type="checkbox"]').prop("checked",n),i.prop("selected",n),n}},{key:"_setValueToInput",value:function(){var t=[];if(this.$el.find("option").each((function(n){if(e(n).prop("selected")){var i=e(n).text();t.push(i)}})),!t.length){var n=this.$el.find("option:disabled").eq(0);n.length&&""===n[0].value&&t.push(n.text())}this.input.value=t.join(", ")}},{key:"_setSelectedStates",value:function(){for(var t in this._keysSelected={},this._valueDict){var n=this._valueDict[t],i=e(n.el).prop("selected");e(n.optionEl).find('input[type="checkbox"]').prop("checked",i),i?(this._activateOption(e(this.dropdownOptions),e(n.optionEl)),this._keysSelected[t]=!0):e(n.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(t,n){n&&(this.isMultiple||t.find("li.selected").removeClass("selected"),e(n).addClass("selected"))}},{key:"getSelectedValues",value:function(){var e=[];for(var t in this._keysSelected)e.push(this._valueDict[t].el.value);return e}}],[{key:"init",value:function(e,t){return r(i.__proto__||Object.getPrototypeOf(i),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_FormSelect}},{key:"defaults",get:function(){return t}}]),i}();M.FormSelect=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"formSelect","M_FormSelect")}(cash),function(e,t){"use strict";var n={},i=function(i){function l(t,n){u(this,l);var i=o(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,l,t,n));return(i.el.M_Range=i).options=e.extend({},l.defaults,n),i._mousedown=!1,i._setupThumb(),i._setupEventHandlers(),i}return s(l,c),a(l,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){e(this.value).html(this.$el.val()),e(this.thumb).hasClass("active")||this._showRangeBubble();var t=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",t+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(t){if(e(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),e(this.thumb).hasClass("active")||this._showRangeBubble(),"input"!==t.type){var n=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",n+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){e(this.thumb).hasClass("active")||this._showRangeBubble();var t=this._calcRangeOffset();e(this.thumb).addClass("active").css("left",t+"px"),e(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var n=7+parseInt(this.$el.css("padding-left"))+"px";e(this.thumb).hasClass("active")&&(t.remove(this.thumb),t({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:n,duration:100})),e(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),e(this.thumb).addClass("thumb"),e(this.value).addClass("value"),e(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){e(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var n=-7+parseInt(e(this.thumb).parent().css("padding-left"))+"px";t.remove(this.thumb),t({targets:this.thumb,height:30,width:30,top:-30,marginLeft:n,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var e=this.$el.width()-15,t=parseFloat(this.$el.attr("max"))||100,n=parseFloat(this.$el.attr("min"))||0;return(parseFloat(this.$el.val())-n)/(t-n)*e}}],[{key:"init",value:function(e,t){return r(l.__proto__||Object.getPrototypeOf(l),"init",this).call(this,this,e,t)}},{key:"getInstance",value:function(e){return(e.jquery?e[0]:e).M_Range}},{key:"defaults",get:function(){return n}}]),l}();M.Range=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"range","M_Range"),i.init(e("input[type=range]"))}(cash,M.anime)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(e,r){for(var a,o,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),u=1;u<arguments.length;u++){for(var l in a=Object(arguments[u]))n.call(a,l)&&(s[l]=a[l]);if(t){o=t(a);for(var c=0;c<o.length;c++)i.call(a,o[c])&&(s[o[c]]=a[o[c]])}}return s}},151:function(e,t,n){var i=n(878);e.exports=f,e.exports.parse=a,e.exports.compile=function(e,t){return s(a(e,t),t)},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=d;var r=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,i=[],a=0,o=0,s="",c=t&&t.delimiter||"/";null!=(n=r.exec(e));){var h=n[0],d=n[1],f=n.index;if(s+=e.slice(o,f),o=f+h.length,d)s+=d[1];else{var p=e[o],v=n[2],m=n[3],y=n[4],g=n[5],_=n[6],k=n[7];s&&(i.push(s),s="");var w=null!=v&&null!=p&&p!==v,b="+"===_||"*"===_,x="?"===_||"*"===_,E=n[2]||c,C=y||g;i.push({name:m||a++,prefix:v||"",delimiter:E,optional:x,repeat:b,partial:w,asterisk:!!k,pattern:C?l(C):k?".*":"[^"+u(E)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&i.push(s),i}function o(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function s(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"===typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",h(t)));return function(t,r){for(var a="",s=t||{},u=(r||{}).pretty?o:encodeURIComponent,l=0;l<e.length;l++){var c=e[l];if("string"!==typeof c){var h,d=s[c.name];if(null==d){if(c.optional){c.partial&&(a+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(i(d)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(d)+"`");if(0===d.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var f=0;f<d.length;f++){if(h=u(d[f]),!n[l].test(h))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(h)+"`");a+=(0===f?c.prefix:c.delimiter)+h}}else{if(h=c.asterisk?encodeURI(d).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):u(d),!n[l].test(h))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+h+'"');a+=c.prefix+h}}else a+=c}return a}}function u(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e,t){return e.keys=t,e}function h(e){return e&&e.sensitive?"":"i"}function d(e,t,n){i(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,a=!1!==n.end,o="",s=0;s<e.length;s++){var l=e[s];if("string"===typeof l)o+=u(l);else{var d=u(l.prefix),f="(?:"+l.pattern+")";t.push(l),l.repeat&&(f+="(?:"+d+f+")*"),o+=f=l.optional?l.partial?d+"("+f+")?":"(?:"+d+"("+f+"))?":d+"("+f+")"}}var p=u(n.delimiter||"/"),v=o.slice(-p.length)===p;return r||(o=(v?o.slice(0,-p.length):o)+"(?:"+p+"(?=$))?"),o+=a?"$":r&&v?"":"(?="+p+"|$)",c(new RegExp("^"+o,h(n)),t)}function f(e,t,n){return i(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(e,t)}(e,t):i(e)?function(e,t,n){for(var i=[],r=0;r<e.length;r++)i.push(f(e[r],t,n).source);return c(new RegExp("(?:"+i.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return d(a(e,n),t,n)}(e,t,n)}},878:function(e){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},888:function(e,t,n){"use strict";var i=n(47);function r(){}function a(){}a.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,a,o){if(o!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:r};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var i=n(791),r=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(o(227));function s(e,t,n,i,r,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var u=!1,l=null,c=!1,h=null,d={onError:function(e){u=!0,l=e}};function f(e,t,n,i,r,a,o,c,h){u=!1,l=null,s.apply(d,arguments)}var p=null,v=null,m=null;function y(e,t,n){var i=e.type||"unknown-event";e.currentTarget=m(n),function(e,t,n,i,r,a,s,d,p){if(f.apply(this,arguments),u){if(!u)throw Error(o(198));var v=l;u=!1,l=null,c||(c=!0,h=v)}}(i,t,void 0,e),e.currentTarget=null}var g=null,_={};function k(){if(g)for(var e in _){var t=_[e],n=g.indexOf(e);if(!(-1<n))throw Error(o(96,e));if(!b[n]){if(!t.extractEvents)throw Error(o(97,e));for(var i in b[n]=t,n=t.eventTypes){var r=void 0,a=n[i],s=t,u=i;if(x.hasOwnProperty(u))throw Error(o(99,u));x[u]=a;var l=a.phasedRegistrationNames;if(l){for(r in l)l.hasOwnProperty(r)&&w(l[r],s,u);r=!0}else a.registrationName?(w(a.registrationName,s,u),r=!0):r=!1;if(!r)throw Error(o(98,i,e))}}}}function w(e,t,n){if(E[e])throw Error(o(100,e));E[e]=t,C[e]=t.eventTypes[n].dependencies}var b=[],x={},E={},C={};function T(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];if(!_.hasOwnProperty(t)||_[t]!==i){if(_[t])throw Error(o(102,t));_[t]=i,n=!0}}n&&k()}var I=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),S=null,O=null,A=null;function D(e){if(e=v(e)){if("function"!==typeof S)throw Error(o(280));var t=e.stateNode;t&&(t=p(t),S(e.stateNode,e.type,t))}}function M(e){O?A?A.push(e):A=[e]:O=e}function R(){if(O){var e=O,t=A;if(A=O=null,D(e),t)for(e=0;e<t.length;e++)D(t[e])}}function P(e,t){return e(t)}function N(e,t,n,i,r){return e(t,n,i,r)}function L(){}var B=P,F=!1,j=!1;function U(){null===O&&null===A||(L(),R())}function V(e,t,n){if(j)return e(t,n);j=!0;try{return B(e,t,n)}finally{j=!1,U()}}var q=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$=Object.prototype.hasOwnProperty,W={},z={};function H(e,t,n,i,r,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a}var K={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){K[e]=new H(e,0,!1,e,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];K[t]=new H(t,1,!1,e[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){K[e]=new H(e,2,!1,e.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){K[e]=new H(e,2,!1,e,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){K[e]=new H(e,3,!1,e.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(e){K[e]=new H(e,3,!0,e,null,!1)})),["capture","download"].forEach((function(e){K[e]=new H(e,4,!1,e,null,!1)})),["cols","rows","size","span"].forEach((function(e){K[e]=new H(e,6,!1,e,null,!1)})),["rowSpan","start"].forEach((function(e){K[e]=new H(e,5,!1,e.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function G(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(Q,G);K[t]=new H(t,1,!1,e,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(Q,G);K[t]=new H(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(Q,G);K[t]=new H(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(e){K[e]=new H(e,1,!1,e.toLowerCase(),null,!1)})),K.xlinkHref=new H("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(e){K[e]=new H(e,1,!1,e.toLowerCase(),null,!0)}));var Y=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function X(e,t,n,i){var r=K.hasOwnProperty(t)?K[t]:null;(null!==r?0===r.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!$.call(z,e)||!$.call(W,e)&&(q.test(e)?z[e]=!0:(W[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}Y.hasOwnProperty("ReactCurrentDispatcher")||(Y.ReactCurrentDispatcher={current:null}),Y.hasOwnProperty("ReactCurrentBatchConfig")||(Y.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,ee=Z?Symbol.for("react.element"):60103,te=Z?Symbol.for("react.portal"):60106,ne=Z?Symbol.for("react.fragment"):60107,ie=Z?Symbol.for("react.strict_mode"):60108,re=Z?Symbol.for("react.profiler"):60114,ae=Z?Symbol.for("react.provider"):60109,oe=Z?Symbol.for("react.context"):60110,se=Z?Symbol.for("react.concurrent_mode"):60111,ue=Z?Symbol.for("react.forward_ref"):60112,le=Z?Symbol.for("react.suspense"):60113,ce=Z?Symbol.for("react.suspense_list"):60120,he=Z?Symbol.for("react.memo"):60115,de=Z?Symbol.for("react.lazy"):60116,fe=Z?Symbol.for("react.block"):60121,pe="function"===typeof Symbol&&Symbol.iterator;function ve(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=pe&&e[pe]||e["@@iterator"])?e:null}function me(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case ne:return"Fragment";case te:return"Portal";case re:return"Profiler";case ie:return"StrictMode";case le:return"Suspense";case ce:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case oe:return"Context.Consumer";case ae:return"Context.Provider";case ue:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case he:return me(e.type);case fe:return me(e.render);case de:if(e=1===e._status?e._result:null)return me(e)}return null}function ye(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var i=e._debugOwner,r=e._debugSource,a=me(e.type);n=null,i&&(n=me(i.type)),i=a,a="",r?a=" (at "+r.fileName.replace(J,"")+":"+r.lineNumber+")":n&&(a=" (created by "+n+")"),n="\n    in "+(i||"Unknown")+a}t+=n,e=e.return}while(e);return t}function ge(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function _e(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ke(e){e._valueTracker||(e._valueTracker=function(e){var t=_e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function we(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=_e(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function be(e,t){var n=t.checked;return r({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function xe(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=ge(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ee(e,t){null!=(t=t.checked)&&X(e,"checked",t,!1)}function Ce(e,t){Ee(e,t);var n=ge(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ie(e,t.type,ge(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Te(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Ie(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Se(e,t){return e=r({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Oe(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ge(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function Ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return r({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function De(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:ge(n)}}function Me(e,t){var n=ge(t.value),i=ge(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function Re(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var Pe="http://www.w3.org/1999/xhtml",Ne="http://www.w3.org/2000/svg";function Le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Be(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var Fe,je,Ue=(je=function(e,t){if(e.namespaceURI!==Ne||"innerHTML"in e)e.innerHTML=t;else{for((Fe=Fe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Fe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return je(e,t)}))}:je);function Ve(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function qe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $e={animationend:qe("Animation","AnimationEnd"),animationiteration:qe("Animation","AnimationIteration"),animationstart:qe("Animation","AnimationStart"),transitionend:qe("Transition","TransitionEnd")},We={},ze={};function He(e){if(We[e])return We[e];if(!$e[e])return e;var t,n=$e[e];for(t in n)if(n.hasOwnProperty(t)&&t in ze)return We[e]=n[t];return e}I&&(ze=document.createElement("div").style,"AnimationEvent"in window||(delete $e.animationend.animation,delete $e.animationiteration.animation,delete $e.animationstart.animation),"TransitionEvent"in window||delete $e.transitionend.transition);var Ke=He("animationend"),Qe=He("animationiteration"),Ge=He("animationstart"),Ye=He("transitionend"),Xe="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Je=new("function"===typeof WeakMap?WeakMap:Map);function Ze(e){var t=Je.get(e);return void 0===t&&(t=new Map,Je.set(e,t)),t}function et(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).effectTag)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function tt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function nt(e){if(et(e)!==e)throw Error(o(188))}function it(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=et(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return nt(r),e;if(a===i)return nt(r),t;a=a.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=a;else{for(var s=!1,u=r.child;u;){if(u===n){s=!0,n=r,i=a;break}if(u===i){s=!0,i=r,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,i=r;break}if(u===i){s=!0,i=a,n=r;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function rt(e,t){if(null==t)throw Error(o(30));return null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function at(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var ot=null;function st(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var i=0;i<t.length&&!e.isPropagationStopped();i++)y(e,t[i],n[i]);else t&&y(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function ut(e){if(null!==e&&(ot=rt(ot,e)),e=ot,ot=null,e){if(at(e,st),ot)throw Error(o(95));if(c)throw e=h,c=!1,h=null,e}}function lt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ct(e){if(!I)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}var ht=[];function dt(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>ht.length&&ht.push(e)}function ft(e,t,n,i){if(ht.length){var r=ht.pop();return r.topLevelType=e,r.eventSystemFlags=i,r.nativeEvent=t,r.targetInst=n,r}return{topLevelType:e,eventSystemFlags:i,nativeEvent:t,targetInst:n,ancestors:[]}}function pt(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var i=n;if(3===i.tag)i=i.stateNode.containerInfo;else{for(;i.return;)i=i.return;i=3!==i.tag?null:i.stateNode.containerInfo}if(!i)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=Rn(i)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var r=lt(e.nativeEvent);i=e.topLevelType;var a=e.nativeEvent,o=e.eventSystemFlags;0===n&&(o|=64);for(var s=null,u=0;u<b.length;u++){var l=b[u];l&&(l=l.extractEvents(i,t,a,r,o))&&(s=rt(s,l))}ut(s)}}function vt(e,t,n){if(!n.has(e)){switch(e){case"scroll":Gt(t,"scroll",!0);break;case"focus":case"blur":Gt(t,"focus",!0),Gt(t,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ct(e)&&Gt(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Xe.indexOf(e)&&Qt(e,t)}n.set(e,null)}}var mt,yt,gt,_t=!1,kt=[],wt=null,bt=null,xt=null,Et=new Map,Ct=new Map,Tt=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),St="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ot(e,t,n,i,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:r,container:i}}function At(e,t){switch(e){case"focus":case"blur":wt=null;break;case"dragenter":case"dragleave":bt=null;break;case"mouseover":case"mouseout":xt=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ct.delete(t.pointerId)}}function Dt(e,t,n,i,r,a){return null===e||e.nativeEvent!==a?(e=Ot(t,n,i,r,a),null!==t&&(null!==(t=Pn(t))&&yt(t)),e):(e.eventSystemFlags|=i,e)}function Mt(e){var t=Rn(e.target);if(null!==t){var n=et(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=tt(n)))return e.blockedOn=t,void a.unstable_runWithPriority(e.priority,(function(){gt(n)}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Rt(e){if(null!==e.blockedOn)return!1;var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(null!==t){var n=Pn(t);return null!==n&&yt(n),e.blockedOn=t,!1}return!0}function Pt(e,t,n){Rt(e)&&n.delete(t)}function Nt(){for(_t=!1;0<kt.length;){var e=kt[0];if(null!==e.blockedOn){null!==(e=Pn(e.blockedOn))&&mt(e);break}var t=Zt(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);null!==t?e.blockedOn=t:kt.shift()}null!==wt&&Rt(wt)&&(wt=null),null!==bt&&Rt(bt)&&(bt=null),null!==xt&&Rt(xt)&&(xt=null),Et.forEach(Pt),Ct.forEach(Pt)}function Lt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Nt)))}function Bt(e){function t(t){return Lt(t,e)}if(0<kt.length){Lt(kt[0],e);for(var n=1;n<kt.length;n++){var i=kt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==wt&&Lt(wt,e),null!==bt&&Lt(bt,e),null!==xt&&Lt(xt,e),Et.forEach(t),Ct.forEach(t),n=0;n<Tt.length;n++)(i=Tt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Tt.length&&null===(n=Tt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Tt.shift()}var Ft={},jt=new Map,Ut=new Map,Vt=["abort","abort",Ke,"animationEnd",Qe,"animationIteration",Ge,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ye,"transitionEnd","waiting","waiting"];function qt(e,t){for(var n=0;n<e.length;n+=2){var i=e[n],r=e[n+1],a="on"+(r[0].toUpperCase()+r.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[i],eventPriority:t},Ut.set(i,t),jt.set(i,a),Ft[r]=a}}qt("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),qt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),qt(Vt,2);for(var $t="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Wt=0;Wt<$t.length;Wt++)Ut.set($t[Wt],0);var zt=a.unstable_UserBlockingPriority,Ht=a.unstable_runWithPriority,Kt=!0;function Qt(e,t){Gt(t,e,!1)}function Gt(e,t,n){var i=Ut.get(t);switch(void 0===i?2:i){case 0:i=Yt.bind(null,t,1,e);break;case 1:i=Xt.bind(null,t,1,e);break;default:i=Jt.bind(null,t,1,e)}n?e.addEventListener(t,i,!0):e.addEventListener(t,i,!1)}function Yt(e,t,n,i){F||L();var r=Jt,a=F;F=!0;try{N(r,e,t,n,i)}finally{(F=a)||U()}}function Xt(e,t,n,i){Ht(zt,Jt.bind(null,e,t,n,i))}function Jt(e,t,n,i){if(Kt)if(0<kt.length&&-1<It.indexOf(e))e=Ot(null,e,t,n,i),kt.push(e);else{var r=Zt(e,t,n,i);if(null===r)At(e,i);else if(-1<It.indexOf(e))e=Ot(r,e,t,n,i),kt.push(e);else if(!function(e,t,n,i,r){switch(t){case"focus":return wt=Dt(wt,e,t,n,i,r),!0;case"dragenter":return bt=Dt(bt,e,t,n,i,r),!0;case"mouseover":return xt=Dt(xt,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return Et.set(a,Dt(Et.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Ct.set(a,Dt(Ct.get(a)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i)){At(e,i),e=ft(e,i,null,t);try{V(pt,e)}finally{dt(e)}}}}function Zt(e,t,n,i){if(null!==(n=Rn(n=lt(i)))){var r=et(n);if(null===r)n=null;else{var a=r.tag;if(13===a){if(null!==(n=tt(r)))return n;n=null}else if(3===a){if(r.stateNode.hydrate)return 3===r.tag?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}e=ft(e,i,n,t);try{V(pt,e)}finally{dt(e)}return null}var en={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function nn(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||en.hasOwnProperty(e)&&en[e]?(""+t).trim():t+"px"}function rn(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=nn(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(en).forEach((function(e){tn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),en[t]=en[e]}))}));var an=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(e,t){if(t){if(an[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62,""))}}function sn(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var un=Pe;function ln(e,t){var n=Ze(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=C[t];for(var i=0;i<t.length;i++)vt(t[i],e,n)}function cn(){}function hn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function dn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fn(e,t){var n,i=dn(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=dn(i)}}function pn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vn(){for(var e=window,t=hn();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=hn((e=t.contentWindow).document)}return t}function mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yn="$",gn="/$",_n="$?",kn="$!",wn=null,bn=null;function xn(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function En(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Cn="function"===typeof setTimeout?setTimeout:void 0,Tn="function"===typeof clearTimeout?clearTimeout:void 0;function In(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Sn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===yn||n===kn||n===_n){if(0===t)return e;t--}else n===gn&&t++}e=e.previousSibling}return null}var On=Math.random().toString(36).slice(2),An="__reactInternalInstance$"+On,Dn="__reactEventHandlers$"+On,Mn="__reactContainere$"+On;function Rn(e){var t=e[An];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Mn]||n[An]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Sn(e);null!==e;){if(n=e[An])return n;e=Sn(e)}return t}n=(e=n).parentNode}return null}function Pn(e){return!(e=e[An]||e[Mn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Nn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Ln(e){return e[Dn]||null}function Bn(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function Fn(e,t){var n=e.stateNode;if(!n)return null;var i=p(n);if(!i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}function jn(e,t,n){(t=Fn(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function Un(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Bn(t);for(t=n.length;0<t--;)jn(n[t],"captured",e);for(t=0;t<n.length;t++)jn(n[t],"bubbled",e)}}function Vn(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=Fn(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=rt(n._dispatchListeners,t),n._dispatchInstances=rt(n._dispatchInstances,e))}function qn(e){e&&e.dispatchConfig.registrationName&&Vn(e._targetInst,null,e)}function $n(e){at(e,Un)}var Wn=null,zn=null,Hn=null;function Kn(){if(Hn)return Hn;var e,t,n=zn,i=n.length,r="value"in Wn?Wn.value:Wn.textContent,a=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[a-t];t++);return Hn=r.slice(e,1<t?1-t:void 0)}function Qn(){return!0}function Gn(){return!1}function Yn(e,t,n,i){for(var r in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(r)&&((t=e[r])?this[r]=t(n):"target"===r?this.target=i:this[r]=n[r]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Qn:Gn,this.isPropagationStopped=Gn,this}function Xn(e,t,n,i){if(this.eventPool.length){var r=this.eventPool.pop();return this.call(r,e,t,n,i),r}return new this(e,t,n,i)}function Jn(e){if(!(e instanceof this))throw Error(o(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function Zn(e){e.eventPool=[],e.getPooled=Xn,e.release=Jn}r(Yn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Qn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Qn)},persist:function(){this.isPersistent=Qn},isPersistent:Gn,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Gn,this._dispatchInstances=this._dispatchListeners=null}}),Yn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Yn.extend=function(e){function t(){}function n(){return i.apply(this,arguments)}var i=this;t.prototype=i.prototype;var a=new t;return r(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=r({},i.Interface,e),n.extend=i.extend,Zn(n),n},Zn(Yn);var ei=Yn.extend({data:null}),ti=Yn.extend({data:null}),ni=[9,13,27,32],ii=I&&"CompositionEvent"in window,ri=null;I&&"documentMode"in document&&(ri=document.documentMode);var ai=I&&"TextEvent"in window&&!ri,oi=I&&(!ii||ri&&8<ri&&11>=ri),si=String.fromCharCode(32),ui={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},li=!1;function ci(e,t){switch(e){case"keyup":return-1!==ni.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function hi(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var di=!1;var fi={eventTypes:ui,extractEvents:function(e,t,n,i){var r;if(ii)e:{switch(e){case"compositionstart":var a=ui.compositionStart;break e;case"compositionend":a=ui.compositionEnd;break e;case"compositionupdate":a=ui.compositionUpdate;break e}a=void 0}else di?ci(e,n)&&(a=ui.compositionEnd):"keydown"===e&&229===n.keyCode&&(a=ui.compositionStart);return a?(oi&&"ko"!==n.locale&&(di||a!==ui.compositionStart?a===ui.compositionEnd&&di&&(r=Kn()):(zn="value"in(Wn=i)?Wn.value:Wn.textContent,di=!0)),a=ei.getPooled(a,t,n,i),r?a.data=r:null!==(r=hi(n))&&(a.data=r),$n(a),r=a):r=null,(e=ai?function(e,t){switch(e){case"compositionend":return hi(t);case"keypress":return 32!==t.which?null:(li=!0,si);case"textInput":return(e=t.data)===si&&li?null:e;default:return null}}(e,n):function(e,t){if(di)return"compositionend"===e||!ii&&ci(e,t)?(e=Kn(),Hn=zn=Wn=null,di=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oi&&"ko"!==t.locale?null:t.data}}(e,n))?((t=ti.getPooled(ui.beforeInput,t,n,i)).data=e,$n(t)):t=null,null===r?t:null===t?r:[r,t]}},pi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!pi[e.type]:"textarea"===t}var mi={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function yi(e,t,n){return(e=Yn.getPooled(mi.change,e,t,n)).type="change",M(n),$n(e),e}var gi=null,_i=null;function ki(e){ut(e)}function wi(e){if(we(Nn(e)))return e}function bi(e,t){if("change"===e)return t}var xi=!1;function Ei(){gi&&(gi.detachEvent("onpropertychange",Ci),_i=gi=null)}function Ci(e){if("value"===e.propertyName&&wi(_i))if(e=yi(_i,e,lt(e)),F)ut(e);else{F=!0;try{P(ki,e)}finally{F=!1,U()}}}function Ti(e,t,n){"focus"===e?(Ei(),_i=n,(gi=t).attachEvent("onpropertychange",Ci)):"blur"===e&&Ei()}function Ii(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return wi(_i)}function Si(e,t){if("click"===e)return wi(t)}function Oi(e,t){if("input"===e||"change"===e)return wi(t)}I&&(xi=ct("input")&&(!document.documentMode||9<document.documentMode));var Ai={eventTypes:mi,_isInputEventSupported:xi,extractEvents:function(e,t,n,i){var r=t?Nn(t):window,a=r.nodeName&&r.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===r.type)var o=bi;else if(vi(r))if(xi)o=Oi;else{o=Ii;var s=Ti}else(a=r.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===r.type||"radio"===r.type)&&(o=Si);if(o&&(o=o(e,t)))return yi(o,n,i);s&&s(e,r,t),"blur"===e&&(e=r._wrapperState)&&e.controlled&&"number"===r.type&&Ie(r,"number",r.value)}},Di=Yn.extend({view:null,detail:null}),Mi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ri(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Mi[e])&&!!t[e]}function Pi(){return Ri}var Ni=0,Li=0,Bi=!1,Fi=!1,ji=Di.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Pi,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Ni;return Ni=e.screenX,Bi?"mousemove"===e.type?e.screenX-t:0:(Bi=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Li;return Li=e.screenY,Fi?"mousemove"===e.type?e.screenY-t:0:(Fi=!0,0)}}),Ui=ji.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Vi={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},qi={eventTypes:Vi,extractEvents:function(e,t,n,i,r){var a="mouseover"===e||"pointerover"===e,o="mouseout"===e||"pointerout"===e;if(a&&0===(32&r)&&(n.relatedTarget||n.fromElement)||!o&&!a)return null;(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,o)?(o=t,null!==(t=(t=n.relatedTarget||n.toElement)?Rn(t):null)&&(t!==et(t)||5!==t.tag&&6!==t.tag)&&(t=null)):o=null;if(o===t)return null;if("mouseout"===e||"mouseover"===e)var s=ji,u=Vi.mouseLeave,l=Vi.mouseEnter,c="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=Ui,u=Vi.pointerLeave,l=Vi.pointerEnter,c="pointer");if(e=null==o?a:Nn(o),a=null==t?a:Nn(t),(u=s.getPooled(u,o,n,i)).type=c+"leave",u.target=e,u.relatedTarget=a,(n=s.getPooled(l,t,n,i)).type=c+"enter",n.target=a,n.relatedTarget=e,c=t,(i=o)&&c)e:{for(l=c,o=0,e=s=i;e;e=Bn(e))o++;for(e=0,t=l;t;t=Bn(t))e++;for(;0<o-e;)s=Bn(s),o--;for(;0<e-o;)l=Bn(l),e--;for(;o--;){if(s===l||s===l.alternate)break e;s=Bn(s),l=Bn(l)}s=null}else s=null;for(l=s,s=[];i&&i!==l&&(null===(o=i.alternate)||o!==l);)s.push(i),i=Bn(i);for(i=[];c&&c!==l&&(null===(o=c.alternate)||o!==l);)i.push(c),c=Bn(c);for(c=0;c<s.length;c++)Vn(s[c],"bubbled",u);for(c=i.length;0<c--;)Vn(i[c],"captured",n);return 0===(64&r)?[u]:[u,n]}};var $i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Wi=Object.prototype.hasOwnProperty;function zi(e,t){if($i(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!Wi.call(t,n[i])||!$i(e[n[i]],t[n[i]]))return!1;return!0}var Hi=I&&"documentMode"in document&&11>=document.documentMode,Ki={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Qi=null,Gi=null,Yi=null,Xi=!1;function Ji(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Xi||null==Qi||Qi!==hn(n)?null:("selectionStart"in(n=Qi)&&mn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Yi&&zi(Yi,n)?null:(Yi=n,(e=Yn.getPooled(Ki.select,Gi,e,t)).type="select",e.target=Qi,$n(e),e))}var Zi={eventTypes:Ki,extractEvents:function(e,t,n,i,r,a){if(!(a=!(r=a||(i.window===i?i.document:9===i.nodeType?i:i.ownerDocument)))){e:{r=Ze(r),a=C.onSelect;for(var o=0;o<a.length;o++)if(!r.has(a[o])){r=!1;break e}r=!0}a=!r}if(a)return null;switch(r=t?Nn(t):window,e){case"focus":(vi(r)||"true"===r.contentEditable)&&(Qi=r,Gi=t,Yi=null);break;case"blur":Yi=Gi=Qi=null;break;case"mousedown":Xi=!0;break;case"contextmenu":case"mouseup":case"dragend":return Xi=!1,Ji(n,i);case"selectionchange":if(Hi)break;case"keydown":case"keyup":return Ji(n,i)}return null}},er=Yn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),tr=Yn.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nr=Di.extend({relatedTarget:null});function ir(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var rr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ar={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},or=Di.extend({key:function(e){if(e.key){var t=rr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ir(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ar[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Pi,charCode:function(e){return"keypress"===e.type?ir(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ir(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),sr=ji.extend({dataTransfer:null}),ur=Di.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Pi}),lr=Yn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),cr=ji.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),hr={eventTypes:Ft,extractEvents:function(e,t,n,i){var r=jt.get(e);if(!r)return null;switch(e){case"keypress":if(0===ir(n))return null;case"keydown":case"keyup":e=or;break;case"blur":case"focus":e=nr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=ji;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=sr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=ur;break;case Ke:case Qe:case Ge:e=er;break;case Ye:e=lr;break;case"scroll":e=Di;break;case"wheel":e=cr;break;case"copy":case"cut":case"paste":e=tr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Ui;break;default:e=Yn}return $n(t=e.getPooled(r,t,n,i)),t}};if(g)throw Error(o(101));g=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),k(),p=Ln,v=Pn,m=Nn,T({SimpleEventPlugin:hr,EnterLeaveEventPlugin:qi,ChangeEventPlugin:Ai,SelectEventPlugin:Zi,BeforeInputEventPlugin:fi});var dr=[],fr=-1;function pr(e){0>fr||(e.current=dr[fr],dr[fr]=null,fr--)}function vr(e,t){fr++,dr[fr]=e.current,e.current=t}var mr={},yr={current:mr},gr={current:!1},_r=mr;function kr(e,t){var n=e.type.contextTypes;if(!n)return mr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function wr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function br(){pr(gr),pr(yr)}function xr(e,t,n){if(yr.current!==mr)throw Error(o(168));vr(yr,t),vr(gr,n)}function Er(e,t,n){var i=e.stateNode;if(e=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var a in i=i.getChildContext())if(!(a in e))throw Error(o(108,me(t)||"Unknown",a));return r({},n,{},i)}function Cr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mr,_r=yr.current,vr(yr,e),vr(gr,gr.current),!0}function Tr(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=Er(e,t,_r),i.__reactInternalMemoizedMergedChildContext=e,pr(gr),pr(yr),vr(yr,e)):pr(gr),vr(gr,n)}var Ir=a.unstable_runWithPriority,Sr=a.unstable_scheduleCallback,Or=a.unstable_cancelCallback,Ar=a.unstable_requestPaint,Dr=a.unstable_now,Mr=a.unstable_getCurrentPriorityLevel,Rr=a.unstable_ImmediatePriority,Pr=a.unstable_UserBlockingPriority,Nr=a.unstable_NormalPriority,Lr=a.unstable_LowPriority,Br=a.unstable_IdlePriority,Fr={},jr=a.unstable_shouldYield,Ur=void 0!==Ar?Ar:function(){},Vr=null,qr=null,$r=!1,Wr=Dr(),zr=1e4>Wr?Dr:function(){return Dr()-Wr};function Hr(){switch(Mr()){case Rr:return 99;case Pr:return 98;case Nr:return 97;case Lr:return 96;case Br:return 95;default:throw Error(o(332))}}function Kr(e){switch(e){case 99:return Rr;case 98:return Pr;case 97:return Nr;case 96:return Lr;case 95:return Br;default:throw Error(o(332))}}function Qr(e,t){return e=Kr(e),Ir(e,t)}function Gr(e,t,n){return e=Kr(e),Sr(e,t,n)}function Yr(e){return null===Vr?(Vr=[e],qr=Sr(Rr,Jr)):Vr.push(e),Fr}function Xr(){if(null!==qr){var e=qr;qr=null,Or(e)}Jr()}function Jr(){if(!$r&&null!==Vr){$r=!0;var e=0;try{var t=Vr;Qr(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Vr=null}catch(n){throw null!==Vr&&(Vr=Vr.slice(e+1)),Sr(Rr,Xr),n}finally{$r=!1}}}function Zr(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function ea(e,t){if(e&&e.defaultProps)for(var n in t=r({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var ta={current:null},na=null,ia=null,ra=null;function aa(){ra=ia=na=null}function oa(e){var t=ta.current;pr(ta),e.type._context._currentValue=t}function sa(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function ua(e,t){na=e,ra=ia=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(Lo=!0),e.firstContext=null)}function la(e,t){if(ra!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ra=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ia){if(null===na)throw Error(o(308));ia=t,na.dependencies={expirationTime:0,firstContext:t,responders:null}}else ia=ia.next=t;return e._currentValue}var ca=!1;function ha(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function fa(e,t){return(e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null}).next=e}function pa(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function va(e,t){var n=e.alternate;null!==n&&da(n,e),null===(n=(e=e.updateQueue).baseQueue)?(e.baseQueue=t.next=t,t.next=t):(t.next=n.next,n.next=t)}function ma(e,t,n,i){var a=e.updateQueue;ca=!1;var o=a.baseQueue,s=a.shared.pending;if(null!==s){if(null!==o){var u=o.next;o.next=s.next,s.next=u}o=s,a.shared.pending=null,null!==(u=e.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=s))}if(null!==o){u=o.next;var l=a.baseState,c=0,h=null,d=null,f=null;if(null!==u)for(var p=u;;){if((s=p.expirationTime)<i){var v={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===f?(d=f=v,h=l):f=f.next=v,s>c&&(c=s)}else{null!==f&&(f=f.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null}),bu(s,p.suspenseConfig);e:{var m=e,y=p;switch(s=t,v=n,y.tag){case 1:if("function"===typeof(m=y.payload)){l=m.call(v,l,s);break e}l=m;break e;case 3:m.effectTag=-4097&m.effectTag|64;case 0:if(null===(s="function"===typeof(m=y.payload)?m.call(v,l,s):m)||void 0===s)break e;l=r({},l,s);break e;case 2:ca=!0}}null!==p.callback&&(e.effectTag|=32,null===(s=a.effects)?a.effects=[p]:s.push(p))}if(null===(p=p.next)||p===u){if(null===(s=a.shared.pending))break;p=o.next=s.next,s.next=u,a.baseQueue=o=s,a.shared.pending=null}}null===f?h=l:f.next=d,a.baseState=h,a.baseQueue=f,xu(c),e.expirationTime=c,e.memoizedState=l}}function ya(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=r,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var ga=Y.ReactCurrentBatchConfig,_a=(new i.Component).refs;function ka(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:r({},t,n),e.memoizedState=n,0===e.expirationTime&&(e.updateQueue.baseState=n)}var wa={isMounted:function(e){return!!(e=e._reactInternalFiber)&&et(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var i=lu(),r=ga.suspense;(r=fa(i=cu(i,e,r),r)).payload=t,void 0!==n&&null!==n&&(r.callback=n),pa(e,r),hu(e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var i=lu(),r=ga.suspense;(r=fa(i=cu(i,e,r),r)).tag=1,r.payload=t,void 0!==n&&null!==n&&(r.callback=n),pa(e,r),hu(e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=lu(),i=ga.suspense;(i=fa(n=cu(n,e,i),i)).tag=2,void 0!==t&&null!==t&&(i.callback=t),pa(e,i),hu(e,n)}};function ba(e,t,n,i,r,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!zi(n,i)||!zi(r,a))}function xa(e,t,n){var i=!1,r=mr,a=t.contextType;return"object"===typeof a&&null!==a?a=la(a):(r=wr(t)?_r:yr.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?kr(e,r):mr),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=wa,e.stateNode=t,t._reactInternalFiber=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ea(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&wa.enqueueReplaceState(t,t.state,null)}function Ca(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=_a,ha(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=la(a):(a=wr(t)?_r:yr.current,r.context=kr(e,a)),ma(e,n,r,i),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ka(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&wa.enqueueReplaceState(r,r.state,null),ma(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.effectTag|=4)}var Ta=Array.isArray;function Ia(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===r?t.ref:(t=function(e){var t=i.refs;t===_a&&(t=i.refs={}),null===e?delete t[r]:t[r]=e},t._stringRef=r,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Sa(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Oa(e){function t(t,n){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=$u(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.effectTag=2,n):i:(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function u(e,t,n,i){return null===t||6!==t.tag?((t=Hu(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function l(e,t,n,i){return null!==t&&t.elementType===n.type?((i=r(t,n.props)).ref=Ia(e,t,n),i.return=e,i):((i=Wu(n.type,n.key,n.props,null,e.mode,i)).ref=Ia(e,t,n),i.return=e,i)}function c(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ku(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,a){return null===t||7!==t.tag?((t=zu(n,e.mode,i,a)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Hu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case ee:return(n=Wu(t.type,t.key,t.props,null,e.mode,n)).ref=Ia(e,null,t),n.return=e,n;case te:return(t=Ku(t,e.mode,n)).return=e,t}if(Ta(t)||ve(t))return(t=zu(t,e.mode,n,null)).return=e,t;Sa(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==r?null:u(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case ee:return n.key===r?n.type===ne?h(e,t,n.props.children,i,r):l(e,t,n,i):null;case te:return n.key===r?c(e,t,n,i):null}if(Ta(n)||ve(n))return null!==r?null:h(e,t,n,i,null);Sa(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i||"number"===typeof i)return u(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case ee:return e=e.get(null===i.key?n:i.key)||null,i.type===ne?h(t,e,i.props.children,r,i.key):l(t,e,i,r);case te:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r)}if(Ta(i)||ve(i))return h(t,e=e.get(n)||null,i,r,null);Sa(t,i)}return null}function v(r,o,s,u){for(var l=null,c=null,h=o,v=o=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var y=f(r,h,s[v],u);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(r,h),o=a(y,o,v),null===c?l=y:c.sibling=y,c=y,h=m}if(v===s.length)return n(r,h),l;if(null===h){for(;v<s.length;v++)null!==(h=d(r,s[v],u))&&(o=a(h,o,v),null===c?l=h:c.sibling=h,c=h);return l}for(h=i(r,h);v<s.length;v++)null!==(m=p(h,r,v,s[v],u))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),o=a(m,o,v),null===c?l=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(r,e)})),l}function m(r,s,u,l){var c=ve(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var h=c=null,v=s,m=s=0,y=null,g=u.next();null!==v&&!g.done;m++,g=u.next()){v.index>m?(y=v,v=null):y=v.sibling;var _=f(r,v,g.value,l);if(null===_){null===v&&(v=y);break}e&&v&&null===_.alternate&&t(r,v),s=a(_,s,m),null===h?c=_:h.sibling=_,h=_,v=y}if(g.done)return n(r,v),c;if(null===v){for(;!g.done;m++,g=u.next())null!==(g=d(r,g.value,l))&&(s=a(g,s,m),null===h?c=g:h.sibling=g,h=g);return c}for(v=i(r,v);!g.done;m++,g=u.next())null!==(g=p(v,r,m,g.value,l))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),s=a(g,s,m),null===h?c=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(r,e)})),c}return function(e,i,a,u){var l="object"===typeof a&&null!==a&&a.type===ne&&null===a.key;l&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case ee:e:{for(c=a.key,l=i;null!==l;){if(l.key===c){if(7===l.tag){if(a.type===ne){n(e,l.sibling),(i=r(l,a.props.children)).return=e,e=i;break e}}else if(l.elementType===a.type){n(e,l.sibling),(i=r(l,a.props)).ref=Ia(e,l,a),i.return=e,e=i;break e}n(e,l);break}t(e,l),l=l.sibling}a.type===ne?((i=zu(a.props.children,e.mode,u,a.key)).return=e,e=i):((u=Wu(a.type,a.key,a.props,null,e.mode,u)).ref=Ia(e,i,a),u.return=e,e=u)}return s(e);case te:e:{for(l=a.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(e,i.sibling),(i=r(i,a.children||[])).return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}(i=Ku(a,e.mode,u)).return=e,e=i}return s(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==i&&6===i.tag?(n(e,i.sibling),(i=r(i,a)).return=e,e=i):(n(e,i),(i=Hu(a,e.mode,u)).return=e,e=i),s(e);if(Ta(a))return v(e,i,a,u);if(ve(a))return m(e,i,a,u);if(c&&Sa(e,a),"undefined"===typeof a&&!l)switch(e.tag){case 1:case 0:throw e=e.type,Error(o(152,e.displayName||e.name||"Component"))}return n(e,i)}}var Aa=Oa(!0),Da=Oa(!1),Ma={},Ra={current:Ma},Pa={current:Ma},Na={current:Ma};function La(e){if(e===Ma)throw Error(o(174));return e}function Ba(e,t){switch(vr(Na,t),vr(Pa,e),vr(Ra,Ma),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Be(null,"");break;default:t=Be(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}pr(Ra),vr(Ra,t)}function Fa(){pr(Ra),pr(Pa),pr(Na)}function ja(e){La(Na.current);var t=La(Ra.current),n=Be(t,e.type);t!==n&&(vr(Pa,e),vr(Ra,n))}function Ua(e){Pa.current===e&&(pr(Ra),pr(Pa))}var Va={current:0};function qa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===_n||n.data===kn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.effectTag))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function $a(e,t){return{responder:e,props:t}}var Wa=Y.ReactCurrentDispatcher,za=Y.ReactCurrentBatchConfig,Ha=0,Ka=null,Qa=null,Ga=null,Ya=!1;function Xa(){throw Error(o(321))}function Ja(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$i(e[n],t[n]))return!1;return!0}function Za(e,t,n,i,r,a){if(Ha=a,Ka=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,Wa.current=null===e||null===e.memoizedState?xo:Eo,e=n(i,r),t.expirationTime===Ha){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(o(301));a+=1,Ga=Qa=null,t.updateQueue=null,Wa.current=Co,e=n(i,r)}while(t.expirationTime===Ha)}if(Wa.current=bo,t=null!==Qa&&null!==Qa.next,Ha=0,Ga=Qa=Ka=null,Ya=!1,t)throw Error(o(300));return e}function eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ga?Ka.memoizedState=Ga=e:Ga=Ga.next=e,Ga}function to(){if(null===Qa){var e=Ka.alternate;e=null!==e?e.memoizedState:null}else e=Qa.next;var t=null===Ga?Ka.memoizedState:Ga.next;if(null!==t)Ga=t,Qa=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Qa=e).memoizedState,baseState:Qa.baseState,baseQueue:Qa.baseQueue,queue:Qa.queue,next:null},null===Ga?Ka.memoizedState=Ga=e:Ga=Ga.next=e}return Ga}function no(e,t){return"function"===typeof t?t(e):t}function io(e){var t=to(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=Qa,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var s=r.next;r.next=a.next,a.next=s}i.baseQueue=r=a,n.pending=null}if(null!==r){r=r.next,i=i.baseState;var u=s=a=null,l=r;do{var c=l.expirationTime;if(c<Ha){var h={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=h,a=i):u=u.next=h,c>Ka.expirationTime&&(Ka.expirationTime=c,xu(c))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),bu(c,l.suspenseConfig),i=l.eagerReducer===e?l.eagerState:e(i,l.action);l=l.next}while(null!==l&&l!==r);null===u?a=i:u.next=s,$i(i,t.memoizedState)||(Lo=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=u,n.lastRenderedState=i}return[t.memoizedState,n.dispatch]}function ro(e){var t=to(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{a=e(a,s.action),s=s.next}while(s!==r);$i(a,t.memoizedState)||(Lo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function ao(e){var t=eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:no,lastRenderedState:e}).dispatch=wo.bind(null,Ka,e),[t.memoizedState,e]}function oo(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=Ka.updateQueue)?(t={lastEffect:null},Ka.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function so(){return to().memoizedState}function uo(e,t,n,i){var r=eo();Ka.effectTag|=e,r.memoizedState=oo(1|t,n,void 0,void 0===i?null:i)}function lo(e,t,n,i){var r=to();i=void 0===i?null:i;var a=void 0;if(null!==Qa){var o=Qa.memoizedState;if(a=o.destroy,null!==i&&Ja(i,o.deps))return void oo(t,n,a,i)}Ka.effectTag|=e,r.memoizedState=oo(1|t,n,a,i)}function co(e,t){return uo(516,4,e,t)}function ho(e,t){return lo(516,4,e,t)}function fo(e,t){return lo(4,2,e,t)}function po(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,lo(4,2,po.bind(null,t,e),n)}function mo(){}function yo(e,t){return eo().memoizedState=[e,void 0===t?null:t],e}function go(e,t){var n=to();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ja(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function _o(e,t){var n=to();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Ja(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function ko(e,t,n){var i=Hr();Qr(98>i?98:i,(function(){e(!0)})),Qr(97<i?97:i,(function(){var i=za.suspense;za.suspense=void 0===t?null:t;try{e(!1),n()}finally{za.suspense=i}}))}function wo(e,t,n){var i=lu(),r=ga.suspense;r={expirationTime:i=cu(i,e,r),suspenseConfig:r,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(null===a?r.next=r:(r.next=a.next,a.next=r),t.pending=r,a=e.alternate,e===Ka||null!==a&&a===Ka)Ya=!0,r.expirationTime=Ha,Ka.expirationTime=Ha;else{if(0===e.expirationTime&&(null===a||0===a.expirationTime)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(r.eagerReducer=a,r.eagerState=s,$i(s,o))return}catch(u){}hu(e,i)}}var bo={readContext:la,useCallback:Xa,useContext:Xa,useEffect:Xa,useImperativeHandle:Xa,useLayoutEffect:Xa,useMemo:Xa,useReducer:Xa,useRef:Xa,useState:Xa,useDebugValue:Xa,useResponder:Xa,useDeferredValue:Xa,useTransition:Xa},xo={readContext:la,useCallback:yo,useContext:la,useEffect:co,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,uo(4,2,po.bind(null,t,e),n)},useLayoutEffect:function(e,t){return uo(4,2,e,t)},useMemo:function(e,t){var n=eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=eo();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e=(e=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=wo.bind(null,Ka,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},eo().memoizedState=e},useState:ao,useDebugValue:mo,useResponder:$a,useDeferredValue:function(e,t){var n=ao(e),i=n[0],r=n[1];return co((function(){var n=za.suspense;za.suspense=void 0===t?null:t;try{r(e)}finally{za.suspense=n}}),[e,t]),i},useTransition:function(e){var t=ao(!1),n=t[0];return t=t[1],[yo(ko.bind(null,t,e),[t,e]),n]}},Eo={readContext:la,useCallback:go,useContext:la,useEffect:ho,useImperativeHandle:vo,useLayoutEffect:fo,useMemo:_o,useReducer:io,useRef:so,useState:function(){return io(no)},useDebugValue:mo,useResponder:$a,useDeferredValue:function(e,t){var n=io(no),i=n[0],r=n[1];return ho((function(){var n=za.suspense;za.suspense=void 0===t?null:t;try{r(e)}finally{za.suspense=n}}),[e,t]),i},useTransition:function(e){var t=io(no),n=t[0];return t=t[1],[go(ko.bind(null,t,e),[t,e]),n]}},Co={readContext:la,useCallback:go,useContext:la,useEffect:ho,useImperativeHandle:vo,useLayoutEffect:fo,useMemo:_o,useReducer:ro,useRef:so,useState:function(){return ro(no)},useDebugValue:mo,useResponder:$a,useDeferredValue:function(e,t){var n=ro(no),i=n[0],r=n[1];return ho((function(){var n=za.suspense;za.suspense=void 0===t?null:t;try{r(e)}finally{za.suspense=n}}),[e,t]),i},useTransition:function(e){var t=ro(no),n=t[0];return t=t[1],[go(ko.bind(null,t,e),[t,e]),n]}},To=null,Io=null,So=!1;function Oo(e,t){var n=Vu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Do(e){if(So){var t=Io;if(t){var n=t;if(!Ao(e,t)){if(!(t=In(n.nextSibling))||!Ao(e,t))return e.effectTag=-1025&e.effectTag|2,So=!1,void(To=e);Oo(To,n)}To=e,Io=In(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,So=!1,To=e}}function Mo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;To=e}function Ro(e){if(e!==To)return!1;if(!So)return Mo(e),So=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!En(t,e.memoizedProps))for(t=Io;t;)Oo(e,t),t=In(t.nextSibling);if(Mo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===gn){if(0===t){Io=In(e.nextSibling);break e}t--}else n!==yn&&n!==kn&&n!==_n||t++}e=e.nextSibling}Io=null}}else Io=To?In(e.stateNode.nextSibling):null;return!0}function Po(){Io=To=null,So=!1}var No=Y.ReactCurrentOwner,Lo=!1;function Bo(e,t,n,i){t.child=null===e?Da(t,null,n,i):Aa(t,e.child,n,i)}function Fo(e,t,n,i,r){n=n.render;var a=t.ref;return ua(t,r),i=Za(e,t,n,i,a,r),null===e||Lo?(t.effectTag|=1,Bo(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),ts(e,t,r))}function jo(e,t,n,i,r,a){if(null===e){var o=n.type;return"function"!==typeof o||qu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Wu(n.type,null,i,null,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Uo(e,t,o,i,r,a))}return o=e.child,r<a&&(r=o.memoizedProps,(n=null!==(n=n.compare)?n:zi)(r,i)&&e.ref===t.ref)?ts(e,t,a):(t.effectTag|=1,(e=$u(o,i)).ref=t.ref,e.return=t,t.child=e)}function Uo(e,t,n,i,r,a){return null!==e&&zi(e.memoizedProps,i)&&e.ref===t.ref&&(Lo=!1,r<a)?(t.expirationTime=e.expirationTime,ts(e,t,a)):qo(e,t,n,i,a)}function Vo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function qo(e,t,n,i,r){var a=wr(n)?_r:yr.current;return a=kr(t,a),ua(t,r),n=Za(e,t,n,i,a,r),null===e||Lo?(t.effectTag|=1,Bo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=r&&(e.expirationTime=0),ts(e,t,r))}function $o(e,t,n,i,r){if(wr(n)){var a=!0;Cr(t)}else a=!1;if(ua(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),xa(t,n,i),Ca(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=la(l):l=kr(t,l=wr(n)?_r:yr.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==i||u!==l)&&Ea(t,o,i,l),ca=!1;var d=t.memoizedState;o.state=d,ma(t,i,o,r),u=t.memoizedState,s!==i||d!==u||gr.current||ca?("function"===typeof c&&(ka(t,n,c,i),u=t.memoizedState),(s=ca||ba(t,n,s,i,d,u,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=i,t.memoizedState=u),o.props=i,o.state=u,o.context=l,i=s):("function"===typeof o.componentDidMount&&(t.effectTag|=4),i=!1)}else o=t.stateNode,da(e,t),s=t.memoizedProps,o.props=t.type===t.elementType?s:ea(t.type,s),u=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=la(l):l=kr(t,l=wr(n)?_r:yr.current),(h="function"===typeof(c=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==i||u!==l)&&Ea(t,o,i,l),ca=!1,u=t.memoizedState,o.state=u,ma(t,i,o,r),d=t.memoizedState,s!==i||u!==d||gr.current||ca?("function"===typeof c&&(ka(t,n,c,i),d=t.memoizedState),(c=ca||ba(t,n,s,i,u,d,l))?(h||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,d,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,d,l)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=i,t.memoizedState=d),o.props=i,o.state=d,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),i=!1);return Wo(e,t,n,i,a,r)}function Wo(e,t,n,i,r,a){Vo(e,t);var o=0!==(64&t.effectTag);if(!i&&!o)return r&&Tr(t,n,!1),ts(e,t,a);i=t.stateNode,No.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.effectTag|=1,null!==e&&o?(t.child=Aa(t,e.child,null,a),t.child=Aa(t,null,s,a)):Bo(e,t,s,a),t.memoizedState=i.state,r&&Tr(t,n,!0),t.child}function zo(e){var t=e.stateNode;t.pendingContext?xr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&xr(0,t.context,!1),Ba(e,t.containerInfo)}var Ho,Ko,Qo,Go,Yo={dehydrated:null,retryTime:0};function Xo(e,t,n){var i,r=t.mode,a=t.pendingProps,o=Va.current,s=!1;if((i=0!==(64&t.effectTag))||(i=0!==(2&o)&&(null===e||null!==e.memoizedState)),i?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===a.fallback||!0===a.unstable_avoidThisFallback||(o|=1),vr(Va,1&o),null===e){if(void 0!==a.fallback&&Do(t),s){if(s=a.fallback,(a=zu(null,r,0,null)).return=t,0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=zu(s,r,n,null)).return=t,a.sibling=n,t.memoizedState=Yo,t.child=a,n}return r=a.children,t.memoizedState=null,t.child=Da(t,null,r,n)}if(null!==e.memoizedState){if(r=(e=e.child).sibling,s){if(a=a.fallback,(n=$u(e,e.pendingProps)).return=t,0===(2&t.mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(r=$u(r,a)).return=t,n.sibling=r,n.childExpirationTime=0,t.memoizedState=Yo,t.child=n,r}return n=Aa(t,e.child,a.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=a.fallback,(a=zu(null,r,0,null)).return=t,a.child=e,null!==e&&(e.return=a),0===(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,a.child=e;null!==e;)e.return=a,e=e.sibling;return(n=zu(s,r,n,null)).return=t,a.sibling=n,n.effectTag|=2,a.childExpirationTime=0,t.memoizedState=Yo,t.child=a,n}return t.memoizedState=null,t.child=Aa(t,e,a.children,n)}function Jo(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),sa(e.return,t)}function Zo(e,t,n,i,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailExpiration:0,tailMode:r,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailExpiration=0,o.tailMode=r,o.lastEffect=a)}function es(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(Bo(e,t,i.children,n),0!==(2&(i=Va.current)))i=1&i|2,t.effectTag|=64;else{if(null!==e&&0!==(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Jo(e,n);else if(19===e.tag)Jo(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(vr(Va,i),0===(2&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===qa(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Zo(t,!1,r,n,a,t.lastEffect);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===qa(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Zo(t,!0,n,null,a,t.lastEffect);break;case"together":Zo(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ts(e,t,n){null!==e&&(t.dependencies=e.dependencies);var i=t.expirationTime;if(0!==i&&xu(i),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=$u(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$u(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ns(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function is(e,t,n){var i=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return wr(t.type)&&br(),null;case 3:return Fa(),pr(gr),pr(yr),(n=t.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||!Ro(t)||(t.effectTag|=4),Ko(t),null;case 5:Ua(t),n=La(Na.current);var a=t.type;if(null!==e&&null!=t.stateNode)Qo(e,t,a,i,n),e.ref!==t.ref&&(t.effectTag|=128);else{if(!i){if(null===t.stateNode)throw Error(o(166));return null}if(e=La(Ra.current),Ro(t)){i=t.stateNode,a=t.type;var s=t.memoizedProps;switch(i[An]=t,i[Dn]=s,a){case"iframe":case"object":case"embed":Qt("load",i);break;case"video":case"audio":for(e=0;e<Xe.length;e++)Qt(Xe[e],i);break;case"source":Qt("error",i);break;case"img":case"image":case"link":Qt("error",i),Qt("load",i);break;case"form":Qt("reset",i),Qt("submit",i);break;case"details":Qt("toggle",i);break;case"input":xe(i,s),Qt("invalid",i),ln(n,"onChange");break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Qt("invalid",i),ln(n,"onChange");break;case"textarea":De(i,s),Qt("invalid",i),ln(n,"onChange")}for(var u in on(a,s),e=null,s)if(s.hasOwnProperty(u)){var l=s[u];"children"===u?"string"===typeof l?i.textContent!==l&&(e=["children",l]):"number"===typeof l&&i.textContent!==""+l&&(e=["children",""+l]):E.hasOwnProperty(u)&&null!=l&&ln(n,u)}switch(a){case"input":ke(i),Te(i,s,!0);break;case"textarea":ke(i),Re(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=cn)}n=e,t.updateQueue=n,null!==n&&(t.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,e===un&&(e=Le(a)),e===un?"script"===a?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=u.createElement(a,{is:i.is}):(e=u.createElement(a),"select"===a&&(u=e,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):e=u.createElementNS(e,a),e[An]=t,e[Dn]=i,Ho(e,t,!1,!1),t.stateNode=e,u=sn(a,i),a){case"iframe":case"object":case"embed":Qt("load",e),l=i;break;case"video":case"audio":for(l=0;l<Xe.length;l++)Qt(Xe[l],e);l=i;break;case"source":Qt("error",e),l=i;break;case"img":case"image":case"link":Qt("error",e),Qt("load",e),l=i;break;case"form":Qt("reset",e),Qt("submit",e),l=i;break;case"details":Qt("toggle",e),l=i;break;case"input":xe(e,i),l=be(e,i),Qt("invalid",e),ln(n,"onChange");break;case"option":l=Se(e,i);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},l=r({},i,{value:void 0}),Qt("invalid",e),ln(n,"onChange");break;case"textarea":De(e,i),l=Ae(e,i),Qt("invalid",e),ln(n,"onChange");break;default:l=i}on(a,l);var c=l;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?rn(e,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&Ue(e,h):"children"===s?"string"===typeof h?("textarea"!==a||""!==h)&&Ve(e,h):"number"===typeof h&&Ve(e,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(E.hasOwnProperty(s)?null!=h&&ln(n,s):null!=h&&X(e,s,h,u))}switch(a){case"input":ke(e),Te(e,i,!1);break;case"textarea":ke(e),Re(e);break;case"option":null!=i.value&&e.setAttribute("value",""+ge(i.value));break;case"select":e.multiple=!!i.multiple,null!=(n=i.value)?Oe(e,!!i.multiple,n,!1):null!=i.defaultValue&&Oe(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof l.onClick&&(e.onclick=cn)}xn(a,i)&&(t.effectTag|=4)}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)Go(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));n=La(Na.current),La(Ra.current),Ro(t)?(n=t.stateNode,i=t.memoizedProps,n[An]=t,n.nodeValue!==i&&(t.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[An]=t,t.stateNode=n)}return null;case 13:return pr(Va),i=t.memoizedState,0!==(64&t.effectTag)?(t.expirationTime=n,t):(n=null!==i,i=!1,null===e?void 0!==t.memoizedProps.fallback&&Ro(t):(i=null!==(a=e.memoizedState),n||null===a||null!==(a=e.child.sibling)&&(null!==(s=t.firstEffect)?(t.firstEffect=a,a.nextEffect=s):(t.firstEffect=t.lastEffect=a,a.nextEffect=null),a.effectTag=8)),n&&!i&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Va.current)?$s===Rs&&($s=Ls):($s!==Rs&&$s!==Ls||($s=Bs),0!==Qs&&null!==Us&&(Yu(Us,qs),Xu(Us,Qs)))),(n||i)&&(t.effectTag|=4),null);case 4:return Fa(),Ko(t),null;case 10:return oa(t),null;case 19:if(pr(Va),null===(i=t.memoizedState))return null;if(a=0!==(64&t.effectTag),null===(s=i.rendering)){if(a)ns(i,!1);else if($s!==Rs||null!==e&&0!==(64&e.effectTag))for(s=t.child;null!==s;){if(null!==(e=qa(s))){for(t.effectTag|=64,ns(i,!1),null!==(a=e.updateQueue)&&(t.updateQueue=a,t.effectTag|=4),null===i.lastEffect&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=t.child;null!==i;)s=n,(a=i).effectTag&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(e=a.alternate)?(a.childExpirationTime=0,a.expirationTime=s,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null):(a.childExpirationTime=e.childExpirationTime,a.expirationTime=e.expirationTime,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,s=e.dependencies,a.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),i=i.sibling;return vr(Va,1&Va.current|2),t.child}s=s.sibling}}else{if(!a)if(null!==(e=qa(s))){if(t.effectTag|=64,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.effectTag|=4),ns(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate)return null!==(t=t.lastEffect=i.lastEffect)&&(t.nextEffect=null),null}else 2*zr()-i.renderingStartTime>i.tailExpiration&&1<n&&(t.effectTag|=64,a=!0,ns(i,!1),t.expirationTime=t.childExpirationTime=n-1);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=i.last)?n.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(0===i.tailExpiration&&(i.tailExpiration=zr()+500),n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=t.lastEffect,i.renderingStartTime=zr(),n.sibling=null,t=Va.current,vr(Va,a?1&t|2:1&t),n):null}throw Error(o(156,t.tag))}function rs(e){switch(e.tag){case 1:wr(e.type)&&br();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(Fa(),pr(gr),pr(yr),0!==(64&(t=e.effectTag)))throw Error(o(285));return e.effectTag=-4097&t|64,e;case 5:return Ua(e),null;case 13:return pr(Va),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return pr(Va),null;case 4:return Fa(),null;case 10:return oa(e),null;default:return null}}function as(e,t){return{value:e,source:t,stack:ye(t)}}Ho=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ko=function(){},Qo=function(e,t,n,i,a){var o=e.memoizedProps;if(o!==i){var s,u,l=t.stateNode;switch(La(Ra.current),e=null,n){case"input":o=be(l,o),i=be(l,i),e=[];break;case"option":o=Se(l,o),i=Se(l,i),e=[];break;case"select":o=r({},o,{value:void 0}),i=r({},i,{value:void 0}),e=[];break;case"textarea":o=Ae(l,o),i=Ae(l,i),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof i.onClick&&(l.onclick=cn)}for(s in on(n,i),n=null,o)if(!i.hasOwnProperty(s)&&o.hasOwnProperty(s)&&null!=o[s])if("style"===s)for(u in l=o[s])l.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(E.hasOwnProperty(s)?e||(e=[]):(e=e||[]).push(s,null));for(s in i){var c=i[s];if(l=null!=o?o[s]:void 0,i.hasOwnProperty(s)&&c!==l&&(null!=c||null!=l))if("style"===s)if(l){for(u in l)!l.hasOwnProperty(u)||c&&c.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in c)c.hasOwnProperty(u)&&l[u]!==c[u]&&(n||(n={}),n[u]=c[u])}else n||(e||(e=[]),e.push(s,n)),n=c;else"dangerouslySetInnerHTML"===s?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(e=e||[]).push(s,c)):"children"===s?l===c||"string"!==typeof c&&"number"!==typeof c||(e=e||[]).push(s,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(E.hasOwnProperty(s)?(null!=c&&ln(a,s),e||l===c||(e=[])):(e=e||[]).push(s,c))}n&&(e=e||[]).push("style",n),a=e,(t.updateQueue=a)&&(t.effectTag|=4)}},Go=function(e,t,n,i){n!==i&&(t.effectTag|=4)};var os="function"===typeof WeakSet?WeakSet:Set;function ss(e,t){var n=t.source,i=t.stack;null===i&&null!==n&&(i=ye(n)),null!==n&&me(n.type),t=t.value,null!==e&&1===e.tag&&me(e.type);try{console.error(t)}catch(r){setTimeout((function(){throw r}))}}function us(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Nu(e,n)}else t.current=null}function ls(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 3:case 5:case 6:case 4:case 17:return;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,i=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ea(t.type,n),i),e.__reactInternalSnapshotBeforeUpdate=t}return}throw Error(o(163))}function cs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.destroy;n.destroy=void 0,void 0!==i&&i()}n=n.next}while(n!==t)}}function hs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function ds(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:return void hs(3,n);case 1:if(e=n.stateNode,4&n.effectTag)if(null===t)e.componentDidMount();else{var i=n.elementType===n.type?t.memoizedProps:ea(n.type,t.memoizedProps);e.componentDidUpdate(i,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}return void(null!==(t=n.updateQueue)&&ya(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}ya(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.effectTag&&xn(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Bt(n)))))}throw Error(o(163))}function fs(e,t,n){switch("function"===typeof ju&&ju(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e.next;Qr(97<n?97:n,(function(){var e=i;do{var n=e.destroy;if(void 0!==n){var r=t;try{n()}catch(a){Nu(r,a)}}e=e.next}while(e!==i)}))}break;case 1:us(t),"function"===typeof(n=t.stateNode).componentWillUnmount&&function(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Nu(e,n)}}(t,n);break;case 5:us(t);break;case 4:_s(e,t,n)}}function ps(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,null!==t&&ps(t)}function vs(e){return 5===e.tag||3===e.tag||4===e.tag}function ms(e){e:{for(var t=e.return;null!==t;){if(vs(t)){var n=t;break e}t=t.return}throw Error(o(160))}switch(t=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:t=t.containerInfo,i=!0;break;default:throw Error(o(161))}16&n.effectTag&&(Ve(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||vs(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}i?ys(e,n,t):gs(e,n,t)}function ys(e,t,n){var i=e.tag,r=5===i||6===i;if(r)e=r?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=cn));else if(4!==i&&null!==(e=e.child))for(ys(e,t,n),e=e.sibling;null!==e;)ys(e,t,n),e=e.sibling}function gs(e,t,n){var i=e.tag,r=5===i||6===i;if(r)e=r?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(gs(e,t,n),e=e.sibling;null!==e;)gs(e,t,n),e=e.sibling}function _s(e,t,n){for(var i,r,a=t,s=!1;;){if(!s){s=a.return;e:for(;;){if(null===s)throw Error(o(160));switch(i=s.stateNode,s.tag){case 5:r=!1;break e;case 3:case 4:i=i.containerInfo,r=!0;break e}s=s.return}s=!0}if(5===a.tag||6===a.tag){e:for(var u=e,l=a,c=n,h=l;;)if(fs(u,h,c),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===l)break e;for(;null===h.sibling;){if(null===h.return||h.return===l)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}r?(u=i,l=a.stateNode,8===u.nodeType?u.parentNode.removeChild(l):u.removeChild(l)):i.removeChild(a.stateNode)}else if(4===a.tag){if(null!==a.child){i=a.stateNode.containerInfo,r=!0,a.child.return=a,a=a.child;continue}}else if(fs(e,a,n),null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;4===(a=a.return).tag&&(s=!1)}a.sibling.return=a.return,a=a.sibling}}function ks(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void cs(3,t);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps,r=null!==e?e.memoizedProps:i;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Dn]=i,"input"===e&&"radio"===i.type&&null!=i.name&&Ee(n,i),sn(e,r),t=sn(e,i),r=0;r<a.length;r+=2){var s=a[r],u=a[r+1];"style"===s?rn(n,u):"dangerouslySetInnerHTML"===s?Ue(n,u):"children"===s?Ve(n,u):X(n,s,u,t)}switch(e){case"input":Ce(n,i);break;case"textarea":Me(n,i);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(e=i.value)?Oe(n,!!i.multiple,e,!1):t!==!!i.multiple&&(null!=i.defaultValue?Oe(n,!!i.multiple,i.defaultValue,!0):Oe(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((t=t.stateNode).hydrate&&(t.hydrate=!1,Bt(t.containerInfo)));case 13:if(n=t,null===t.memoizedState?i=!1:(i=!0,n=t.child,Ys=zr()),null!==n)e:for(e=n;;){if(5===e.tag)a=e.stateNode,i?"function"===typeof(a=a.style).setProperty?a.setProperty("display","none","important"):a.display="none":(a=e.stateNode,r=void 0!==(r=e.memoizedProps.style)&&null!==r&&r.hasOwnProperty("display")?r.display:null,a.style.display=nn("display",r));else if(6===e.tag)e.stateNode.nodeValue=i?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(a=e.child.sibling).return=e,e=a;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===n)break;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}return void ws(t);case 19:return void ws(t)}throw Error(o(163))}function ws(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new os),t.forEach((function(t){var i=Bu.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}var bs="function"===typeof WeakMap?WeakMap:Map;function xs(e,t,n){(n=fa(n,null)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Zs||(Zs=!0,eu=i),ss(e,t)},n}function Es(e,t,n){(n=fa(n,null)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return ss(e,t),i(r)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof i&&(null===tu?tu=new Set([this]):tu.add(this),ss(e,t));var n=t.stack;this.componentDidCatch(t.value,{componentStack:null!==n?n:""})}),n}var Cs,Ts=Math.ceil,Is=Y.ReactCurrentDispatcher,Ss=Y.ReactCurrentOwner,Os=0,As=8,Ds=16,Ms=32,Rs=0,Ps=1,Ns=2,Ls=3,Bs=4,Fs=5,js=Os,Us=null,Vs=null,qs=0,$s=Rs,Ws=null,zs=1073741823,Hs=1073741823,Ks=null,Qs=0,Gs=!1,Ys=0,Xs=500,Js=null,Zs=!1,eu=null,tu=null,nu=!1,iu=null,ru=90,au=null,ou=0,su=null,uu=0;function lu(){return(js&(Ds|Ms))!==Os?1073741821-(zr()/10|0):0!==uu?uu:uu=1073741821-(zr()/10|0)}function cu(e,t,n){if(0===(2&(t=t.mode)))return 1073741823;var i=Hr();if(0===(4&t))return 99===i?1073741823:1073741822;if((js&Ds)!==Os)return qs;if(null!==n)e=Zr(e,0|n.timeoutMs||5e3,250);else switch(i){case 99:e=1073741823;break;case 98:e=Zr(e,150,100);break;case 97:case 96:e=Zr(e,5e3,250);break;case 95:e=2;break;default:throw Error(o(326))}return null!==Us&&e===qs&&--e,e}function hu(e,t){if(50<ou)throw ou=0,su=null,Error(o(185));if(null!==(e=du(e,t))){var n=Hr();1073741823===t?(js&As)!==Os&&(js&(Ds|Ms))===Os?mu(e):(pu(e),js===Os&&Xr()):pu(e),(4&js)===Os||98!==n&&99!==n||(null===au?au=new Map([[e,t]]):(void 0===(n=au.get(e))||n>t)&&au.set(e,t))}}function du(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var i=e.return,r=null;if(null===i&&3===e.tag)r=e.stateNode;else for(;null!==i;){if(n=i.alternate,i.childExpirationTime<t&&(i.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===i.return&&3===i.tag){r=i.stateNode;break}i=i.return}return null!==r&&(Us===r&&(xu(t),$s===Bs&&Yu(r,qs)),Xu(r,t)),r}function fu(e){var t=e.lastExpiredTime;if(0!==t)return t;if(!Gu(e,t=e.firstPendingTime))return t;var n=e.lastPingedTime;return 2>=(e=n>(e=e.nextKnownPendingLevel)?n:e)&&t!==e?0:e}function pu(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Yr(mu.bind(null,e));else{var t=fu(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var i=lu();if(1073741823===t?i=99:1===t||2===t?i=95:i=0>=(i=10*(1073741821-t)-10*(1073741821-i))?99:250>=i?98:5250>=i?97:95,null!==n){var r=e.callbackPriority;if(e.callbackExpirationTime===t&&r>=i)return;n!==Fr&&Or(n)}e.callbackExpirationTime=t,e.callbackPriority=i,t=1073741823===t?Yr(mu.bind(null,e)):Gr(i,vu.bind(null,e),{timeout:10*(1073741821-t)-zr()}),e.callbackNode=t}}}function vu(e,t){if(uu=0,t)return Ju(e,t=lu()),pu(e),null;var n=fu(e);if(0!==n){if(t=e.callbackNode,(js&(Ds|Ms))!==Os)throw Error(o(327));if(Mu(),e===Us&&n===qs||_u(e,n),null!==Vs){var i=js;js|=Ds;for(var r=wu();;)try{Cu();break}catch(u){ku(e,u)}if(aa(),js=i,Is.current=r,$s===Ps)throw t=Ws,_u(e,n),Yu(e,n),pu(e),t;if(null===Vs)switch(r=e.finishedWork=e.current.alternate,e.finishedExpirationTime=n,i=$s,Us=null,i){case Rs:case Ps:throw Error(o(345));case Ns:Ju(e,2<n?2:n);break;case Ls:if(Yu(e,n),n===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Su(r)),1073741823===zs&&10<(r=Ys+Xs-zr())){if(Gs){var a=e.lastPingedTime;if(0===a||a>=n){e.lastPingedTime=n,_u(e,n);break}}if(0!==(a=fu(e))&&a!==n)break;if(0!==i&&i!==n){e.lastPingedTime=i;break}e.timeoutHandle=Cn(Ou.bind(null,e),r);break}Ou(e);break;case Bs:if(Yu(e,n),n===(i=e.lastSuspendedTime)&&(e.nextKnownPendingLevel=Su(r)),Gs&&(0===(r=e.lastPingedTime)||r>=n)){e.lastPingedTime=n,_u(e,n);break}if(0!==(r=fu(e))&&r!==n)break;if(0!==i&&i!==n){e.lastPingedTime=i;break}if(1073741823!==Hs?i=10*(1073741821-Hs)-zr():1073741823===zs?i=0:(i=10*(1073741821-zs)-5e3,0>(i=(r=zr())-i)&&(i=0),(n=10*(1073741821-n)-r)<(i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ts(i/1960))-i)&&(i=n)),10<i){e.timeoutHandle=Cn(Ou.bind(null,e),i);break}Ou(e);break;case Fs:if(1073741823!==zs&&null!==Ks){a=zs;var s=Ks;if(0>=(i=0|s.busyMinDurationMs)?i=0:(r=0|s.busyDelayMs,i=(a=zr()-(10*(1073741821-a)-(0|s.timeoutMs||5e3)))<=r?0:r+i-a),10<i){Yu(e,n),e.timeoutHandle=Cn(Ou.bind(null,e),i);break}}Ou(e);break;default:throw Error(o(329))}if(pu(e),e.callbackNode===t)return vu.bind(null,e)}}return null}function mu(e){var t=e.lastExpiredTime;if(t=0!==t?t:1073741823,(js&(Ds|Ms))!==Os)throw Error(o(327));if(Mu(),e===Us&&t===qs||_u(e,t),null!==Vs){var n=js;js|=Ds;for(var i=wu();;)try{Eu();break}catch(r){ku(e,r)}if(aa(),js=n,Is.current=i,$s===Ps)throw n=Ws,_u(e,t),Yu(e,t),pu(e),n;if(null!==Vs)throw Error(o(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,Us=null,Ou(e),pu(e)}return null}function yu(e,t){var n=js;js|=1;try{return e(t)}finally{(js=n)===Os&&Xr()}}function gu(e,t){var n=js;js&=-2,js|=As;try{return e(t)}finally{(js=n)===Os&&Xr()}}function _u(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Tn(n)),null!==Vs)for(n=Vs.return;null!==n;){var i=n;switch(i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&br();break;case 3:Fa(),pr(gr),pr(yr);break;case 5:Ua(i);break;case 4:Fa();break;case 13:case 19:pr(Va);break;case 10:oa(i)}n=n.return}Us=e,Vs=$u(e.current,null),qs=t,$s=Rs,Ws=null,Hs=zs=1073741823,Ks=null,Qs=0,Gs=!1}function ku(e,t){for(;;){try{if(aa(),Wa.current=bo,Ya)for(var n=Ka.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}if(Ha=0,Ga=Qa=Ka=null,Ya=!1,null===Vs||null===Vs.return)return $s=Ps,Ws=t,Vs=null;e:{var r=e,a=Vs.return,o=Vs,s=t;if(t=qs,o.effectTag|=2048,o.firstEffect=o.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var u=s;if(0===(2&o.mode)){var l=o.alternate;l?(o.updateQueue=l.updateQueue,o.memoizedState=l.memoizedState,o.expirationTime=l.expirationTime):(o.updateQueue=null,o.memoizedState=null)}var c=0!==(1&Va.current),h=a;do{var d;if(d=13===h.tag){var f=h.memoizedState;if(null!==f)d=null!==f.dehydrated;else{var p=h.memoizedProps;d=void 0!==p.fallback&&(!0!==p.unstable_avoidThisFallback||!c)}}if(d){var v=h.updateQueue;if(null===v){var m=new Set;m.add(u),h.updateQueue=m}else v.add(u);if(0===(2&h.mode)){if(h.effectTag|=64,o.effectTag&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var y=fa(1073741823,null);y.tag=2,pa(o,y)}o.expirationTime=1073741823;break e}s=void 0,o=t;var g=r.pingCache;if(null===g?(g=r.pingCache=new bs,s=new Set,g.set(u,s)):void 0===(s=g.get(u))&&(s=new Set,g.set(u,s)),!s.has(o)){s.add(o);var _=Lu.bind(null,r,u,o);u.then(_,_)}h.effectTag|=4096,h.expirationTime=t;break e}h=h.return}while(null!==h);s=Error((me(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+ye(o))}$s!==Fs&&($s=Ns),s=as(s,o),h=a;do{switch(h.tag){case 3:u=s,h.effectTag|=4096,h.expirationTime=t,va(h,xs(h,u,t));break e;case 1:u=s;var k=h.type,w=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof k.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===tu||!tu.has(w)))){h.effectTag|=4096,h.expirationTime=t,va(h,Es(h,u,t));break e}}h=h.return}while(null!==h)}Vs=Iu(Vs)}catch(b){t=b;continue}break}}function wu(){var e=Is.current;return Is.current=bo,null===e?bo:e}function bu(e,t){e<zs&&2<e&&(zs=e),null!==t&&e<Hs&&2<e&&(Hs=e,Ks=t)}function xu(e){e>Qs&&(Qs=e)}function Eu(){for(;null!==Vs;)Vs=Tu(Vs)}function Cu(){for(;null!==Vs&&!jr();)Vs=Tu(Vs)}function Tu(e){var t=Cs(e.alternate,e,qs);return e.memoizedProps=e.pendingProps,null===t&&(t=Iu(e)),Ss.current=null,t}function Iu(e){Vs=e;do{var t=Vs.alternate;if(e=Vs.return,0===(2048&Vs.effectTag)){if(t=is(t,Vs,qs),1===qs||1!==Vs.childExpirationTime){for(var n=0,i=Vs.child;null!==i;){var r=i.expirationTime,a=i.childExpirationTime;r>n&&(n=r),a>n&&(n=a),i=i.sibling}Vs.childExpirationTime=n}if(null!==t)return t;null!==e&&0===(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Vs.firstEffect),null!==Vs.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Vs.firstEffect),e.lastEffect=Vs.lastEffect),1<Vs.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Vs:e.firstEffect=Vs,e.lastEffect=Vs))}else{if(null!==(t=rs(Vs)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Vs.sibling))return t;Vs=e}while(null!==Vs);return $s===Rs&&($s=Fs),null}function Su(e){var t=e.expirationTime;return t>(e=e.childExpirationTime)?t:e}function Ou(e){var t=Hr();return Qr(99,Au.bind(null,e,t)),null}function Au(e,t){do{Mu()}while(null!==iu);if((js&(Ds|Ms))!==Os)throw Error(o(327));var n=e.finishedWork,i=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var r=Su(n);if(e.firstPendingTime=r,i<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:i<=e.firstSuspendedTime&&(e.firstSuspendedTime=i-1),i<=e.lastPingedTime&&(e.lastPingedTime=0),i<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===Us&&(Vs=Us=null,qs=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){var a=js;js|=Ms,Ss.current=null,wn=Kt;var s=vn();if(mn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{var l=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(l&&0!==l.rangeCount){u=l.anchorNode;var c=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{u.nodeType,h.nodeType}catch(T){u=null;break e}var d=0,f=-1,p=-1,v=0,m=0,y=s,g=null;t:for(;;){for(var _;y!==u||0!==c&&3!==y.nodeType||(f=d+c),y!==h||0!==l&&3!==y.nodeType||(p=d+l),3===y.nodeType&&(d+=y.nodeValue.length),null!==(_=y.firstChild);)g=y,y=_;for(;;){if(y===s)break t;if(g===u&&++v===c&&(f=d),g===h&&++m===l&&(p=d),null!==(_=y.nextSibling))break;g=(y=g).parentNode}y=_}u=-1===f||-1===p?null:{start:f,end:p}}else u=null}u=u||{start:0,end:0}}else u=null;bn={activeElementDetached:null,focusedElem:s,selectionRange:u},Kt=!1,Js=r;do{try{Du()}catch(T){if(null===Js)throw Error(o(330));Nu(Js,T),Js=Js.nextEffect}}while(null!==Js);Js=r;do{try{for(s=e,u=t;null!==Js;){var k=Js.effectTag;if(16&k&&Ve(Js.stateNode,""),128&k){var w=Js.alternate;if(null!==w){var b=w.ref;null!==b&&("function"===typeof b?b(null):b.current=null)}}switch(1038&k){case 2:ms(Js),Js.effectTag&=-3;break;case 6:ms(Js),Js.effectTag&=-3,ks(Js.alternate,Js);break;case 1024:Js.effectTag&=-1025;break;case 1028:Js.effectTag&=-1025,ks(Js.alternate,Js);break;case 4:ks(Js.alternate,Js);break;case 8:_s(s,c=Js,u),ps(c)}Js=Js.nextEffect}}catch(T){if(null===Js)throw Error(o(330));Nu(Js,T),Js=Js.nextEffect}}while(null!==Js);if(b=bn,w=vn(),k=b.focusedElem,u=b.selectionRange,w!==k&&k&&k.ownerDocument&&pn(k.ownerDocument.documentElement,k)){null!==u&&mn(k)&&(w=u.start,void 0===(b=u.end)&&(b=w),"selectionStart"in k?(k.selectionStart=w,k.selectionEnd=Math.min(b,k.value.length)):(b=(w=k.ownerDocument||document)&&w.defaultView||window).getSelection&&(b=b.getSelection(),c=k.textContent.length,s=Math.min(u.start,c),u=void 0===u.end?s:Math.min(u.end,c),!b.extend&&s>u&&(c=u,u=s,s=c),c=fn(k,s),h=fn(k,u),c&&h&&(1!==b.rangeCount||b.anchorNode!==c.node||b.anchorOffset!==c.offset||b.focusNode!==h.node||b.focusOffset!==h.offset)&&((w=w.createRange()).setStart(c.node,c.offset),b.removeAllRanges(),s>u?(b.addRange(w),b.extend(h.node,h.offset)):(w.setEnd(h.node,h.offset),b.addRange(w))))),w=[];for(b=k;b=b.parentNode;)1===b.nodeType&&w.push({element:b,left:b.scrollLeft,top:b.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<w.length;k++)(b=w[k]).element.scrollLeft=b.left,b.element.scrollTop=b.top}Kt=!!wn,bn=wn=null,e.current=n,Js=r;do{try{for(k=e;null!==Js;){var x=Js.effectTag;if(36&x&&ds(k,Js.alternate,Js),128&x){w=void 0;var E=Js.ref;if(null!==E){var C=Js.stateNode;Js.tag,w=C,"function"===typeof E?E(w):E.current=w}}Js=Js.nextEffect}}catch(T){if(null===Js)throw Error(o(330));Nu(Js,T),Js=Js.nextEffect}}while(null!==Js);Js=null,Ur(),js=a}else e.current=n;if(nu)nu=!1,iu=e,ru=t;else for(Js=r;null!==Js;)t=Js.nextEffect,Js.nextEffect=null,Js=t;if(0===(t=e.firstPendingTime)&&(tu=null),1073741823===t?e===su?ou++:(ou=0,su=e):ou=0,"function"===typeof Fu&&Fu(n.stateNode,i),pu(e),Zs)throw Zs=!1,e=eu,eu=null,e;return(js&As)!==Os||Xr(),null}function Du(){for(;null!==Js;){var e=Js.effectTag;0!==(256&e)&&ls(Js.alternate,Js),0===(512&e)||nu||(nu=!0,Gr(97,(function(){return Mu(),null}))),Js=Js.nextEffect}}function Mu(){if(90!==ru){var e=97<ru?97:ru;return ru=90,Qr(e,Ru)}}function Ru(){if(null===iu)return!1;var e=iu;if(iu=null,(js&(Ds|Ms))!==Os)throw Error(o(331));var t=js;for(js|=Ms,e=e.current.firstEffect;null!==e;){try{var n=e;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:cs(5,n),hs(5,n)}}catch(i){if(null===e)throw Error(o(330));Nu(e,i)}n=e.nextEffect,e.nextEffect=null,e=n}return js=t,Xr(),!0}function Pu(e,t,n){pa(e,t=xs(e,t=as(n,t),1073741823)),null!==(e=du(e,1073741823))&&pu(e)}function Nu(e,t){if(3===e.tag)Pu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Pu(n,e,t);break}if(1===n.tag){var i=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===tu||!tu.has(i))){pa(n,e=Es(n,e=as(t,e),1073741823)),null!==(n=du(n,1073741823))&&pu(n);break}}n=n.return}}function Lu(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),Us===e&&qs===n?$s===Bs||$s===Ls&&1073741823===zs&&zr()-Ys<Xs?_u(e,qs):Gs=!0:Gu(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,pu(e)))}function Bu(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(t=cu(t=lu(),e,null)),null!==(e=du(e,t))&&pu(e)}Cs=function(e,t,n){var i=t.expirationTime;if(null!==e){var r=t.pendingProps;if(e.memoizedProps!==r||gr.current)Lo=!0;else{if(i<n){switch(Lo=!1,t.tag){case 3:zo(t),Po();break;case 5:if(ja(t),4&t.mode&&1!==n&&r.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:wr(t.type)&&Cr(t);break;case 4:Ba(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value,r=t.type._context,vr(ta,r._currentValue),r._currentValue=i;break;case 13:if(null!==t.memoizedState)return 0!==(i=t.child.childExpirationTime)&&i>=n?Xo(e,t,n):(vr(Va,1&Va.current),null!==(t=ts(e,t,n))?t.sibling:null);vr(Va,1&Va.current);break;case 19:if(i=t.childExpirationTime>=n,0!==(64&e.effectTag)){if(i)return es(e,t,n);t.effectTag|=64}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null),vr(Va,Va.current),!i)return null}return ts(e,t,n)}Lo=!1}}else Lo=!1;switch(t.expirationTime=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,r=kr(t,yr.current),ua(t,n),r=Za(null,t,i,e,r,n),t.effectTag|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,wr(i)){var a=!0;Cr(t)}else a=!1;t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,ha(t);var s=i.getDerivedStateFromProps;"function"===typeof s&&ka(t,i,s,e),r.updater=wa,t.stateNode=r,r._reactInternalFiber=t,Ca(t,i,e,n),t=Wo(null,t,i,!0,a,n)}else t.tag=0,Bo(null,t,r,n),t=t.child;return t;case 16:e:{if(r=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}}(r),1!==r._status)throw r._result;switch(r=r._result,t.type=r,a=t.tag=function(e){if("function"===typeof e)return qu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===ue)return 11;if(e===he)return 14}return 2}(r),e=ea(r,e),a){case 0:t=qo(null,t,r,e,n);break e;case 1:t=$o(null,t,r,e,n);break e;case 11:t=Fo(null,t,r,e,n);break e;case 14:t=jo(null,t,r,ea(r.type,e),i,n);break e}throw Error(o(306,r,""))}return t;case 0:return i=t.type,r=t.pendingProps,qo(e,t,i,r=t.elementType===i?r:ea(i,r),n);case 1:return i=t.type,r=t.pendingProps,$o(e,t,i,r=t.elementType===i?r:ea(i,r),n);case 3:if(zo(t),i=t.updateQueue,null===e||null===i)throw Error(o(282));if(i=t.pendingProps,r=null!==(r=t.memoizedState)?r.element:null,da(e,t),ma(t,i,null,n),(i=t.memoizedState.element)===r)Po(),t=ts(e,t,n);else{if((r=t.stateNode.hydrate)&&(Io=In(t.stateNode.containerInfo.firstChild),To=t,r=So=!0),r)for(n=Da(t,null,i,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Bo(e,t,i,n),Po();t=t.child}return t;case 5:return ja(t),null===e&&Do(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,s=r.children,En(i,r)?s=null:null!==a&&En(i,a)&&(t.effectTag|=16),Vo(e,t),4&t.mode&&1!==n&&r.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Bo(e,t,s,n),t=t.child),t;case 6:return null===e&&Do(t),null;case 13:return Xo(e,t,n);case 4:return Ba(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Aa(t,null,i,n):Bo(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,Fo(e,t,i,r=t.elementType===i?r:ea(i,r),n);case 7:return Bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{i=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value;var u=t.type._context;if(vr(ta,u._currentValue),u._currentValue=a,null!==s)if(u=s.value,0===(a=$i(u,a)?0:0|("function"===typeof i._calculateChangedBits?i._calculateChangedBits(u,a):1073741823))){if(s.children===r.children&&!gr.current){t=ts(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===i&&0!==(c.observedBits&a)){1===u.tag&&((c=fa(n,null)).tag=2,pa(u,c)),u.expirationTime<n&&(u.expirationTime=n),null!==(c=u.alternate)&&c.expirationTime<n&&(c.expirationTime=n),sa(u.return,n),l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else s=10===u.tag&&u.type===t.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===t){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Bo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=(a=t.pendingProps).children,ua(t,n),i=i(r=la(r,a.unstable_observedBits)),t.effectTag|=1,Bo(e,t,i,n),t.child;case 14:return a=ea(r=t.type,t.pendingProps),jo(e,t,r,a=ea(r.type,a),i,n);case 15:return Uo(e,t,t.type,t.pendingProps,i,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ea(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,wr(i)?(e=!0,Cr(t)):e=!1,ua(t,n),xa(t,i,r),Ca(t,i,r,n),Wo(null,t,i,!0,e,n);case 19:return es(e,t,n)}throw Error(o(156,t.tag))};var Fu=null,ju=null;function Uu(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Vu(e,t,n,i){return new Uu(e,t,n,i)}function qu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $u(e,t){var n=e.alternate;return null===n?((n=Vu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wu(e,t,n,i,r,a){var s=2;if(i=e,"function"===typeof e)qu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case ne:return zu(n.children,r,a,t);case se:s=8,r|=7;break;case ie:s=8,r|=1;break;case re:return(e=Vu(12,n,t,8|r)).elementType=re,e.type=re,e.expirationTime=a,e;case le:return(e=Vu(13,n,t,r)).type=le,e.elementType=le,e.expirationTime=a,e;case ce:return(e=Vu(19,n,t,r)).elementType=ce,e.expirationTime=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case ae:s=10;break e;case oe:s=9;break e;case ue:s=11;break e;case he:s=14;break e;case de:s=16,i=null;break e;case fe:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Vu(s,n,t,r)).elementType=e,t.type=i,t.expirationTime=a,t}function zu(e,t,n,i){return(e=Vu(7,e,i,t)).expirationTime=n,e}function Hu(e,t,n){return(e=Vu(6,e,null,t)).expirationTime=n,e}function Ku(e,t,n){return(t=Vu(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qu(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Gu(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&n>=t&&e<=t}function Yu(e,t){var n=e.firstSuspendedTime,i=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(i>t||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Xu(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(t>=n?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Ju(e,t){var n=e.lastExpiredTime;(0===n||n>t)&&(e.lastExpiredTime=t)}function Zu(e,t,n,i){var r=t.current,a=lu(),s=ga.suspense;a=cu(a,r,s);e:if(n){t:{if(et(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(o(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(wr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(null!==u);throw Error(o(171))}if(1===n.tag){var l=n.type;if(wr(l)){n=Er(n,l,u);break e}}n=u}else n=mr;return null===t.context?t.context=n:t.pendingContext=n,(t=fa(a,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),pa(r,t),hu(r,a),a}function el(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tl(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function nl(e,t){tl(e,t),(e=e.alternate)&&tl(e,t)}function il(e,t,n){var i=new Qu(e,t,n=null!=n&&!0===n.hydrate),r=Vu(3,null,null,2===t?7:1===t?3:0);i.current=r,r.stateNode=i,ha(r),e[Mn]=i.current,n&&0!==t&&function(e,t){var n=Ze(t);It.forEach((function(e){vt(e,t,n)})),St.forEach((function(e){vt(e,t,n)}))}(0,9===e.nodeType?e:e.ownerDocument),this._internalRoot=i}function rl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function al(e,t,n,i,r){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof r){var s=r;r=function(){var e=el(o);s.call(e)}}Zu(t,o,e,r)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new il(e,0,t?{hydrate:!0}:void 0)}(n,i),o=a._internalRoot,"function"===typeof r){var u=r;r=function(){var e=el(o);u.call(e)}}gu((function(){Zu(t,o,e,r)}))}return el(o)}function ol(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rl(t))throw Error(o(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:te,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}il.prototype.render=function(e){Zu(e,this._internalRoot,null,null)},il.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Zu(null,e,null,(function(){t[Mn]=null}))},mt=function(e){if(13===e.tag){var t=Zr(lu(),150,100);hu(e,t),nl(e,t)}},yt=function(e){13===e.tag&&(hu(e,3),nl(e,3))},gt=function(e){if(13===e.tag){var t=lu();hu(e,t=cu(t,e,null)),nl(e,t)}},S=function(e,t,n){switch(t){case"input":if(Ce(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=Ln(i);if(!r)throw Error(o(90));we(i),Ce(i,r)}}}break;case"textarea":Me(e,n);break;case"select":null!=(t=n.value)&&Oe(e,!!n.multiple,t,!1)}},P=yu,N=function(e,t,n,i,r){var a=js;js|=4;try{return Qr(98,e.bind(null,t,n,i,r))}finally{(js=a)===Os&&Xr()}},L=function(){(js&(1|Ds|Ms))===Os&&(function(){if(null!==au){var e=au;au=null,e.forEach((function(e,t){Ju(t,e),pu(t)})),Xr()}}(),Mu())},B=function(e,t){var n=js;js|=2;try{return e(t)}finally{(js=n)===Os&&Xr()}};var sl={Events:[Pn,Nn,Ln,T,x,$n,function(e){at(e,qn)},M,R,Jt,ut,Mu,{current:!1}]};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Fu=function(e){try{t.onCommitFiberRoot(n,e,void 0,64===(64&e.current.effectTag))}catch(i){}},ju=function(e){try{t.onCommitFiberUnmount(n,e)}catch(i){}}}catch(i){}})(r({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=it(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Rn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl,t.createPortal=ol,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=it(t))?null:e.stateNode},t.flushSync=function(e,t){if((js&(Ds|Ms))!==Os)throw Error(o(187));var n=js;js|=1;try{return Qr(99,e.bind(null,t))}finally{js=n,Xr()}},t.hydrate=function(e,t,n){if(!rl(t))throw Error(o(200));return al(null,e,t,!0,n)},t.render=function(e,t,n){if(!rl(t))throw Error(o(200));return al(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!rl(e))throw Error(o(40));return!!e._reactRootContainer&&(gu((function(){al(null,null,e,!1,(function(){e._reactRootContainer=null,e[Mn]=null}))})),!0)},t.unstable_batchedUpdates=yu,t.unstable_createPortal=function(e,t){return ol(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!rl(n))throw Error(o(200));if(null==e||void 0===e._reactInternalFiber)throw Error(o(38));return al(e,t,n,!1,i)},t.version="16.14.0"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},195:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,r=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,k=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case c:case h:case a:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case l:case d:case m:case v:case u:return e;default:return t}}case r:return t}}}function b(e){return w(e)===h}},228:function(e,t,n){"use strict";n(195)},374:function(e,t,n){"use strict";var i=n(791),r=60103;if(60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;r=a("react.element"),a("react.fragment")}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var i,a={},l=null,c=null;for(i in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,i)&&!u.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:r,type:e,key:l,ref:c,props:a,_owner:o.current}}t.jsx=l,t.jsxs=l},117:function(e,t,n){"use strict";var i=n(725),r="function"===typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,u=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,h=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.forward_ref"):60112,f=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,m="function"===typeof Symbol&&Symbol.iterator;function y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_={};function k(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||g}function w(){}function b(e,t,n){this.props=e,this.context=t,this.refs=_,this.updater=n||g}k.prototype.isReactComponent={},k.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(y(85));this.updater.enqueueSetState(this,e,t,"setState")},k.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=k.prototype;var x=b.prototype=new w;x.constructor=b,i(x,k.prototype),x.isPureReactComponent=!0;var E={current:null},C=Object.prototype.hasOwnProperty,T={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,n){var i,r={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)C.call(t,i)&&!T.hasOwnProperty(i)&&(r[i]=t[i]);var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===r[i]&&(r[i]=u[i]);return{$$typeof:a,type:e,key:o,ref:s,props:r,_owner:E.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var O=/\/+/g,A=[];function D(e,t,n,i){if(A.length){var r=A.pop();return r.result=e,r.keyPrefix=t,r.func=n,r.context=i,r.count=0,r}return{result:e,keyPrefix:t,func:n,context:i,count:0}}function M(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>A.length&&A.push(e)}function R(e,t,n,i){var r=typeof e;"undefined"!==r&&"boolean"!==r||(e=null);var s=!1;if(null===e)s=!0;else switch(r){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case a:case o:s=!0}}if(s)return n(i,e,""===t?"."+N(e,0):t),1;if(s=0,t=""===t?".":t+":",Array.isArray(e))for(var u=0;u<e.length;u++){var l=t+N(r=e[u],u);s+=R(r,l,n,i)}else if(null===e||"object"!==typeof e?l=null:l="function"===typeof(l=m&&e[m]||e["@@iterator"])?l:null,"function"===typeof l)for(e=l.call(e),u=0;!(r=e.next()).done;)s+=R(r=r.value,l=t+N(r,u++),n,i);else if("object"===r)throw n=""+e,Error(y(31,"[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return s}function P(e,t,n){return null==e?0:R(e,"",t,n)}function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,(function(e){return t[e]}))}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function B(e,t,n){var i=e.result,r=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,i,n,(function(e){return e})):null!=e&&(S(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,r+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(O,"$&/")+"/")+n)),i.push(e))}function F(e,t,n,i,r){var a="";null!=n&&(a=(""+n).replace(O,"$&/")+"/"),P(e,B,t=D(t,a,i,r)),M(t)}var j={current:null};function U(){var e=j.current;if(null===e)throw Error(y(321));return e}var V={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:E,IsSomeRendererActing:{current:!1},assign:i};t.Children={map:function(e,t,n){if(null==e)return e;var i=[];return F(e,i,null,t,n),i},forEach:function(e,t,n){if(null==e)return e;P(e,L,t=D(null,null,t,n)),M(t)},count:function(e){return P(e,(function(){return null}),null)},toArray:function(e){var t=[];return F(e,t,null,(function(e){return e})),t},only:function(e){if(!S(e))throw Error(y(143));return e}},t.Component=k,t.Fragment=s,t.Profiler=l,t.PureComponent=b,t.StrictMode=u,t.Suspense=f,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(y(267,e));var r=i({},e.props),o=e.key,s=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,u=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)C.call(t,c)&&!T.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:a,type:e.type,key:o,ref:s,props:r,_owner:u}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:h,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:v,_ctor:e,_status:-1,_result:null}},t.memo=function(e,t){return{$$typeof:p,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return U().useCallback(e,t)},t.useContext=function(e,t){return U().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return U().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return U().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return U().useLayoutEffect(e,t)},t.useMemo=function(e,t){return U().useMemo(e,t)},t.useReducer=function(e,t,n){return U().useReducer(e,t,n)},t.useRef=function(e){return U().useRef(e)},t.useState=function(e){return U().useState(e)},t.version="16.14.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";var n,i,r,a,o;if("undefined"===typeof window||"function"!==typeof MessageChannel){var s=null,u=null,l=function e(){if(null!==s)try{var n=t.unstable_now();s(!0,n),s=null}catch(i){throw setTimeout(e,0),i}},c=Date.now();t.unstable_now=function(){return Date.now()-c},n=function(e){null!==s?setTimeout(n,0,e):(s=e,setTimeout(l,0))},i=function(e,t){u=setTimeout(e,t)},r=function(){clearTimeout(u)},a=function(){return!1},o=t.unstable_forceFrameRate=function(){}}else{var h=window.performance,d=window.Date,f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof h&&"function"===typeof h.now)t.unstable_now=function(){return h.now()};else{var m=d.now();t.unstable_now=function(){return d.now()-m}}var y=!1,g=null,_=-1,k=5,w=0;a=function(){return t.unstable_now()>=w},o=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):k=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,x=b.port2;b.port1.onmessage=function(){if(null!==g){var e=t.unstable_now();w=e+k;try{g(!0,e)?x.postMessage(null):(y=!1,g=null)}catch(n){throw x.postMessage(null),n}}else y=!1},n=function(e){g=e,y||(y=!0,x.postMessage(null))},i=function(e,n){_=f((function(){e(t.unstable_now())}),n)},r=function(){p(_),_=-1}}function E(e,t){var n=e.length;e.push(t);e:for(;;){var i=n-1>>>1,r=e[i];if(!(void 0!==r&&0<I(r,t)))break e;e[i]=t,e[n]=r,n=i}}function C(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length;i<r;){var a=2*(i+1)-1,o=e[a],s=a+1,u=e[s];if(void 0!==o&&0>I(o,n))void 0!==u&&0>I(u,o)?(e[i]=u,e[s]=n,i=s):(e[i]=o,e[a]=n,i=a);else{if(!(void 0!==u&&0>I(u,n)))break e;e[i]=u,e[s]=n,i=s}}}return t}return null}function I(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var S=[],O=[],A=1,D=null,M=3,R=!1,P=!1,N=!1;function L(e){for(var t=C(O);null!==t;){if(null===t.callback)T(O);else{if(!(t.startTime<=e))break;T(O),t.sortIndex=t.expirationTime,E(S,t)}t=C(O)}}function B(e){if(N=!1,L(e),!P)if(null!==C(S))P=!0,n(F);else{var t=C(O);null!==t&&i(B,t.startTime-e)}}function F(e,n){P=!1,N&&(N=!1,r()),R=!0;var o=M;try{for(L(n),D=C(S);null!==D&&(!(D.expirationTime>n)||e&&!a());){var s=D.callback;if(null!==s){D.callback=null,M=D.priorityLevel;var u=s(D.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?D.callback=u:D===C(S)&&T(S),L(n)}else T(S);D=C(S)}if(null!==D)var l=!0;else{var c=C(O);null!==c&&i(B,c.startTime-n),l=!1}return l}finally{D=null,M=o,R=!1}}function j(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var U=o;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||R||(P=!0,n(F))},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return C(S)},t.unstable_next=function(e){switch(M){case 1:case 2:case 3:var t=3;break;default:t=M}var n=M;M=t;try{return e()}finally{M=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=U,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=M;M=e;try{return t()}finally{M=n}},t.unstable_scheduleCallback=function(e,a,o){var s=t.unstable_now();if("object"===typeof o&&null!==o){var u=o.delay;u="number"===typeof u&&0<u?s+u:s,o="number"===typeof o.timeout?o.timeout:j(e)}else o=j(e),u=s;return e={id:A++,callback:a,priorityLevel:e,startTime:u,expirationTime:o=u+o,sortIndex:-1},u>s?(e.sortIndex=u,E(O,e),null===C(S)&&e===C(O)&&(N?r():N=!0,i(B,u-s))):(e.sortIndex=o,E(S,e),P||R||(P=!0,n(F))),e},t.unstable_shouldYield=function(){var e=t.unstable_now();L(e);var n=C(S);return n!==D&&null!==D&&null!==n&&null!==n.callback&&n.startTime<=e&&n.expirationTime<D.expirationTime||a()},t.unstable_wrapCallback=function(e){var t=M;return function(){var n=M;M=t;try{return e.apply(this,arguments)}finally{M=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return pt},SDK_VERSION:function(){return Vn},_DEFAULT_ENTRY_NAME:function(){return Sn},_addComponent:function(){return Mn},_addOrOverwriteComponent:function(){return Rn},_apps:function(){return An},_clearComponents:function(){return Bn},_components:function(){return Dn},_getProvider:function(){return Nn},_registerComponent:function(){return Pn},_removeServiceInstance:function(){return Ln},deleteApp:function(){return zn},getApp:function(){return $n},getApps:function(){return Wn},initializeApp:function(){return qn},onLog:function(){return Qn},registerVersion:function(){return Kn},setLogLevel:function(){return Gn}});var t=n(791),i=n(164);function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}var o=n(7),s=n.n(o);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}function l(e){return"/"===e.charAt(0)}function c(e,t){for(var n=t,i=n+1,r=e.length;i<r;n+=1,i+=1)e[n]=e[i];e.pop()}var h=function(e,t){void 0===t&&(t="");var n,i=e&&e.split("/")||[],r=t&&t.split("/")||[],a=e&&l(e),o=t&&l(t),s=a||o;if(e&&l(e)?r=i:i.length&&(r.pop(),r=r.concat(i)),!r.length)return"/";if(r.length){var u=r[r.length-1];n="."===u||".."===u||""===u}else n=!1;for(var h=0,d=r.length;d>=0;d--){var f=r[d];"."===f?c(r,d):".."===f?(c(r,d),h++):h&&(c(r,d),h--)}if(!s)for(;h--;h)r.unshift("..");!s||""===r[0]||r[0]&&l(r[0])||r.unshift("");var p=r.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function d(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var f=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every((function(t,i){return e(t,n[i])}));if("object"===typeof t||"object"===typeof n){var i=d(t),r=d(n);return i!==t||r!==n?e(i,r):Object.keys(Object.assign({},t,n)).every((function(i){return e(t[i],n[i])}))}return!1},p=!0,v="Invariant failed";function m(e,t){if(!e){if(p)throw new Error(v);var n="function"===typeof t?t():t,i=n?"".concat(v,": ").concat(n):v;throw new Error(i)}}function y(e){return"/"===e.charAt(0)?e:"/"+e}function g(e){return"/"===e.charAt(0)?e.substr(1):e}function _(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function k(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function w(e){var t=e.pathname,n=e.search,i=e.hash,r=t||"/";return n&&"?"!==n&&(r+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(r+="#"===i.charAt(0)?i:"#"+i),r}function b(e,t,n,i){var r;"string"===typeof e?(r=function(e){var t=e||"/",n="",i="",r=t.indexOf("#");-1!==r&&(i=t.substr(r),t=t.substr(0,r));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===i?"":i}}(e),r.state=t):(void 0===(r=u({},e)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==t&&void 0===r.state&&(r.state=t));try{r.pathname=decodeURI(r.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(r.key=n),i?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=h(r.pathname,i.pathname)):r.pathname=i.pathname:r.pathname||(r.pathname="/"),r}function x(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,i,r){if(null!=e){var a="function"===typeof e?e(t,n):e;"string"===typeof a?"function"===typeof i?i(a,r):r(!0):r(!1!==a)}else r(!0)},appendListener:function(e){var n=!0;function i(){n&&e.apply(void 0,arguments)}return t.push(i),function(){n=!1,t=t.filter((function(e){return e!==i}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.forEach((function(e){return e.apply(void 0,n)}))}}}var E=!("undefined"===typeof window||!window.document||!window.document.createElement);function C(e,t){t(window.confirm(e))}var T="popstate",I="hashchange";function S(){try{return window.history.state||{}}catch(e){return{}}}function O(e){void 0===e&&(e={}),E||m(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),r=e,a=r.forceRefresh,o=void 0!==a&&a,s=r.getUserConfirmation,l=void 0===s?C:s,c=r.keyLength,h=void 0===c?6:c,d=e.basename?k(y(e.basename)):"";function f(e){var t=e||{},n=t.key,i=t.state,r=window.location,a=r.pathname+r.search+r.hash;return d&&(a=_(a,d)),b(a,i,n)}function p(){return Math.random().toString(36).substr(2,h)}var v=x();function g(e){u(U,e),U.length=t.length,v.notifyListeners(U.location,U.action)}function O(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||M(f(e.state))}function A(){M(f(S()))}var D=!1;function M(e){if(D)D=!1,g();else{v.confirmTransitionTo(e,"POP",l,(function(t){t?g({action:"POP",location:e}):function(e){var t=U.location,n=P.indexOf(t.key);-1===n&&(n=0);var i=P.indexOf(e.key);-1===i&&(i=0);var r=n-i;r&&(D=!0,L(r))}(e)}))}}var R=f(S()),P=[R.key];function N(e){return d+w(e)}function L(e){t.go(e)}var B=0;function F(e){1===(B+=e)&&1===e?(window.addEventListener(T,O),i&&window.addEventListener(I,A)):0===B&&(window.removeEventListener(T,O),i&&window.removeEventListener(I,A))}var j=!1;var U={length:t.length,action:"POP",location:R,createHref:N,push:function(e,i){var r="PUSH",a=b(e,i,p(),U.location);v.confirmTransitionTo(a,r,l,(function(e){if(e){var i=N(a),s=a.key,u=a.state;if(n)if(t.pushState({key:s,state:u},null,i),o)window.location.href=i;else{var l=P.indexOf(U.location.key),c=P.slice(0,l+1);c.push(a.key),P=c,g({action:r,location:a})}else window.location.href=i}}))},replace:function(e,i){var r="REPLACE",a=b(e,i,p(),U.location);v.confirmTransitionTo(a,r,l,(function(e){if(e){var i=N(a),s=a.key,u=a.state;if(n)if(t.replaceState({key:s,state:u},null,i),o)window.location.replace(i);else{var l=P.indexOf(U.location.key);-1!==l&&(P[l]=a.key),g({action:r,location:a})}else window.location.replace(i)}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var t=v.setPrompt(e);return j||(F(1),j=!0),function(){return j&&(j=!1,F(-1)),t()}},listen:function(e){var t=v.appendListener(e);return F(1),function(){F(-1),t()}}};return U}var A="hashchange",D={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+g(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:g,decodePath:y},slash:{encodePath:y,decodePath:y}};function M(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function R(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function P(e){window.location.replace(M(window.location.href)+"#"+e)}function N(e){void 0===e&&{},E||m(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),i=n.getUserConfirmation,r=void 0===i?C:i,a=n.hashType,o=void 0===a?"slash":a,s=e.basename?k(y(e.basename)):"",l=D[o],c=l.encodePath,h=l.decodePath;function d(){var e=h(R());return s&&_(e,s),b(e)}var f=x();function p(e){u(U,e),U.length=t.length,f.notifyListeners(U.location,U.action)}var v=!1,g=null;function T(){var e=R(),t=c(e);if(e!==t)P(t);else{var n=d(),i=U.location;if(!v&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(i,n))return;if(g===w(n))return;null,function(e){if(v)!1,p();else{var t="POP";f.confirmTransitionTo(e,t,r,(function(n){n?p({action:t,location:e}):function(e){var t=U.location,n=N.lastIndexOf(w(t));-1===n&&0;var i=N.lastIndexOf(w(e));-1===i&&0;var r=n-i;r&&(!0,L(r))}(e)}))}}(n)}}var I=R(),S=c(I);I!==S&&P(S);var O=d(),N=[w(O)];function L(e){t.go(e)}var B=0;function F(e){1===(B+=e)&&1===e?window.addEventListener(A,T):0===B&&window.removeEventListener(A,T)}var j=!1;var U={length:t.length,action:"POP",location:O,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&M(window.location.href),n+"#"+c(s+w(e))},push:function(e,t){var n="PUSH",i=b(e,void 0,void 0,U.location);f.confirmTransitionTo(i,n,r,(function(e){if(e){var t=w(i),r=c(s+t);if(R()!==r){t,function(e){window.location.hash=e}(r);var a=N.lastIndexOf(w(U.location)),o=N.slice(0,a+1);o.push(t),o,p({action:n,location:i})}else p()}}))},replace:function(e,t){var n="REPLACE",i=b(e,void 0,void 0,U.location);f.confirmTransitionTo(i,n,r,(function(e){if(e){var t=w(i),r=c(s+t);R()!==r&&(t,P(r));var a=N.indexOf(w(U.location));-1!==a&&(N[a]=t),p({action:n,location:i})}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&!1;var t=f.setPrompt(e);return j||(F(1),!0),function(){return j&&(!1,F(-1)),t()}},listen:function(e){var t=f.appendListener(e);return F(1),function(){F(-1),t()}}};return U}function L(e,t,n){return Math.min(Math.max(e,t),n)}var B=n(151),F=n.n(B);n(228);function j(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}var U=n(110),V=n.n(U),q=1073741823,$="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{};var W=t.createContext||function(e,n){var i,r,o="__create-react-context-"+function(){var e="__global_unique_id__";return $[e]=($[e]||0)+1}()+"__",u=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).emitter=function(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,i){e=n,t.forEach((function(t){return t(e,i)}))}}}(t.props.value),t}a(t,e);var i=t.prototype;return i.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},i.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,i=this.props.value,r=e.value;!function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(i,r)?(t="function"===typeof n?n(i,r):q,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},i.render=function(){return this.props.children},t}(t.Component);u.childContextTypes=((i={})[o]=s().object.isRequired,i);var l=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){0!==((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}a(n,t);var i=n.prototype;return i.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=void 0===t||null===t?q:t},i.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=void 0===e||null===e?q:e},i.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},i.getValue=function(){return this.context[o]?this.context[o].get():e},i.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(t.Component);return l.contextTypes=((r={})[o]=s().object,r),{Provider:u,Consumer:l}},z=function(e){var t=W();return t.displayName=e,t},H=z("Router-History"),K=z("Router"),Q=function(e){function n(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}a(n,e),n.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var i=n.prototype;return i.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},i.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},i.render=function(){return t.createElement(K.Provider,{value:{history:this.props.history,location:this.state.location,match:n.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},t.createElement(H.Provider,{children:this.props.children||null,value:this.props.history}))},n}(t.Component);t.Component;var G=function(e){function t(){return e.apply(this,arguments)||this}a(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(t.Component);var Y={},X=1e4,J=0;function Z(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(Y[e])return Y[e];var t=F().compile(e);return J<X&&(Y[e]=t,J++),t}(e)(t,{pretty:!0})}function ee(e){var n=e.computedMatch,i=e.to,r=e.push,a=void 0!==r&&r;return t.createElement(K.Consumer,null,(function(e){e||m(!1);var r=e.history,o=e.staticContext,s=a?r.push:r.replace,l=b(n?"string"===typeof i?Z(i,n.params):u({},i,{pathname:Z(i.pathname,n.params)}):i);return o?(s(l),null):t.createElement(G,{onMount:function(){s(l)},onUpdate:function(e,t){var n=b(t.to);(function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&f(e.state,t.state)})(n,u({},l,{key:n.key}))||s(l)},to:i})}))}var te={},ne=1e4,ie=0;function re(e,t){void 0===t&&(t={}),("string"===typeof t||Array.isArray(t))&&(t={path:t});var n=t,i=n.path,r=n.exact,a=void 0!==r&&r,o=n.strict,s=void 0!==o&&o,u=n.sensitive,l=void 0!==u&&u;return[].concat(i).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var i=function(e,t){var n=""+t.end+t.strict+t.sensitive,i=te[n]||(te[n]={});if(i[e])return i[e];var r=[],a={regexp:F()(e,r,t),keys:r};return ie<ne&&(i[e]=a,ie++),a}(n,{end:a,strict:s,sensitive:l}),r=i.regexp,o=i.keys,u=r.exec(e);if(!u)return null;var c=u[0],h=u.slice(1),d=e===c;return a&&!d?null:{path:n,url:"/"===n&&""===c?"/":c,isExact:d,params:o.reduce((function(e,t,n){return e[t.name]=h[n],e}),{})}}),null)}var ae=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(K.Consumer,null,(function(n){n||m(!1);var i=e.props.location||n.location,r=u({},n,{location:i,match:e.props.computedMatch?e.props.computedMatch:e.props.path?re(i.pathname,e.props):n.match}),a=e.props,o=a.children,s=a.component,l=a.render;return Array.isArray(o)&&function(e){return 0===t.Children.count(e)}(o)&&(o=null),t.createElement(K.Provider,{value:r},r.match?o?"function"===typeof o?o(r):o:s?t.createElement(s,r):l?l(r):null:"function"===typeof o?o(r):null)}))},n}(t.Component);function oe(e){return"/"===e.charAt(0)?e:"/"+e}function se(e,t){if(!e)return t;var n=oe(e);return 0!==t.pathname.indexOf(n)?t:u({},t,{pathname:t.pathname.substr(n.length)})}function ue(e){return"string"===typeof e?e:w(e)}function le(e){return function(){m(!1)}}function ce(){}t.Component;var he=function(e){function n(){return e.apply(this,arguments)||this}return a(n,e),n.prototype.render=function(){var e=this;return t.createElement(K.Consumer,null,(function(n){n||m(!1);var i,r,a=e.props.location||n.location;return t.Children.forEach(e.props.children,(function(e){if(null==r&&t.isValidElement(e)){i=e;var o=e.props.path||e.props.from;r=o?re(a.pathname,u({},e.props,{path:o})):n.match}})),r?t.cloneElement(i,{location:a,computedMatch:r}):null}))},n}(t.Component);var de=t.useContext;function fe(){return de(K).location}var pe=function(e){function n(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).history=O(t.props),t}return a(n,e),n.prototype.render=function(){return t.createElement(Q,{history:this.history,children:this.props.children})},n}(t.Component);t.Component;var ve=function(e,t){return"function"===typeof e?e(t):e},me=function(e,t){return"string"===typeof e?b(e,null,null,t):e},ye=function(e){return e},ge=t.forwardRef;"undefined"===typeof ge&&(ge=ye);var _e=ge((function(e,n){var i=e.innerRef,r=e.navigate,a=e.onClick,o=j(e,["innerRef","navigate","onClick"]),s=o.target,l=u({},o,{onClick:function(e){try{a&&a(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||s&&"_self"!==s||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return l.ref=ye!==ge&&n||i,t.createElement("a",l)}));var ke=ge((function(e,n){var i=e.component,r=void 0===i?_e:i,a=e.replace,o=e.to,s=e.innerRef,l=j(e,["component","replace","to","innerRef"]);return t.createElement(K.Consumer,null,(function(e){e||m(!1);var i=e.history,c=me(ve(o,e.location),e.location),h=c?i.createHref(c):"",d=u({},l,{href:h,navigate:function(){var t=ve(o,e.location),n=w(e.location)===w(me(t));(a||n?i.replace:i.push)(t)}});return ye!==ge?d.ref=n||s:d.innerRef=s,t.createElement(r,d)}))})),we=function(e){return e},be=t.forwardRef;"undefined"===typeof be&&(be=we);be((function(e,n){var i=e["aria-current"],r=void 0===i?"page":i,a=e.activeClassName,o=void 0===a?"active":a,s=e.activeStyle,l=e.className,c=e.exact,h=e.isActive,d=e.location,f=e.sensitive,p=e.strict,v=e.style,y=e.to,g=e.innerRef,_=j(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return t.createElement(K.Consumer,null,(function(e){e||m(!1);var i=d||e.location,a=me(ve(y,i),i),k=a.pathname,w=k&&k.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=w?re(i.pathname,{path:w,exact:c,sensitive:f,strict:p}):null,x=!!(h?h(b,i):b),E="function"===typeof l?l(x):l,C="function"===typeof v?v(x):v;x&&(E=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(E,o),C=u({},C,s));var T=u({"aria-current":x&&r||null,className:E,style:C,to:a},_);return we!==be?T.ref=n||g:T.innerRef=g,t.createElement(ke,T)}))}));function xe(e){if(Array.isArray(e))return e}function Ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Ce(e,t){if(e){if("string"===typeof e)return Ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ee(e,t):void 0}}function Te(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ie(e,t){return xe(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a,o,s=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=a.call(n)).done)&&(s.push(i.value),s.length!==t);u=!0);}catch(c){l=!0,r=c}finally{try{if(!u&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(l)throw r}}return s}}(e,t)||Ce(e,t)||Te()}function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Oe(e){var t=function(e,t){if("object"!==Se(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==Se(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Se(t)?t:String(t)}function Ae(e,t,n){return(t=Oe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Oe(i.key),i)}}function Re(e,t,n){return t&&Me(e.prototype,t),n&&Me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pe(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ce(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}function Be(e){return Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Be(e)}function Fe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function je(e){var t=Fe();return function(){var n,i=Be(e);if(t){var r=Be(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(e,t){if(t&&("object"===Se(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ne(e)}(this,n)}}function Ue(e,t,n){return Ue=Fe()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},Ue.apply(null,arguments)}function Ve(e){var t="function"===typeof Map?new Map:void 0;return Ve=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Ue(e,arguments,Be(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),r(n,e)},Ve(e)}var qe=!1,$e=!1,We="${JSCORE_VERSION}",ze=function(e,t){if(!e)throw He(t)},He=function(e){return new Error("Firebase Database ("+We+") INTERNAL ASSERT FAILED: "+e)},Ke=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},Qe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[],r=0;r<e.length;r+=3){var a=e[r],o=r+1<e.length,s=o?e[r+1]:0,u=r+2<e.length,l=u?e[r+2]:0,c=a>>2,h=(3&a)<<4|s>>4,d=(15&s)<<2|l>>6,f=63&l;u||(f=64,o||(d=64)),i.push(n[c],n[h],n[d],n[f])}return i.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ke(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,i=0;n<e.length;){var r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){var a=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&a)}else if(r>239&&r<365){var o=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(o>>10)),t[i++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[],r=0;r<e.length;){var a=n[e.charAt(r++)],o=r<e.length?n[e.charAt(r)]:0,s=++r<e.length?n[e.charAt(r)]:64,u=++r<e.length?n[e.charAt(r)]:64;if(++r,null==a||null==o||null==s||null==u)throw new Ge;var l=a<<2|o>>4;if(i.push(l),64!==s){var c=o<<4&240|s>>2;if(i.push(c),64!==u){var h=s<<6&192|u;i.push(h)}}}return i},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ge=function(e){Le(n,e);var t=je(n);function n(){var e;return De(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return Re(n)}(Ve(Error)),Ye=function(e){var t=Ke(e);return Qe.encodeByteArray(t,!0)},Xe=function(e){return Ye(e).replace(/\./g,"")},Je=function(e){try{return Qe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Ze(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&et(n)&&(e[n]=Ze(e[n],t[n]));return e}function et(e){return"__proto__"!==e}var tt=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},nt=function(){try{return tt()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_apiKey:"AIzaSyDuVxcj871XrI0PbnVKZGApPV1LHSzsZWA",REACT_APP_appId:"1:51556035661:web:5eb6609ab3ea61fea5c004",REACT_APP_authDomain:"y76-librarymanagementsystem.firebaseapp.com",REACT_APP_messagingSenderId:"51556035661",REACT_APP_projectId:"y76-librarymanagementsystem",REACT_APP_storageBucket:"y76-librarymanagementsystem.appspot.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&Je(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},it=function(){var e;return null===(e=nt())||void 0===e?void 0:e.config},rt=function(){function e(){var t=this;De(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Re(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,i){n?t.reject(n):t.resolve(i),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,i))}}}]),e}();function at(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Xe(JSON.stringify({alg:"none",type:"JWT"})),Xe(JSON.stringify(a)),""].join(".")}function ot(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function st(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function ut(){var e,t=null===(e=nt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}function lt(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function ct(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ht(){var e=ot();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function dt(){return!0===qe||!0===$e}function ft(){try{return"object"===typeof indexedDB}catch(e){return!1}}var pt=function(e){Le(n,e);var t=je(n);function n(e,i,r){var a;return De(this,n),(a=t.call(this,i)).code=e,a.customData=r,a.name="FirebaseError",Object.setPrototypeOf(Ne(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(Ne(a),vt.prototype.create),a}return Re(n)}(Ve(Error)),vt=function(){function e(t,n,i){De(this,e),this.service=t,this.serviceName=n,this.errors=i}return Re(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(mt,(function(e,n){var i=t[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,t):"Error",a="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new pt(n,a,t)}}]),e}();var mt=/\{\$([^}]+)}/g;function yt(e){return JSON.parse(e)}function gt(e){return JSON.stringify(e)}var _t=function(e){var t={},n={},i={},r="";try{var a=e.split(".");t=yt(Je(a[0])||""),n=yt(Je(a[1])||""),r=a[2],i=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:i,signature:r}};function kt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function wt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function bt(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function xt(e,t,n){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function Et(e,t){if(e===t)return!0;for(var n=Object.keys(e),i=Object.keys(t),r=0,a=n;r<a.length;r++){var o=a[r];if(!i.includes(o))return!1;var s=e[o],u=t[o];if(Ct(s)&&Ct(u)){if(!Et(s,u))return!1}else if(s!==u)return!1}for(var l=0,c=i;l<c.length;l++){var h=c[l];if(!n.includes(h))return!1}return!0}function Ct(e){return null!==e&&"object"===typeof e}function Tt(e){for(var t=[],n=function(){var e=Ie(r[i],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},i=0,r=Object.entries(e);i<r.length;i++)n();return t.length?"&"+t.join("&"):""}function It(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=Ie(e.split("="),2),i=n[0],r=n[1];t[decodeURIComponent(i)]=decodeURIComponent(r)}})),t}function St(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Ot=function(){function e(){De(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return Re(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var i=0;i<16;i++)n[i]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,l=this.chain_[0],c=this.chain_[1],h=this.chain_[2],d=this.chain_[3],f=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=d^c&(h^d),u=1518500249):(s=c^h^d,u=1859775393):p<60?(s=c&h|d&(c|h),u=2400959708):(s=c^h^d,u=3395469782);var v=(l<<5|l>>>27)+s+f+u+n[p]&4294967295;f=d,d=h,h=4294967295&(c<<30|c>>>2),c=l,l=v}this.chain_[0]=this.chain_[0]+l&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=0,r=this.buf_,a=this.inbuf_;i<t;){if(0===a)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(r[a]=e.charCodeAt(i),++i,++a===this.blockSize){this.compress_(r),a=0;break}}else for(;i<t;)if(r[a]=e[i],++i,++a===this.blockSize){this.compress_(r),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var i=0,r=0;r<5;r++)for(var a=24;a>=0;a-=8)e[i]=this.chain_[r]>>a&255,++i;return e}}]),e}();function At(e,t){var n=new Dt(e,t);return n.subscribe.bind(n)}var Dt=function(){function e(t,n){var i=this;De(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(i)})).catch((function(e){i.error(e)}))}return Re(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var i,r=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(i=function(e,t){if("object"!==typeof e||null===e)return!1;var n,i=Pe(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r in e&&"function"===typeof e[r])return!0}}catch(a){i.e(a)}finally{i.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(i.next=Mt),void 0===i.error&&(i.error=Mt),void 0===i.complete&&(i.complete=Mt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{r.finalError?i.error(r.finalError):i.complete()}catch(e){}})),this.observers.push(i),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(i){"undefined"!==typeof console&&console.error&&console.error(i)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Mt(){}var Rt=function(e,t,n,i){var r;if(i<t?r="at least "+t:i>n&&(r=0===n?"none":"no more than "+n),r)throw new Error(e+" failed: Was called with "+i+(1===i?" argument.":" arguments.")+" Expects "+r+".")};function Pt(e,t){return"".concat(e," failed: ").concat(t," argument ")}function Nt(e,t,n,i){if((!i||n)&&"function"!==typeof n)throw new Error(Pt(e,t)+"must be a valid function.")}function Lt(e,t,n,i){if((!i||n)&&("object"!==typeof n||null===n))throw new Error(Pt(e,t)+"must be a valid context object.")}var Bt=function(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function Ft(e){return e&&e._delegate?e._delegate:e}function jt(){jt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},a=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(S){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var a=t&&t.prototype instanceof d?t:d,o=Object.create(a.prototype),s=new C(r||[]);return i(o,"_invoke",{value:w(e,n,s)}),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=l;var h={};function d(){}function f(){}function p(){}var v={};u(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(T([])));y&&y!==t&&n.call(y,a)&&(v=y);var g=p.prototype=d.prototype=Object.create(v);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==Se(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var a;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return a=a?a.then(i,i):i()}})}function w(e,t,n){var i="suspendedStart";return function(r,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw a;return I()}for(n.method=r,n.arg=a;;){var o=n.delegate;if(o){var s=b(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var u=c(e,t,n);if("normal"===u.type){if(i=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(i="completed",n.method="throw",n.arg=u.arg)}}}function b(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var r=c(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:I}}function I(){return{value:void 0,done:!0}}return f.prototype=p,i(g,"constructor",{value:p,configurable:!0}),i(p,"constructor",{value:f,configurable:!0}),f.displayName=u(p,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},_(k.prototype),u(k.prototype,o,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,i,r,a){void 0===a&&(a=Promise);var o=new k(l(t,n,i,r),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(g),u(g,s,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return o.type="throw",o.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;E(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function Ut(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Vt(e){return function(e){if(Array.isArray(e))return Ee(e)}(e)||Ut(e)||Ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(e,t,n,i,r,a,o){try{var s=e[a](o),u=s.value}catch(JS){return void n(JS)}s.done?t(u):Promise.resolve(u).then(i,r)}function $t(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var a=e.apply(t,n);function o(e){qt(a,i,r,o,s,"next",e)}function s(e){qt(a,i,r,o,s,"throw",e)}o(void 0)}))}}var Wt=function(){function e(t,n,i){De(this,e),this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Re(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),zt="[DEFAULT]",Ht=function(){function e(t,n){De(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Re(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new rt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch(r){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:zt})}catch(u){}var t,n=Pe(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var i=Ie(t.value,2),r=i[0],a=i[1],o=this.normalizeInstanceIdentifier(r);try{var s=this.getOrInitializeService({instanceIdentifier:o});a.resolve(s)}catch(u){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=$t(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Vt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Vt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var r,a=this.getOrInitializeService({instanceIdentifier:i,options:n}),o=Pe(this.instancesDeferred.entries());try{for(o.s();!(r=o.n()).done;){var s=Ie(r.value,2),u=s[0],l=s[1];i===this.normalizeInstanceIdentifier(u)&&l.resolve(a)}}catch(c){o.e(c)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);var a=this.instances.get(i);return a&&e(a,i),function(){r.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var i,r=Pe(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;try{a(e,t)}catch(IC){}}}catch(o){r.e(o)}finally{r.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,i=e.options,r=void 0===i?{}:i,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===zt?void 0:t),options:r}),this.instances.set(n,a),this.instancesOptions.set(n,r),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(IC){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt;return this.component?this.component.multipleInstances?e:zt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Kt,Qt,Gt=function(){function e(t){De(this,e),this.name=t,this.providers=new Map}return Re(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ht(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Yt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Qt||(Qt={}));var Xt={debug:Qt.DEBUG,verbose:Qt.VERBOSE,info:Qt.INFO,warn:Qt.WARN,error:Qt.ERROR,silent:Qt.SILENT},Jt=Qt.INFO,Zt=(Ae(Kt={},Qt.DEBUG,"log"),Ae(Kt,Qt.VERBOSE,"log"),Ae(Kt,Qt.INFO,"info"),Ae(Kt,Qt.WARN,"warn"),Ae(Kt,Qt.ERROR,"error"),Kt),en=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),i=Zt[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(r=console)[i].apply(r,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},tn=function(){function e(t){De(this,e),this.name=t,this._logLevel=Jt,this._logHandler=en,this._userLogHandler=null,Yt.push(this)}return Re(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Qt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Xt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qt.DEBUG].concat(t)),this._logHandler.apply(this,[this,Qt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Qt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qt.INFO].concat(t)),this._logHandler.apply(this,[this,Qt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qt.WARN].concat(t)),this._logHandler.apply(this,[this,Qt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Qt.ERROR].concat(t)),this._logHandler.apply(this,[this,Qt.ERROR].concat(t))}}]),e}();function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){Ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var an,on,sn=function(e,t){return t.some((function(t){return e instanceof t}))};var un=new WeakMap,ln=new WeakMap,cn=new WeakMap,hn=new WeakMap,dn=new WeakMap;var fn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ln.get(e);if("objectStoreNames"===t)return e.objectStoreNames||cn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function pn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(on||(on=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(yn(this),n),mn(un.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return mn(e.apply(yn(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var a=e.call.apply(e,[yn(this),t].concat(i));return cn.set(a,t.sort?t.sort():[t]),mn(a)}}function vn(e){return"function"===typeof e?pn(e):(e instanceof IDBTransaction&&function(e){if(!ln.has(e)){var t=new Promise((function(t,n){var i=function(){e.removeEventListener("complete",r),e.removeEventListener("error",a),e.removeEventListener("abort",a)},r=function(){t(),i()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",a),e.addEventListener("abort",a)}));ln.set(e,t)}}(e),sn(e,an||(an=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,fn):e)}function mn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var i=function(){e.removeEventListener("success",r),e.removeEventListener("error",a)},r=function(){t(mn(e.result)),i()},a=function(){n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&un.set(t,e)})).catch((function(){})),dn.set(t,e),t}(e);if(hn.has(e))return hn.get(e);var t=vn(e);return t!==e&&(hn.set(e,t),dn.set(t,e)),t}var yn=function(e){return dn.get(e)};var gn,_n,kn=["get","getKey","getAll","getAllKeys","count"],wn=["put","add","delete","clear"],bn=new Map;function xn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(bn.get(t))return bn.get(t);var n=t.replace(/FromIndex$/,""),i=t!==n,r=wn.includes(n);if(n in(i?IDBIndex:IDBObjectStore).prototype&&(r||kn.includes(n))){var a=function(){var e=$t(jt().mark((function e(t){var a,o,s,u,l,c,h=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,r?"readwrite":"readonly"),s=o.store,u=h.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=h[c];return i&&(s=s.index(l.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,l),r&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return bn.set(t,a),a}}}fn=function(e){return rn(rn({},e),{},{get:function(t,n,i){return xn(t,n)||e.get(t,n,i)},has:function(t,n){return!!xn(t,n)||e.has(t,n)}})}(fn);var En=function(){function e(t){De(this,e),this.container=t}return Re(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Cn="@firebase/app",Tn="0.9.10",In=new tn("@firebase/app"),Sn="[DEFAULT]",On=(Ae(gn={},Cn,"fire-core"),Ae(gn,"@firebase/app-compat","fire-core-compat"),Ae(gn,"@firebase/analytics","fire-analytics"),Ae(gn,"@firebase/analytics-compat","fire-analytics-compat"),Ae(gn,"@firebase/app-check","fire-app-check"),Ae(gn,"@firebase/app-check-compat","fire-app-check-compat"),Ae(gn,"@firebase/auth","fire-auth"),Ae(gn,"@firebase/auth-compat","fire-auth-compat"),Ae(gn,"@firebase/database","fire-rtdb"),Ae(gn,"@firebase/database-compat","fire-rtdb-compat"),Ae(gn,"@firebase/functions","fire-fn"),Ae(gn,"@firebase/functions-compat","fire-fn-compat"),Ae(gn,"@firebase/installations","fire-iid"),Ae(gn,"@firebase/installations-compat","fire-iid-compat"),Ae(gn,"@firebase/messaging","fire-fcm"),Ae(gn,"@firebase/messaging-compat","fire-fcm-compat"),Ae(gn,"@firebase/performance","fire-perf"),Ae(gn,"@firebase/performance-compat","fire-perf-compat"),Ae(gn,"@firebase/remote-config","fire-rc"),Ae(gn,"@firebase/remote-config-compat","fire-rc-compat"),Ae(gn,"@firebase/storage","fire-gcs"),Ae(gn,"@firebase/storage-compat","fire-gcs-compat"),Ae(gn,"@firebase/firestore","fire-fst"),Ae(gn,"@firebase/firestore-compat","fire-fst-compat"),Ae(gn,"fire-js","fire-js"),Ae(gn,"firebase","fire-js-all"),gn),An=new Map,Dn=new Map;function Mn(e,t){try{e.container.addComponent(t)}catch(n){In.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Rn(e,t){e.container.addOrOverwriteComponent(t)}function Pn(e){var t=e.name;if(Dn.has(t))return In.debug("There were multiple attempts to register component ".concat(t,".")),!1;Dn.set(t,e);var n,i=Pe(An.values());try{for(i.s();!(n=i.n()).done;){Mn(n.value,e)}}catch(r){i.e(r)}finally{i.f()}return!0}function Nn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ln(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sn;Nn(e,t).clearInstance(n)}function Bn(){Dn.clear()}var Fn=(Ae(_n={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),Ae(_n,"bad-app-name","Illegal App name: '{$appName}"),Ae(_n,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ae(_n,"app-deleted","Firebase App named '{$appName}' already deleted"),Ae(_n,"no-options","Need to provide options, when not being deployed to hosting via source."),Ae(_n,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ae(_n,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ae(_n,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Ae(_n,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Ae(_n,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Ae(_n,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),_n),jn=new vt("app","Firebase",Fn),Un=function(){function e(t,n,i){var r=this;De(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Wt("app",(function(){return r}),"PUBLIC"))}return Re(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw jn.create("app-deleted",{appName:this._name})}}]),e}(),Vn="9.22.0";function qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var i=Object.assign({name:Sn,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw jn.create("bad-app-name",{appName:String(r)});if(n||(n=it()),!n)throw jn.create("no-options");var a=An.get(r);if(a){if(Et(n,a.options)&&Et(i,a.config))return a;throw jn.create("duplicate-app",{appName:r})}var o,s=new Gt(r),u=Pe(Dn.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;s.addComponent(l)}}catch(h){u.e(h)}finally{u.f()}var c=new Un(n,i,s);return An.set(r,c),c}function $n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sn,t=An.get(e);if(!t&&e===Sn&&it())return qn();if(!t)throw jn.create("no-app",{appName:e});return t}function Wn(){return Array.from(An.values())}function zn(e){return Hn.apply(this,arguments)}function Hn(){return(Hn=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!An.has(n)){e.next=6;break}return An.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kn(e,t,n){var i,r=null!==(i=On[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));var a=r.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void In.warn(s.join(" "))}Pn(new Wt("".concat(r,"-version"),(function(){return{library:r,version:t}}),"VERSION"))}function Qn(e,t){if(null!==e&&"function"!==typeof e)throw jn.create("invalid-log-argument");!function(e,t){var n,i=Pe(Yt);try{var r=function(){var i=n.value,r=null;t&&t.level&&(r=Xt[t.level]),i.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,a=new Array(i>2?i-2:0),o=2;o<i;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:Qt[n].toLowerCase(),message:s,args:a,type:t.name})}};for(i.s();!(n=i.n()).done;)r()}catch(a){i.e(a)}finally{i.f()}}(e,t)}function Gn(e){var t;t=e,Yt.forEach((function(e){e.setLogLevel(t)}))}var Yn="firebase-heartbeat-database",Xn=1,Jn="firebase-heartbeat-store",Zn=null;function ei(){return Zn||(Zn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.blocked,r=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=mn(s);return r&&s.addEventListener("upgradeneeded",(function(e){r(mn(s.result),e.oldVersion,e.newVersion,mn(s.transaction),e)})),i&&s.addEventListener("blocked",(function(e){return i(e.oldVersion,e.newVersion,e)})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),u}(Yn,Xn,{upgrade:function(e,t){if(0===t)e.createObjectStore(Jn)}}).catch((function(e){throw jn.create("idb-open",{originalErrorMessage:e.message})}))),Zn}function ti(e){return ni.apply(this,arguments)}function ni(){return ni=$t(jt().mark((function e(t){var n,i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ei();case 3:return n=e.sent,e.next=6,n.transaction(Jn).objectStore(Jn).get(ai(t));case 6:return i=e.sent,e.abrupt("return",i);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof pt?In.warn(e.t0.message):(r=jn.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),In.warn(r.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),ni.apply(this,arguments)}function ii(e,t){return ri.apply(this,arguments)}function ri(){return ri=$t(jt().mark((function e(t,n){var i,r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ei();case 3:return i=e.sent,r=i.transaction(Jn,"readwrite"),a=r.objectStore(Jn),e.next=8,a.put(n,ai(t));case 8:return e.next=10,r.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof pt?In.warn(e.t0.message):(o=jn.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),In.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),ri.apply(this,arguments)}function ai(e){return"".concat(e.name,"!").concat(e.options.appId)}var oi=function(){function e(t){var n=this;De(this,e),this.container=t,this._heartbeatsCache=null;var i=this.container.getProvider("app").getImmediate();this._storage=new hi(i),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Re(e,[{key:"triggerHeartbeat",value:function(){var e=$t(jt().mark((function e(){var t,n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),i=si(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===i}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:i,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=$t(jt().mark((function e(){var t,n,i,r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=si(),n=ui(this._heartbeatsCache.heartbeats),i=n.heartbeatsToSend,r=n.unsentEntries,a=Xe(JSON.stringify({version:2,heartbeats:i})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(r.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=r,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function si(){return(new Date).toISOString().substring(0,10)}function ui(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,i=[],r=e.slice(),a=Pe(e);try{var o=function(){var e=t.value,a=i.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),di(i)>n)return a.dates.pop(),"break"}else if(i.push({agent:e.agent,dates:[e.date]}),di(i)>n)return i.pop(),"break";r=r.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:i,unsentEntries:r}}var li,ci,hi=function(){function e(t){De(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Re(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ft()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=function(){r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=function(){n=!1},r.onerror=function(){var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(JS){t(JS)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=$t(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ti(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=$t(jt().mark((function e(t){var n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return i=e.sent,e.abrupt("return",ii(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=$t(jt().mark((function e(t){var n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return i=e.sent,e.abrupt("return",ii(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:i.lastSentHeartbeatDate,heartbeats:[].concat(Vt(i.heartbeats),Vt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function di(e){return Xe(JSON.stringify({version:2,heartbeats:e})).length}li="",Pn(new Wt("platform-logger",(function(e){return new En(e)}),"PRIVATE")),Pn(new Wt("heartbeat",(function(e){return new oi(e)}),"PRIVATE")),Kn(Cn,Tn,li),Kn(Cn,Tn,"esm2017"),Kn("fire-js","");var fi=function(){function e(t,n){var i=this;De(this,e),this._delegate=t,this.firebase=n,Mn(t,new Wt("app-compat",(function(){return i}),"PUBLIC")),this.container=t.container}return Re(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),zn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sn;this._delegate.checkDestroyed();var i=this._delegate.container.getProvider(e);return i.isInitialized()||"EXPLICIT"!==(null===(t=i.getComponent())||void 0===t?void 0:t.instantiationMode)||i.initialize(),i.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Mn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Rn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),pi=(Ae(ci={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ae(ci,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),ci),vi=new vt("app-compat","Firebase",pi);var mi=function t(){var n=function(t){var n={},i={__esModule:!0,initializeApp:function(e){var r=qn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(kt(n,r.name))return n[r.name];var a=new t(r,i);return n[r.name]=a,a},app:r,registerVersion:Kn,setLogLevel:Gn,onLog:Qn,apps:null,SDK_VERSION:Vn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Pn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();if("function"!==typeof e[a])throw vi.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Ze(o,e.serviceProps),i[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t.apply(this,e.multipleInstances?r:[])}}return"PUBLIC"===e.type?i[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function r(e){if(!kt(n,e=e||Sn))throw vi.create("no-app",{appName:e});return n[e]}return i.default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),r.App=t,i}(fi);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Ze(n,e)},createSubscribe:At,ErrorFactory:vt,deepExtend:Ze}),n}(),yi=new tn("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){yi.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var gi=self.firebase.SDK_VERSION;gi&&gi.indexOf("LITE")>=0&&yi.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _i=mi;!function(e){Kn("@firebase/app-compat","0.2.10",e)}();function ki(){return ki="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Be(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},ki.apply(this,arguments)}_i.registerVersion("firebase","9.22.0","app-compat");function wi(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;Object.create;var bi,xi={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Ei="EMAIL_SIGNIN",Ci="PASSWORD_RESET",Ti="RECOVER_EMAIL",Ii="REVERT_SECOND_FACTOR_ADDITION",Si="VERIFY_AND_CHANGE_EMAIL",Oi="VERIFY_EMAIL";function Ai(){return Ae({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Di=function(){var e;return Ae(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Ae(e,"argument-error",""),Ae(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Ae(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Ae(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Ae(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Ae(e,"cordova-not-ready","Cordova framework is not ready."),Ae(e,"cors-unsupported","This browser is not supported."),Ae(e,"credential-already-in-use","This credential is already associated with a different user account."),Ae(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Ae(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Ae(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Ae(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Ae(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Ae(e,"email-already-in-use","The email address is already in use by another account."),Ae(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Ae(e,"expired-action-code","The action code has expired."),Ae(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Ae(e,"internal-error","An internal AuthError has occurred."),Ae(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Ae(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Ae(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Ae(e,"invalid-auth-event","An internal AuthError has occurred."),Ae(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Ae(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Ae(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Ae(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Ae(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Ae(e,"invalid-email","The email address is badly formatted."),Ae(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Ae(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Ae(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Ae(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Ae(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Ae(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Ae(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Ae(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Ae(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Ae(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Ae(e,"wrong-password","The password is invalid or the user does not have a password."),Ae(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Ae(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Ae(e,"invalid-provider-id","The specified provider ID is invalid."),Ae(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Ae(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Ae(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Ae(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Ae(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Ae(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Ae(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Ae(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Ae(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Ae(e,"missing-continue-uri","A continue URL must be provided in the request."),Ae(e,"missing-iframe-start","An internal AuthError has occurred."),Ae(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Ae(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Ae(e,"missing-password","A non-empty password must be provided"),Ae(e,"missing-multi-factor-info","No second factor identifier is provided."),Ae(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Ae(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Ae(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Ae(e,"app-deleted","This instance of FirebaseApp has been deleted."),Ae(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Ae(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Ae(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Ae(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Ae(e,"no-auth-event","An internal AuthError has occurred."),Ae(e,"no-such-provider","User was not linked to an account with the given provider."),Ae(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Ae(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Ae(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Ae(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Ae(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Ae(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Ae(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Ae(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Ae(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Ae(e,"rejected-credential","The request contains malformed or mismatching credentials."),Ae(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Ae(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Ae(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Ae(e,"timeout","The operation has timed out."),Ae(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Ae(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Ae(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Ae(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Ae(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Ae(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Ae(e,"unverified-email","The operation requires a verified email."),Ae(e,"user-cancelled","The user did not grant your application the permissions it requested."),Ae(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Ae(e,"user-disabled","The user account has been disabled by an administrator."),Ae(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Ae(e,"user-signed-out",""),Ae(e,"weak-password","The password must be 6 characters long or more."),Ae(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Ae(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),Ae(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),Ae(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),Ae(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),Ae(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),Ae(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),Ae(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),Ae(e,"invalid-req-type","Invalid request parameters."),Ae(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},Mi=Ai,Ri=new vt("auth","Firebase",Ai()),Pi=new tn("@firebase/auth");function Ni(e){if(Pi.logLevel<=Qt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Pi.warn.apply(Pi,["Auth (".concat(Vn,"): ").concat(e)].concat(n))}}function Li(e){if(Pi.logLevel<=Qt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];Pi.error.apply(Pi,["Auth (".concat(Vn,"): ").concat(e)].concat(n))}}function Bi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw Vi.apply(void 0,[e].concat(n))}function Fi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Vi.apply(void 0,[e].concat(n))}function ji(e,t,n){var i=Object.assign(Object.assign({},Mi()),Ae({},t,n));return new vt("auth","Firebase",i).create(t,{appName:e.name})}function Ui(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Bi(e,"argument-error"),ji(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Vi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){var r,a=n[0],o=Vt(n.slice(1));return o[0]&&(o[0].appName=e.name),(r=e._errorFactory).create.apply(r,[a].concat(Vt(o)))}return Ri.create.apply(Ri,[e].concat(n))}function qi(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw Vi.apply(void 0,[t].concat(i))}}function $i(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Li(t),new Error(t)}function Wi(e,t){e||$i(t)}function zi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Hi(){return"http:"===Ki()||"https:"===Ki()}function Ki(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Qi=function(){function e(t,n){De(this,e),this.shortDelay=t,this.longDelay=n,Wi(n>t,"Short delay should be less than long delay!"),this.isMobile=st()||ct()}return Re(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Hi()||lt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Gi(e,t){Wi(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Yi=function(){function e(){De(this,e)}return Re(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void $i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void $i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void $i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Xi=(Ae(bi={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Ae(bi,"MISSING_CUSTOM_TOKEN","internal-error"),Ae(bi,"INVALID_IDENTIFIER","invalid-email"),Ae(bi,"MISSING_CONTINUE_URI","internal-error"),Ae(bi,"INVALID_PASSWORD","wrong-password"),Ae(bi,"MISSING_PASSWORD","missing-password"),Ae(bi,"EMAIL_EXISTS","email-already-in-use"),Ae(bi,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Ae(bi,"INVALID_IDP_RESPONSE","invalid-credential"),Ae(bi,"INVALID_PENDING_TOKEN","invalid-credential"),Ae(bi,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Ae(bi,"MISSING_REQ_TYPE","internal-error"),Ae(bi,"EMAIL_NOT_FOUND","user-not-found"),Ae(bi,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Ae(bi,"EXPIRED_OOB_CODE","expired-action-code"),Ae(bi,"INVALID_OOB_CODE","invalid-action-code"),Ae(bi,"MISSING_OOB_CODE","internal-error"),Ae(bi,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Ae(bi,"INVALID_ID_TOKEN","invalid-user-token"),Ae(bi,"TOKEN_EXPIRED","user-token-expired"),Ae(bi,"USER_NOT_FOUND","user-token-expired"),Ae(bi,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Ae(bi,"INVALID_CODE","invalid-verification-code"),Ae(bi,"INVALID_SESSION_INFO","invalid-verification-id"),Ae(bi,"INVALID_TEMPORARY_PROOF","invalid-credential"),Ae(bi,"MISSING_SESSION_INFO","missing-verification-id"),Ae(bi,"SESSION_EXPIRED","code-expired"),Ae(bi,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Ae(bi,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Ae(bi,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Ae(bi,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Ae(bi,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Ae(bi,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Ae(bi,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Ae(bi,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Ae(bi,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Ae(bi,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Ae(bi,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ae(bi,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),Ae(bi,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),Ae(bi,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),Ae(bi,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),Ae(bi,"MISSING_CLIENT_TYPE","missing-client-type"),Ae(bi,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),Ae(bi,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),Ae(bi,"INVALID_REQ_TYPE","invalid-req-type"),bi),Ji=new Qi(3e4,6e4);function Zi(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function er(e,t,n,i){return tr.apply(this,arguments)}function tr(){return tr=$t(jt().mark((function e(t,n,i,r){var a,o=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",nr(t,a,$t(jt().mark((function e(){var a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},r&&("GET"===n?o=r:a={body:JSON.stringify(r)}),s=Tt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Yi.fetch()(or(t,t.config.apiHost,i,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),tr.apply(this,arguments)}function nr(e,t,n){return ir.apply(this,arguments)}function ir(){return(ir=$t(jt().mark((function e(t,n,i){var r,a,o,s,u,l,c,h,d,f;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,r=Object.assign(Object.assign({},Xi),n),e.prev=2,a=new sr(t),e.next=6,Promise.race([i(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw ur(t,"account-exists-with-different-credential",s);case 13:if(!o.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(u=o.ok?s.errorMessage:s.error.message,l=u.split(" : "),c=Ie(l,2),h=c[0],d=c[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw ur(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw ur(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw ur(t,"user-disabled",s);case 29:if(f=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw ji(t,f,d);case 34:Bi(t,f);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof pt)){e.next=41;break}throw e.t0;case 41:Bi(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function rr(e,t,n,i){return ar.apply(this,arguments)}function ar(){return ar=$t(jt().mark((function e(t,n,i,r){var a,o,s=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,er(t,n,i,r,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Bi(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),ar.apply(this,arguments)}function or(e,t,n,i){var r="".concat(t).concat(n,"?").concat(i);return e.config.emulator?Gi(e.config,r):"".concat(e.config.apiScheme,"://").concat(r)}var sr=function(){function e(t){var n=this;De(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Fi(n.auth,"network-request-failed"))}),Ji.get())}))}return Re(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function ur(e,t,n){var i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);var r=Fi(e,t,i);return r.customData._tokenResponse=n,r}function lr(e,t){return cr.apply(this,arguments)}function cr(){return(cr=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hr(e,t){return dr.apply(this,arguments)}function dr(){return(dr=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fr(e,t){return pr.apply(this,arguments)}function pr(){return(pr=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function mr(){return mr=$t(jt().mark((function e(t){var n,i,r,a,o,s,u=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],i=Ft(t),e.next=4,i.getIdToken(n);case 4:return r=e.sent,qi((a=gr(r))&&a.exp&&a.auth_time&&a.iat,i.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:r,authTime:vr(yr(a.auth_time)),issuedAtTime:vr(yr(a.iat)),expirationTime:vr(yr(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),mr.apply(this,arguments)}function yr(e){return 1e3*Number(e)}function gr(e){var t=Ie(e.split("."),3),n=t[0],i=t[1],r=t[2];if(void 0===n||void 0===i||void 0===r)return Li("JWT malformed, contained fewer than 3 sections"),null;try{var a=Je(i);return a?JSON.parse(a):(Li("Failed to decode base64 JWT payload"),null)}catch(o){return Li("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function _r(e,t){return kr.apply(this,arguments)}function kr(){return kr=$t(jt().mark((function e(t,n){var i=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i.length>2&&void 0!==i[2]&&i[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof pt&&wr(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),kr.apply(this,arguments)}function wr(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var br=function(){function e(t){De(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Re(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var i=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,i)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout($t(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),xr=function(){function e(t,n){De(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Re(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=vr(this.lastLoginAt),this.creationTime=vr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Er(e){return Cr.apply(this,arguments)}function Cr(){return Cr=$t(jt().mark((function e(t){var n,i,r,a,o,s,u,l,c,h,d;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return r=e.sent,e.next=6,_r(t,fr(i,{idToken:r}));case 6:qi(null===(a=e.sent)||void 0===a?void 0:a.users.length,i,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=wi(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],u=Ir(t.providerData,s),l=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!l&&c,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new xr(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),Cr.apply(this,arguments)}function Tr(){return(Tr=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ft(t),e.next=3,Er(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ir(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Vt(n),Vt(t))}function Sr(e,t){return Or.apply(this,arguments)}function Or(){return(Or=$t(jt().mark((function e(t,n){var i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nr(t,{},$t(jt().mark((function e(){var i,r,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Tt({grant_type:"refresh_token",refresh_token:n}).slice(1),r=t.config,a=r.tokenApiHost,o=r.apiKey,s=or(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Yi.fetch()(s,{method:"POST",headers:u,body:i}));case 8:case"end":return e.stop()}}),e)}))));case 2:return i=e.sent,e.abrupt("return",{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ar=function(){function e(){De(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Re(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){qi(e.idToken,"internal-error"),qi("undefined"!==typeof e.idToken,"internal-error"),qi("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=gr(e);return qi(t,"internal-error"),qi("undefined"!==typeof t.exp,"internal-error"),qi("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=$t(jt().mark((function e(t){var n,i=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],qi(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=$t(jt().mark((function e(t,n){var i,r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Sr(t,n);case 2:i=e.sent,r=i.accessToken,a=i.refreshToken,o=i.expiresIn,this.updateTokensAndExpiration(r,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return $i("not implemented")}}],[{key:"fromJSON",value:function(t,n){var i=n.refreshToken,r=n.accessToken,a=n.expirationTime,o=new e;return i&&(qi("string"===typeof i,"internal-error",{appName:t}),o.refreshToken=i),r&&(qi("string"===typeof r,"internal-error",{appName:t}),o.accessToken=r),a&&(qi("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Dr(e,t){qi("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Mr=function(){function e(t){De(this,e);var n=t.uid,i=t.auth,r=t.stsTokenManager,a=wi(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new br(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Vt(a.providerData):[],this.metadata=new xr(a.createdAt||void 0,a.lastLoginAt||void 0)}return Re(e,[{key:"getIdToken",value:function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_r(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(qi(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return mr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Tr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(qi(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){qi(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=$t(jt().mark((function e(t){var n,i,r=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],i=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),!n){e.next=6;break}return e.next=6,Er(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:i&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=$t(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,_r(this,lr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var i,r,a,o,s,u,l,c,h=null!==(i=n.displayName)&&void 0!==i?i:void 0,d=null!==(r=n.email)&&void 0!==r?r:void 0,f=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,m=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,y=null!==(l=n.createdAt)&&void 0!==l?l:void 0,g=null!==(c=n.lastLoginAt)&&void 0!==c?c:void 0,_=n.uid,k=n.emailVerified,w=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;qi(_&&x,t,"internal-error");var E=Ar.fromJSON(this.name,x);qi("string"===typeof _,t,"internal-error"),Dr(h,t.name),Dr(d,t.name),qi("boolean"===typeof k,t,"internal-error"),qi("boolean"===typeof w,t,"internal-error"),Dr(f,t.name),Dr(p,t.name),Dr(v,t.name),Dr(m,t.name),Dr(y,t.name),Dr(g,t.name);var C=new e({uid:_,auth:t,email:d,emailVerified:k,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:f,tenantId:v,stsTokenManager:E,createdAt:y,lastLoginAt:g});return b&&Array.isArray(b)&&(C.providerData=b.map((function(e){return Object.assign({},e)}))),m&&(C._redirectEventId=m),C}},{key:"_fromIdTokenResponse",value:function(){var t=$t(jt().mark((function t(n,i){var r,a,o,s=arguments;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],(a=new Ar).updateFromServerResponse(i),o=new e({uid:i.localId,auth:n,stsTokenManager:a,isAnonymous:r}),t.next=6,Er(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Rr=new Map;function Pr(e){Wi(e instanceof Function,"Expected a class definition");var t=Rr.get(e);return t?(Wi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Rr.set(e,t),t)}var Nr=function(){function e(){De(this,e),this.type="NONE",this.storage={}}return Re(e,[{key:"_isAvailable",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Nr.type="NONE";var Lr=Nr;function Br(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Fr=function(){function e(t,n,i){De(this,e),this.persistence=t,this.auth=n,this.userKey=i;var r=this.auth,a=r.config,o=r.name;this.fullUserKey=Br(this.userKey,a.apiKey,o),this.fullPersistenceKey=Br("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Re(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=$t(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Mr._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=$t(jt().mark((function t(n,i){var r,a,o,s,u,l,c,h,d,f,p,v=arguments;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=v.length>2&&void 0!==v[2]?v[2]:"authUser",i.length){t.next=3;break}return t.abrupt("return",new e(Pr(Lr),n,r));case 3:return t.next=5,Promise.all(i.map(function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Pr(Lr),s=Br(r,n.config.apiKey,n.name),u=null,l=Pe(i),t.prev=10,l.s();case 12:if((c=l.n()).done){t.next=29;break}return h=c.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(d=t.sent)){t.next=23;break}return f=Mr._fromJSON(n,d),h!==o&&(u=f),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),l.e(t.t1);case 34:return t.prev=34,l.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,r));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(i.map(function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,r));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function jr(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if($r(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ur(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zr(t))return"Blackberry";if(Hr(t))return"Webos";if(Vr(t))return"Safari";if((t.includes("chrome/")||qr(t))&&!t.includes("edge/"))return"Chrome";if(Wr(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ur(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot();return/firefox\//i.test(e)}function Vr(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot();return/crios\//i.test(e)}function $r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot();return/iemobile/i.test(e)}function Wr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot();return/android/i.test(e)}function zr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot();return/blackberry/i.test(e)}function Hr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot();return/webos/i.test(e)}function Kr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Qr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot();return Kr(e)||Wr(e)||Hr(e)||zr(e)||/windows phone/i.test(e)||$r(e)}function Gr(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=jr(ot());break;case"Worker":t="".concat(jr(ot()),"-").concat(e);break;default:t=e}var i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Vn,"/").concat(i)}function Yr(e){return Xr.apply(this,arguments)}function Xr(){return(Xr=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jr(e,t){return Zr.apply(this,arguments)}function Zr(){return(Zr=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"GET","/v2/recaptchaConfig",Zi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ea(e){return void 0!==e&&void 0!==e.getResponse}function ta(e){return void 0!==e&&void 0!==e.enterprise}var na=Re((function e(t){if(De(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function ia(e){return new Promise((function(t,n){var i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=function(e){var t=Fi("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)}))}function ra(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var aa=function(){function e(t){De(this,e),this.type="recaptcha-enterprise",this.auth=ca(t)}return Re(e,[{key:"verify",value:function(){var e=$t(jt().mark((function e(){var t,n,i,r,a,o=this,s=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,i){var r=window.grecaptcha;ta(r)?r.enterprise.ready((function(){r.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))},r=function(){return r=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=$t(jt().mark((function e(n,i){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Jr(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var r=new na(e);return null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,n(r.siteKey)}i(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){i(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)},i=function(e){return r.apply(this,arguments)},t=s.length>0&&void 0!==s[0]?s[0]:"verify",n=s.length>1&&void 0!==s[1]&&s[1],e.abrupt("return",new Promise((function(e,t){i(o.auth).then((function(i){if(!n&&ta(window.grecaptcha))a(i,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));ia("https://www.google.com/recaptcha/enterprise.js?render="+i).then((function(){a(i,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function oa(e,t,n){return sa.apply(this,arguments)}function sa(){return sa=$t(jt().mark((function e(t,n,i){var r,a,o,s,u=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>3&&void 0!==u[3]&&u[3],a=new aa(t),e.prev=2,e.next=5,a.verify(i);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(i,!0);case 12:o=e.sent;case 13:return s=Object.assign({},n),r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),sa.apply(this,arguments)}var ua=function(){function e(t){De(this,e),this.auth=t,this.queue=[]}return Re(e,[{key:"pushCallback",value:function(e,t){var n=this,i=function(t){return new Promise((function(n,i){try{n(e(t))}catch(r){i(r)}}))};i.onAbort=t,this.queue.push(i);var r=this.queue.length-1;return function(){n.queue[r]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=$t(jt().mark((function e(t){var n,i,r,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,i=Pe(this.queue),e.prev=5,i.s();case 7:if((r=i.n()).done){e.next=14;break}return a=r.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=Pe(n);try{for(o.s();!(s=o.n()).done;){u=s.value;try{u()}catch(l){}}}catch(c){o.e(c)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),la=function(){function e(t,n,i,r){De(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ha(this),this.idTokenSubscription=new ha(this),this.beforeStateQueue=new ua(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ri,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Re(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Pr(t)),this._initializationPromise=this.queue($t(jt().mark((function i(){var r,a;return jt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!n._deleted){i.next=2;break}return i.abrupt("return");case 2:return i.next=4,Fr.create(n,e);case 4:if(n.persistenceManager=i.sent,!n._deleted){i.next=7;break}return i.abrupt("return");case 7:if(!(null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)){i.next=15;break}return i.prev=8,i.next=11,n._popupRedirectResolver._initialize(n);case 11:i.next=15;break;case 13:i.prev=13,i.t0=i.catch(8);case 15:return i.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){i.next=20;break}return i.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return i.stop()}}),i,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=$t(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=$t(jt().mark((function e(t){var n,i,r,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(i=e.sent,r=i,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(r=u.user,a=!0);case 14:if(r){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(r._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(r);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),r=i,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!r){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return qi(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==r._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(r));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(r));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Er(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Ft(t):null)&&qi(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=$t(jt().mark((function e(t){var n,i=this,r=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&qi(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue($t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.directlySetCurrentUser(t);case 2:i.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue($t(jt().mark((function n(){return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Pr(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=$t(jt().mark((function e(){var t,n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jr(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new na(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new aa(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new vt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=$t(jt().mark((function e(t,n){var i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return i=e.sent,e.abrupt("return",null===t?i.removeCurrentUser():i.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return qi(n=t&&Pr(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Fr.create(this,[Pr(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=$t(jt().mark((function e(t){var n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue($t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=$t(jt().mark((function e(t){var n=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue($t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,i){var r=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return qi(o,this,"internal-error"),o.then((function(){return a(r.currentUser)})),"function"===typeof t?e.addObserver(t,n,i):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return qi(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gr(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=$t(jt().mark((function e(){var t,n,i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ae({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(i=e.sent)&&(n["X-Firebase-Client"]=i),e.next=8,this._getAppCheckToken();case 8:return(r=e.sent)&&(n["X-Firebase-AppCheck"]=r),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=$t(jt().mark((function e(){var t,n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&Ni("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ca(e){return Ft(e)}var ha=function(){function e(t){var n=this;De(this,e),this.auth=t,this.observer=null,this.addObserver=At((function(e){return n.observer=e}))}return Re(e,[{key:"next",get:function(){return qi(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function da(e,t,n){var i=ca(e);qi(i._canInitEmulator,i,"emulator-config-failed"),qi(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");var r=!!(null===n||void 0===n?void 0:n.disableWarnings),a=fa(t),o=function(e){var t=fa(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){var a=r[1];return{host:a,port:pa(i.substr(a.length+1))}}var o=Ie(i.split(":"),2);return{host:o[0],port:pa(o[1])}}(t),s=o.host,u=o.port,l=null===u?"":":".concat(u);i.config.emulator={url:"".concat(a,"//").concat(s).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:s,port:u,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fa(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function pa(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var va=function(){function e(t,n){De(this,e),this.providerId=t,this.signInMethod=n}return Re(e,[{key:"toJSON",value:function(){return $i("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return $i("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return $i("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return $i("not implemented")}}]),e}();function ma(e,t){return ya.apply(this,arguments)}function ya(){return(ya=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:resetPassword",Zi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ga(e,t){return _a.apply(this,arguments)}function _a(){return(_a=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ka(e,t){return wa.apply(this,arguments)}function wa(){return(wa=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:update",Zi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ba(e,t){return xa.apply(this,arguments)}function xa(){return(xa=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,"POST","/v1/accounts:signInWithPassword",Zi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ea(e,t){return Ca.apply(this,arguments)}function Ca(){return(Ca=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:sendOobCode",Zi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ta(e,t){return Ia.apply(this,arguments)}function Ia(){return(Ia=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ea(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sa(e,t){return Oa.apply(this,arguments)}function Oa(){return(Oa=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ea(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Aa(e,t){return Da.apply(this,arguments)}function Da(){return(Da=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ea(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ma(e,t){return Ra.apply(this,arguments)}function Ra(){return(Ra=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ea(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pa(e,t){return Na.apply(this,arguments)}function Na(){return(Na=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,"POST","/v1/accounts:signInWithEmailLink",Zi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function La(e,t){return Ba.apply(this,arguments)}function Ba(){return(Ba=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,"POST","/v1/accounts:signInWithEmailLink",Zi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fa=function(e){Le(n,e);var t=je(n);function n(e,i,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return De(this,n),(a=t.call(this,"password",r))._email=e,a._password=i,a._tenantId=o,a}return Re(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=$t(jt().mark((function e(t){var n,i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,oa(t,i,"signInWithPassword");case 7:return r=e.sent,e.abrupt("return",ba(t,r));case 11:return e.abrupt("return",ba(t,i).catch(function(){var e=$t(jt().mark((function e(n){var r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,oa(t,i,"signInWithPassword");case 4:return r=e.sent,e.abrupt("return",ba(t,r));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",Pa(t,{email:this._email,oobCode:this._password}));case 13:Bi(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",ga(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",La(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Bi(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(va);function ja(e,t){return Ua.apply(this,arguments)}function Ua(){return(Ua=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,"POST","/v1/accounts:signInWithIdp",Zi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Va=function(e){Le(n,e);var t=je(n);function n(){var e;return De(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Re(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ja(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ja(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ja(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Tt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Bi("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,i=t.providerId,r=t.signInMethod,a=wi(t,["providerId","signInMethod"]);if(!i||!r)return null;var o=new n(i,r);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(va);function qa(e,t){return $a.apply(this,arguments)}function $a(){return($a=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:sendVerificationCode",Zi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wa(){return(Wa=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,"POST","/v1/accounts:signInWithPhoneNumber",Zi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function za(){return(za=$t(jt().mark((function e(t,n){var i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rr(t,"POST","/v1/accounts:signInWithPhoneNumber",Zi(t,n));case 2:if(!(i=e.sent).temporaryProof){e.next=5;break}throw ur(t,"account-exists-with-different-credential",i);case 5:return e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ha=Ae({},"USER_NOT_FOUND","user-not-found");function Ka(){return(Ka=$t(jt().mark((function e(t,n){var i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",rr(t,"POST","/v1/accounts:signInWithPhoneNumber",Zi(t,i),Ha));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qa=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this,"phone","phone")).params=e,i}return Re(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Wa.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return za.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Ka.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,i=e.verificationId,r=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:i,code:r}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,i=t.verificationId,r=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return r||i||a||o?new n({verificationId:i,verificationCode:r,phoneNumber:a,temporaryProof:o}):null}}]),n}(va);var Ga=function(){function e(t){var n,i,r,a,o,s;De(this,e);var u=It(St(t)),l=null!==(n=u.apiKey)&&void 0!==n?n:null,c=null!==(i=u.oobCode)&&void 0!==i?i:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=u.mode)&&void 0!==r?r:null);qi(l&&c&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=c,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return Re(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=It(St(e)).link,n=t?It(St(t)).deep_link_id:null,i=It(St(e)).deep_link_id;return(i?It(St(i)).link:null)||i||n||t||e}(t);try{return new e(n)}catch(IC){return null}}}]),e}();var Ya=function(){function e(){De(this,e),this.providerId=e.PROVIDER_ID}return Re(e,null,[{key:"credential",value:function(e,t){return Fa._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ga.parseLink(t);return qi(n,"argument-error"),Fa._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Ya.PROVIDER_ID="password",Ya.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ya.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Xa=function(){function e(t){De(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Re(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ja=function(e){Le(n,e);var t=je(n);function n(){var e;return De(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Re(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Vt(this.scopes)}}]),n}(Xa),Za=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return qi(e.idToken||e.accessToken,"argument-error"),Va._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return qi("providerId"in t&&"signInMethod"in t,"argument-error"),Va._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var i=t.oauthIdToken,r=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!r&&!a&&!i&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:i,accessToken:r,nonce:s,pendingToken:o})}catch(l){return null}}}]),n}(Ja),eo=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.call(this,"facebook.com")}return Re(n,null,[{key:"credential",value:function(e){return Va._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(IC){return null}}}]),n}(Ja);eo.FACEBOOK_SIGN_IN_METHOD="facebook.com",eo.PROVIDER_ID="facebook.com";var to=function(e){Le(n,e);var t=je(n);function n(){var e;return De(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Re(n,null,[{key:"credential",value:function(e,t){return Va._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var i=t.oauthIdToken,r=t.oauthAccessToken;if(!i&&!r)return null;try{return n.credential(i,r)}catch(IC){return null}}}]),n}(Ja);to.GOOGLE_SIGN_IN_METHOD="google.com",to.PROVIDER_ID="google.com";var no=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.call(this,"github.com")}return Re(n,null,[{key:"credential",value:function(e){return Va._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(IC){return null}}}]),n}(Ja);no.GITHUB_SIGN_IN_METHOD="github.com",no.PROVIDER_ID="github.com";var io=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this,e,e)).pendingToken=i,r}return Re(n,[{key:"_getIdTokenResponse",value:function(e){return ja(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ja(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ja(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,i=t.providerId,r=t.signInMethod,a=t.pendingToken;return i&&r&&a&&i===r?new n(i,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(va),ro=function(e){Le(n,e);var t=je(n);function n(e){return De(this,n),qi(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Re(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=io.fromJSON(e);return qi(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,i=t.providerId;if(!n||!i)return null;try{return io._create(i,n)}catch(r){return null}}}]),n}(Xa),ao=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.call(this,"twitter.com")}return Re(n,null,[{key:"credential",value:function(e,t){return Va._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var i=t.oauthAccessToken,r=t.oauthTokenSecret;if(!i||!r)return null;try{return n.credential(i,r)}catch(IC){return null}}}]),n}(Ja);function oo(e,t){return so.apply(this,arguments)}function so(){return(so=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,"POST","/v1/accounts:signUp",Zi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ao.TWITTER_SIGN_IN_METHOD="twitter.com",ao.PROVIDER_ID="twitter.com";var uo=function(){function e(t){De(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Re(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=$t(jt().mark((function t(n,i,r){var a,o,s,u,l=arguments;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=l.length>3&&void 0!==l[3]&&l[3],t.next=3,Mr._fromIdTokenResponse(n,r,a);case 3:return o=t.sent,s=lo(r),u=new e({user:o,providerId:s,_tokenResponse:r,operationType:i}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=$t(jt().mark((function t(n,i,r){var a;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(r,!0);case 2:return a=lo(r),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:r,operationType:i}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}()}]),e}();function lo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function co(){return co=$t(jt().mark((function e(t){var n,i,r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ca(t),e.next=3,i._initializationPromise;case 3:if(!(null===(n=i.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new uo({user:i.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,oo(i,{returnSecureToken:!0});case 7:return r=e.sent,e.next=10,uo._fromIdTokenResponse(i,"signIn",r,!0);case 10:return a=e.sent,e.next=13,i._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),co.apply(this,arguments)}var ho=function(e){Le(n,e);var t=je(n);function n(e,i,r,a){var o,s;return De(this,n),(o=t.call(this,i.code,i.message)).operationType=r,o.user=a,Object.setPrototypeOf(Ne(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:i.customData._serverResponse,operationType:r},o}return Re(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,i,r){return new n(e,t,i,r)}}]),n}(pt);function fo(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw ho._fromErrorAndOperation(e,n,t,i);throw n}))}function po(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function vo(e,t){return mo.apply(this,arguments)}function mo(){return mo=$t(jt().mark((function e(t,n){var i,r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ft(t),e.next=3,_o(!0,i,n);case 3:return e.t0=hr,e.t1=i.auth,e.next=7,i.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return r=e.sent,a=r.providerUserInfo,o=po(a||[]),i.providerData=i.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(i.phoneNumber=null),e.next=19,i.auth._persistUserIfCurrent(i);case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}}),e)}))),mo.apply(this,arguments)}function yo(e,t){return go.apply(this,arguments)}function go(){return go=$t(jt().mark((function e(t,n){var i,r,a=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>2&&void 0!==a[2]&&a[2],e.t0=_r,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=i,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return r=e.sent,e.abrupt("return",uo._forOperation(t,"link",r));case 14:case"end":return e.stop()}}),e)}))),go.apply(this,arguments)}function _o(e,t,n){return ko.apply(this,arguments)}function ko(){return(ko=$t(jt().mark((function e(t,n,i){var r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Er(n);case 2:r=po(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",qi(r.has(i)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(e,t){return bo.apply(this,arguments)}function bo(){return bo=$t(jt().mark((function e(t,n){var i,r,a,o,s,u,l=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=l.length>2&&void 0!==l[2]&&l[2],r=t.auth,a="reauthenticate",e.prev=3,e.next=6,_r(t,fo(r,a,n,t),i);case 6:return qi((o=e.sent).idToken,r,"internal-error"),qi(s=gr(o.idToken),r,"internal-error"),u=s.sub,qi(t.uid===u,r,"user-mismatch"),e.abrupt("return",uo._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Bi(r,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),bo.apply(this,arguments)}function xo(e,t){return Eo.apply(this,arguments)}function Eo(){return Eo=$t(jt().mark((function e(t,n){var i,r,a,o,s=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],r="signIn",e.next=4,fo(t,r,n);case 4:return a=e.sent,e.next=7,uo._fromIdTokenResponse(t,r,a);case 7:if(o=e.sent,i){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Eo.apply(this,arguments)}function Co(e,t){return To.apply(this,arguments)}function To(){return(To=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xo(ca(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Io(e,t){return So.apply(this,arguments)}function So(){return(So=$t(jt().mark((function e(t,n){var i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ft(t),e.next=3,_o(!1,i,n.providerId);case 3:return e.abrupt("return",yo(i,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(e,t){return Ao.apply(this,arguments)}function Ao(){return(Ao=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wo(Ft(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Do(e,t){return Mo.apply(this,arguments)}function Mo(){return(Mo=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rr(t,"POST","/v1/accounts:signInWithCustomToken",Zi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ro(){return(Ro=$t(jt().mark((function e(t,n){var i,r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ca(t),e.next=3,Do(i,{token:n,returnSecureToken:!0});case 3:return r=e.sent,e.next=6,uo._fromIdTokenResponse(i,"signIn",r);case 6:return a=e.sent,e.next=9,i._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Po=function(){function e(t,n){De(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Re(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?No._fromServerResponse(e,t):"totpInfo"in t?Lo._fromServerResponse(e,t):Bi(e,"internal-error")}}]),e}(),No=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,i}return Re(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Po),Lo=function(e){Le(n,e);var t=je(n);function n(e){return De(this,n),t.call(this,"totp",e)}return Re(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Po);function Bo(e,t,n){var i;qi((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),qi("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(qi(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(qi(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Fo(){return Fo=$t(jt().mark((function e(t,n,i){var r,a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ca(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(r=a._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled)){e.next=11;break}return e.next=5,oa(a,o,"getOobCode",!0);case 5:return s=e.sent,i&&Bo(a,s,i),e.next=9,Sa(a,s);case 9:e.next=14;break;case 11:return i&&Bo(a,o,i),e.next=14,Sa(a,o).catch(function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,oa(a,o,"getOobCode",!0);case 4:return n=e.sent,i&&Bo(a,n,i),e.next=8,Sa(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),Fo.apply(this,arguments)}function jo(){return(jo=$t(jt().mark((function e(t,n,i){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ma(Ft(t),{oobCode:n,newPassword:i});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uo(){return(Uo=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka(Ft(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vo(e,t){return qo.apply(this,arguments)}function qo(){return(qo=$t(jt().mark((function e(t,n){var i,r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ft(t),e.next=3,ma(i,{oobCode:n});case 3:r=e.sent,qi(a=r.requestType,i,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return qi(r.newEmail,i,"internal-error"),e.abrupt("break",14);case 12:qi(r.mfaInfo,i,"internal-error");case 13:qi(r.email,i,"internal-error");case 14:return o=null,r.mfaInfo&&(o=Po._fromServerResponse(ca(i),r.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $o(){return($o=$t(jt().mark((function e(t,n){var i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vo(Ft(t),n);case 2:return i=e.sent,r=i.data,e.abrupt("return",r.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wo(e,t,n){return zo.apply(this,arguments)}function zo(){return zo=$t(jt().mark((function e(t,n,i){var r,a,o,s,u,l,c;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=ca(t),o={returnSecureToken:!0,email:n,password:i,clientType:"CLIENT_TYPE_WEB"},!(null===(r=a._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled)){e.next=9;break}return e.next=5,oa(a,o,"signUpPassword");case 5:u=e.sent,s=oo(a,u),e.next=10;break;case 9:s=oo(a,o).catch(function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,oa(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",oo(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,s.catch((function(e){return Promise.reject(e)}));case 12:return l=e.sent,e.next=15,uo._fromIdTokenResponse(a,"signIn",l);case 15:return c=e.sent,e.next=18,a._updateCurrentUser(c.user);case 18:return e.abrupt("return",c);case 19:case"end":return e.stop()}}),e)}))),zo.apply(this,arguments)}function Ho(){return Ho=$t(jt().mark((function e(t,n,i){var r,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=function(e,t){qi(t.handleCodeInApp,a,"argument-error"),t&&Bo(a,e,t)},a=ca(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(r=a._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled)){e.next=12;break}return e.next=6,oa(a,o,"getOobCode",!0);case 6:return u=e.sent,s(u,i),e.next=10,Aa(a,u);case 10:e.next=15;break;case 12:return s(o,i),e.next=15,Aa(a,o).catch(function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,oa(a,o,"getOobCode",!0);case 4:return n=e.sent,s(n,i),e.next=8,Aa(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),Ho.apply(this,arguments)}function Ko(){return(Ko=$t(jt().mark((function e(t,n,i){var r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ft(t),qi((a=Ya.credentialWithLink(n,i||zi()))._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),e.abrupt("return",Co(r,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qo(e,t){return Go.apply(this,arguments)}function Go(){return(Go=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:createAuthUri",Zi(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yo(){return(Yo=$t(jt().mark((function e(t,n){var i,r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Hi()?zi():"http://localhost",r={identifier:n,continueUri:i},e.next=4,Qo(Ft(t),r);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xo(){return(Xo=$t(jt().mark((function e(t,n){var i,r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ft(t),e.next=3,t.getIdToken();case 3:return r=e.sent,a={requestType:"VERIFY_EMAIL",idToken:r},n&&Bo(i.auth,a,n),e.next=8,Ta(i.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jo(){return(Jo=$t(jt().mark((function e(t,n,i){var r,a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ft(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},i&&Bo(r.auth,o,i),e.next=8,Ma(r.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zo(e,t){return es.apply(this,arguments)}function es(){return(es=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",er(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ts(){return(ts=$t(jt().mark((function e(t,n){var i,r,a,o,s,u,l;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.displayName,r=n.photoURL,void 0!==i||void 0!==r){e.next=3;break}return e.abrupt("return");case 3:return a=Ft(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:i,photoUrl:r,returnSecureToken:!0},e.next=10,_r(a,Zo(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(l=a.providerData.find((function(e){return"password"===e.providerId})))&&(l.displayName=a.displayName,l.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ns(e,t,n){return is.apply(this,arguments)}function is(){return(is=$t(jt().mark((function e(t,n,i){var r,a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),i&&(o.password=i),e.next=9,_r(t,ga(r,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rs=Re((function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};De(this,e),this.isNewUser=t,this.providerId=n,this.profile=i})),as=function(e){Le(n,e);var t=je(n);function n(e,i,r,a){var o;return De(this,n),(o=t.call(this,e,i,r)).username=a,o}return Re(n)}(rs),os=function(e){Le(n,e);var t=je(n);function n(e,i){return De(this,n),t.call(this,e,"facebook.com",i)}return Re(n)}(rs),ss=function(e){Le(n,e);var t=je(n);function n(e,i){return De(this,n),t.call(this,e,"github.com",i,"string"===typeof(null===i||void 0===i?void 0:i.login)?null===i||void 0===i?void 0:i.login:null)}return Re(n)}(as),us=function(e){Le(n,e);var t=je(n);function n(e,i){return De(this,n),t.call(this,e,"google.com",i)}return Re(n)}(rs),ls=function(e){Le(n,e);var t=je(n);function n(e,i,r){return De(this,n),t.call(this,e,"twitter.com",i,r)}return Re(n)}(as);function cs(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var i=e.providerId,r=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!i&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=gr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new rs(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!i)return null;switch(i){case"facebook.com":return new os(a,r);case"github.com":return new ss(a,r);case"google.com":return new us(a,r);case"twitter.com":return new ls(a,r,e.screenName||null);case"custom":case"anonymous":return new rs(a,null);default:return new rs(a,i,r)}}(n)}var hs=function(){function e(t,n,i){De(this,e),this.type=t,this.credential=n,this.auth=i}return Re(e,[{key:"toJSON",value:function(){return{multiFactorSession:Ae({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,i;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(i=t.multiFactorSession)||void 0===i?void 0:i.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),ds=function(){function e(t,n,i){De(this,e),this.session=t,this.hints=n,this.signInResolver=i}return Re(e,[{key:"resolveSignIn",value:function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var i=ca(t),r=n.customData._serverResponse,a=(r.mfaInfo||[]).map((function(e){return Po._fromServerResponse(i,e)}));qi(r.mfaPendingCredential,i,"internal-error");var o=hs._fromMfaPendingCredential(r.mfaPendingCredential);return new e(o,a,function(){var e=$t(jt().mark((function e(t){var a,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(i,o);case 2:a=e.sent,delete r.mfaInfo,delete r.mfaPendingCredential,s=Object.assign(Object.assign({},r),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,uo._fromIdTokenResponse(i,n.operationType,s);case 11:return u=e.sent,e.next=14,i._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return qi(n.user,i,"internal-error"),e.abrupt("return",uo._forOperation(n.user,n.operationType,s));case 17:Bi(i,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function fs(e,t){return er(e,"POST","/v2/accounts/mfaEnrollment:start",Zi(e,t))}function ps(e,t){return er(e,"POST","/v2/accounts/mfaEnrollment:finalize",Zi(e,t))}var vs=function(){function e(t){var n=this;De(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Po._fromServerResponse(t.auth,e)})))}))}return Re(e,[{key:"getSession",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=hs,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=$t(jt().mark((function e(t,n){var i,r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t,e.next=3,this.getSession();case 3:return r=e.sent,e.next=6,_r(this.user,i._process(this.user.auth,r,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=$t(jt().mark((function e(t){var n,i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.prev=4,e.next=7,_r(this.user,er(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Zi(a,{idToken:i,mfaEnrollmentId:n})));case 7:return r=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(r);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}var a}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ms=new WeakMap;var ys="__sak",gs=function(){function e(t,n){De(this,e),this.storageRetriever=t,this.type=n}return Re(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ys,"1"),this.storage.removeItem(ys),Promise.resolve(!0)):Promise.resolve(!1)}catch(IC){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var _s=function(e){Le(n,e);var t=je(n);function n(){var e;return De(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ot();return Vr(e)||Kr(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Qr(),e._shouldAllowMigration=!0,e}return Re(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var i=n[t],r=this.storage.getItem(i),a=this.localCache[i];r!==a&&e(i,a,r)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var r=this.storage.getItem(i);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(i);(n||t.localCache[i]!==e)&&t.notifyListeners(i,e)},o=this.storage.getItem(i);ht()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,i){t.notifyListeners(e,i)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var i=0,r=Array.from(n);i<r.length;i++){(0,r[i])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,i){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:i}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=$t(jt().mark((function e(t,i){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ki(Be(n.prototype),"_set",this).call(this,t,i);case 2:this.localCache[t]=JSON.stringify(i);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=$t(jt().mark((function e(t){var i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ki(Be(n.prototype),"_get",this).call(this,t);case 2:return i=e.sent,this.localCache[t]=JSON.stringify(i),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ki(Be(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(gs);_s.type="LOCAL";var ks=_s,ws=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Re(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(gs);ws.type="SESSION";var bs=ws;function xs(e){return Promise.all(e.map(function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Es=function(){function e(t){De(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Re(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=$t(jt().mark((function e(t){var n,i,r,a,o,s,u,l;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(n=t).data,r=i.eventId,a=i.eventType,o=i.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:r,eventType:a}),u=Array.from(s).map(function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,xs(u);case 9:l=e.sent,n.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:l});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var i=new e(t);return this.receivers.push(i),i}}]),e}();function Cs(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}Es.receivers=[];var Ts=function(){function e(t){De(this,e),this.target=t,this.handlers=new Set}return Re(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=$t(jt().mark((function e(t,n){var i,r,a,o,s=this,u=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=u.length>2&&void 0!==u[2]?u[2]:50,r="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var l=Cs("",20);r.port1.start();var c=setTimeout((function(){u(new Error("unsupported_event"))}),i);o={messageChannel:r,onMessage:function(t){var n=t;if(n.data.eventId===l)switch(n.data.status){case"ack":clearTimeout(c),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(c),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),r.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:l,data:n},[r.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Is(){return window}function Ss(e){Is().location.href=e}function Os(){return"undefined"!==typeof Is().WorkerGlobalScope&&"function"===typeof Is().importScripts}function As(){return Ds.apply(this,arguments)}function Ds(){return(Ds=$t(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Ms(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Rs="firebaseLocalStorageDb",Ps="firebaseLocalStorage",Ns="fbase_key",Ls=function(){function e(t){De(this,e),this.request=t}return Re(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Bs(e,t){return e.transaction([Ps],t?"readwrite":"readonly").objectStore(Ps)}function Fs(){var e=indexedDB.deleteDatabase(Rs);return new Ls(e).toPromise()}function js(){var e=indexedDB.open(Rs,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Ps,{keyPath:Ns})}catch(i){n(i)}})),e.addEventListener("success",$t(jt().mark((function n(){var i;return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((i=e.result).objectStoreNames.contains(Ps)){n.next=12;break}return i.close(),n.next=5,Fs();case 5:return n.t0=t,n.next=8,js();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(i);case 13:case"end":return n.stop()}}),n)}))))}))}function Us(e,t,n){return Vs.apply(this,arguments)}function Vs(){return Vs=$t(jt().mark((function e(t,n,i){var r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Bs(t,!0).put((Ae(r={},Ns,n),Ae(r,"value",i),r)),e.abrupt("return",new Ls(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Vs.apply(this,arguments)}function qs(e,t){return $s.apply(this,arguments)}function $s(){return $s=$t(jt().mark((function e(t,n){var i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Bs(t,!1).get(n),e.next=3,new Ls(i).toPromise();case 3:return r=e.sent,e.abrupt("return",void 0===r?null:r.value);case 5:case"end":return e.stop()}}),e)}))),$s.apply(this,arguments)}function Ws(e,t){var n=Bs(e,!0).delete(t);return new Ls(n).toPromise()}var zs=function(){function e(){De(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Re(e,[{key:"_openDb",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,js();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=$t(jt().mark((function e(t){var n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return i=e.sent,e.next=8,t(i);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Os()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=$t(jt().mark((function e(){var t=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Es._getInstance(Os()?self:null),this.receiver._subscribe("keyChanged",function(){var e=$t(jt().mark((function e(n,i){var r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return r=e.sent,e.abrupt("return",{keyProcessed:r.includes(i.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=$t(jt().mark((function e(){var t,n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,As();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ts(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(i=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=i[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=i[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Ms()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=$t(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,js();case 5:return t=e.sent,e.next=8,Us(t,ys,"1");case 8:return e.next=10,Ws(t,ys);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=$t(jt().mark((function e(t,n){var i=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite($t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i._withRetries((function(e){return Us(e,t,n)}));case 2:return i.localCache[t]=n,e.abrupt("return",i.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return qs(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=$t(jt().mark((function e(t){var n=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite($t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ws(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=$t(jt().mark((function e(){var t,n,i,r,a,o,s,u,l,c,h;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Bs(e,!1).getAll();return new Ls(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],i=new Set,r=Pe(t);try{for(r.s();!(a=r.n()).done;)o=a.value,s=o.fbase_key,u=o.value,i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(d){r.e(d)}finally{r.f()}for(l=0,c=Object.keys(this.localCache);l<c.length;l++)h=c[l],this.localCache[h]&&!i.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var i=0,r=Array.from(n);i<r.length;i++){(0,r[i])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval($t(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();zs.type="LOCAL";var Hs=zs;function Ks(e,t){return er(e,"POST","/v2/accounts/mfaSignIn:start",Zi(e,t))}function Qs(e,t){return er(e,"POST","/v2/accounts/mfaSignIn:finalize",Zi(e,t))}var Gs=1e12,Ys=function(){function e(t){De(this,e),this.auth=t,this.counter=Gs,this._widgets=new Map}return Re(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Xs(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Gs;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Gs;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=$t(jt().mark((function e(t){var n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t||Gs,null===(n=this._widgets.get(i))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Xs=function(){function e(t,n,i){var r=this;De(this,e),this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){r.execute()};var a="string"===typeof t?document.getElementById(t):t;qi(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Re(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",i=0;i<e;i++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,i=t["expired-callback"];if(n)try{n(e.responseToken)}catch(r){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,i)try{i()}catch(r){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Js=ra("rcb"),Zs=new Qi(3e4,6e4),eu=function(){function e(){var t;De(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Is().grecaptcha)||void 0===t?void 0:t.render)}return Re(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return qi(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&ea(Is().grecaptcha)?Promise.resolve(Is().grecaptcha):new Promise((function(i,r){var a=Is().setTimeout((function(){r(Fi(e,"network-request-failed"))}),Zs.get());Is()[Js]=function(){Is().clearTimeout(a),delete Is()[Js];var o=Is().grecaptcha;if(o&&ea(o)){var s=o.render;o.render=function(e,n){var i=s(e,n);return t.counter++,i},t.hostLanguage=n,i(o)}else r(Fi(e,"internal-error"))},ia("".concat("https://www.google.com/recaptcha/api.js?","?").concat(Tt({onload:Js,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),r(Fi(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Is().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var tu=function(){function e(){De(this,e)}return Re(e,[{key:"load",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Ys(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),nu="recaptcha",iu={theme:"light",type:"image"},ru=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},iu),i=arguments.length>2?arguments[2]:void 0;De(this,e),this.parameters=n,this.type=nu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ca(i),this.isInvisible="invisible"===this.parameters.size,qi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var r="string"===typeof t?document.getElementById(t):t;qi(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tu:new eu,this.validateStartingState()}return Re(e,[{key:"verify",value:function(){var e=$t(jt().mark((function e(){var t,n,i,r=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(i=n.getResponse(t))){e.next=8;break}return e.abrupt("return",i);case 8:return e.abrupt("return",new Promise((function(e){r.tokenChangeListeners.add((function t(n){n&&(r.tokenChangeListeners.delete(t),e(n))})),r.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){qi(!this.parameters.sitekey,this.auth,"argument-error"),qi(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),qi("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var i=Is()[e];"function"===typeof i&&i(n)}}}},{key:"assertNotDestroyed",value:function(){qi(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=$t(jt().mark((function e(){var t,n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=$t(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qi(Hi()&&!Os(),this.auth,"internal-error"),e.next=3,au();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Yr(this.auth);case 8:qi(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return qi(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function au(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ou=function(){function e(t,n){De(this,e),this.verificationId=t,this.onConfirmation=n}return Re(e,[{key:"confirm",value:function(e){var t=Qa._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function su(){return(su=$t(jt().mark((function e(t,n,i){var r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ca(t),e.next=3,hu(r,n,Ft(i));case 3:return a=e.sent,e.abrupt("return",new ou(a,(function(e){return Co(r,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uu(e,t,n){return lu.apply(this,arguments)}function lu(){return(lu=$t(jt().mark((function e(t,n,i){var r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ft(t),e.next=3,_o(!1,r,"phone");case 3:return e.next=5,hu(r.auth,n,Ft(i));case 5:return a=e.sent,e.abrupt("return",new ou(a,(function(e){return Io(r,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cu(){return(cu=$t(jt().mark((function e(t,n,i){var r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ft(t),e.next=3,hu(r.auth,n,Ft(i));case 3:return a=e.sent,e.abrupt("return",new ou(a,(function(e){return Oo(r,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hu(e,t,n){return du.apply(this,arguments)}function du(){return du=$t(jt().mark((function e(t,n,i){var r,a,o,s,u,l,c,h,d;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.verify();case 2:if(a=e.sent,e.prev=3,qi("string"===typeof a,t,"argument-error"),qi(i.type===nu,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return qi("enroll"===s.type,t,"internal-error"),e.next=13,fs(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return qi("signin"===s.type,t,"internal-error"),qi(l=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Ks(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:a}});case 22:return c=e.sent,e.abrupt("return",c.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,qa(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,d=h.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,i._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),du.apply(this,arguments)}function fu(){return(fu=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yo(Ft(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pu=function(){function e(t){De(this,e),this.providerId=e.PROVIDER_ID,this.auth=ca(t)}return Re(e,[{key:"verifyPhoneNumber",value:function(e,t){return hu(this.auth,e,Ft(t))}}],[{key:"credential",value:function(e,t){return Qa._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,i=t.temporaryProof;return n&&i?Qa._fromTokenResponse(n,i):null}}]),e}();function vu(e,t){return t?Pr(t):(qi(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}pu.PROVIDER_ID="phone",pu.PHONE_SIGN_IN_METHOD="phone";var mu=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this,"custom","custom")).params=e,i}return Re(n,[{key:"_getIdTokenResponse",value:function(e){return ja(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ja(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ja(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(va);function yu(e){return xo(e.auth,new mu(e),e.bypassAuthState)}function gu(e){var t=e.auth,n=e.user;return qi(n,t,"internal-error"),wo(n,new mu(e),e.bypassAuthState)}function _u(e){return ku.apply(this,arguments)}function ku(){return(ku=$t(jt().mark((function e(t){var n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,qi(i=t.user,n,"internal-error"),e.abrupt("return",yo(i,new mu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wu=function(){function e(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];De(this,e),this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Re(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=$t(jt().mark((function t(n,i){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:i},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=$t(jt().mark((function e(t){var n,i,r,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,i=t.sessionId,r=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yu;case"linkViaPopup":case"linkViaRedirect":return _u;case"reauthViaPopup":case"reauthViaRedirect":return gu;default:Bi(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Wi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),bu=new Qi(2e3,1e4);function xu(e,t,n){return Eu.apply(this,arguments)}function Eu(){return(Eu=$t(jt().mark((function e(t,n,i){var r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ca(t),Ui(t,n,Xa),a=vu(r,i),o=new Su(r,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cu(){return(Cu=$t(jt().mark((function e(t,n,i){var r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ui((r=Ft(t)).auth,n,Xa),a=vu(r.auth,i),o=new Su(r.auth,"reauthViaPopup",n,a,r),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tu(e,t,n){return Iu.apply(this,arguments)}function Iu(){return(Iu=$t(jt().mark((function e(t,n,i){var r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ui((r=Ft(t)).auth,n,Xa),a=vu(r.auth,i),o=new Su(r.auth,"linkViaPopup",n,a,r),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Su=function(e){Le(n,e);var t=je(n);function n(e,i,r,a,o){var s;return De(this,n),(s=t.call(this,e,i,a,o)).provider=r,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=Ne(s),s}return Re(n,[{key:"executeNotNull",value:function(){var e=$t(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return qi(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=$t(jt().mark((function e(){var t,n=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wi(1===this.filter.length,"Popup operations only handle one event"),t=Cs(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Fi(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Fi(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,i;(null===(i=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===i?void 0:i.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Fi(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,bu.get())}()}}]),n}(wu);Su.currentPopupAction=null;var Ou="pendingRedirect",Au=new Map,Du=function(e){Le(n,e);var t=je(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return De(this,n),(r=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,a)).eventId=null,r}return Re(n,[{key:"execute",value:function(){var e=$t(jt().mark((function e(){var t,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Au.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Mu(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,ki(Be(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:i=e.t0,t=function(){return Promise.resolve(i)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Au.set(this.auth._key(),t);case 21:return this.bypassAuthState||Au.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=$t(jt().mark((function e(t){var i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",ki(Be(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(i=e.sent)){e.next=16;break}return this.user=i,e.abrupt("return",ki(Be(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(wu);function Mu(e,t){return Ru.apply(this,arguments)}function Ru(){return Ru=$t(jt().mark((function e(t,n){var i,r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fu(n),r=Bu(t),e.next=4,r._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,r._get(i);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,r._remove(i);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Ru.apply(this,arguments)}function Pu(e,t){return Nu.apply(this,arguments)}function Nu(){return(Nu=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Bu(t)._set(Fu(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lu(e,t){Au.set(e._key(),t)}function Bu(e){return Pr(e._redirectPersistence)}function Fu(e){return Br(Ou,e.config.apiKey,e.name)}function ju(e,t,n){return function(e,t,n){return Uu.apply(this,arguments)}(e,t,n)}function Uu(){return(Uu=$t(jt().mark((function e(t,n,i){var r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ca(t),Ui(t,n,Xa),e.next=4,r._initializationPromise;case 4:return a=vu(r,i),e.next=7,Pu(a,r);case 7:return e.abrupt("return",a._openRedirect(r,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vu(e,t,n){return function(e,t,n){return qu.apply(this,arguments)}(e,t,n)}function qu(){return(qu=$t(jt().mark((function e(t,n,i){var r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ui((r=Ft(t)).auth,n,Xa),e.next=4,r.auth._initializationPromise;case 4:return a=vu(r.auth,i),e.next=7,Pu(a,r.auth);case 7:return e.next=9,Gu(r);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(r.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $u(e,t,n){return function(e,t,n){return Wu.apply(this,arguments)}(e,t,n)}function Wu(){return(Wu=$t(jt().mark((function e(t,n,i){var r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ui((r=Ft(t)).auth,n,Xa),e.next=4,r.auth._initializationPromise;case 4:return a=vu(r.auth,i),e.next=7,_o(!1,r,n.providerId);case 7:return e.next=9,Pu(a,r.auth);case 9:return e.next=11,Gu(r);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(r.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zu(e,t){return Hu.apply(this,arguments)}function Hu(){return(Hu=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ca(t)._initializationPromise;case 2:return e.abrupt("return",Ku(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ku(e,t){return Qu.apply(this,arguments)}function Qu(){return Qu=$t(jt().mark((function e(t,n){var i,r,a,o,s,u=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],r=ca(t),a=vu(r,n),o=new Du(r,a,i),e.next=6,o.execute();case 6:if(!(s=e.sent)||i){e.next=13;break}return delete s.user._redirectEventId,e.next=11,r._persistUserIfCurrent(s.user);case 11:return e.next=13,r._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),Qu.apply(this,arguments)}function Gu(e){return Yu.apply(this,arguments)}function Yu(){return(Yu=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Cs("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xu=function(){function e(t){De(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Re(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(i){t.isEventForConsumer(e,i)&&(n=!0,t.sendToConsumer(e,i),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zu(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Zu(e)){var i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Fi(this.auth,i))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ju(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Ju(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Ju(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function Zu(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function el(e){return tl.apply(this,arguments)}function tl(){return tl=$t(jt().mark((function e(t){var n,i=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:{},e.abrupt("return",er(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),tl.apply(this,arguments)}var nl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,il=/^https?/;function rl(){return(rl=$t(jt().mark((function e(t){var n,i,r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,el(t);case 4:n=e.sent,i=n.authorizedDomains,r=Pe(i),e.prev=7,r.s();case 9:if((a=r.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!al(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),r.e(e.t1);case 25:return e.prev=25,r.f(),e.finish(25);case 28:Bi(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function al(e){var t=zi(),n=new URL(t),i=n.protocol,r=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===r?"chrome-extension:"===i&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===i&&a.hostname===r}if(!il.test(i))return!1;if(nl.test(e))return r===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}var ol=new Qi(3e4,6e4);function sl(){var e=Is().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var i=n[t];if(e.H[i].r=e.H[i].r||[],e.H[i].L=e.H[i].L||[],e.H[i].r=Vt(e.H[i].L),e.CP)for(var r=0;r<e.CP.length;r++)e.CP[r]=null}}var ul=null;function ll(e){return ul=ul||function(e){return new Promise((function(t,n){var i,r,a;function o(){sl(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){sl(),n(Fi(e,"network-request-failed"))},timeout:ol.get()})}if(null===(r=null===(i=Is().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Is().gapi)||void 0===a?void 0:a.load)){var s=ra("iframefcb");return Is()[s]=function(){gapi.load?o():n(Fi(e,"network-request-failed"))},ia("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw ul=null,e}))}(e),ul}var cl=new Qi(5e3,15e3),hl="__/auth/iframe",dl="emulator/auth/iframe",fl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vl(e){var t=e.config;qi(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Gi(t,dl):"https://".concat(e.config.authDomain,"/").concat(hl),i={apiKey:t.apiKey,appName:e.name,v:Vn},r=pl.get(e.config.apiHost);r&&(i.eid=r);var a=e._getFrameworks();return a.length&&(i.fw=a.join(",")),"".concat(n,"?").concat(Tt(i).slice(1))}function ml(e){return yl.apply(this,arguments)}function yl(){return yl=$t(jt().mark((function e(t){var n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ll(t);case 2:return n=e.sent,qi(i=Is().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:vl(t),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fl,dontclear:!0},(function(e){return new Promise(function(){var n=$t(jt().mark((function n(i,r){var a,o,s;return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Is().clearTimeout(o),i(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Fi(t,"network-request-failed"),o=Is().setTimeout((function(){r(a)}),cl.get()),e.ping(s).then(s,(function(){r(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),yl.apply(this,arguments)}var gl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_l=function(){function e(t){De(this,e),this.window=t,this.associatedEvent=null}return Re(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function kl(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),s="",u=Object.assign(Object.assign({},gl),{width:i.toString(),height:r.toString(),top:a,left:o}),l=ot().toLowerCase();n&&(s=qr(l)?"_blank":n),Ur(l)&&(t=t||"http://localhost",u.scrollbars="yes");var c=Object.entries(u).reduce((function(e,t){var n=Ie(t,2),i=n[0],r=n[1];return"".concat(e).concat(i,"=").concat(r,",")}),"");if(function(){var e;return Kr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",s),new _l(null);var h=window.open(t||"",s,c);qi(h,e,"popup-blocked");try{h.focus()}catch(d){}return new _l(h)}var wl="__/auth/handler",bl="emulator/auth/handler",xl=encodeURIComponent("fac");function El(e,t,n,i,r,a){return Cl.apply(this,arguments)}function Cl(){return Cl=$t(jt().mark((function e(t,n,i,r,a,o){var s,u,l,c,h,d,f,p,v,m,y,g,_;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qi(t.config.authDomain,t,"auth-domain-config-required"),qi(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:i,redirectUrl:r,v:Vn,eventId:a},n instanceof Xa)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",bt(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),u=0,l=Object.entries(o||{});u<l.length;u++)c=Ie(l[u],2),h=c[0],d=c[1],s[h]=d;for(n instanceof Ja&&(f=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=f.join(",")),t.tenantId&&(s.tid=t.tenantId),p=s,v=0,m=Object.keys(p);v<m.length;v++)y=m[v],void 0===p[y]&&delete p[y];return e.next=10,t._getAppCheckToken();case 10:return g=e.sent,_=g?"#".concat(xl,"=").concat(encodeURIComponent(g)):"",e.abrupt("return","".concat(Tl(t),"?").concat(Tt(p).slice(1)).concat(_));case 13:case"end":return e.stop()}}),e)}))),Cl.apply(this,arguments)}function Tl(e){var t=e.config;return t.emulator?Gi(t,bl):"https://".concat(t.authDomain,"/").concat(wl)}var Il="webStorageSupport",Sl=function(){function e(){De(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bs,this._completeRedirectFn=Ku,this._overrideRedirectResult=Lu}return Re(e,[{key:"_openPopup",value:function(){var e=$t(jt().mark((function e(t,n,i,r){var a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Wi(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,El(t,n,i,zi(),r);case 3:return o=e.sent,e.abrupt("return",kl(t,o,Cs()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,i,r){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=$t(jt().mark((function e(t,n,i,r){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,El(t,n,i,zi(),r);case 4:return Ss(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,i,r){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var i=this.eventManagers[n],r=i.manager,a=i.promise;return r?Promise.resolve(r):(Wi(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=$t(jt().mark((function e(t){var n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ml(t);case 2:return n=e.sent,i=new Xu(t),n.register("authEvent",(function(e){return qi(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:i.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=n,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Il,{type:Il},(function(n){var i,r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[Il];void 0!==r&&t(!!r),Bi(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return rl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Qr()||Vr()||Kr()}}]),e}(),Ol=Sl,Al=function(){function e(t){De(this,e),this.factorId=t}return Re(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return $i("unexpected MultiFactorSessionType")}}}]),e}(),Dl=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this,"phone")).credential=e,i}return Re(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return er(e,"POST","/v2/accounts/mfaEnrollment:finalize",Zi(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return er(e,"POST","/v2/accounts/mfaSignIn:finalize",Zi(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Al),Ml=function(){function e(){De(this,e)}return Re(e,null,[{key:"assertion",value:function(e){return Dl._fromCredential(e)}}]),e}();Ml.FACTOR_ID="phone";var Rl=function(){function e(){De(this,e)}return Re(e,null,[{key:"assertionForEnrollment",value:function(e,t){return Pl._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return Pl._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=$t(jt().mark((function e(t){var n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qi("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,r=n.auth,a={idToken:n.credential,totpEnrollmentInfo:{}},er(r,"POST","/v2/accounts/mfaEnrollment:start",Zi(r,a));case 4:return i=e.sent,e.abrupt("return",Nl._fromStartTotpMfaEnrollmentResponse(i,n.auth));case 6:case"end":return e.stop()}var r,a}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();Rl.FACTOR_ID="totp";var Pl=function(e){Le(n,e);var t=je(n);function n(e,i,r){var a;return De(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=i,a.secret=r,a}return Re(n,[{key:"_finalizeEnroll",value:function(){var e=$t(jt().mark((function e(t,n,i){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qi("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",ps(t,{idToken:n,displayName:i,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=$t(jt().mark((function e(t,n){var i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qi(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),i={verificationCode:this.otp},e.abrupt("return",Qs(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:i}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(Al),Nl=function(){function e(t,n,i,r,a,o,s){De(this,e),this.sessionInfo=o,this.auth=s,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=i,this.codeIntervalSeconds=r,this.enrollmentCompletionDeadline=a}return Re(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,i=!1;return(Ll(e)||Ll(t))&&(i=!0),i&&(Ll(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Ll(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Ll(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Bl="@firebase/auth",Fl="0.23.2",jl=function(){function e(t){De(this,e),this.auth=t,this.internalListeners=new Map}return Re(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){qi(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Ul;!function(e){var t;null===(t=nt())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Vl(){return window}Ul="Browser",Pn(new Wt("auth",(function(e,t){var n=t.options,i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=i.options,s=o.apiKey,u=o.authDomain;qi(s&&!s.includes(":"),"invalid-api-key",{appName:i.name});var l={apiKey:s,authDomain:u,clientPlatform:Ul,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gr(Ul)},c=new la(i,r,a,l);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Pr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Pn(new Wt("auth-internal",(function(e){return function(e){return new jl(e)}(ca(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(Bl,Fl,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ul)),Kn(Bl,Fl,"esm2017");var ql=2e3;function $l(e,t,n){return Wl.apply(this,arguments)}function Wl(){return Wl=$t(jt().mark((function e(t,n,i){var r,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vl(),o=a.BuildInfo,Wi(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Yl(n.sessionId);case 4:return s=e.sent,u={},Kr()?u.ibi=o.packageName:Wr()?u.apn=o.packageName:Bi(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",El(t,i,n.type,void 0,null!==(r=n.eventId)&&void 0!==r?r:void 0,u));case 10:case"end":return e.stop()}}),e)}))),Wl.apply(this,arguments)}function zl(){return(zl=$t(jt().mark((function e(t){var n,i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Vl(),i=n.BuildInfo,r={},Kr()?r.iosBundleId=i.packageName:Wr()?r.androidPackageName=i.packageName:Bi(t,"operation-not-supported-in-this-environment"),e.next=5,el(t,r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hl(e){var t=Vl().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(i){var r=null;i?t.plugins.browsertab.openUrl(e):r=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(r)}))}))}function Kl(e,t,n){return Ql.apply(this,arguments)}function Ql(){return Ql=$t(jt().mark((function e(t,n,i){var r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Vl(),a=r.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,r){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===i||void 0===i?void 0:i.close)&&i.close()}function l(){s||(s=window.setTimeout((function(){r(Fi(t,"redirect-cancelled-by-user"))}),ql))}function c(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&l()}n.addPassiveListener(u),document.addEventListener("resume",l,!1),Wr()&&document.addEventListener("visibilitychange",c,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",c,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Ql.apply(this,arguments)}function Gl(e){var t,n,i,r,a,o,s,u,l,c,h=Vl();qi("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),qi("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),qi("function"===typeof(null===(a=null===(r=null===(i=null===h||void 0===h?void 0:h.cordova)||void 0===i?void 0:i.plugins)||void 0===r?void 0:r.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qi("function"===typeof(null===(u=null===(s=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),qi("function"===typeof(null===(c=null===(l=null===h||void 0===h?void 0:h.cordova)||void 0===l?void 0:l.InAppBrowser)||void 0===c?void 0:c.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Yl(e){return Xl.apply(this,arguments)}function Xl(){return(Xl=$t(jt().mark((function e(t){var n,i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Jl(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return i=e.sent,r=Array.from(new Uint8Array(i)),e.abrupt("return",r.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jl(e){if(Wi(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}var Zl=20,ec=function(e){Le(n,e);var t=je(n);function n(){var e;return De(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Re(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),ki(Be(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Xu);function tc(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:oc(),postBody:null,tenantId:e.tenantId,error:Fi(e,"no-auth-event")}}function nc(e,t){return sc()._set(uc(e),t)}function ic(e){return rc.apply(this,arguments)}function rc(){return(rc=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sc()._get(uc(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,sc()._remove(uc(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ac(e,t){var n,i,r=function(e){var t=lc(e),n=t.link?decodeURIComponent(t.link):void 0,i=lc(n).link,r=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return lc(r).link||r||i||n||e}(t);if(r.includes("/__/auth/callback")){var a=lc(r),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(i=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],u=s?Fi(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:r,postBody:null}}return null}function oc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<Zl;n++){var i=Math.floor(62*Math.random());e.push(t.charAt(i))}return e.join("")}function sc(){return Pr(ks)}function uc(e){return Br("authEvent",e.config.apiKey,e.name)}function lc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),i=xe(t=n)||Ut(t)||Ce(t)||Te();i[0];return It(i.slice(1).join("?"))}var cc=function(){function e(){De(this,e),this._redirectPersistence=bs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ku,this._overrideRedirectResult=Lu}return Re(e,[{key:"_initialize",value:function(){var e=$t(jt().mark((function e(t){var n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(i=this.eventManagers.get(n))||(i=new ec(t),this.eventManagers.set(n,i),this.attachCallbackListeners(t,i)),e.abrupt("return",i);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Bi(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=$t(jt().mark((function e(t,n,i,r){var a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gl(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Au.clear(),e.next=10,this._originValidation(t);case 10:return o=tc(t,i,r),e.next=13,nc(t,o);case 13:return e.next=15,$l(t,o,n);case 15:return s=e.sent,e.next=18,Hl(s);case 18:return u=e.sent,e.abrupt("return",Kl(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,i,r){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return zl.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Vl(),i=n.universalLinks,r=n.handleOpenURL,a=n.BuildInfo,o=setTimeout($t(jt().mark((function n(){return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ic(e);case 2:t.onEvent(dc());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=$t(jt().mark((function n(i){var r,a;return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,ic(e);case 3:r=n.sent,a=null,r&&(null===i||void 0===i?void 0:i.url)&&(a=ac(r,i.url)),t.onEvent(a||dc());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof i&&"function"===typeof i.subscribe&&i.subscribe(null,s);var u=r,l="".concat(a.packageName.toLowerCase(),"://");Vl().handleOpenURL=function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(l)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),hc=cc;function dc(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fi("no-auth-event")}}var fc=1e3;function pc(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function vc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot();return!("file:"!==pc()&&"ionic:"!==pc()&&"capacitor:"!==pc()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function mc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot();return ht()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot();return/Edge\/\d+/.test(e)}(e)}function yc(){try{var e=self.localStorage,t=Cs();if(e)return e.setItem(t,"1"),e.removeItem(t),!mc()||ft()}catch(n){return gc()&&ft()}return!1}function gc(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function _c(){return("http:"===pc()||"https:"===pc()||lt()||vc())&&!(ct()||ut())&&yc()&&!gc()}function kc(){return vc()&&"undefined"!==typeof document}function wc(){return bc.apply(this,arguments)}function bc(){return(bc=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kc()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),fc);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xc={LOCAL:"local",NONE:"none",SESSION:"session"},Ec=qi,Cc="persistence";function Tc(e,t){Ec(Object.values(xc).includes(t),e,"invalid-persistence-type"),ct()?Ec(t!==xc.SESSION,e,"unsupported-persistence-type"):ut()?Ec(t===xc.NONE,e,"unsupported-persistence-type"):gc()?Ec(t===xc.NONE||t===xc.LOCAL&&ft(),e,"unsupported-persistence-type"):Ec(t===xc.NONE||yc(),e,"unsupported-persistence-type")}function Ic(e){return Sc.apply(this,arguments)}function Sc(){return Sc=$t(jt().mark((function e(t){var n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Oc(),i=Br(Cc,t.config.apiKey,t.name),n&&n.setItem(i,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Sc.apply(this,arguments)}function Oc(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Ac=qi,Dc=function(){function e(){De(this,e),this.browserResolver=Pr(Ol),this.cordovaResolver=Pr(hc),this.underlyingResolver=null,this._redirectPersistence=bs,this._completeRedirectFn=Ku,this._overrideRedirectResult=Lu}return Re(e,[{key:"_initialize",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=$t(jt().mark((function e(t,n,i,r){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,i,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,i,r){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=$t(jt().mark((function e(t,n,i,r){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,i,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,i,r){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return kc()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Ac(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=$t(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,wc();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Mc(e){return e.unwrap()}function Rc(e,t){var n,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new Fc(e,function(e,t){var n,i=Ft(e),r=t;return qi(t.customData.operationType,i,"argument-error"),qi(null===(n=r.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),ds._fromError(i,r)}(e,t));else if(i){var r=Pc(t),a=t;r&&(a.credential=r,a.tenantId=i.tenantId||void 0,a.email=i.email||void 0,a.phoneNumber=i.phoneNumber||void 0)}}function Pc(e){var t=(e instanceof pt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof pt)&&"temporaryProof"in t&&"phoneNumber"in t)return pu.credentialFromResult(e);var n,i=t.providerId;if(!i||i===xi.PASSWORD)return null;switch(i){case xi.GOOGLE:n=to;break;case xi.FACEBOOK:n=eo;break;case xi.GITHUB:n=no;break;case xi.TWITTER:n=ao;break;default:var r=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||r||s?s?i.startsWith("saml.")?io._create(i,s):Va._fromParams({providerId:i,signInMethod:i,pendingToken:s,idToken:r,accessToken:a}):new Za(i).credential({idToken:r,accessToken:a,rawNonce:u}):null}return e instanceof pt?n.credentialFromError(e):n.credentialFromResult(e)}function Nc(e,t){return t.catch((function(t){throw t instanceof pt&&Rc(e,t),t})).then((function(e){var t,n=e.operationType,i=e.user;return{operationType:n,credential:(t=e,Pc(t)),additionalUserInfo:cs(e),user:jc.getOrCreate(i)}}))}function Lc(e,t){return Bc.apply(this,arguments)}function Bc(){return(Bc=$t(jt().mark((function e(t,n){var i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return i=e.sent,e.abrupt("return",{verificationId:i.verificationId,confirm:function(e){return Nc(t,i.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Fc=function(){function e(t,n){De(this,e),this.resolver=n,this.auth=t.wrapped()}return Re(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Nc(Mc(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),jc=function(){function e(t){De(this,e),this._delegate=t,this.multiFactor=function(e){var t=Ft(e);return ms.has(t)||ms.set(t,vs._fromUser(t)),ms.get(t)}(t)}return Re(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nc(this.auth,Io(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Lc(this.auth,uu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nc(this.auth,Tu(this._delegate,t,Dc)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ic(ca(this.auth));case 2:return e.abrupt("return",$u(this._delegate,t,Dc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nc(this.auth,Oo(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Lc(this.auth,function(e,t,n){return cu.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Nc(this.auth,function(e,t,n){return Cu.apply(this,arguments)}(this._delegate,e,Dc))}},{key:"reauthenticateWithRedirect",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ic(ca(this.auth));case 2:return e.abrupt("return",Vu(this._delegate,t,Dc));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Xo.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vo(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return ns(Ft(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return ns(Ft(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return fu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ts.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Jo.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();jc.USER_MAP=new WeakMap;var Uc=qi,Vc=function(){function e(t,n){if(De(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var i=t.options.apiKey;Uc(i,"invalid-api-key",{appName:t.name}),Uc(i,"invalid-api-key",{appName:t.name});var r="undefined"!==typeof window?Dc:void 0;this._delegate=n.initialize({options:{persistence:$c(i,t.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Di),this.linkUnderlyingAuth()}return Re(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?jc.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){da(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Uo.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Vo(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return jo.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nc(this._delegate,Wo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Yo.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Ga.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=$t(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Uc(_c(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,zu(this._delegate,Dc);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Nc(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ca(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var i=qc(e,t,n),r=i.next,a=i.error,o=i.complete;return this._delegate.onAuthStateChanged(r,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var i=qc(e,t,n),r=i.next,a=i.error,o=i.complete;return this._delegate.onIdTokenChanged(r,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ho.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Fo.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=$t(jt().mark((function e(t){var n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Tc(this._delegate,t),e.t0=t,e.next=e.t0===xc.SESSION?4:e.t0===xc.LOCAL?6:e.t0===xc.NONE?11:13;break;case 4:return n=bs,e.abrupt("break",14);case 6:return e.next=8,Pr(Hs)._isAvailable();case 8:return i=e.sent,n=i?Hs:ks,e.abrupt("break",14);case 11:return n=Lr,e.abrupt("break",14);case 13:return e.abrupt("return",Bi("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Nc(this._delegate,function(e){return co.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Nc(this._delegate,Co(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Nc(this._delegate,function(e,t){return Ro.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Nc(this._delegate,function(e,t,n){return Co(Ft(e),Ya.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Nc(this._delegate,function(e,t,n){return Ko.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Lc(this._delegate,function(e,t,n){return su.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Uc(_c(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Nc(this._delegate,xu(this._delegate,t,Dc)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Uc(_c(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ic(this._delegate);case 3:return e.abrupt("return",ju(this._delegate,t,Dc));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return $o.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function qc(e,t,n){var i=e;"function"!==typeof e&&(i=e.next,t=e.error,n=e.complete);var r=i;return{next:function(e){return r(e&&jc.getOrCreate(e))},error:t,complete:n}}function $c(e,t){var n=function(e,t){var n=Oc();if(!n)return[];var i=Br(Cc,e,t);switch(n.getItem(i)){case xc.NONE:return[Lr];case xc.LOCAL:return[Hs,bs];case xc.SESSION:return[bs];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Hs)||n.push(Hs),"undefined"!==typeof window)for(var i=0,r=[ks,bs];i<r.length;i++){var a=r[i];n.includes(a)||n.push(a)}return n.includes(Lr)||n.push(Lr),n}Vc.Persistence=xc;var Wc=function(){function e(){De(this,e),this.providerId="phone",this._delegate=new pu(Mc(_i.auth()))}return Re(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return pu.credential(e,t)}}]),e}();Wc.PHONE_SIGN_IN_METHOD=pu.PHONE_SIGN_IN_METHOD,Wc.PROVIDER_ID=pu.PROVIDER_ID;var zc,Hc=qi,Kc=function(){function e(t,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_i.app();De(this,e),Hc(null===(i=r.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new ru(t,n,r.auth()),this.type=this._delegate.type}return Re(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(zc=_i).INTERNAL.registerComponent(new Wt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Vc(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Ei,PASSWORD_RESET:Ci,RECOVER_EMAIL:Ti,REVERT_SECOND_FACTOR_ADDITION:Ii,VERIFY_AND_CHANGE_EMAIL:Si,VERIFY_EMAIL:Oi}},EmailAuthProvider:Ya,FacebookAuthProvider:eo,GithubAuthProvider:no,GoogleAuthProvider:to,OAuthProvider:Za,SAMLAuthProvider:ro,PhoneAuthProvider:Wc,PhoneMultiFactorGenerator:Ml,RecaptchaVerifier:Kc,TwitterAuthProvider:ao,Auth:Vc,AuthCredential:va,Error:pt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),zc.registerVersion("@firebase/auth-compat","0.4.2");var Qc,Gc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Yc={},Xc=Xc||{},Jc=Gc||self;function Zc(){}function eh(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function th(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var nh="closure_uid_"+(1e9*Math.random()>>>0),ih=0;function rh(e,t,n){return e.call.apply(e.bind,arguments)}function ah(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function oh(e,t,n){return(oh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rh:ah).apply(null,arguments)}function sh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function uh(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,i){for(var r=Array(arguments.length-2),a=2;a<arguments.length;a++)r[a-2]=arguments[a];return t.prototype[n].apply(e,r)}}function lh(){this.s=this.s,this.o=this.o}lh.prototype.s=!1,lh.prototype.ra=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,nh)&&e[nh]||(e[nh]=++ih))},lh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ch=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function hh(e){var t=e.length;if(0<t){for(var n=Array(t),i=0;i<t;i++)n[i]=e[i];return n}return[]}function dh(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(eh(i)){var r=e.length||0,a=i.length||0;e.length=r+a;for(var o=0;o<a;o++)e[r+o]=i[o]}else e.push(i)}}function fh(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}fh.prototype.h=function(){this.defaultPrevented=!0};var ph=function(){if(!Jc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Jc.addEventListener("test",Zc,t),Jc.removeEventListener("test",Zc,t)}catch(n){}return e}();function vh(e){return/^[\s\xa0]*$/.test(e)}var mh=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function yh(e,t){return e<t?-1:e>t?1:0}function gh(){var e=Jc.navigator;return e&&(e=e.userAgent)?e:""}function _h(e){return-1!=gh().indexOf(e)}function kh(e){return kh[" "](e),e}function wh(e,t,n){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:e[t]=n(t)}kh[" "]=Zc;var bh,xh=_h("Opera"),Eh=_h("Trident")||_h("MSIE"),Ch=_h("Edge"),Th=Ch||Eh,Ih=_h("Gecko")&&!(-1!=gh().toLowerCase().indexOf("webkit")&&!_h("Edge"))&&!(_h("Trident")||_h("MSIE"))&&!_h("Edge"),Sh=-1!=gh().toLowerCase().indexOf("webkit")&&!_h("Edge");function Oh(){var e=Jc.document;return e?e.documentMode:void 0}e:{var Ah="",Dh=function(){var e=gh();return Ih?/rv:([^\);]+)(\)|;)/.exec(e):Ch?/Edge\/([\d\.]+)/.exec(e):Eh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Sh?/WebKit\/(\S+)/.exec(e):xh?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Dh&&(Ah=Dh?Dh[1]:""),Eh){var Mh=Oh();if(null!=Mh&&Mh>parseFloat(Ah)){bh=String(Mh);break e}}bh=Ah}var Rh,Ph={};if(Jc.document&&Eh){var Nh=Oh();Rh=Nh||(parseInt(bh,10)||void 0)}else Rh=void 0;var Lh=Rh;function Bh(e,t){if(fh.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ih){e:{try{kh(t.nodeName);var r=!0;break e}catch(a){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Fh[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Bh.$.h.call(this)}}uh(Bh,fh);var Fh={2:"touch",3:"pen",4:"mouse"};Bh.prototype.h=function(){Bh.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var jh="closure_listenable_"+(1e6*Math.random()|0),Uh=0;function Vh(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.la=r,this.key=++Uh,this.fa=this.ia=!1}function qh(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function $h(e,t,n){for(var i in e)t.call(n,e[i],i,e)}function Wh(e){var t={};for(var n in e)t[n]=e[n];return t}var zh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hh(e,t){for(var n,i,r=1;r<arguments.length;r++){for(n in i=arguments[r])e[n]=i[n];for(var a=0;a<zh.length;a++)n=zh[a],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function Kh(e){this.src=e,this.g={},this.h=0}function Qh(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],a=ch(r,t);(i=0<=a)&&Array.prototype.splice.call(r,a,1),i&&(qh(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Gh(e,t,n,i){for(var r=0;r<e.length;++r){var a=e[r];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==i)return r}return-1}Kh.prototype.add=function(e,t,n,i,r){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Gh(e,t,i,r);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Vh(t,this.src,a,!!i,r)).ia=n,e.push(t)),t};var Yh="closure_lm_"+(1e6*Math.random()|0),Xh={};function Jh(e,t,n,i,r){if(i&&i.once)return ed(e,t,n,i,r);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Jh(e,t[a],n,i,r);return null}return n=sd(n),e&&e[jh]?e.O(t,n,th(i)?!!i.capture:!!i,r):Zh(e,t,n,!1,i,r)}function Zh(e,t,n,i,r,a){if(!t)throw Error("Invalid event type");var o=th(r)?!!r.capture:!!r,s=ad(e);if(s||(e[Yh]=s=new Kh(e)),(n=s.add(t,n,i,o,a)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}var t=rd;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)ph||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(id(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function ed(e,t,n,i,r){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ed(e,t[a],n,i,r);return null}return n=sd(n),e&&e[jh]?e.P(t,n,th(i)?!!i.capture:!!i,r):Zh(e,t,n,!0,i,r)}function td(e,t,n,i,r){if(Array.isArray(t))for(var a=0;a<t.length;a++)td(e,t[a],n,i,r);else i=th(i)?!!i.capture:!!i,n=sd(n),e&&e[jh]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Gh(a=e.g[t],n,i,r))&&(qh(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ad(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Gh(t,n,i,r)),(n=-1<e?t[e]:null)&&nd(n))}function nd(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[jh])Qh(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(id(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=ad(t))?(Qh(n,e),0==n.h&&(n.src=null,t[Yh]=null)):qh(e)}}}function id(e){return e in Xh?Xh[e]:Xh[e]="on"+e}function rd(e,t){if(e.fa)e=!0;else{t=new Bh(t,this);var n=e.listener,i=e.la||e.src;e.ia&&nd(e),e=n.call(i,t)}return e}function ad(e){return(e=e[Yh])instanceof Kh?e:null}var od="__closure_events_fn_"+(1e9*Math.random()>>>0);function sd(e){return"function"===typeof e?e:(e[od]||(e[od]=function(t){return e.handleEvent(t)}),e[od])}function ud(){lh.call(this),this.i=new Kh(this),this.S=this,this.J=null}function ld(e,t){var n,i=e.J;if(i)for(n=[];i;i=i.J)n.push(i);if(e=e.S,i=t.type||t,"string"===typeof t)t=new fh(t,e);else if(t instanceof fh)t.target=t.target||e;else{var r=t;Hh(t=new fh(i,e),r)}if(r=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];r=cd(o,i,!0,t)&&r}if(r=cd(o=t.g=e,i,!0,t)&&r,r=cd(o,i,!1,t)&&r,n)for(a=0;a<n.length;a++)r=cd(o=t.g=n[a],i,!1,t)&&r}function cd(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var s=o.listener,u=o.la||o.src;o.ia&&Qh(e.i,o),r=!1!==s.call(u,i)&&r}}return r&&!i.defaultPrevented}uh(ud,lh),ud.prototype[jh]=!0,ud.prototype.removeEventListener=function(e,t,n,i){td(this,e,t,n,i)},ud.prototype.N=function(){if(ud.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)qh(n[i]);delete t.g[e],t.h--}}this.J=null},ud.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},ud.prototype.P=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var hd=Jc.JSON.stringify;function dd(){var e=kd,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var fd,pd=function(){function e(){De(this,e),this.h=this.g=null}return Re(e,[{key:"add",value:function(e,t){var n=vd.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),vd=new(function(){function e(t,n){De(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Re(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new md}),(function(e){return e.reset()})),md=function(){function e(){De(this,e),this.next=this.g=this.h=null}return Re(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function yd(e){Jc.setTimeout((function(){throw e}),0)}function gd(e,t){fd||function(){var e=Jc.Promise.resolve(void 0);fd=function(){e.then(wd)}}(),_d||(fd(),_d=!0),kd.add(e,t)}var _d=!1,kd=new pd;function wd(){for(var e;e=dd();){try{e.h.call(e.g)}catch(n){yd(n)}var t=vd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}_d=!1}function bd(e,t){ud.call(this),this.h=e||1,this.g=t||Jc,this.j=oh(this.qb,this),this.l=Date.now()}function xd(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ed(e,t,n){if("function"===typeof e)n&&(e=oh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=oh(e.handleEvent,e)}return 2147483647<Number(t)?-1:Jc.setTimeout(e,t||0)}function Cd(e){e.g=Ed((function(){e.g=null,e.i&&(e.i=!1,Cd(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}uh(bd,ud),(Qc=bd.prototype).ga=!1,Qc.T=null,Qc.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ld(this,"tick"),this.ga&&(xd(this),this.start()))}},Qc.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qc.N=function(){bd.$.N.call(this),xd(this),delete this.g};var Td=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this)).m=e,r.j=i,r.h=null,r.i=!1,r.g=null,r}return Re(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Cd(this)}},{key:"N",value:function(){ki(Be(n.prototype),"N",this).call(this),this.g&&(Jc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(lh);function Id(e){lh.call(this),this.h=e,this.g={}}uh(Id,lh);var Sd=[];function Od(e,t,n,i){Array.isArray(n)||(n&&(Sd[0]=n.toString()),n=Sd);for(var r=0;r<n.length;r++){var a=Jh(t,n[r],i||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ad(e){$h(e.g,(function(e,t){this.g.hasOwnProperty(t)&&nd(e)}),e),e.g={}}function Dd(){this.g=!0}function Md(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var a=r[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<r.length;o++)r[o]=""}}}return hd(n)}catch(s){return t}}(e,n)+(i?" "+i:"")}))}Id.prototype.N=function(){Id.$.N.call(this),Ad(this)},Id.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Dd.prototype.Ea=function(){this.g=!1},Dd.prototype.info=function(){};var Rd={},Pd=null;function Nd(){return Pd=Pd||new ud}function Ld(e){fh.call(this,Rd.Ta,e)}function Bd(e){var t=Nd();ld(t,new Ld(t))}function Fd(e,t){fh.call(this,Rd.STAT_EVENT,e),this.stat=t}function jd(e){var t=Nd();ld(t,new Fd(t,e))}function Ud(e,t){fh.call(this,Rd.Ua,e),this.size=t}function Vd(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Jc.setTimeout((function(){e()}),t)}Rd.Ta="serverreachability",uh(Ld,fh),Rd.STAT_EVENT="statevent",uh(Fd,fh),Rd.Ua="timingevent",uh(Ud,fh);var qd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$d={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Wd(){}function zd(e){return e.h||(e.h=e.i())}function Hd(){}Wd.prototype.h=null;var Kd,Qd={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Gd(){fh.call(this,"d")}function Yd(){fh.call(this,"c")}function Xd(){}function Jd(e,t,n,i){this.l=e,this.j=t,this.m=n,this.W=i||1,this.U=new Id(this),this.P=ef,e=Th?125:void 0,this.V=new bd(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.aa=-1,this.J=!1,this.O=0,this.M=null,this.ca=this.K=this.ba=this.S=!1,this.h=new Zd}function Zd(){this.i=null,this.g="",this.h=!1}uh(Gd,fh),uh(Yd,fh),uh(Xd,Wd),Xd.prototype.g=function(){return new XMLHttpRequest},Xd.prototype.i=function(){return{}},Kd=new Xd;var ef=45e3,tf={},nf={};function rf(e,t,n){e.L=1,e.v=xf(gf(t)),e.s=n,e.S=!0,af(e,null)}function af(e,t){e.G=Date.now(),lf(e),e.A=gf(e.v);var n=e.A,i=e.W;Array.isArray(i)||(i=[String(i)]),Lf(n.i,"t",i),e.C=0,n=e.l.I,e.h=new Zd,e.g=Bp(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Td(oh(e.Pa,e,e.g),e.O)),Od(e.U,e.g,"readystatechange",e.nb),t=e.I?Wh(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Bd(),function(e,t,n,i,r,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");o=2<=h.length&&"type"==h[1]?o+(c+"=")+l+"&":o+(c+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function of(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function sf(e,t,n){for(var i,r=!0;!e.J&&e.C<n.length;){if((i=uf(e,n))==nf){4==t&&(e.o=4,jd(14),r=!1),Md(e.j,e.m,null,"[Incomplete Response]");break}if(i==tf){e.o=4,jd(15),Md(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}Md(e.j,e.m,i,null),pf(e,i)}of(e)&&i!=nf&&i!=tf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,jd(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ca&&(e.ca=!0,(t=e.l).g==e&&t.ca&&!t.L&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Op(t),t.L=!0,jd(11))):(Md(e.j,e.m,n,"[Invalid Chunked Response]"),ff(e),df(e))}function uf(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?nf:(n=Number(t.substring(n,i)),isNaN(n)?tf:(i+=1)+n>t.length?nf:(t=t.substr(i,n),e.C=i+n,t))}function lf(e){e.Y=Date.now()+e.P,cf(e,e.P)}function cf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Vd(oh(e.lb,e),t)}function hf(e){e.B&&(Jc.clearTimeout(e.B),e.B=null)}function df(e){0==e.l.H||e.J||Mp(e.l,e)}function ff(e){hf(e);var t=e.M;t&&"function"==typeof t.ra&&t.ra(),e.M=null,xd(e.V),Ad(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ra())}function pf(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Wf(n.h,e)))if(!e.K&&Wf(n.h,e)&&3==n.H){try{var i=n.Ja.g.parse(t)}catch(a){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Dp(n),wp(n)}Sp(n),jd(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.M&&0==n.A&&!n.v&&(n.v=Vd(oh(n.ib,n),6e3));if(1>=$f(n.h)&&n.na){try{n.na()}catch(a){}n.na=void 0}}else Pp(n,11)}else if((e.K||n.g==e)&&Dp(n),!vh(t))for(r=n.Ja.g.parse(t),t=0;t<r.length;t++){var a=r[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.J=a[1],n.oa=a[2];var o=a[3];null!=o&&(n.qa=o,n.j.info("VER="+n.qa));var s=a[4];null!=s&&(n.Ga=s,n.j.info("SVER="+n.Ga));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.K=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;var l=e.g;if(l){var c=l.g?l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=i.h;h.g||-1==c.indexOf("spdy")&&-1==c.indexOf("quic")&&-1==c.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(zf(h,h.h),h.h=null))}if(i.F){var d=l.g?l.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(i.Da=d,bf(i.G,i.F,d))}}n.H=3,n.l&&n.l.Ba(),n.ca&&(n.S=Date.now()-e.G,n.j.info("Handshake RTT: "+n.S+"ms"));var f=e;if((i=n).wa=Lp(i,i.I?i.oa:null,i.Y),f.K){Hf(i.h,f);var p=f,v=i.K;v&&p.setTimeout(v),p.B&&(hf(p),lf(p)),i.g=f}else Ip(i);0<n.i.length&&xp(n)}else"stop"!=a[0]&&"close"!=a[0]||Pp(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Pp(n,7):kp(n):"noop"!=a[0]&&n.l&&n.l.Aa(a),n.A=0)}Bd()}catch(a){}}function vf(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(eh(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.sa&&"function"==typeof e.sa)return e.sa();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(eh(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var i in t=[],n=0,e)t[n++]=i;return t}}}(e),i=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(eh(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,a=0;a<r;a++)t.call(void 0,i[a],n&&n[a],e)}(Qc=Jd.prototype).setTimeout=function(e){this.P=e},Qc.nb=function(e){e=e.target;var t=this.M;t&&3==pp(e)?t.l():this.Pa(e)},Qc.Pa=function(e){try{if(e==this.g)e:{var t=pp(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||Th||this.g&&(this.h.h||this.g.ja()||vp(this.g)))){this.J||4!=t||7==n||Bd(),hf(this);var i=this.g.da();this.aa=i;t:if(of(this)){var r=vp(this.g);e="";var a=r.length,o=4==pp(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ff(this),df(this);var s="";break t}this.h.i=new Jc.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(r[n],{stream:o&&n==a-1});r.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=200==i,function(e,t,n,i,r,a,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,i),this.i){if(this.ba&&!this.K){t:{if(this.g){var u,l=this.g;if((u=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vh(u)){var c=u;break t}}c=null}if(!(i=c)){this.i=!1,this.o=3,jd(12),ff(this),df(this);break e}Md(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pf(this,i)}this.S?(sf(this,t,s),Th&&this.i&&3==t&&(Od(this.U,this.V,"tick",this.mb),this.V.start())):(Md(this.j,this.m,s,null),pf(this,s)),4==t&&ff(this),this.i&&!this.J&&(4==t?Mp(this.l,this):(this.i=!1,lf(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,jd(12)):(this.o=0,jd(13)),ff(this),df(this)}}}catch(t){}},Qc.mb=function(){if(this.g){var e=pp(this.g),t=this.g.ja();this.C<t.length&&(hf(this),sf(this,e,t),this.i&&4!=e&&lf(this))}},Qc.cancel=function(){this.J=!0,ff(this)},Qc.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Bd(),jd(17)),ff(this),this.o=2,df(this)):cf(this,this.Y-e)};var mf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yf(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof yf){this.h=void 0!==t?t:e.h,_f(this,e.j),this.s=e.s,this.g=e.g,kf(this,e.m),this.l=e.l,t=e.i;var n=new Mf;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),wf(this,n),this.o=e.o}else e&&(n=String(e).match(mf))?(this.h=!!t,_f(this,n[1]||"",!0),this.s=Ef(n[2]||""),this.g=Ef(n[3]||"",!0),kf(this,n[4]),this.l=Ef(n[5]||"",!0),wf(this,n[6]||"",!0),this.o=Ef(n[7]||"")):(this.h=!!t,this.i=new Mf(null,this.h))}function gf(e){return new yf(e)}function _f(e,t,n){e.j=n?Ef(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function kf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function wf(e,t,n){t instanceof Mf?(e.i=t,function(e,t){t&&!e.j&&(Rf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Pf(this,t),Lf(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Cf(t,Af)),e.i=new Mf(t,e.h))}function bf(e,t,n){e.i.set(t,n)}function xf(e){return bf(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ef(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Cf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Tf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Tf(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Cf(t,If,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Cf(t,If,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Cf(n,"/"==n.charAt(0)?Of:Sf,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Cf(n,Df)),e.join("")};var If=/[#\/\?@]/g,Sf=/[#\?:]/g,Of=/[#\?]/g,Af=/[#\?@]/g,Df=/#/g;function Mf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rf(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var a=e[n].substring(0,i);r=e[n].substring(i+1)}else a=e[n];t(a,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Pf(e,t){Rf(e),t=Bf(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Nf(e,t){return Rf(e),t=Bf(e,t),e.g.has(t)}function Lf(e,t,n){Pf(e,t),0<n.length&&(e.i=null,e.g.set(Bf(e,t),hh(n)),e.h+=n.length)}function Bf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Qc=Mf.prototype).add=function(e,t){Rf(this),this.i=null,e=Bf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Qc.forEach=function(e,t){Rf(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},Qc.sa=function(){Rf(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],i=0;i<t.length;i++)for(var r=e[i],a=0;a<r.length;a++)n.push(t[i]);return n},Qc.Z=function(e){Rf(this);var t=[];if("string"===typeof e)Nf(this,e)&&(t=t.concat(this.g.get(Bf(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Qc.set=function(e,t){return Rf(this),this.i=null,Nf(this,e=Bf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Qc.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Qc.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var i=t[n],r=encodeURIComponent(String(i)),a=this.Z(i);for(i=0;i<a.length;i++){var o=r;""!==a[i]&&(o+="="+encodeURIComponent(String(a[i]))),e.push(o)}}return this.i=e.join("&")};var Ff=Re((function e(t,n){De(this,e),this.h=t,this.g=n}));function jf(e){this.l=e||Vf,Jc.PerformanceNavigationTiming?e=0<(e=Jc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Jc.g&&Jc.g.Ka&&Jc.g.Ka()&&Jc.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Uf,Vf=10;function qf(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $f(e){return e.h?1:e.g?e.g.size:0}function Wf(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function zf(e,t){e.g?e.g.add(t):e.h=t}function Hf(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Kf(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,i=Pe(e.g.values());try{for(i.s();!(t=i.n()).done;){var r=t.value;n=n.concat(r.F)}}catch(a){i.e(a)}finally{i.f()}return n}return hh(e.i)}function Qf(){}function Gf(){this.g=new Qf}function Yf(e,t,n){var i=n||"";try{vf(e,(function(e,n){var r=e;th(e)&&(r=hd(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function Xf(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(a){}}function Jf(e){this.l=e.fc||null,this.j=e.ob||!1}function Zf(e,t){ud.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=ep,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}jf.prototype.cancel=function(){if(this.i=Kf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Pe(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Qf.prototype.stringify=function(e){return Jc.JSON.stringify(e,void 0)},Qf.prototype.parse=function(e){return Jc.JSON.parse(e,void 0)},uh(Jf,Wd),Jf.prototype.g=function(){return new Zf(this.l,this.j)},Jf.prototype.i=(Uf={},function(){return Uf}),uh(Zf,ud);var ep=0;function tp(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function np(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ip(e)}function ip(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Qc=Zf.prototype).open=function(e,t){if(this.readyState!=ep)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ip(this)},Qc.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Jc).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Qc.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,np(this)),this.readyState=ep},Qc.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ip(this)),this.g&&(this.readyState=3,ip(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Jc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tp(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Qc.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?np(this):ip(this),3==this.readyState&&tp(this)}},Qc.Za=function(e){this.g&&(this.response=this.responseText=e,np(this))},Qc.Ya=function(e){this.g&&(this.response=e,np(this))},Qc.ka=function(){this.g&&np(this)},Qc.setRequestHeader=function(e,t){this.v.append(e,t)},Qc.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Qc.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Zf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var rp=Jc.JSON.parse;function ap(e){ud.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=op,this.L=this.M=!1}uh(ap,ud);var op="",sp=/^https?$/i,up=["POST","PUT"];function lp(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,cp(e),dp(e)}function cp(e){e.F||(e.F=!0,ld(e,"complete"),ld(e,"error"))}function hp(e){if(e.h&&"undefined"!=typeof Xc&&(!e.C[1]||4!=pp(e)||2!=e.da()))if(e.v&&4==pp(e))Ed(e.La,0,e);else if(ld(e,"readystatechange"),4==pp(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break e;default:i=!1}if(!(t=i)){var r;if(r=0===n){var a=String(e.I).match(mf)[1]||null;if(!a&&Jc.self&&Jc.self.location){var o=Jc.self.location.protocol;a=o.substr(0,o.length-1)}r=!sp.test(a?a.toLowerCase():"")}t=r}if(t)ld(e,"complete"),ld(e,"success");else{e.m=6;try{var s=2<pp(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.da()+"]",cp(e)}}finally{dp(e)}}}function dp(e,t){if(e.g){fp(e);var n=e.g,i=e.C[0]?Zc:null;e.g=null,e.C=null,t||ld(e,"ready");try{n.onreadystatechange=i}catch(r){}}}function fp(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Jc.clearTimeout(e.A),e.A=null)}function pp(e){return e.g?e.g.readyState:0}function vp(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case op:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(kv){return null}}function mp(e){var t="";return $h(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function yp(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=mp(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):bf(e,t,n))}function gp(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function _p(e){this.Ga=0,this.i=[],this.j=new Dd,this.oa=this.wa=this.G=this.Y=this.g=this.Da=this.F=this.ma=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=gp("failFast",!1,e),this.M=this.v=this.u=this.m=this.l=null,this.aa=!0,this.ta=this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=gp("baseRetryDelayMs",5e3,e),this.hb=gp("retryDelaySeedMs",1e4,e),this.eb=gp("forwardChannelMaxRetries",2,e),this.xa=gp("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.K=void 0,this.I=e&&e.supportsCrossDomainXhr||!1,this.J="",this.h=new jf(e&&e.concurrentRequestLimit),this.Ja=new Gf,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.j.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.na=void 0,this.S=0,this.L=!1,this.pa=this.B=null}function kp(e){if(bp(e),3==e.H){var t=e.W++,n=gf(e.G);bf(n,"SID",e.J),bf(n,"RID",t),bf(n,"TYPE","terminate"),Cp(e,n),(t=new Jd(e,e.j,t,void 0)).L=2,t.v=xf(gf(n)),n=!1,Jc.navigator&&Jc.navigator.sendBeacon&&(n=Jc.navigator.sendBeacon(t.v.toString(),"")),!n&&Jc.Image&&((new Image).src=t.v,n=!0),n||(t.g=Bp(t.l,null),t.g.ha(t.v)),t.G=Date.now(),lf(t)}Np(e)}function wp(e){e.g&&(Op(e),e.g.cancel(),e.g=null)}function bp(e){wp(e),e.u&&(Jc.clearTimeout(e.u),e.u=null),Dp(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Jc.clearTimeout(e.m),e.m=null)}function xp(e){qf(e.h)||e.m||(e.m=!0,gd(e.Na,e),e.C=0)}function Ep(e,t){var n;n=t?t.m:e.W++;var i=gf(e.G);bf(i,"SID",e.J),bf(i,"RID",n),bf(i,"AID",e.V),Cp(e,i),e.o&&e.s&&yp(i,e.o,e.s),n=new Jd(e,e.j,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.i=t.F.concat(e.i)),t=Tp(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),zf(e.h,n),rf(n,i,t)}function Cp(e,t){e.ma&&$h(e.ma,(function(e,n){bf(t,n,e)})),e.l&&vf({},(function(e,n){bf(t,n,e)}))}function Tp(e,t,n){n=Math.min(e.i.length,n);var i=e.l?oh(e.l.Va,e.l,e):null;e:for(var r=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=r[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var l=r[u].h,c=r[u].g;if(0>(l-=a))a=Math.max(0,r[u].h-100),s=!1;else try{Yf(c,o,"req"+l+"_")}catch(Dv){i&&i(c)}}if(s){i=o.join("&");break e}}return e=e.i.splice(0,n),t.F=e,i}function Ip(e){e.g||e.u||(e.ba=1,gd(e.Ma,e),e.A=0)}function Sp(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Vd(oh(e.Ma,e),Rp(e,e.A)),e.A++,!0)}function Op(e){null!=e.B&&(Jc.clearTimeout(e.B),e.B=null)}function Ap(e){e.g=new Jd(e,e.j,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=gf(e.wa);bf(t,"RID","rpc"),bf(t,"SID",e.J),bf(t,"CI",e.M?"0":"1"),bf(t,"AID",e.V),bf(t,"TYPE","xmlhttp"),Cp(e,t),e.o&&e.s&&yp(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.oa,n.L=1,n.v=xf(gf(t)),n.s=null,n.S=!0,af(n,e)}function Dp(e){null!=e.v&&(Jc.clearTimeout(e.v),e.v=null)}function Mp(e,t){var n=null;if(e.g==t){Dp(e),Op(e),e.g=null;var i=2}else{if(!Wf(e.h,t))return;n=t.F,Hf(e.h,t),i=1}if(0!=e.H)if(e.ta=t.aa,t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.G;var r=e.C;ld(i=Nd(),new Ud(i,n)),xp(e)}else Ip(e);else if(3==(r=t.o)||0==r&&0<e.ta||!(1==i&&function(e,t){return!($f(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.F.concat(e.i),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Vd(oh(e.Na,e,t),Rp(e,e.C)),e.C++,!0))}(e,t)||2==i&&Sp(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),r){case 1:Pp(e,5);break;case 4:Pp(e,10);break;case 3:Pp(e,6);break;default:Pp(e,2)}}function Rp(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.l||(n*=2),n*t}function Pp(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var i=oh(e.pb,e);n||(n=new yf("//www.google.com/images/cleardot.gif"),Jc.location&&"http"==Jc.location.protocol||_f(n,"https"),xf(n)),function(e,t){var n=new Dd;if(Jc.Image){var i=new Image;i.onload=sh(Xf,n,i,"TestLoadImage: loaded",!0,t),i.onerror=sh(Xf,n,i,"TestLoadImage: error",!1,t),i.onabort=sh(Xf,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=sh(Xf,n,i,"TestLoadImage: timeout",!1,t),Jc.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(n.toString(),i)}else jd(2);e.H=0,e.l&&e.l.za(t),Np(e),bp(e)}function Np(e){if(e.H=0,e.pa=[],e.l){var t=Kf(e.h);0==t.length&&0==e.i.length||(dh(e.pa,t),dh(e.pa,e.i),e.h.i.length=0,hh(e.i),e.i.length=0),e.l.ya()}}function Lp(e,t,n){var i=n instanceof yf?gf(n):new yf(n,void 0);if(""!=i.g)t&&(i.g=t+"."+i.g),kf(i,i.m);else{var r=Jc.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var a=new yf(null,void 0);i&&_f(a,i),t&&(a.g=t),r&&kf(a,r),n&&(a.l=n),i=a}return n=e.F,t=e.Da,n&&t&&bf(i,n,t),bf(i,"VER",e.qa),Cp(e,i),i}function Bp(e,t,n){if(t&&!e.I)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new ap(new Jf({ob:!0})):new ap(e.va)).Oa(e.I),t}function Fp(){}function jp(){if(Eh&&!(10<=Number(Lh)))throw Error("Environmental error: no available transport.")}function Up(e,t){ud.call(this),this.g=new _p(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!vh(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!vh(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new $p(this)}function Vp(e){Gd.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function qp(){Yd.call(this),this.status=1}function $p(e){this.g=e}function Wp(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function zp(e,t,n){n||(n=0);var i=Array(16);if("string"===typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var a=e.g[3],o=t+(a^n&(r^a))+i[0]+3614090360&4294967295;o=(n=(r=(a=(t=(n=(r=(a=(t=(n=(r=(a=(t=(n=(r=(a=(t=(n=(r=(a=(t=(n=(r=(a=(t=(n=(r=(a=(t=(n=(r=(a=(t=(n=(r=(a=(t=(n=(r=(a=(t=(n=(r=(a=(t=(n=(r=(a=(t=(n=(r=(a=(t=(n=(r=(a=(t=(n=(r=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^a&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(a^t))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(r^a))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^a&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(a^t))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(r^a))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^a&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(a^t))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(r^a))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^a&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(a^t))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(r^a&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(a^t))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(r^a))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^a&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(a^t))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(r^a))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^a&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(a^t))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(r^a))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^a&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(a^t))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(r^a))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^r^a)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(a^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^a^t)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^a)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(a^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^a^t)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^a)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(a^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^a^t)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^a)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(a^t^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^a^t)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^(n|~a))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(a|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~a))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(a|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~a))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(a|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(r^(n|~a))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=a+((o=r+(t^(a|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+a&4294967295}function Hp(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var a=0|e[r];i&&a==t||(n[r]=a,i=!1)}this.g=n}(Qc=ap.prototype).Oa=function(e){this.M=e},Qc.ha=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Kd.g(),this.C=this.u?zd(this.u):zd(Kd),this.g.onreadystatechange=oh(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void lp(this,s)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));var a,o=Pe(i.keys());try{for(o.s();!(a=o.n()).done;){var s=a.value;n.set(s,i.get(s))}}catch(f){o.e(f)}finally{o.f()}}i=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),r=Jc.FormData&&e instanceof Jc.FormData,!(0<=ch(up,t))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var u,l=Pe(n);try{for(l.s();!(u=l.n()).done;){var c=Ie(u.value,2),h=c[0],d=c[1];this.g.setRequestHeader(h,d)}}catch(f){l.e(f)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{fp(this),0<this.B&&((this.L=function(e){return Eh&&wh(Ph,9,(function(){for(var e=0,t=mh(String(bh)).split("."),n=mh("9").split("."),i=Math.max(t.length,n.length),r=0;0==e&&r<i;r++){var a=t[r]||"",o=n[r]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=yh(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||yh(0==a[2].length,0==o[2].length)||yh(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=oh(this.ua,this)):this.A=Ed(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){lp(this,s)}},Qc.ua=function(){"undefined"!=typeof Xc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ld(this,"timeout"),this.abort(8))},Qc.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,ld(this,"complete"),ld(this,"abort"),dp(this))},Qc.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),dp(this,!0)),ap.$.N.call(this)},Qc.La=function(){this.s||(this.G||this.v||this.l?hp(this):this.kb())},Qc.kb=function(){hp(this)},Qc.da=function(){try{return 2<pp(this)?this.g.status:-1}catch(Uf){return-1}},Qc.ja=function(){try{return this.g?this.g.responseText:""}catch(Uf){return""}},Qc.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),rp(t)}},Qc.Ia=function(){return this.m},Qc.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Qc=_p.prototype).qa=8,Qc.H=1,Qc.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Jd(this,this.j,e,void 0),n=this.s;if(this.U&&(n?Hh(n=Wh(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var i=0,r=0;r<this.i.length;r++){var a=this.i[r];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(i+=a)){i=r;break e}if(4096===i||r===this.i.length-1){i=r+1;break e}}i=1e3}else i=1e3;i=Tp(this,t,i),bf(r=gf(this.G),"RID",e),bf(r,"CVER",22),this.F&&bf(r,"X-HTTP-Session-Id",this.F),Cp(this,r),n&&(this.O?i="headers="+encodeURIComponent(String(mp(n)))+"&"+i:this.o&&yp(r,this.o,n)),zf(this.h,t),this.bb&&bf(r,"TYPE","init"),this.P?(bf(r,"$req",i),bf(r,"SID","null"),t.ba=!0,rf(t,r,null)):rf(t,r,i),this.H=2}}else 3==this.H&&(e?Ep(this,e):0==this.i.length||qf(this.h)||Ep(this))},Qc.Ma=function(){if(this.u=null,Ap(this),this.ca&&!(this.L||null==this.g||0>=this.S)){var e=2*this.S;this.j.info("BP detection timer enabled: "+e),this.B=Vd(oh(this.jb,this),e)}},Qc.jb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.M=!1,this.L=!0,jd(10),wp(this),Ap(this))},Qc.ib=function(){null!=this.v&&(this.v=null,wp(this),Sp(this),jd(19))},Qc.pb=function(e){e?(this.j.info("Successfully pinged google.com"),jd(2)):(this.j.info("Failed to ping google.com"),jd(1))},(Qc=Fp.prototype).Ba=function(){},Qc.Aa=function(){},Qc.za=function(){},Qc.ya=function(){},Qc.Va=function(){},jp.prototype.g=function(e,t){return new Up(e,t)},uh(Up,ud),Up.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.I=!0);var e=this.g,t=this.l,n=this.h||void 0;jd(0),e.Y=t,e.ma=n||{},e.M=e.aa,e.G=Lp(e,null,e.Y),xp(e)},Up.prototype.close=function(){kp(this.g)},Up.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=hd(e),e=n);t.i.push(new Ff(t.fb++,e)),3==t.H&&xp(t)},Up.prototype.N=function(){this.g.l=null,delete this.j,kp(this.g),delete this.g,Up.$.N.call(this)},uh(Vp,Gd),uh(qp,Yd),uh($p,Fp),$p.prototype.Ba=function(){ld(this.g,"a")},$p.prototype.Aa=function(e){ld(this.g,new Vp(e))},$p.prototype.za=function(e){ld(this.g,new qp)},$p.prototype.ya=function(){ld(this.g,"b")},uh(Wp,(function(){this.blockSize=-1})),Wp.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Wp.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=this.m,r=this.h,a=0;a<t;){if(0==r)for(;a<=n;)zp(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[r++]=e.charCodeAt(a++),r==this.blockSize){zp(this,i),r=0;break}}else for(;a<t;)if(i[r++]=e[a++],r==this.blockSize){zp(this,i),r=0;break}}this.h=r,this.i+=t},Wp.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var Kp={};function Qp(e){return-128<=e&&128>e?wh(Kp,e,(function(e){return new Hp([0|e],0>e?-1:0)})):new Hp([0|e],0>e?-1:0)}function Gp(e){if(isNaN(e)||!isFinite(e))return Xp;if(0>e)return nv(Gp(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=Yp;return new Hp(t,0)}var Yp=4294967296,Xp=Qp(0),Jp=Qp(1),Zp=Qp(16777216);function ev(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function tv(e){return-1==e.h}function nv(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new Hp(n,~e.h).add(Jp)}function iv(e,t){return e.add(nv(t))}function rv(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function av(e,t){this.g=e,this.h=t}function ov(e,t){if(ev(t))throw Error("division by zero");if(ev(e))return new av(Xp,Xp);if(tv(e))return t=ov(nv(e),t),new av(nv(t.g),nv(t.h));if(tv(t))return t=ov(e,nv(t)),new av(nv(t.g),t.h);if(30<e.g.length){if(tv(e)||tv(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Jp,i=t;0>=i.X(e);)n=sv(n),i=sv(i);var r=uv(n,1),a=uv(i,1);for(i=uv(i,2),n=uv(n,2);!ev(i);){var o=a.add(i);0>=o.X(e)&&(r=r.add(n),a=o),i=uv(i,1),n=uv(n,1)}return t=iv(e,r.R(t)),new av(r,t)}for(r=Xp;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(a=Gp(n)).R(t);tv(o)||0<o.X(e);)o=(a=Gp(n-=i)).R(t);ev(a)&&(a=Jp),r=r.add(a),e=iv(e,o)}return new av(r,e)}function sv(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.D(i)<<1|e.D(i-1)>>>31;return new Hp(n,e.h)}function uv(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,r=[],a=0;a<i;a++)r[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Hp(r,e.h)}(Qc=Hp.prototype).ea=function(){if(tv(this))return-nv(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.D(n);e+=(0<=i?i:Yp+i)*t,t*=Yp}return e},Qc.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ev(this))return"0";if(tv(this))return"-"+nv(this).toString(e);for(var t=Gp(Math.pow(e,6)),n=this,i="";;){var r=ov(n,t).g,a=((0<(n=iv(n,r.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ev(n=r))return a+i;for(;6>a.length;)a="0"+a;i=a+i}},Qc.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Qc.X=function(e){return tv(e=iv(this,e))?-1:ev(e)?0:1},Qc.abs=function(){return tv(this)?nv(this):this},Qc.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,r=0;r<=t;r++){var a=i+(65535&this.D(r))+(65535&e.D(r)),o=(a>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);i=o>>>16,a&=65535,o&=65535,n[r]=o<<16|a}return new Hp(n,-2147483648&n[n.length-1]?-1:0)},Qc.R=function(e){if(ev(this)||ev(e))return Xp;if(tv(this))return tv(e)?nv(this).R(nv(e)):nv(nv(this).R(e));if(tv(e))return nv(this.R(nv(e)));if(0>this.X(Zp)&&0>e.X(Zp))return Gp(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<e.g.length;r++){var a=this.D(i)>>>16,o=65535&this.D(i),s=e.D(r)>>>16,u=65535&e.D(r);n[2*i+2*r]+=o*u,rv(n,2*i+2*r),n[2*i+2*r+1]+=a*u,rv(n,2*i+2*r+1),n[2*i+2*r+1]+=o*s,rv(n,2*i+2*r+1),n[2*i+2*r+2]+=a*s,rv(n,2*i+2*r+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new Hp(n,0)},Qc.gb=function(e){return ov(this,e).h},Qc.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)&e.D(i);return new Hp(n,this.h&e.h)},Qc.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)|e.D(i);return new Hp(n,this.h|e.h)},Qc.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)^e.D(i);return new Hp(n,this.h^e.h)},jp.prototype.createWebChannel=jp.prototype.g,Up.prototype.send=Up.prototype.u,Up.prototype.open=Up.prototype.m,Up.prototype.close=Up.prototype.close,qd.NO_ERROR=0,qd.TIMEOUT=8,qd.HTTP_ERROR=6,$d.COMPLETE="complete",Hd.EventType=Qd,Qd.OPEN="a",Qd.CLOSE="b",Qd.ERROR="c",Qd.MESSAGE="d",ud.prototype.listen=ud.prototype.O,ap.prototype.listenOnce=ap.prototype.P,ap.prototype.getLastError=ap.prototype.Sa,ap.prototype.getLastErrorCode=ap.prototype.Ia,ap.prototype.getStatus=ap.prototype.da,ap.prototype.getResponseJson=ap.prototype.Wa,ap.prototype.getResponseText=ap.prototype.ja,ap.prototype.send=ap.prototype.ha,ap.prototype.setWithCredentials=ap.prototype.Oa,Wp.prototype.digest=Wp.prototype.l,Wp.prototype.reset=Wp.prototype.reset,Wp.prototype.update=Wp.prototype.j,Hp.prototype.add=Hp.prototype.add,Hp.prototype.multiply=Hp.prototype.R,Hp.prototype.modulo=Hp.prototype.gb,Hp.prototype.compare=Hp.prototype.X,Hp.prototype.toNumber=Hp.prototype.ea,Hp.prototype.toString=Hp.prototype.toString,Hp.prototype.getBits=Hp.prototype.D,Hp.fromNumber=Gp,Hp.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return nv(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=Gp(Math.pow(n,8)),r=Xp,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),s=parseInt(t.substring(a,a+o),n);8>o?(o=Gp(Math.pow(n,o)),r=r.R(o).add(Gp(s))):r=(r=r.R(i)).add(Gp(s))}return r};var lv=Yc.createWebChannelTransport=function(){return new jp},cv=Yc.getStatEventTarget=function(){return Nd()},hv=Yc.ErrorCode=qd,dv=Yc.EventType=$d,fv=Yc.Event=Rd,pv=Yc.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},vv=Yc.FetchXmlHttpFactory=Jf,mv=Yc.WebChannel=Hd,yv=Yc.XhrIo=ap,gv=Yc.Md5=Wp,_v=Yc.Integer=Hp,kv="@firebase/firestore",wv=function(){function e(t){De(this,e),this.uid=t}return Re(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();wv.UNAUTHENTICATED=new wv(null),wv.GOOGLE_CREDENTIALS=new wv("google-credentials-uid"),wv.FIRST_PARTY=new wv("first-party-uid"),wv.MOCK_USER=new wv("mock-user");var bv="9.22.0",xv=new tn("@firebase/firestore");function Ev(){return xv.logLevel}function Cv(e){if(xv.logLevel<=Qt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=n.map(Sv);xv.debug.apply(xv,["Firestore (".concat(bv,"): ").concat(e)].concat(Vt(r)))}}function Tv(e){if(xv.logLevel<=Qt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=n.map(Sv);xv.error.apply(xv,["Firestore (".concat(bv,"): ").concat(e)].concat(Vt(r)))}}function Iv(e){if(xv.logLevel<=Qt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=n.map(Sv);xv.warn.apply(xv,["Firestore (".concat(bv,"): ").concat(e)].concat(Vt(r)))}}function Sv(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ov(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(bv,") INTERNAL ASSERTION FAILED: ")+e;throw Tv(t),new Error(t)}function Av(e,t){e||Ov()}function Dv(e,t){return e}var Mv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Rv=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this,e,i)).code=e,r.message=i,r.toString=function(){return"".concat(r.name,": [code=").concat(r.code,"]: ").concat(r.message)},r}return Re(n)}(pt),Pv=Re((function e(){var t=this;De(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Nv=Re((function e(t,n){De(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Lv=function(){function e(){De(this,e)}return Re(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(wv.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Bv=function(){function e(t){De(this,e),this.token=t,this.changeListener=null}return Re(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Fv=function(){function e(t){De(this,e),this.t=t,this.currentUser=wv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Re(e,[{key:"start",value:function(e,t){var n=this,i=this.i,r=function(e){return n.i!==i?(i=n.i,t(e)):Promise.resolve()},a=new Pv;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Pv,e.enqueueRetryable((function(){return r(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable($t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,r(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){Cv("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Cv("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Pv)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Cv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Av("string"==typeof n.accessToken),new Nv(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Av(null===e||"string"==typeof e),new wv(e)}}]),e}(),jv=function(){function e(t,n,i){De(this,e),this.h=t,this.l=n,this.m=i,this.type="FirstParty",this.user=wv.FIRST_PARTY,this.g=new Map}return Re(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Uv=function(){function e(t,n,i){De(this,e),this.h=t,this.l=n,this.m=i}return Re(e,[{key:"getToken",value:function(){return Promise.resolve(new jv(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(wv.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Vv=Re((function e(t){De(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),qv=function(){function e(t){De(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return Re(e,[{key:"start",value:function(e,t){var n=this,i=function(e){null!=e.error&&Cv("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var i=e.token!==n.T;return n.T=e.token,Cv("FirebaseAppCheckTokenProvider","Received ".concat(i?"new":"existing"," token.")),i?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return i(t)}))};var r=function(e){Cv("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return r(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?r(e):Cv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Av("string"==typeof t.token),e.T=t.token,new Vv(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function $v(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}var Wv=function(){function e(){De(this,e)}return Re(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var i=$v(40),r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%62));return n}}]),e}();function zv(e,t){return e<t?-1:e>t?1:0}function Hv(e,t,n){return e.length===t.length&&e.every((function(e,i){return n(e,t[i])}))}function Kv(e){return e+"\0"}var Qv=function(){function e(t,n){if(De(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Rv(Mv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Rv(Mv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Rv(Mv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Rv(Mv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Re(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?zv(this.nanoseconds,e.nanoseconds):zv(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Gv=function(){function e(t){De(this,e),this.timestamp=t}return Re(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Qv(0,0))}},{key:"max",value:function(){return new e(new Qv(253402300799,999999999))}}]),e}(),Yv=function(){function e(t,n,i){De(this,e),void 0===n?n=0:n>t.length&&Ov(),void 0===i?i=t.length-n:i>t.length-n&&Ov(),this.segments=t,this.offset=n,this.len=i}return Re(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++){var r=e.get(i),a=t.get(i);if(r<a)return-1;if(r>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Xv=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"construct",value:function(e,t,i){return new n(e,t,i)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];for(var a=0,o=i;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new Rv(Mv.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,Vt(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Yv),Jv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zv=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"construct",value:function(e,t,i){return new n(e,t,i)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Jv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],i="",r=0,a=function(){if(0===i.length)throw new Rv(Mv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(i),i=""},o=!1;r<e.length;){var s=e[r];if("\\"===s){if(r+1===e.length)throw new Rv(Mv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[r+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Rv(Mv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else"`"===s?(o=!o,r++):"."!==s||o?(i+=s,r++):(a(),r++)}if(a(),o)throw new Rv(Mv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Yv),em=function(){function e(t){De(this,e),this.path=t}return Re(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Xv.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Xv.fromString(t))}},{key:"fromName",value:function(t){return new e(Xv.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Xv.emptyPath())}},{key:"comparator",value:function(e,t){return Xv.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Xv(t.slice()))}}]),e}(),tm=Re((function e(t,n,i,r){De(this,e),this.indexId=t,this.collectionGroup=n,this.fields=i,this.indexState=r}));function nm(e){return e.fields.find((function(e){return 2===e.kind}))}function im(e){return e.fields.filter((function(e){return 2!==e.kind}))}tm.UNKNOWN_ID=-1;var rm=Re((function e(t,n){De(this,e),this.fieldPath=t,this.kind=n}));var am=function(){function e(t,n){De(this,e),this.sequenceNumber=t,this.offset=n}return Re(e,null,[{key:"empty",value:function(){return new e(0,um.min())}}]),e}();function om(e,t){var n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=Gv.fromTimestamp(1e9===i?new Qv(n+1,0):new Qv(n,i));return new um(r,em.empty(),t)}function sm(e){return new um(e.readTime,e.key,-1)}var um=function(){function e(t,n,i){De(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=i}return Re(e,null,[{key:"min",value:function(){return new e(Gv.min(),em.empty(),-1)}},{key:"max",value:function(){return new e(Gv.max(),em.empty(),-1)}}]),e}();function lm(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=em.comparator(e.documentKey,t.documentKey))?n:zv(e.largestBatchId,t.largestBatchId)}var cm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",hm=function(){function e(){De(this,e),this.onCommittedListeners=[]}return Re(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function dm(e){return fm.apply(this,arguments)}function fm(){return(fm=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Mv.FAILED_PRECONDITION&&t.message===cm){e.next=2;break}throw t;case 2:Cv("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pm=function(){function e(t){var n=this;De(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Re(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var i=this;return this.callbackAttached&&Ov(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,r){i.nextCallback=function(n){i.wrapSuccess(t,n).next(e,r)},i.catchCallback=function(t){i.wrapFailure(n,t).next(e,r)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var i=0,r=0,a=!1;t.forEach((function(t){++i,t.next((function(){++r,a&&r===i&&e()}),(function(e){return n(e)}))})),a=!0,r===i&&e()}))}},{key:"or",value:function(t){var n,i=e.resolve(!1),r=Pe(t);try{var a=function(){var t=n.value;i=i.next((function(n){return n?e.resolve(n):t()}))};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return i}},{key:"forEach",value:function(e,t){var n=this,i=[];return e.forEach((function(e,r){i.push(t.call(n,e,r))})),this.waitFor(i)}},{key:"mapArray",value:function(t,n){return new e((function(e,i){for(var r=t.length,a=new Array(r),o=0,s=function(){var s=u;n(t[s]).next((function(t){a[s]=t,++o===r&&e(a)}),(function(e){return i(e)}))},u=0;u<r;u++)s()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,i){!function r(){!0===t()?n().next((function(){r()}),i):e()}()}))}}]),e}(),vm=function(){function e(t,n){var i=this;De(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new Pv,this.transaction.oncomplete=function(){i.v.resolve()},this.transaction.onabort=function(){n.error?i.v.reject(new gm(t,n.error)):i.v.resolve()},this.transaction.onerror=function(e){var n=xm(e.target.error);i.v.reject(new gm(t,n))}}return Re(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(Cv("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new km(t)}}],[{key:"open",value:function(t,n,i,r){try{return new e(n,t.transaction(r,i))}catch(t){throw new gm(n,t)}}}]),e}(),mm=function(){function e(t,n,i){De(this,e),this.name=t,this.version=n,this.V=i,12.2===e.S(ot())&&Tv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Re(e,[{key:"$",value:function(){var e=$t(jt().mark((function e(t){var n=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Cv("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,i){var r=indexedDB.open(n.name,n.version);r.onsuccess=function(t){var n=t.target.result;e(n)},r.onblocked=function(){i(new gm(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(e){var n=e.target.error;"VersionError"===n.name?i(new Rv(Mv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?i(new Rv(Mv.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):i(new gm(t,n))},r.onupgradeneeded=function(e){Cv("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,r.transaction,e.oldVersion,n.version).next((function(){Cv("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=$t(jt().mark((function e(t,n,i,r){var a,o,s,u,l=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,s=jt().mark((function e(){var n,s,u,c;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,l.$(t);case 4:return l.db=e.sent,n=vm.open(l.db,t,a?"readonly":"readwrite",i),s=r(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),pm.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.R;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),u=e.t1,c="FirebaseError"!==u.name&&o<3,Cv("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),l.close(),c){e.next=18;break}return e.abrupt("return",{v:Promise.reject(u)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if("object"!==typeof(u=e.t0)){e.next=7;break}return e.abrupt("return",u.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Cv("SimpleDb","Removing database:",e),wm(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!ft())return!1;if(e.C())return!0;var t=ot(),n=e.S(t),i=0<n&&n<10,r=e.N(t),a=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_apiKey:"AIzaSyDuVxcj871XrI0PbnVKZGApPV1LHSzsZWA",REACT_APP_appId:"1:51556035661:web:5eb6609ab3ea61fea5c004",REACT_APP_authDomain:"y76-librarymanagementsystem.firebaseapp.com",REACT_APP_messagingSenderId:"51556035661",REACT_APP_projectId:"y76-librarymanagementsystem",REACT_APP_storageBucket:"y76-librarymanagementsystem.appspot.com"})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),ym=function(){function e(t){De(this,e),this.L=t,this.q=!1,this.U=null}return Re(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return wm(this.L.delete())}}]),e}(),gm=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this,Mv.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(i))).name="IndexedDbTransactionError",r}return Re(n)}(Rv);function _m(e){return"IndexedDbTransactionError"===e.name}var km=function(){function e(t){De(this,e),this.store=t}return Re(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Cv("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Cv("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),wm(n)}},{key:"add",value:function(e){return Cv("SimpleDb","ADD",this.store.name,e,e),wm(this.store.add(e))}},{key:"get",value:function(e){var t=this;return wm(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Cv("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Cv("SimpleDb","DELETE",this.store.name,e),wm(this.store.delete(e))}},{key:"count",value:function(){return Cv("SimpleDb","COUNT",this.store.name),wm(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var i=this.cursor(n),r=[];return this.W(i,(function(e,t){r.push(t)})).next((function(){return r}))}var a=this.store.getAll(n.range);return new pm((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new pm((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Cv("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var i=this.cursor(n);return this.W(i,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var i=this.cursor(n);return this.W(i,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new pm((function(n,i){t.onerror=function(e){var t=xm(e.target.error);i(t)},t.onsuccess=function(t){var i=t.target.result;i?e(i.primaryKey,i.value).next((function(e){e?i.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new pm((function(i,r){e.onerror=function(e){r(e.target.error)},e.onsuccess=function(e){var r=e.target.result;if(r){var a=new ym(r),o=t(r.primaryKey,r.value,a);if(o instanceof pm){var s=o.catch((function(e){return a.done(),pm.reject(e)}));n.push(s)}a.isDone?i():null===a.K?r.continue():r.continue(a.K)}else i()}})).next((function(){return pm.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function wm(e){return new pm((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=xm(e.target.error);n(t)}}))}var bm=!1;function xm(e){var t=mm.S(ot());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var i=new Rv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return bm||(bm=!0,setTimeout((function(){throw i}),0)),i}}return e}var Em=function(){function e(t,n){De(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return Re(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Cv("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Cv,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!_m(e.t4)){e.next=17;break}Cv("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,dm(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Cm=function(){function e(t,n){De(this,e),this.localStore=t,this.persistence=n}return Re(e,[{key:"nt",value:function(){var e=$t(jt().mark((function e(){var t,n=this,i=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,i=new Set,r=t,a=!0;return pm.doWhile((function(){return!0===a&&r>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!i.has(t))return Cv("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,r).next((function(e){r-=e,i.add(t)}));a=!1}))})).next((function(){return t-r}))}},{key:"it",value:function(e,t,n){var i=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(r){return i.localStore.localDocuments.getNextDocuments(e,t,r,n).next((function(n){var a=n.changes;return i.localStore.indexManager.updateIndexEntries(e,a).next((function(){return i.rt(r,n)})).next((function(n){return Cv("IndexBackiller","Updating offset: ".concat(n)),i.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var i=sm(t);lm(i,n)>0&&(n=i)})),new um(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Tm=function(){function e(t,n){var i=this;De(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return i.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return Re(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Im(e){return null==e}function Sm(e){return 0===e&&1/e==-1/0}function Om(e){return"number"==typeof e&&Number.isInteger(e)&&!Sm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Am(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Mm(t)),t=Dm(e.get(n),t);return Mm(t)}function Dm(e,t){for(var n=t,i=e.length,r=0;r<i;r++){var a=e.charAt(r);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Mm(e){return e+"\x01\x01"}function Rm(e){var t=e.length;if(Av(t>=2),2===t)return Av("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Xv.emptyPath();for(var n=t-2,i=[],r="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Ov(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===r.length?u=s:(u=r+=s,r=""),i.push(u);break;case"\x10":r+=e.substring(a,o),r+="\0";break;case"\x11":r+=e.substring(a,o+1);break;default:Ov()}a=o+2}return new Xv(i)}Tm.ct=-1;var Pm=["userId","batchId"];function Nm(e,t){return[e,Am(t)]}function Lm(e,t,n){return[e,Am(t),n]}var Bm={},Fm=["prefixPath","collectionGroup","readTime","documentId"],jm=["prefixPath","collectionGroup","documentId"],Um=["collectionGroup","readTime","prefixPath","documentId"],Vm=["canonicalId","targetId"],qm=["targetId","path"],$m=["path","targetId"],Wm=["collectionId","parent"],zm=["indexId","uid"],Hm=["uid","sequenceNumber"],Km=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Qm=["indexId","uid","orderedDocumentKey"],Gm=["userId","collectionPath","documentId"],Ym=["userId","collectionPath","largestBatchId"],Xm=["userId","collectionGroup","largestBatchId"],Jm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Zm=[].concat(Vt(Jm),["documentOverlays"]),ey=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ty=ey,ny=[].concat(ty,["indexConfiguration","indexState","indexEntries"]),iy=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this)).ht=e,r.currentSequenceNumber=i,r}return Re(n)}(hm);function ry(e,t){var n=Dv(e);return mm.M(n.ht,t)}function ay(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function oy(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function sy(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var uy=function(){function e(t,n){De(this,e),this.comparator=t,this.root=n||cy.EMPTY}return Re(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,cy.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,cy.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new ly(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new ly(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new ly(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new ly(this.root,e,this.comparator,!0)}}]),e}(),ly=function(){function e(t,n,i,r){De(this,e),this.isReverse=r,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?i(t.key,n):1,n&&r&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Re(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),cy=function(){function e(t,n,i,r,a){De(this,e),this.key=t,this.value=n,this.color=null!=i?i:e.RED,this.left=null!=r?r:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Re(e,[{key:"copy",value:function(t,n,i,r,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var i=this,r=n(e,i.key);return(i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var i,r=this;if(n(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===n(t,r.key)){if(r.right.isEmpty())return e.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ov();if(this.right.isRed())throw Ov();var e=this.left.check();if(e!==this.right.check())throw Ov();return e+(this.isRed()?0:1)}}]),e}();cy.EMPTY=null,cy.RED=!0,cy.BLACK=!1,cy.EMPTY=new(function(){function e(){De(this,e),this.size=0}return Re(e,[{key:"key",get:function(){throw Ov()}},{key:"value",get:function(){throw Ov()}},{key:"color",get:function(){throw Ov()}},{key:"left",get:function(){throw Ov()}},{key:"right",get:function(){throw Ov()}},{key:"copy",value:function(e,t,n,i,r){return this}},{key:"insert",value:function(e,t,n){return new cy(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var hy=function(){function e(t){De(this,e),this.comparator=t,this.data=new uy(this.comparator)}return Re(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new dy(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new dy(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),i=t.data.getIterator();n.hasNext();){var r=n.getNext().key,a=i.getNext().key;if(0!==this.comparator(r,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),dy=function(){function e(t){De(this,e),this.iter=t}return Re(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function fy(e){return e.hasNext()?e.getNext():void 0}var py=function(){function e(t){De(this,e),this.fields=t,t.sort(Zv.comparator)}return Re(e,[{key:"unionWith",value:function(t){var n,i=new hy(Zv.comparator),r=Pe(this.fields);try{for(r.s();!(n=r.n()).done;){var a=n.value;i=i.add(a)}}catch(l){r.e(l)}finally{r.f()}var o,s=Pe(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;i=i.add(u)}}catch(l){s.e(l)}finally{s.f()}return new e(i.toArray())}},{key:"covers",value:function(e){var t,n=Pe(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Hv(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),vy=function(e){Le(n,e);var t=je(n);function n(){var e;return De(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return Re(n)}(Ve(Error));var my=function(e){function t(e){De(this,t),this.binaryString=e}return Re(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return zv(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new vy("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();my.EMPTY_BYTE_STRING=new my("");var yy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gy(e){if(Av(!!e),"string"==typeof e){var t=0,n=yy.exec(e);if(Av(!!n),n[1]){var i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}var r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:_y(e.seconds),nanos:_y(e.nanos)}}function _y(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ky(e){return"string"==typeof e?my.fromBase64String(e):my.fromUint8Array(e)}function wy(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function by(e){var t=e.mapValue.fields.__previous_value__;return wy(t)?by(t):t}function xy(e){var t=gy(e.mapValue.fields.__local_write_time__.timestampValue);return new Qv(t.seconds,t.nanos)}var Ey=Re((function e(t,n,i,r,a,o,s,u,l){De(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=u,this.useFetchStreams=l})),Cy=function(){function e(t,n){De(this,e),this.projectId=t,this.database=n||"(default)"}return Re(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Ty={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Iy={nullValue:"NULL_VALUE"};function Sy(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?wy(e)?4:qy(e)?9007199254740991:10:Ov()}function Oy(e,t){if(e===t)return!0;var n=Sy(e);if(n!==Sy(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xy(e).isEqual(xy(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=gy(e.timestampValue),i=gy(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ky(e.bytesValue).isEqual(ky(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return _y(e.geoPointValue.latitude)===_y(t.geoPointValue.latitude)&&_y(e.geoPointValue.longitude)===_y(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return _y(e.integerValue)===_y(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=_y(e.doubleValue),i=_y(t.doubleValue);return n===i?Sm(n)===Sm(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Hv(e.arrayValue.values||[],t.arrayValue.values||[],Oy);case 10:return function(e,t){var n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(ay(n)!==ay(i))return!1;for(var r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Oy(n[r],i[r])))return!1;return!0}(e,t);default:return Ov()}}function Ay(e,t){return void 0!==(e.values||[]).find((function(e){return Oy(e,t)}))}function Dy(e,t){if(e===t)return 0;var n=Sy(e),i=Sy(t);if(n!==i)return zv(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return zv(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=_y(e.integerValue||e.doubleValue),i=_y(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return My(e.timestampValue,t.timestampValue);case 4:return My(xy(e),xy(t));case 5:return zv(e.stringValue,t.stringValue);case 6:return function(e,t){var n=ky(e),i=ky(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),i=t.split("/"),r=0;r<n.length&&r<i.length;r++){var a=zv(n[r],i[r]);if(0!==a)return a}return zv(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=zv(_y(e.latitude),_y(t.latitude));return 0!==n?n:zv(_y(e.longitude),_y(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],i=t.values||[],r=0;r<n.length&&r<i.length;++r){var a=Dy(n[r],i[r]);if(a)return a}return zv(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ty.mapValue&&t===Ty.mapValue)return 0;if(e===Ty.mapValue)return 1;if(t===Ty.mapValue)return-1;var n=e.fields||{},i=Object.keys(n),r=t.fields||{},a=Object.keys(r);i.sort(),a.sort();for(var o=0;o<i.length&&o<a.length;++o){var s=zv(i[o],a[o]);if(0!==s)return s;var u=Dy(n[i[o]],r[a[o]]);if(0!==u)return u}return zv(i.length,a.length)}(e.mapValue,t.mapValue);default:throw Ov()}}function My(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return zv(e,t);var n=gy(e),i=gy(t),r=zv(n.seconds,i.seconds);return 0!==r?r:zv(n.nanos,i.nanos)}function Ry(e){return Py(e)}function Py(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=gy(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ky(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,em.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",i=!0,r=Pe(e.values||[]);try{for(r.s();!(t=r.n()).done;){var a=t.value;i?i=!1:n+=",",n+=Py(a)}}catch(o){r.e(o)}finally{r.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",i=!0,r=Pe(Object.keys(e.fields||{}).sort());try{for(r.s();!(t=r.n()).done;){var a=t.value;i?i=!1:n+=",",n+="".concat(a,":").concat(Py(e.fields[a]))}}catch(o){r.e(o)}finally{r.f()}return n+"}"}(e.mapValue):Ov();var t,n}function Ny(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ly(e){return!!e&&"integerValue"in e}function By(e){return!!e&&"arrayValue"in e}function Fy(e){return!!e&&"nullValue"in e}function jy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Uy(e){return!!e&&"mapValue"in e}function Vy(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return oy(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Vy(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},i=0;i<(e.arrayValue.values||[]).length;++i)n.arrayValue.values[i]=Vy(e.arrayValue.values[i]);return n}return Object.assign({},e)}function qy(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function $y(e){return"nullValue"in e?Iy:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ny(Cy.empty(),em.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ov()}function Wy(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ny(Cy.empty(),em.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ty:Ov()}function zy(e,t){var n=Dy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Hy(e,t){var n=Dy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ky=function(){function e(t){De(this,e),this.value=t}return Re(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Uy(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vy(t)}},{key:"setAll",value:function(e){var t=this,n=Zv.emptyPath(),i={},r=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,i,r),i={},r=[],n=a.popLast()}e?i[a.lastSegment()]=Vy(e):r.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,i,r)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Uy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Oy(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var i=t.mapValue.fields[e.get(n)];Uy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){oy(t,(function(t,n){return e[t]=n}));var i,r=Pe(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;delete e[a]}}catch(o){r.e(o)}finally{r.f()}}},{key:"clone",value:function(){return new e(Vy(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Qy(e){var t=[];return oy(e.fields,(function(e,n){var i=new Zv([e]);if(Uy(n)){var r=Qy(n.mapValue).fields;if(0===r.length)t.push(i);else{var a,o=Pe(r);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(i.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(i)})),new py(t)}var Gy=function(){function e(t,n,i,r,a,o,s){De(this,e),this.key=t,this.documentType=n,this.version=i,this.readTime=r,this.createTime=a,this.data=o,this.documentState=s}return Re(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Gv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ky.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ky.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Gv.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Gv.min(),Gv.min(),Gv.min(),Ky.empty(),0)}},{key:"newFoundDocument",value:function(t,n,i,r){return new e(t,1,n,Gv.min(),i,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Gv.min(),Gv.min(),Ky.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Gv.min(),Gv.min(),Ky.empty(),2)}}]),e}(),Yy=Re((function e(t,n){De(this,e),this.position=t,this.inclusive=n}));function Xy(e,t,n){for(var i=0,r=0;r<e.position.length;r++){var a=t[r],o=e.position[r];if(i=a.field.isKeyField()?em.comparator(em.fromName(o.referenceValue),n.key):Dy(o,n.data.field(a.field)),"desc"===a.dir&&(i*=-1),0!==i)break}return i}function Jy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Oy(e.position[n],t.position[n]))return!1;return!0}var Zy=Re((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";De(this,e),this.field=t,this.dir=n}));function eg(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var tg=Re((function e(){De(this,e)})),ng=function(e){Le(n,e);var t=je(n);function n(e,i,r){var a;return De(this,n),(a=t.call(this)).field=e,a.op=i,a.value=r,a}return Re(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Dy(t,this.value)):null!==t&&Sy(this.value)===Sy(t)&&this.matchesComparison(Dy(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ov()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,i):new dg(e,t,i):"array-contains"===t?new mg(e,i):"in"===t?new yg(e,i):"not-in"===t?new gg(e,i):"array-contains-any"===t?new _g(e,i):new n(e,t,i)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new fg(e,n):new pg(e,n)}}]),n}(tg),ig=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this)).filters=e,r.op=i,r.lt=null,r}return Re(n,[{key:"matches",value:function(e){return rg(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=Pe(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var i=t.value;if(e(i))return i}}catch(r){n.e(r)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(tg);function rg(e){return"and"===e.op}function ag(e){return"or"===e.op}function og(e){return sg(e)&&rg(e)}function sg(e){var t,n=Pe(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof ig)return!1}}catch(i){n.e(i)}finally{n.f()}return!0}function ug(e){if(e instanceof ng)return e.field.canonicalString()+e.op.toString()+Ry(e.value);if(og(e))return e.filters.map((function(e){return ug(e)})).join(",");var t=e.filters.map((function(e){return ug(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function lg(e,t){return e instanceof ng?function(e,t){return t instanceof ng&&e.op===t.op&&e.field.isEqual(t.field)&&Oy(e.value,t.value)}(e,t):e instanceof ig?function(e,t){return t instanceof ig&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,i){return e&&lg(n,t.filters[i])}),!0)}(e,t):void Ov()}function cg(e,t){var n=e.filters.concat(t);return ig.create(n,e.op)}function hg(e){return e instanceof ng?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Ry(e.value))}(e):e instanceof ig?function(e){return e.op.toString()+" {"+e.getFilters().map(hg).join(" ,")+"}"}(e):"Filter"}var dg=function(e){Le(n,e);var t=je(n);function n(e,i,r){var a;return De(this,n),(a=t.call(this,e,i,r)).key=em.fromName(r.referenceValue),a}return Re(n,[{key:"matches",value:function(e){var t=em.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(ng),fg=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this,e,"in",i)).keys=vg("in",i),r}return Re(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ng),pg=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this,e,"not-in",i)).keys=vg("not-in",i),r}return Re(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(ng);function vg(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return em.fromName(e.referenceValue)}))}var mg=function(e){Le(n,e);var t=je(n);function n(e,i){return De(this,n),t.call(this,e,"array-contains",i)}return Re(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return By(t)&&Ay(t.arrayValue,this.value)}}]),n}(ng),yg=function(e){Le(n,e);var t=je(n);function n(e,i){return De(this,n),t.call(this,e,"in",i)}return Re(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ay(this.value.arrayValue,t)}}]),n}(ng),gg=function(e){Le(n,e);var t=je(n);function n(e,i){return De(this,n),t.call(this,e,"not-in",i)}return Re(n,[{key:"matches",value:function(e){if(Ay(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ay(this.value.arrayValue,t)}}]),n}(ng),_g=function(e){Le(n,e);var t=je(n);function n(e,i){return De(this,n),t.call(this,e,"array-contains-any",i)}return Re(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!By(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ay(t.value.arrayValue,e)}))}}]),n}(ng),kg=Re((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;De(this,e),this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=o,this.endAt=s,this.dt=null}));function wg(e){return new kg(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function bg(e){var t=Dv(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return ug(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Im(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Ry(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Ry(e)})).join(",")),t.dt=n}return t.dt}function xg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!eg(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var i=0;i<e.filters.length;i++)if(!lg(e.filters[i],t.filters[i]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Jy(e.startAt,t.startAt)&&Jy(e.endAt,t.endAt)}function Eg(e){return em.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Cg(e,t){return e.filters.filter((function(e){return e instanceof ng&&e.field.isEqual(t)}))}function Tg(e,t,n){var i,r=Iy,a=!0,o=Pe(Cg(e,t));try{for(o.s();!(i=o.n()).done;){var s=i.value,u=Iy,l=!0;switch(s.op){case"<":case"<=":u=$y(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,l=!1;break;case"!=":case"not-in":u=Iy}zy({value:r,inclusive:a},{value:u,inclusive:l})<0&&(r=u,a=l)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var c=0;c<e.orderBy.length;++c)if(e.orderBy[c].field.isEqual(t)){var h=n.position[c];zy({value:r,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(r=h,a=n.inclusive);break}return{value:r,inclusive:a}}function Ig(e,t,n){var i,r=Ty,a=!0,o=Pe(Cg(e,t));try{for(o.s();!(i=o.n()).done;){var s=i.value,u=Ty,l=!0;switch(s.op){case">=":case">":u=Wy(s.value),l=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,l=!1;break;case"!=":case"not-in":u=Ty}Hy({value:r,inclusive:a},{value:u,inclusive:l})>0&&(r=u,a=l)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var c=0;c<e.orderBy.length;++c)if(e.orderBy[c].field.isEqual(t)){var h=n.position[c];Hy({value:r,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(r=h,a=n.inclusive);break}return{value:r,inclusive:a}}var Sg=Re((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;De(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.wt=null,this._t=null,this.startAt,this.endAt}));function Og(e,t,n,i,r,a,o,s){return new Sg(e,t,n,i,r,a,o,s)}function Ag(e){return new Sg(e)}function Dg(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Mg(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Rg(e){var t,n=Pe(e.filters);try{for(n.s();!(t=n.n()).done;){var i=t.value.getFirstInequalityField();if(null!==i)return i}}catch(r){n.e(r)}finally{n.f()}return null}function Pg(e){return null!==e.collectionGroup}function Ng(e){var t=Dv(e);if(null===t.wt){t.wt=[];var n=Rg(t),i=Mg(t);if(null!==n&&null===i)n.isKeyField()||t.wt.push(new Zy(n)),t.wt.push(new Zy(Zv.keyField(),"asc"));else{var r,a=!1,o=Pe(t.explicitOrderBy);try{for(o.s();!(r=o.n()).done;){var s=r.value;t.wt.push(s),s.field.isKeyField()&&(a=!0)}}catch(l){o.e(l)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Zy(Zv.keyField(),u))}}}return t.wt}function Lg(e){var t=Dv(e);if(!t._t)if("F"===t.limitType)t._t=wg(t.path,t.collectionGroup,Ng(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,i=[],r=Pe(Ng(t));try{for(r.s();!(n=r.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";i.push(new Zy(a.field,o))}}catch(l){r.e(l)}finally{r.f()}var s=t.endAt?new Yy(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new Yy(t.startAt.position,t.startAt.inclusive):null;t._t=wg(t.path,t.collectionGroup,i,t.filters,t.limit,s,u)}return t._t}function Bg(e,t){t.getFirstInequalityField(),Rg(e);var n=e.filters.concat([t]);return new Sg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Fg(e,t,n){return new Sg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function jg(e,t){return xg(Lg(e),Lg(t))&&e.limitType===t.limitType}function Ug(e){return"".concat(bg(Lg(e)),"|lt:").concat(e.limitType)}function Vg(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return hg(e)})).join(", "),"]")),Im(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Ry(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Ry(e)})).join(",")),"Target(".concat(t,")")}(Lg(e)),"; limitType=").concat(e.limitType,")")}function qg(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):em.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,i=Pe(Ng(e));try{for(i.s();!(n=i.n()).done;){var r=n.value;if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1}}catch(a){i.e(a)}finally{i.f()}return!0}(e,t)&&function(e,t){var n,i=Pe(e.filters);try{for(i.s();!(n=i.n()).done;){if(!n.value.matches(t))return!1}}catch(r){i.e(r)}finally{i.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var i=Xy(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,Ng(e),t))&&!(e.endAt&&!function(e,t,n){var i=Xy(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,Ng(e),t))}(e,t)}function $g(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Wg(e){return function(t,n){var i,r=!1,a=Pe(Ng(e));try{for(a.s();!(i=a.n()).done;){var o=i.value,s=zg(o,t,n);if(0!==s)return s;r=r||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function zg(e,t,n){var i=e.field.isKeyField()?em.comparator(t.key,n.key):function(e,t,n){var i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?Dy(i,r):Ov()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Ov()}}var Hg=function(){function e(t,n){De(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Re(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var i,r=Pe(n);try{for(r.s();!(i=r.n()).done;){var a=Ie(i.value,2),o=a[0],s=a[1];if(this.equalsFn(o,e))return s}}catch(u){r.e(u)}finally{r.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(var r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){oy(this.inner,(function(t,n){var i,r=Pe(n);try{for(r.s();!(i=r.n()).done;){var a=Ie(i.value,2),o=a[0],s=a[1];e(o,s)}}catch(u){r.e(u)}finally{r.f()}}))}},{key:"isEmpty",value:function(){return sy(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Kg=new uy(em.comparator);function Qg(){return Kg}var Gg=new uy(em.comparator);function Yg(){for(var e=Gg,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var r=0,a=n;r<a.length;r++){var o=a[r];e=e.insert(o.key,o)}return e}function Xg(e){var t=Gg;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Jg(){return e_()}function Zg(){return e_()}function e_(){return new Hg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var t_=new uy(em.comparator),n_=new hy(em.comparator);function i_(){for(var e=n_,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var r=0,a=n;r<a.length;r++){var o=a[r];e=e.add(o)}return e}var r_=new hy(zv);function a_(){return r_}function o_(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sm(t)?"-0":t}}function s_(e){return{integerValue:""+e}}function u_(e,t){return Om(t)?s_(t):o_(e,t)}var l_=Re((function e(){De(this,e),this._=void 0}));function c_(e,t,n){return e instanceof f_?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&wy(t)&&(t=by(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof p_?v_(e,t):e instanceof m_?y_(e,t):function(e,t){var n=d_(e,t),i=__(n)+__(e.gt);return Ly(n)&&Ly(e.gt)?s_(i):o_(e.serializer,i)}(e,t)}function h_(e,t,n){return e instanceof p_?v_(e,t):e instanceof m_?y_(e,t):n}function d_(e,t){return e instanceof g_?Ly(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var f_=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n)}(l_),p_=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this)).elements=e,i}return Re(n)}(l_);function v_(e,t){var n,i=k_(t),r=Pe(e.elements);try{var a=function(){var e=n.value;i.some((function(t){return Oy(t,e)}))||i.push(e)};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return{arrayValue:{values:i}}}var m_=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this)).elements=e,i}return Re(n)}(l_);function y_(e,t){var n,i=k_(t),r=Pe(e.elements);try{var a=function(){var e=n.value;i=i.filter((function(t){return!Oy(t,e)}))};for(r.s();!(n=r.n()).done;)a()}catch(o){r.e(o)}finally{r.f()}return{arrayValue:{values:i}}}var g_=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this)).serializer=e,r.gt=i,r}return Re(n)}(l_);function __(e){return _y(e.integerValue||e.doubleValue)}function k_(e){return By(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var w_=Re((function e(t,n){De(this,e),this.field=t,this.transform=n}));var b_=Re((function e(t,n){De(this,e),this.version=t,this.transformResults=n})),x_=function(){function e(t,n){De(this,e),this.updateTime=t,this.exists=n}return Re(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function E_(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var C_=Re((function e(){De(this,e)}));function T_(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new F_(e.key,x_.none()):new D_(e.key,e.data,x_.none());var n,i=e.data,r=Ky.empty(),a=new hy(Zv.comparator),o=Pe(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=i.field(s);null===u&&s.length>1&&(s=s.popLast(),u=i.field(s)),null===u?r.delete(s):r.set(s,u),a=a.add(s)}}}catch(l){o.e(l)}finally{o.f()}return new M_(e.key,r,new py(a.toArray()),x_.none())}function I_(e,t,n){e instanceof D_?function(e,t,n){var i=e.value.clone(),r=P_(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof M_?function(e,t,n){if(E_(e.precondition,t)){var i=P_(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(R_(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function S_(e,t,n,i){return e instanceof D_?function(e,t,n,i){if(!E_(e.precondition,t))return n;var r=e.value.clone(),a=N_(e.fieldTransforms,i,t);return r.setAll(a),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof M_?function(e,t,n,i){if(!E_(e.precondition,t))return n;var r=N_(e.fieldTransforms,i,t),a=t.data;return a.setAll(R_(e)),a.setAll(r),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,i):function(e,t,n){return E_(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function O_(e,t){var n,i=null,r=Pe(e.fieldTransforms);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=t.data.field(a.field),s=d_(a.transform,o||null);null!=s&&(null===i&&(i=Ky.empty()),i.set(a.field,s))}}catch(u){r.e(u)}finally{r.f()}return i||null}function A_(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Hv(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof p_&&t instanceof p_||e instanceof m_&&t instanceof m_?Hv(e.elements,t.elements,Oy):e instanceof g_&&t instanceof g_?Oy(e.gt,t.gt):e instanceof f_&&t instanceof f_}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var D_=function(e){Le(n,e);var t=je(n);function n(e,i,r){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return De(this,n),(a=t.call(this)).key=e,a.value=i,a.precondition=r,a.fieldTransforms=o,a.type=0,a}return Re(n,[{key:"getFieldMask",value:function(){return null}}]),n}(C_),M_=function(e){Le(n,e);var t=je(n);function n(e,i,r,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return De(this,n),(o=t.call(this)).key=e,o.data=i,o.fieldMask=r,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return Re(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(C_);function R_(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var i=e.data.field(n);t.set(n,i)}})),t}function P_(e,t,n){var i=new Map;Av(e.length===n.length);for(var r=0;r<n.length;r++){var a=e[r],o=a.transform,s=t.data.field(a.field);i.set(a.field,h_(o,s,n[r]))}return i}function N_(e,t,n){var i,r=new Map,a=Pe(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.transform,u=n.data.field(o.field);r.set(o.field,c_(s,u,t))}}catch(l){a.e(l)}finally{a.f()}return r}var L_,B_,F_=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this)).key=e,r.precondition=i,r.type=2,r.fieldTransforms=[],r}return Re(n,[{key:"getFieldMask",value:function(){return null}}]),n}(C_),j_=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this)).key=e,r.precondition=i,r.type=3,r.fieldTransforms=[],r}return Re(n,[{key:"getFieldMask",value:function(){return null}}]),n}(C_),U_=function(){function e(t,n,i,r){De(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}return Re(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,i=0;i<this.mutations.length;i++){var r=this.mutations[i];r.key.isEqual(e.key)&&I_(r,e,n[i])}}},{key:"applyToLocalView",value:function(e,t){var n,i=Pe(this.baseMutations);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.key.isEqual(e.key)&&(t=S_(r,e,t,this.localWriteTime))}}catch(u){i.e(u)}finally{i.f()}var a,o=Pe(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=S_(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,i=Zg();return this.mutations.forEach((function(r){var a=e.get(r.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=T_(o,s=t.has(r.key)?null:s);null!==u&&i.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(Gv.min())})),i}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),i_())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Hv(this.mutations,e.mutations,(function(e,t){return A_(e,t)}))&&Hv(this.baseMutations,e.baseMutations,(function(e,t){return A_(e,t)}))}}]),e}(),V_=function(){function e(t,n,i,r){De(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}return Re(e,null,[{key:"from",value:function(t,n,i){Av(t.mutations.length===i.length);for(var r=t_,a=t.mutations,o=0;o<a.length;o++)r=r.insert(a[o].key,i[o].version);return new e(t,n,i,r)}}]),e}(),q_=function(){function e(t,n){De(this,e),this.largestBatchId=t,this.mutation=n}return Re(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),$_=Re((function e(t,n){De(this,e),this.count=t,this.unchangedNames=n}));function W_(e){switch(e){default:return Ov();case Mv.CANCELLED:case Mv.UNKNOWN:case Mv.DEADLINE_EXCEEDED:case Mv.RESOURCE_EXHAUSTED:case Mv.INTERNAL:case Mv.UNAVAILABLE:case Mv.UNAUTHENTICATED:return!1;case Mv.INVALID_ARGUMENT:case Mv.NOT_FOUND:case Mv.ALREADY_EXISTS:case Mv.PERMISSION_DENIED:case Mv.FAILED_PRECONDITION:case Mv.ABORTED:case Mv.OUT_OF_RANGE:case Mv.UNIMPLEMENTED:case Mv.DATA_LOSS:return!0}}function z_(e){if(void 0===e)return Tv("GRPC error has no .code"),Mv.UNKNOWN;switch(e){case L_.OK:return Mv.OK;case L_.CANCELLED:return Mv.CANCELLED;case L_.UNKNOWN:return Mv.UNKNOWN;case L_.DEADLINE_EXCEEDED:return Mv.DEADLINE_EXCEEDED;case L_.RESOURCE_EXHAUSTED:return Mv.RESOURCE_EXHAUSTED;case L_.INTERNAL:return Mv.INTERNAL;case L_.UNAVAILABLE:return Mv.UNAVAILABLE;case L_.UNAUTHENTICATED:return Mv.UNAUTHENTICATED;case L_.INVALID_ARGUMENT:return Mv.INVALID_ARGUMENT;case L_.NOT_FOUND:return Mv.NOT_FOUND;case L_.ALREADY_EXISTS:return Mv.ALREADY_EXISTS;case L_.PERMISSION_DENIED:return Mv.PERMISSION_DENIED;case L_.FAILED_PRECONDITION:return Mv.FAILED_PRECONDITION;case L_.ABORTED:return Mv.ABORTED;case L_.OUT_OF_RANGE:return Mv.OUT_OF_RANGE;case L_.UNIMPLEMENTED:return Mv.UNIMPLEMENTED;case L_.DATA_LOSS:return Mv.DATA_LOSS;default:return Ov()}}(B_=L_||(L_={}))[B_.OK=0]="OK",B_[B_.CANCELLED=1]="CANCELLED",B_[B_.UNKNOWN=2]="UNKNOWN",B_[B_.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",B_[B_.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",B_[B_.NOT_FOUND=5]="NOT_FOUND",B_[B_.ALREADY_EXISTS=6]="ALREADY_EXISTS",B_[B_.PERMISSION_DENIED=7]="PERMISSION_DENIED",B_[B_.UNAUTHENTICATED=16]="UNAUTHENTICATED",B_[B_.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",B_[B_.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",B_[B_.ABORTED=10]="ABORTED",B_[B_.OUT_OF_RANGE=11]="OUT_OF_RANGE",B_[B_.UNIMPLEMENTED=12]="UNIMPLEMENTED",B_[B_.INTERNAL=13]="INTERNAL",B_[B_.UNAVAILABLE=14]="UNAVAILABLE",B_[B_.DATA_LOSS=15]="DATA_LOSS";var H_=function(){function e(){De(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return Re(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return K_}},{key:"getOrCreateInstance",value:function(){return null===K_&&(K_=new e),K_}}]),e}(),K_=null;function Q_(){return new TextEncoder}var G_=new _v([4294967295,4294967295],0);function Y_(e){var t=Q_().encode(e),n=new gv;return n.update(t),new Uint8Array(n.digest())}function X_(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new _v([n,i],0),new _v([r,a],0)]}var J_=function(){function e(t,n,i){if(De(this,e),this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Z_("Invalid padding: ".concat(n));if(i<0)throw new Z_("Invalid hash count: ".concat(i));if(t.length>0&&0===this.hashCount)throw new Z_("Invalid hash count: ".concat(i));if(0===t.length&&0!==n)throw new Z_("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=_v.fromNumber(this.It)}return Re(e,[{key:"Et",value:function(e,t,n){var i=e.add(t.multiply(_v.fromNumber(n)));return 1===i.compare(G_)&&(i=new _v([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=Ie(X_(Y_(e)),2),n=t[0],i=t[1],r=0;r<this.hashCount;r++){var a=this.Et(n,i,r);if(!this.At(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=Ie(X_(Y_(e)),2),n=t[0],i=t[1],r=0;r<this.hashCount;r++){var a=this.Et(n,i,r);this.Rt(a)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,i){var r=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),r,n);return i.forEach((function(e){return a.insert(e)})),a}}]),e}(),Z_=function(e){Le(n,e);var t=je(n);function n(){var e;return De(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return Re(n)}(Ve(Error)),ek=function(){function e(t,n,i,r,a){De(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}return Re(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,i){var r=new Map;return r.set(t,tk.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new e(Gv.min(),r,new uy(zv),Qg(),i_())}}]),e}(),tk=function(){function e(t,n,i,r,a){De(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}return Re(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,i){return new e(i,n,i_(),i_(),i_())}}]),e}(),nk=Re((function e(t,n,i,r){De(this,e),this.Pt=t,this.removedTargetIds=n,this.key=i,this.bt=r})),ik=Re((function e(t,n){De(this,e),this.targetId=t,this.Vt=n})),rk=Re((function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:my.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;De(this,e),this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=r})),ak=function(){function e(){De(this,e),this.St=0,this.Dt=uk(),this.Ct=my.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return Re(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=i_(),t=i_(),n=i_();return this.Dt.forEach((function(i,r){switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Ov()}})),new tk(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=uk()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),ok=function(){function e(t){De(this,e),this.Gt=t,this.Qt=new Map,this.jt=Qg(),this.zt=sk(),this.Wt=new uy(zv)}return Re(e,[{key:"Ht",value:function(e){var t,n=Pe(e.Pt);try{for(n.s();!(t=n.n()).done;){var i=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(i,e.bt):this.Yt(i,e.key,e.bt)}}catch(s){n.e(s)}finally{n.f()}var r,a=Pe(e.removedTargetIds);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.Yt(o,e.key,e.bt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var i=t.Zt(n);switch(e.state){case 0:t.te(n)&&i.$t(e.resumeToken);break;case 1:i.Ut(),i.kt||i.Ft(),i.$t(e.resumeToken);break;case 2:i.Ut(),i.kt||t.removeTarget(n);break;case 3:t.te(n)&&(i.Kt(),i.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),i.$t(e.resumeToken));break;default:Ov()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,i){n.te(i)&&t(i)}))}},{key:"ne",value:function(e){var t,n=e.targetId,i=e.Vt.count,r=this.se(n);if(r){var a=r.target;if(Eg(a))if(0===i){var o=new em(a.path);this.Yt(n,o,Gy.newNoDocument(o,Gv.min()))}else Av(1===i);else{var s=this.ie(n);if(s!==i){var u=this.re(e,s);if(0!==u){this.ee(n);var l=2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,l)}null===(t=H_.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var i,r,a,o,s,u,l={localCacheCount:t,existenceFilterCount:n.count},c=n.unchangedNames;return c&&(l.bloomFilter={applied:0===e,hashCount:null!==(i=null==c?void 0:c.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(o=null===(a=null===(r=null==c?void 0:c.bits)||void 0===r?void 0:r.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(u=null===(s=null==c?void 0:c.bits)||void 0===s?void 0:s.padding)&&void 0!==u?u:0}),l}(u,s,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,i=n.unchangedNames,r=n.count;if(!i||!i.bits)return 1;var a,o,s=i.bits,u=s.bitmap,l=void 0===u?"":u,c=s.padding,h=void 0===c?0:c,d=i.hashCount,f=void 0===d?0:d;try{a=ky(l).toUint8Array()}catch(e){if(e instanceof vy)return Iv("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new J_(a,h,f)}catch(e){return Iv(e instanceof Z_?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:r!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,i=this.Gt.getRemoteKeysForTarget(e),r=0;return i.forEach((function(i){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(i.path.canonicalString());t.vt(o)||(n.Yt(e,i,null),r++)})),r}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(i,r){var a=t.se(r);if(a){if(i.current&&Eg(a.target)){var o=new em(a.target.path);null!==t.jt.get(o)||t.ae(r,o)||t.Yt(r,o,Gy.newNoDocument(o,e))}i.Mt&&(n.set(r,i.Ot()),i.Ft())}}));var i=i_();this.zt.forEach((function(e,n){var r=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(r=!1,!1)})),r&&(i=i.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var r=new ek(e,n,this.Wt,this.jt,i);return this.jt=Qg(),this.zt=sk(),this.Wt=new uy(zv),r}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new ak,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new hy(zv),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||Cv("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new ak),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function sk(){return new uy(em.comparator)}function uk(){return new uy(em.comparator)}var lk={asc:"ASCENDING",desc:"DESCENDING"},ck={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hk={and:"AND",or:"OR"},dk=Re((function e(t,n){De(this,e),this.databaseId=t,this.useProto3Json=n}));function fk(e,t){return e.useProto3Json||Im(t)?t:{value:t}}function pk(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function vk(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function mk(e,t){return pk(e,t.toTimestamp())}function yk(e){return Av(!!e),Gv.fromTimestamp(function(e){var t=gy(e);return new Qv(t.seconds,t.nanos)}(e))}function gk(e,t){return function(e){return new Xv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function _k(e){var t=Xv.fromString(e);return Av(qk(t)),t}function kk(e,t){return gk(e.databaseId,t.path)}function wk(e,t){var n=_k(t);if(n.get(1)!==e.databaseId.projectId)throw new Rv(Mv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Rv(Mv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new em(Ck(n))}function bk(e,t){return gk(e.databaseId,t)}function xk(e){var t=_k(e);return 4===t.length?Xv.emptyPath():Ck(t)}function Ek(e){return new Xv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ck(e){return Av(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Tk(e,t,n){return{name:kk(e,t),fields:n.value.mapValue.fields}}function Ik(e,t,n){var i=wk(e,t.name),r=yk(t.updateTime),a=t.createTime?yk(t.createTime):Gv.min(),o=new Ky({mapValue:{fields:t.fields}}),s=Gy.newFoundDocument(i,r,a,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Sk(e,t){return"found"in t?function(e,t){Av(!!t.found),t.found.name,t.found.updateTime;var n=wk(e,t.found.name),i=yk(t.found.updateTime),r=t.found.createTime?yk(t.found.createTime):Gv.min(),a=new Ky({mapValue:{fields:t.found.fields}});return Gy.newFoundDocument(n,i,r,a)}(e,t):"missing"in t?function(e,t){Av(!!t.missing),Av(!!t.readTime);var n=wk(e,t.missing),i=yk(t.readTime);return Gy.newNoDocument(n,i)}(e,t):Ov()}function Ok(e,t){var n;if(t instanceof D_)n={update:Tk(e,t.key,t.value)};else if(t instanceof F_)n={delete:kk(e,t.key)};else if(t instanceof M_)n={update:Tk(e,t.key,t.data),updateMask:Vk(t.fieldMask)};else{if(!(t instanceof j_))return Ov();n={verify:kk(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof f_)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof p_)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof m_)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof g_)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw Ov()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:mk(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ov()}(e,t.precondition)),n}function Ak(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?x_.updateTime(yk(e.updateTime)):void 0!==e.exists?x_.exists(e.exists):x_.none()}(t.currentDocument):x_.none(),i=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Av("REQUEST_TIME"===t.setToServerValue),n=new f_;else if("appendMissingElements"in t){var i=t.appendMissingElements.values||[];n=new p_(i)}else if("removeAllFromArray"in t){var r=t.removeAllFromArray.values||[];n=new m_(r)}else"increment"in t?n=new g_(e,t.increment):Ov();var a=Zv.fromServerFormat(t.fieldPath);return new w_(a,n)}(e,t)})):[];if(t.update){t.update.name;var r=wk(e,t.update.name),a=new Ky({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new py(t.map((function(e){return Zv.fromServerFormat(e)})))}(t.updateMask);return new M_(r,a,o,n,i)}return new D_(r,a,n,i)}if(t.delete){var s=wk(e,t.delete);return new F_(s,n)}if(t.verify){var u=wk(e,t.verify);return new j_(u,n)}return Ov()}function Dk(e,t){return{documents:[bk(e,t.path)]}}function Mk(e,t){var n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n.parent=bk(e,i),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=bk(e,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);var r=function(e){if(0!==e.length)return Uk(ig.create(e,"and"))}(t.filters);r&&(n.structuredQuery.where=r);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Fk(e.field),direction:Nk(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=fk(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Rk(e){var t=xk(e.parent),n=e.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){Av(1===i);var a=n.from[0];a.allDescendants?r=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Pk(e);return t instanceof ig&&og(t)?t.getFilters():[t]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Zy(jk(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return Im(t="object"==typeof e?e.value:e)?null:t}(n.limit));var l=null;n.startAt&&(l=function(e){var t=!!e.before,n=e.values||[];return new Yy(n,t)}(n.startAt));var c=null;return n.endAt&&(c=function(e){var t=!e.before,n=e.values||[];return new Yy(n,t)}(n.endAt)),Og(t,r,s,o,u,"F",l,c)}function Pk(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=jk(e.unaryFilter.field);return ng.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=jk(e.unaryFilter.field);return ng.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var i=jk(e.unaryFilter.field);return ng.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var r=jk(e.unaryFilter.field);return ng.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Ov()}}(e):void 0!==e.fieldFilter?function(e){return ng.create(jk(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ov()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ig.create(e.compositeFilter.filters.map((function(e){return Pk(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ov()}}(e.compositeFilter.op))}(e):Ov()}function Nk(e){return lk[e]}function Lk(e){return ck[e]}function Bk(e){return hk[e]}function Fk(e){return{fieldPath:e.canonicalString()}}function jk(e){return Zv.fromServerFormat(e.fieldPath)}function Uk(e){return e instanceof ng?function(e){if("=="===e.op){if(jy(e.value))return{unaryFilter:{field:Fk(e.field),op:"IS_NAN"}};if(Fy(e.value))return{unaryFilter:{field:Fk(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(jy(e.value))return{unaryFilter:{field:Fk(e.field),op:"IS_NOT_NAN"}};if(Fy(e.value))return{unaryFilter:{field:Fk(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fk(e.field),op:Lk(e.op),value:e.value}}}(e):e instanceof ig?function(e){var t=e.getFilters().map((function(e){return Uk(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Bk(e.op),filters:t}}}(e):Ov()}function Vk(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function qk(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var $k=function(){function e(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Gv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Gv.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:my.EMPTY_BYTE_STRING,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;De(this,e),this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=u}return Re(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Wk=Re((function e(t){De(this,e),this.fe=t}));function zk(e,t){var n=t.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Hk(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(e,t){return{name:kk(e,t.key),fields:t.data.value.mapValue.fields,updateTime:pk(e,t.version.toTimestamp()),createTime:pk(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Kk(t.version)};else{if(!t.isUnknownDocument())return Ov();i.unknownDocument={path:n.path.toArray(),version:Kk(t.version)}}return i}function Hk(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Kk(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Qk(e){var t=new Qv(e.seconds,e.nanoseconds);return Gv.fromTimestamp(t)}function Gk(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Ak(e.fe,t)})),i=0;i<t.mutations.length-1;++i){var r=t.mutations[i];if(i+1<t.mutations.length&&void 0!==t.mutations[i+1].transform){var a=t.mutations[i+1];r.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}var o=t.mutations.map((function(t){return Ak(e.fe,t)})),s=Qv.fromMillis(t.localWriteTimeMs);return new U_(t.batchId,s,n,o)}function Yk(e){var t,n,i=Qk(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?Qk(e.lastLimboFreeSnapshotVersion):Gv.min();return void 0!==e.query.documents?(Av(1===(n=e.query).documents.length),t=Lg(Ag(xk(n.documents[0])))):t=function(e){return Lg(Rk(e))}(e.query),new $k(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,i,r,my.fromBase64String(e.resumeToken))}function Xk(e,t){var n,i=Kk(t.snapshotVersion),r=Kk(t.lastLimboFreeSnapshotVersion);n=Eg(t.target)?Dk(e.fe,t.target):Mk(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:bg(t.target),readTime:i,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:n}}function Jk(e){var t=Rk({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Fg(t,t.limit,"L"):t}function Zk(e,t){return new q_(t.largestBatchId,Ak(e.fe,t.overlayMutation))}function ew(e,t){var n=t.path.lastSegment();return[e,Am(t.path.popLast()),n]}function tw(e,t,n,i){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Kk(i.readTime),documentKey:Am(i.documentKey.path),largestBatchId:i.largestBatchId}}var nw=function(){function e(){De(this,e)}return Re(e,[{key:"getBundleMetadata",value:function(e,t){return iw(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Qk(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return iw(e).put({bundleId:(n=t).id,createTime:Kk(yk(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return rw(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Jk(t.bundledQuery),readTime:Qk(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return rw(e).put(function(e){return{name:e.name,readTime:Kk(yk(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function iw(e){return ry(e,"bundles")}function rw(e){return ry(e,"namedQueries")}var aw=function(){function e(t,n){De(this,e),this.serializer=t,this.userId=n}return Re(e,[{key:"getOverlay",value:function(e,t){var n=this;return ow(e).get(ew(this.userId,t)).next((function(e){return e?Zk(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,i=Jg();return pm.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&i.set(t,e)}))})).next((function(){return i}))}},{key:"saveOverlays",value:function(e,t,n){var i=this,r=[];return n.forEach((function(n,a){var o=new q_(t,a);r.push(i.we(e,o))})),pm.waitFor(r)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var i=this,r=new Set;t.forEach((function(e){return r.add(Am(e.getCollectionPath()))}));var a=[];return r.forEach((function(t){var r=IDBKeyRange.bound([i.userId,t,n],[i.userId,t,n+1],!1,!0);a.push(ow(e).J("collectionPathOverlayIndex",r))})),pm.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var i=this,r=Jg(),a=Am(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ow(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=Pe(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Zk(i.serializer,a);r.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return r}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,i){var r,a=this,o=Jg(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ow(e).X({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=Zk(a.serializer,t);o.size()<i||s.largestBatchId===r?(o.set(s.getKey(),s),r=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return ow(e).put(function(e,t,n){var i=Ie(ew(t,n.mutation.key),3);i[0];return{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ok(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function ow(e){return ry(e,"documentOverlays")}var sw=function(){function e(){De(this,e)}return Re(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(_y(e.integerValue));else if("doubleValue"in e){var n=_y(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Sm(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var i=e.timestampValue;this.ye(t,20),"string"==typeof i?t.Ie(i):(t.Ie("".concat(i.seconds||"")),t.pe(i.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ky(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?qy(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ov()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var i=0,r=Object.keys(n);i<r.length;i++){var a=r[i];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var i,r=Pe(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.me(a,t)}}catch(o){r.e(o)}finally{r.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),em.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function uw(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function lw(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var i=uw(255&e[n]);if(t+=i,8!==i)break}return t}(e);return Math.ceil(t/8)}sw.Ve=new sw;var cw=function(){function e(){De(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Re(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=Pe(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,r=i.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(i<"\ud800"||"\udbff"<i)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{var a=i.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=Pe(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,r=i.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(i<"\ud800"||"\udbff"<i)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{var a=i.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=lw(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}},{key:"Le",value:function(e){var t=this.Fe(e),n=lw(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var i=1;i<t.length;++i)t[i]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}}]),e}(),hw=function(){function e(t){De(this,e),this.je=t}return Re(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),dw=function(){function e(t){De(this,e),this.je=t}return Re(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),fw=function(){function e(){De(this,e),this.je=new cw,this.ze=new hw(this.je),this.We=new dw(this.je)}return Re(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),pw=function(){function e(t,n,i,r){De(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}return Re(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new e(this.indexId,this.documentKey,this.arrayValue,i)}}]),e}();function vw(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=mw(e.arrayValue,t.arrayValue))?n:0!==(n=mw(e.directionalValue,t.directionalValue))?n:em.comparator(e.documentKey,t.documentKey)}function mw(e,t){for(var n=0;n<e.length&&n<t.length;++n){var i=e[n]-t[n];if(0!==i)return i}return e.length-t.length}var yw=function(){function e(t){De(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,i=Pe(t.filters);try{for(i.s();!(n=i.n()).done;){var r=n.value;r.isInequality()?this.Ze=r:this.Xe.push(r)}}catch(a){i.e(a)}finally{i.f()}}return Re(e,[{key:"tn",value:function(e){Av(e.collectionGroup===this.collectionId);var t=nm(e);if(void 0!==t&&!this.en(t))return!1;for(var n=im(e),i=0,r=0;i<n.length&&this.en(n[i]);++i);if(i===n.length)return!0;if(void 0!==this.Ze){var a=n[i];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[r++],a))return!1;++i}for(;i<n.length;++i){var o=n[i];if(r>=this.Ye.length||!this.sn(this.Ye[r++],o))return!1}return!0}},{key:"en",value:function(e){var t,n=Pe(this.Xe);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(this.nn(i,e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function gw(e){var t,n;if(Av(e instanceof ng||e instanceof ig),e instanceof ng){if(e instanceof yg){var i=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return ng.create(e.field,"==",t)})))||[];return ig.create(i,"or")}return e}var r=e.filters.map((function(e){return gw(e)}));return ig.create(r,e.op)}function _w(e){if(0===e.getFilters().length)return[];var t=xw(gw(e));return Av(bw(t)),kw(t)||ww(t)?[t]:t.getFilters()}function kw(e){return e instanceof ng}function ww(e){return e instanceof ig&&og(e)}function bw(e){return kw(e)||ww(e)||function(e){if(e instanceof ig&&ag(e)){var t,n=Pe(e.getFilters());try{for(n.s();!(t=n.n()).done;){var i=t.value;if(!kw(i)&&!ww(i))return!1}}catch(r){n.e(r)}finally{n.f()}return!0}return!1}(e)}function xw(e){if(Av(e instanceof ng||e instanceof ig),e instanceof ng)return e;if(1===e.filters.length)return xw(e.filters[0]);var t=e.filters.map((function(e){return xw(e)})),n=ig.create(t,e.op);return bw(n=Tw(n))?n:(Av(n instanceof ig),Av(rg(n)),Av(n.filters.length>1),n.filters.reduce((function(e,t){return Ew(e,t)})))}function Ew(e,t){var n;return Av(e instanceof ng||e instanceof ig),Av(t instanceof ng||t instanceof ig),n=e instanceof ng?t instanceof ng?function(e,t){return ig.create([e,t],"and")}(e,t):Cw(e,t):t instanceof ng?Cw(t,e):function(e,t){if(Av(e.filters.length>0&&t.filters.length>0),rg(e)&&rg(t))return cg(e,t.getFilters());var n=ag(e)?e:t,i=ag(e)?t:e,r=n.filters.map((function(e){return Ew(e,i)}));return ig.create(r,"or")}(e,t),Tw(n)}function Cw(e,t){if(rg(t))return cg(t,e.getFilters());var n=t.filters.map((function(t){return Ew(e,t)}));return ig.create(n,"or")}function Tw(e){if(Av(e instanceof ng||e instanceof ig),e instanceof ng)return e;var t=e.getFilters();if(1===t.length)return Tw(t[0]);if(sg(e))return e;var n=t.map((function(e){return Tw(e)})),i=[];return n.forEach((function(t){t instanceof ng?i.push(t):t instanceof ig&&(t.op===e.op?i.push.apply(i,Vt(t.filters)):i.push(t))})),1===i.length?i[0]:ig.create(i,e.op)}var Iw=function(){function e(){De(this,e),this.rn=new Sw}return Re(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),pm.resolve()}},{key:"getCollectionParents",value:function(e,t){return pm.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return pm.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return pm.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return pm.resolve(null)}},{key:"getIndexType",value:function(e,t){return pm.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return pm.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return pm.resolve(null)}},{key:"getMinOffset",value:function(e,t){return pm.resolve(um.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return pm.resolve(um.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return pm.resolve()}},{key:"updateIndexEntries",value:function(e,t){return pm.resolve()}}]),e}(),Sw=function(){function e(){De(this,e),this.index={}}return Re(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new hy(Xv.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new hy(Xv.comparator)).toArray()}}]),e}(),Ow=new Uint8Array(0),Aw=function(){function e(t,n){De(this,e),this.user=t,this.databaseId=n,this.on=new Sw,this.un=new Hg((function(e){return bg(e)}),(function(e,t){return xg(e,t)})),this.uid=t.uid||""}return Re(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:i,parent:Am(r)};return Dw(e).put(a)}return pm.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],i=IDBKeyRange.bound([t,""],[Kv(t),""],!1,!0);return Dw(e).j(i).next((function(e){var i,r=Pe(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a.collectionId!==t)break;n.push(Rm(a.parent))}}catch(o){r.e(o)}finally{r.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,i=Rw(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete r.indexId;var a=i.add(r);if(t.indexState){var o=Pw(e);return a.next((function(e){o.put(tw(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Rw(e),i=Pw(e),r=Mw(e);return n.delete(t.indexId).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,i=Mw(e),r=!0,a=new Map;return pm.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){r&&(r=!!e),a.set(t,e)}))})).next((function(){if(r){var e=i_(),o=[];return pm.forEach(a,(function(r,a){var s;Cv("IndexedDbIndexManager","Using index ".concat((s=r,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(bg(t)));var u=function(e,t){var n=nm(t);if(void 0===n)return null;var i,r=Pe(Cg(e,n.fieldPath));try{for(r.s();!(i=r.n()).done;){var a=i.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){r.e(o)}finally{r.f()}return null}(a,r),l=function(e,t){var n,i=new Map,r=Pe(im(t));try{for(r.s();!(n=r.n()).done;){var a,o=n.value,s=Pe(Cg(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":i.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return i.set(o.fieldPath.canonicalString(),u.value),Array.from(i.values())}}}catch(l){s.e(l)}finally{s.f()}}}catch(l){r.e(l)}finally{r.f()}return null}(a,r),c=function(e,t){var n,i=[],r=!0,a=Pe(im(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Tg(e,o.fieldPath,e.startAt):Ig(e,o.fieldPath,e.startAt);i.push(s.value),r&&(r=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Yy(i,r)}(a,r),h=function(e,t){var n,i=[],r=!0,a=Pe(im(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?Ig(e,o.fieldPath,e.endAt):Tg(e,o.fieldPath,e.endAt);i.push(s.value),r&&(r=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new Yy(i,r)}(a,r),d=n.hn(r,a,c),f=n.hn(r,a,h),p=n.ln(r,a,l),v=n.fn(r.indexId,u,d,c.inclusive,f,h.inclusive,p);return pm.forEach(v,(function(n){return i.H(n,t.limit).next((function(t){t.forEach((function(t){var n=em.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return pm.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:_w(ig.create(e.filters,"and")).map((function(t){return wg(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,i,r,a,o){for(var s=this,u=(null!=t?t.length:1)*Math.max(n.length,r.length),l=u/(null!=t?t.length:1),c=[],h=function(){var u=t?s.dn(t[d/l]):Ow,h=s.wn(e,u,n[d%l],i),f=s._n(e,u,r[d%l],a),p=o.map((function(t){return s.wn(e,u,t,!0)}));c.push.apply(c,Vt(s.createRange(h,f,p)))},d=0;d<u;++d)h();return c}},{key:"wn",value:function(e,t,n,i){var r=new pw(e,em.empty(),t,n);return i?r:r.Je()}},{key:"_n",value:function(e,t,n,i){var r=new pw(e,em.empty(),t,n);return i?r.Je():r}},{key:"an",value:function(e,t){var n=new yw(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((function(e){var t,i=null,r=Pe(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.tn(a)&&(!i||a.fields.length>i.fields.length)&&(i=a)}}catch(o){r.e(o)}finally{r.f()}return i}))}},{key:"getIndexType",value:function(e,t){var n=this,i=2,r=this.cn(t);return pm.forEach(r,(function(t){return n.an(e,t).next((function(e){e?0!==i&&e.fields.length<function(e){var t,n=new hy(Zv.comparator),i=!1,r=Pe(e.filters);try{for(r.s();!(t=r.n()).done;){var a,o=Pe(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var s=a.value;s.field.isKeyField()||("array-contains"===s.op||"array-contains-any"===s.op?i=!0:n=n.add(s.field))}}catch(h){o.e(h)}finally{o.f()}}}catch(h){r.e(h)}finally{r.f()}var u,l=Pe(e.orderBy);try{for(l.s();!(u=l.n()).done;){var c=u.value;c.field.isKeyField()||(n=n.add(c.field))}}catch(h){l.e(h)}finally{l.f()}return n.size+(i?1:0)}(t)&&(i=1):i=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&r.length>1&&2===i?1:i}))}},{key:"mn",value:function(e,t){var n,i=new fw,r=Pe(im(e));try{for(r.s();!(n=r.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=i.He(a.kind);sw.Ve._e(o,s)}}catch(u){r.e(u)}finally{r.f()}return i.Qe()}},{key:"dn",value:function(e){var t=new fw;return sw.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new fw;return sw.Ve._e(Ny(this.databaseId,t),n.He(function(e){var t=im(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var i=[];i.push(new fw);var r,a=0,o=Pe(im(e));try{for(o.s();!(r=o.n()).done;){var s,u=r.value,l=n[a++],c=Pe(i);try{for(c.s();!(s=c.n()).done;){var h=s.value;if(this.yn(t,u.fieldPath)&&By(l))i=this.pn(i,u,l);else{var d=h.He(u.kind);sw.Ve._e(l,d)}}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return this.In(i)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var i,r=Vt(e),a=[],o=Pe(n.arrayValue.values||[]);try{for(o.s();!(i=o.n()).done;){var s,u=i.value,l=Pe(r);try{for(l.s();!(s=l.n()).done;){var c=s.value,h=new fw;h.seed(c.Qe()),sw.Ve._e(u,h.He(t.kind)),a.push(h)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof ng&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,i=Rw(e),r=Pw(e);return(t?i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.j()).next((function(e){var t=[];return pm.forEach(e,(function(e){return r.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new am(t.sequenceNumber,new um(Qk(t.readTime),new em(Rm(t.documentKey)),t.largestBatchId)):am.empty(),i=e.fields.map((function(e){var t=Ie(e,2),n=t[0],i=t[1];return new rm(Zv.fromServerFormat(n),i)}));return new tm(e.indexId,e.collectionGroup,i,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:zv(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var i=this,r=Rw(e),a=Pw(e);return this.Tn(e).next((function(e){return r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return pm.forEach(t,(function(t){return a.put(tw(t.indexId,i.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,i=new Map;return pm.forEach(t,(function(t,r){var a=i.get(t.collectionGroup);return(a?pm.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return i.set(t.collectionGroup,a),pm.forEach(a,(function(i){return n.En(e,t,i).next((function(t){var a=n.An(r,i);return t.isEqual(a)?pm.resolve():n.vn(e,r,i,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,i){return Mw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,i){return Mw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var i=Mw(e),r=new hy(vw);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,i){r=r.add(new pw(n.indexId,t,i.arrayValue,i.directionalValue))})).next((function(){return r}))}},{key:"An",value:function(e,t){var n=new hy(vw),i=this.mn(t,e);if(null==i)return n;var r=nm(t);if(null!=r){var a=e.data.field(r.fieldPath);if(By(a)){var o,s=Pe(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new pw(t.indexId,e.key,this.dn(u),i))}}catch(l){s.e(l)}finally{s.f()}}}else n=n.add(new pw(t.indexId,e.key,Ow,i));return n}},{key:"vn",value:function(e,t,n,i,r){var a=this;Cv("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,i,r){for(var a=e.getIterator(),o=t.getIterator(),s=fy(a),u=fy(o);s||u;){var l=!1,c=!1;if(s&&u){var h=n(s,u);h<0?c=!0:h>0&&(l=!0)}else null!=s?c=!0:l=!0;l?(i(u),u=fy(o)):c?(r(s),s=fy(a)):(s=fy(a),u=fy(o))}}(i,r,vw,(function(i){o.push(a.Rn(e,t,n,i))}),(function(i){o.push(a.Pn(e,t,n,i))})),pm.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return Pw(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,i){i.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return vw(e,t)})).filter((function(e,t,n){return!t||0!==vw(e,n[t-1])}));var i=[];i.push(e);var r,a=Pe(n);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=vw(o,e),u=vw(o,t);if(0===s)i[0]=e.Je();else if(s>0&&u<0)i.push(o),i.push(o.Je());else if(u>0)break}}catch(f){a.e(f)}finally{a.f()}i.push(t);for(var l=[],c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];var h=[i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,Ow,[]],d=[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,Ow,[]];l.push(IDBKeyRange.bound(h,d))}return l}},{key:"bn",value:function(e,t){return vw(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Nw)}},{key:"getMinOffset",value:function(e,t){var n=this;return pm.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||Ov()}))})).next(Nw)}}]),e}();function Dw(e){return ry(e,"collectionParents")}function Mw(e){return ry(e,"indexEntries")}function Rw(e){return ry(e,"indexConfiguration")}function Pw(e){return ry(e,"indexState")}function Nw(e){Av(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,i=1;i<e.length;i++){var r=e[i].indexState.offset;lm(r,t)<0&&(t=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new um(t.readTime,t.documentKey,n)}var Lw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bw=function(){function e(t,n,i){De(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}return Re(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Fw(e,t,n){var i=e.store("mutations"),r=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=i.X({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){Av(1===s)})));var l,c=[],h=Pe(n.mutations);try{for(h.s();!(l=h.n()).done;){var d=l.value,f=Lm(t,d.key.path,n.batchId);a.push(r.delete(f)),c.push(d.key)}}catch(p){h.e(p)}finally{h.f()}return pm.waitFor(a).next((function(){return c}))}function jw(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ov();t=e.noDocument}return JSON.stringify(t).length}Bw.DEFAULT_COLLECTION_PERCENTILE=10,Bw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bw.DEFAULT=new Bw(41943040,Bw.DEFAULT_COLLECTION_PERCENTILE,Bw.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bw.DISABLED=new Bw(-1,0,0);var Uw=function(){function e(t,n,i,r){De(this,e),this.userId=t,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Vn={}}return Re(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qw(e).X({index:"userMutationsIndex",range:n},(function(e,n,i){t=!1,i.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,i){var r=this,a=$w(e),o=qw(e);return o.add({}).next((function(s){Av("number"==typeof s);var u,l=new U_(s,t,n,i),c=function(e,t,n){var i=n.baseMutations.map((function(t){return Ok(e.fe,t)})),r=n.mutations.map((function(t){return Ok(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:i,mutations:r}}(r.serializer,r.userId,l),h=[],d=new hy((function(e,t){return zv(e.canonicalString(),t.canonicalString())})),f=Pe(i);try{for(f.s();!(u=f.n()).done;){var p=u.value,v=Lm(r.userId,p.key.path,s);d=d.add(p.key.path.popLast()),h.push(o.put(c)),h.push(a.put(v,Bm))}}catch(m){f.e(m)}finally{f.f()}return d.forEach((function(t){h.push(r.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){r.Vn[s]=l.keys()})),pm.waitFor(h).next((function(){return l}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return qw(e).get(t).next((function(e){return e?(Av(e.userId===n.userId),Gk(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?pm.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var i=e.keys();return n.Vn[t]=i,i}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]),a=null;return qw(e).X({index:"userMutationsIndex",range:r},(function(e,t,r){t.userId===n.userId&&(Av(t.batchId>=i),a=Gk(n.serializer,t)),r.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return qw(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,i){n=t.batchId,i.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qw(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return Gk(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,i=Nm(this.userId,t.path),r=IDBKeyRange.lowerBound(i),a=[];return $w(e).X({range:r},(function(i,r,o){var s=Ie(i,3),u=s[0],l=s[1],c=s[2],h=Rm(l);if(u===n.userId&&t.path.isEqual(h))return qw(e).get(c).next((function(e){if(!e)throw Ov();Av(e.userId===n.userId),a.push(Gk(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,i=new hy(zv),r=[];return t.forEach((function(t){var a=Nm(n.userId,t.path),o=IDBKeyRange.lowerBound(a),s=$w(e).X({range:o},(function(e,r,a){var o=Ie(e,3),s=o[0],u=o[1],l=o[2],c=Rm(u);s===n.userId&&t.path.isEqual(c)?i=i.add(l):a.done()}));r.push(s)})),pm.waitFor(r).next((function(){return n.Dn(e,i)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,i=t.path,r=i.length+1,a=Nm(this.userId,i),o=IDBKeyRange.lowerBound(a),s=new hy(zv);return $w(e).X({range:o},(function(e,t,a){var o=Ie(e,3),u=o[0],l=o[1],c=o[2],h=Rm(l);u===n.userId&&i.isPrefixOf(h)?h.length===r&&(s=s.add(c)):a.done()})).next((function(){return n.Dn(e,s)}))}},{key:"Dn",value:function(e,t){var n=this,i=[],r=[];return t.forEach((function(t){r.push(qw(e).get(t).next((function(e){if(null===e)throw Ov();Av(e.userId===n.userId),i.push(Gk(n.serializer,e))})))})),pm.waitFor(r).next((function(){return i}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Fw(e.ht,this.userId,t).next((function(i){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),pm.forEach(i,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return pm.resolve();var i=IDBKeyRange.lowerBound([t.userId]),r=[];return $w(e).X({range:i},(function(e,n,i){if(e[0]===t.userId){var a=Rm(e[1]);r.push(a)}else i.done()})).next((function(){Av(0===r.length)}))}))}},{key:"containsKey",value:function(e,t){return Vw(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return Ww(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,i,r){return Av(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,i,r)}}]),e}();function Vw(e,t,n){var i=Nm(t,n.path),r=i[1],a=IDBKeyRange.lowerBound(i),o=!1;return $w(e).X({range:a,Y:!0},(function(e,n,i){var a=Ie(e,3),s=a[0],u=a[1];a[2];s===t&&u===r&&(o=!0),i.done()})).next((function(){return o}))}function qw(e){return ry(e,"mutations")}function $w(e){return ry(e,"documentMutations")}function Ww(e){return ry(e,"mutationQueues")}var zw=function(){function e(t){De(this,e),this.Nn=t}return Re(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),Hw=function(){function e(t,n){De(this,e),this.referenceDelegate=t,this.serializer=n}return Re(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var i=new zw(n.highestTargetId);return n.highestTargetId=i.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return Gv.fromTimestamp(new Qv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var i=this;return this.$n(e).next((function(r){return r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),i.On(e,r)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(i){return i.targetCount+=1,n.Bn(t,i),n.On(e,i)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Kw(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return Av(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var i=this,r=0,a=[];return Kw(e).X((function(o,s){var u=Yk(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r++,a.push(i.removeTargetData(e,u)))})).next((function(){return pm.waitFor(a)})).next((function(){return r}))}},{key:"forEachTarget",value:function(e,t){return Kw(e).X((function(e,n){var i=Yk(n);t(i)}))}},{key:"$n",value:function(e){return Qw(e).get("targetGlobalKey").next((function(e){return Av(null!==e),e}))}},{key:"On",value:function(e,t){return Qw(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return Kw(e).put(Xk(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=bg(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),r=null;return Kw(e).X({range:i,index:"queryTargetsIndex"},(function(e,n,i){var a=Yk(n);xg(t,a.target)&&(r=a,i.done())})).next((function(){return r}))}},{key:"addMatchingKeys",value:function(e,t,n){var i=this,r=[],a=Gw(e);return t.forEach((function(t){var o=Am(t.path);r.push(a.put({targetId:n,path:o})),r.push(i.referenceDelegate.addReference(e,n,t))})),pm.waitFor(r)}},{key:"removeMatchingKeys",value:function(e,t,n){var i=this,r=Gw(e);return pm.forEach(t,(function(t){var a=Am(t.path);return pm.waitFor([r.delete([n,a]),i.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Gw(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),i=Gw(e),r=i_();return i.X({range:n,Y:!0},(function(e,t,n){var i=Rm(e[1]),a=new em(i);r=r.add(a)})).next((function(){return r}))}},{key:"containsKey",value:function(e,t){var n=Am(t.path),i=IDBKeyRange.bound([n],[Kv(n)],!1,!0),r=0;return Gw(e).X({index:"documentTargetsIndex",Y:!0,range:i},(function(e,t,n){var i=Ie(e,2),a=i[0];i[1];0!==a&&(r++,n.done())})).next((function(){return r>0}))}},{key:"le",value:function(e,t){return Kw(e).get(t).next((function(e){return e?Yk(e):null}))}}]),e}();function Kw(e){return ry(e,"targets")}function Qw(e){return ry(e,"targetGlobal")}function Gw(e){return ry(e,"targetDocuments")}function Yw(e,t){var n=Ie(e,2),i=n[0],r=n[1],a=Ie(t,2),o=a[0],s=a[1],u=zv(i,o);return 0===u?zv(r,s):u}var Xw=function(){function e(t){De(this,e),this.Ln=t,this.buffer=new hy(Yw),this.qn=0}return Re(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Yw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Jw=function(){function e(t,n,i){De(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Gn=null}return Re(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;Cv("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!_m(e.t0)){e.next=12;break}Cv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,dm(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Zw=function(){function e(t,n){De(this,e),this.jn=t,this.params=n}return Re(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return pm.resolve(Tm.ct);var i=new Xw(t);return this.jn.forEachTarget(e,(function(e){return i.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return i.Kn(e)}))})).next((function(){return i.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Cv("LruGarbageCollector","Garbage collection skipped; disabled"),pm.resolve(Lw)):this.getCacheSize(e).next((function(i){return i<n.params.cacheSizeCollectionThreshold?(Cv("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(i," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Lw):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,i,r,a,o,s,u,l=this,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(Cv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(l.params.maximumSequenceNumbersToCollect," from ").concat(t)),i=l.params.maximumSequenceNumbersToCollect):i=t,a=Date.now(),l.nthSequenceNumber(e,i)})).next((function(i){return n=i,o=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return r=t,s=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),Ev()<=Qt.DEBUG&&Cv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-c,"ms\n\tDetermined least recently used ").concat(i," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(r," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-c,"ms")),pm.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:e})}))}}]),e}();function eb(e,t){return new Zw(e,t)}var tb=function(){function e(t,n){De(this,e),this.db=t,this.garbageCollector=eb(this,n)}return Re(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return nb(e,n)}},{key:"removeReference",value:function(e,t,n){return nb(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return nb(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return Ww(e).Z((function(i){return Vw(e,i,t).next((function(e){return e&&(n=!0),pm.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],a=0;return this.Yn(e,(function(o,s){if(s<=t){var u=n.Xn(e,o).next((function(t){if(!t)return a++,i.getEntry(e,o).next((function(){return i.removeEntry(o,Gv.min()),Gw(e).delete([0,Am(o.path)])}))}));r.push(u)}})).next((function(){return pm.waitFor(r)})).next((function(){return i.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return nb(e,t)}},{key:"Yn",value:function(e,t){var n,i=Gw(e),r=Tm.ct;return i.X({index:"documentTargetsIndex"},(function(e,i){var a=Ie(e,2),o=a[0],s=(a[1],i.path),u=i.sequenceNumber;0===o?(r!==Tm.ct&&t(new em(Rm(n)),r),r=u,n=s):r=Tm.ct})).next((function(){r!==Tm.ct&&t(new em(Rm(n)),r)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function nb(e,t){return Gw(e).put(function(e,t){return{targetId:0,path:Am(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var ib=function(){function e(){De(this,e),this.changes=new Hg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Re(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Gy.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?pm.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),rb=function(){function e(t){De(this,e),this.serializer=t}return Re(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return ub(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return ub(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Hk(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(i){return i.byteSize+=t,n.Zn(e,i)}))}},{key:"getEntry",value:function(e,t){var n=this,i=Gy.newInvalidDocument(t);return ub(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(lb(t))},(function(e,r){i=n.ts(t,r)})).next((function(){return i}))}},{key:"es",value:function(e,t){var n=this,i={size:0,document:Gy.newInvalidDocument(t)};return ub(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(lb(t))},(function(e,r){i={document:n.ts(t,r),size:jw(r)}})).next((function(){return i}))}},{key:"getEntries",value:function(e,t){var n=this,i=Qg();return this.ns(e,t,(function(e,t){var r=n.ts(e,t);i=i.insert(e,r)})).next((function(){return i}))}},{key:"ss",value:function(e,t){var n=this,i=Qg(),r=new uy(em.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);i=i.insert(e,a),r=r.insert(e,jw(t))})).next((function(){return{documents:i,rs:r}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return pm.resolve();var i=new hy(hb);t.forEach((function(e){return i=i.add(e)}));var r=IDBKeyRange.bound(lb(i.first()),lb(i.last())),a=i.getIterator(),o=a.getNext();return ub(e).X({index:"documentKeyIndex",range:r},(function(e,t,i){for(var r=em.fromSegments([].concat(Vt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&hb(o,r)<0;)n(o,null),o=a.getNext();o&&o.isEqual(r)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?i.G(lb(o)):i.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,i){var r=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Hk(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ub(e).j(IDBKeyRange.bound(o,s,!0)).next((function(e){var n,a=Qg(),o=Pe(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,u=r.ts(em.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);u.isFoundDocument()&&(qg(t,u)||i.has(u.key))&&(a=a.insert(u.key,u))}}catch(l){o.e(l)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,i){var r=this,a=Qg(),o=cb(t,n),s=cb(t,um.max());return ub(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=r.ts(em.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===i&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new ob(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return sb(e).get("remoteDocumentGlobalKey").next((function(e){return Av(!!e),e}))}},{key:"Zn",value:function(e,t){return sb(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Ik(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var i=em.fromSegments(t.noDocument.path),r=Qk(t.noDocument.readTime);n=Gy.newNoDocument(i,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ov();var a=em.fromSegments(t.unknownDocument.path),o=Qk(t.unknownDocument.version);n=Gy.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Qv(e[0],e[1]);return Gv.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Gv.min()))return n}return Gy.newInvalidDocument(e)}}]),e}();function ab(e){return new rb(e)}var ob=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this)).os=e,r.trackRemovals=i,r.us=new Hg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return Re(n,[{key:"applyChanges",value:function(e){var t=this,n=[],i=0,r=new hy((function(e,t){return zv(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.us.get(a);if(n.push(t.os.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=zk(t.os.serializer,o);r=r.add(a.path.popLast());var l=jw(u);i+=l-s.size,n.push(t.os.addEntry(e,a,u))}else if(i-=s.size,t.trackRemovals){var c=zk(t.os.serializer,o.convertToNoDocument(Gv.min()));n.push(t.os.addEntry(e,a,c))}})),r.forEach((function(i){n.push(t.os.indexManager.addToCollectionParentIndex(e,i))})),n.push(this.os.updateMetadata(e,i)),pm.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,i){n.us.set(e,{size:i,readTime:t.get(e).readTime})})),t}))}}]),n}(ib);function sb(e){return ry(e,"remoteDocumentGlobal")}function ub(e){return ry(e,"remoteDocumentsV14")}function lb(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function cb(e,t){var n=t.documentKey.path.toArray();return[e,Hk(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function hb(e,t){for(var n=e.path.toArray(),i=t.path.toArray(),r=0,a=0;a<n.length-2&&a<i.length-2;++a)if(r=zv(n[a],i[a]))return r;return(r=zv(n.length,i.length))||((r=zv(n[n.length-2],i[i.length-2]))||zv(n[n.length-1],i[i.length-1]))}var db=Re((function e(t,n){De(this,e),this.overlayedDocument=t,this.mutatedFields=n})),fb=function(){function e(t,n,i,r){De(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}return Re(e,[{key:"getDocument",value:function(e,t){var n=this,i=null;return this.documentOverlayCache.getOverlay(e,t).next((function(r){return i=r,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==i&&S_(i.mutation,e,py.empty(),Qv.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,i_()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i_(),r=Jg();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,i).next((function(e){var t=Yg();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,i=Jg();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,i_())}))}},{key:"populateOverlays",value:function(e,t,n){var i=[];return n.forEach((function(e){t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,i){var r=Qg(),a=e_(),o=e_();return t.forEach((function(e,t){var o=n.get(t.key);i.has(t.key)&&(void 0===o||o.mutation instanceof M_)?r=r.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),S_(o.mutation,t,o.mutation.getFieldMask(),Qv.now())):a.set(t.key,py.empty())})),this.recalculateAndSaveOverlays(e,r).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new db(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,i=e_(),r=new uy((function(e,t){return e-t})),a=i_();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Pe(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=i.get(n)||py.empty();o=e.applyToLocalView(a,o),i.set(n,o);var s=(r.get(e.batchId)||i_()).add(n);r=r.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=r.getReverseIterator(),u=function(){var r=s.getNext(),u=r.key,l=r.value,c=Zg();l.forEach((function(e){if(!a.has(e)){var n=T_(t.get(e),i.get(e));null!==n&&c.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,c))};s.hasNext();)u();return pm.waitFor(o)})).next((function(){return i}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return em.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Pg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,i){var r=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((function(a){var o=i-a.size>0?r.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-a.size):pm.resolve(Jg()),s=-1,u=a;return o.next((function(t){return pm.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?pm.resolve():r.remoteDocumentCache.getEntry(e,t).next((function(e){u=u.insert(t,e)}))})).next((function(){return r.populateOverlays(e,t,a)})).next((function(){return r.computeViews(e,u,t,i_())})).next((function(e){return{batchId:s,changes:Xg(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new em(t)).next((function(e){var t=Yg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var i=this,r=t.collectionGroup,a=Yg();return this.indexManager.getCollectionParents(e,r).next((function(o){return pm.forEach(o,(function(o){var s=function(e,t){return new Sg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return i.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var i,r=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return i=a,r.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i)})).next((function(e){i.forEach((function(t,n){var i=n.getKey();null===e.get(i)&&(e=e.insert(i,Gy.newInvalidDocument(i)))}));var n=Yg();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&S_(a.mutation,r,py.empty(),Qv.now()),qg(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),pb=function(){function e(t){De(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return Re(e,[{key:"getBundleMetadata",value:function(e,t){return pm.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:yk(n.createTime)}),pm.resolve()}},{key:"getNamedQuery",value:function(e,t){return pm.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Jk(e.bundledQuery),readTime:yk(e.readTime)}}(t)),pm.resolve()}}]),e}(),vb=function(){function e(){De(this,e),this.overlays=new uy(em.comparator),this.ls=new Map}return Re(e,[{key:"getOverlay",value:function(e,t){return pm.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,i=Jg();return pm.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&i.set(t,e)}))})).next((function(){return i}))}},{key:"saveOverlays",value:function(e,t,n){var i=this;return n.forEach((function(n,r){i.we(e,t,r)})),pm.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var i=this,r=this.ls.get(n);return void 0!==r&&(r.forEach((function(e){return i.overlays=i.overlays.remove(e)})),this.ls.delete(n)),pm.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var i=Jg(),r=t.length+1,a=new em(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===r&&s.largestBatchId>n&&i.set(s.getKey(),s)}return pm.resolve(i)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,i){for(var r=new uy((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=r.get(o.largestBatchId);null===s&&(s=Jg(),r=r.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=Jg(),l=r.getIterator();l.hasNext()&&(l.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=i)););return pm.resolve(u)}},{key:"we",value:function(e,t,n){var i=this.overlays.get(n.key);if(null!==i){var r=this.ls.get(i.largestBatchId).delete(n.key);this.ls.set(i.largestBatchId,r)}this.overlays=this.overlays.insert(n.key,new q_(t,n));var a=this.ls.get(t);void 0===a&&(a=i_(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),mb=function(){function e(){De(this,e),this.fs=new hy(yb.ds),this.ws=new hy(yb._s)}return Re(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new yb(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new yb(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new em(new Xv([])),i=new yb(n,e),r=new yb(n,e+1),a=[];return this.ws.forEachInRange([i,r],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new em(new Xv([])),n=new yb(t,e),i=new yb(t,e+1),r=i_();return this.ws.forEachInRange([n,i],(function(e){r=r.add(e.key)})),r}},{key:"containsKey",value:function(e){var t=new yb(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),yb=function(){function e(t,n){De(this,e),this.key=t,this.As=n}return Re(e,null,[{key:"ds",value:function(e,t){return em.comparator(e.key,t.key)||zv(e.As,t.As)}},{key:"_s",value:function(e,t){return zv(e.As,t.As)||em.comparator(e.key,t.key)}}]),e}(),gb=function(){function e(t,n){De(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new hy(yb.ds)}return Re(e,[{key:"checkEmpty",value:function(e){return pm.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,i){var r=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new U_(r,t,n,i);this.mutationQueue.push(a);var o,s=Pe(i);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.Rs=this.Rs.add(new yb(u.key,r)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(l){s.e(l)}finally{s.f()}return pm.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return pm.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,i=this.bs(n),r=i<0?0:i;return pm.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return pm.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return pm.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,i=new yb(t,0),r=new yb(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([i,r],(function(e){var t=n.Ps(e.As);a.push(t)})),pm.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,i=new hy(zv);return t.forEach((function(e){var t=new yb(e,0),r=new yb(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,r],(function(e){i=i.add(e.As)}))})),pm.resolve(this.Vs(i))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,i=n.length+1,r=n;em.isDocumentKey(r)||(r=r.child(""));var a=new yb(new em(r),0),o=new hy(zv);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.As)),!0)}),a),pm.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var i=t.Ps(e);null!==i&&n.push(i)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Av(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var i=this.Rs;return pm.forEach(t.mutations,(function(r){var a=new yb(r.key,t.batchId);return i=i.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((function(){n.Rs=i}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new yb(t,0),i=this.Rs.firstAfterOrEqual(n);return pm.resolve(t.isEqual(i&&i.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,pm.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),_b=function(){function e(t){De(this,e),this.Ds=t,this.docs=new uy(em.comparator),this.size=0}return Re(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,i=this.docs.get(n),r=i?i.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return pm.resolve(n?n.document.mutableCopy():Gy.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,i=Qg();return t.forEach((function(e){var t=n.docs.get(e);i=i.insert(e,t?t.document.mutableCopy():Gy.newInvalidDocument(e))})),pm.resolve(i)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,i){for(var r=Qg(),a=t.path,o=new em(a.child("")),s=this.docs.getIteratorFrom(o);s.hasNext();){var u=s.getNext(),l=u.key,c=u.value.document;if(!a.isPrefixOf(l.path))break;l.path.length>a.length+1||lm(sm(c),n)<=0||(i.has(c.key)||qg(t,c))&&(r=r.insert(c.key,c.mutableCopy()))}return pm.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,i){Ov()}},{key:"Cs",value:function(e,t){return pm.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new kb(this)}},{key:"getSize",value:function(e){return pm.resolve(this.size)}}]),e}(),kb=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this)).os=e,i}return Re(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(i,r){r.isValidDocument()?n.push(t.os.addEntry(e,r)):t.os.removeEntry(i)})),pm.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(ib),wb=function(){function e(t){De(this,e),this.persistence=t,this.xs=new Hg((function(e){return bg(e)}),xg),this.lastRemoteSnapshotVersion=Gv.min(),this.highestTargetId=0,this.Ns=0,this.ks=new mb,this.targetCount=0,this.Ms=zw.kn()}return Re(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),pm.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return pm.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return pm.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),pm.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),pm.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new zw(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,pm.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),pm.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,pm.resolve()}},{key:"removeTargets",value:function(e,t,n){var i=this,r=0,a=[];return this.xs.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i.xs.delete(o),a.push(i.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),pm.waitFor(a).next((function(){return r}))}},{key:"getTargetCount",value:function(e){return pm.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return pm.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),pm.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var i=this.persistence.referenceDelegate,r=[];return i&&t.forEach((function(t){r.push(i.markPotentiallyOrphaned(e,t))})),pm.waitFor(r)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),pm.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return pm.resolve(n)}},{key:"containsKey",value:function(e,t){return pm.resolve(this.ks.containsKey(t))}}]),e}(),bb=function(){function e(t,n){var i=this;De(this,e),this.$s={},this.overlays={},this.Os=new Tm(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new wb(this),this.indexManager=new Iw,this.remoteDocumentCache=new _b((function(e){return i.referenceDelegate.Ls(e)})),this.serializer=new Wk(n),this.qs=new pb(this.serializer)}return Re(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new vb,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new gb(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var i=this;Cv("MemoryPersistence","Starting transaction:",e);var r=new xb(this.Os.next());return this.referenceDelegate.Us(),n(r).next((function(e){return i.referenceDelegate.Ks(r).next((function(){return e}))})).toPromise().then((function(e){return r.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return pm.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),xb=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this)).currentSequenceNumber=e,i}return Re(n)}(hm),Eb=function(){function e(t){De(this,e),this.persistence=t,this.Qs=new mb,this.js=null}return Re(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw Ov()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),pm.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),pm.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),pm.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return i.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pm.forEach(this.Ws,(function(i){var r=em.fromPath(i);return t.Hs(e,r).next((function(e){e||n.removeEntry(r,Gv.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return pm.or([function(){return pm.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),Cb=function(){function e(t){De(this,e),this.serializer=t}return Re(e,[{key:"O",value:function(e,t,n,i){var r=this,a=new vm("createOrUpgrade",t);n<1&&i>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pm,{unique:!0}),e.createObjectStore("documentMutations")}(e),Tb(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=pm.resolve();return n<3&&i>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Tb(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Gv.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&i>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Pm,{unique:!0});var i=t.store("mutations"),r=n.map((function(e){return i.put(e)}));return pm.waitFor(r)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&i>=5&&(o=o.next((function(){return r.Ys(a)}))),n<6&&i>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),r.Xs(a)}))),n<7&&i>=7&&(o=o.next((function(){return r.Zs(a)}))),n<8&&i>=8&&(o=o.next((function(){return r.ti(e,a)}))),n<9&&i>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&i>=10&&(o=o.next((function(){return r.ei(a)}))),n<11&&i>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&i>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Gm});t.createIndex("collectionPathOverlayIndex",Ym,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Xm,{unique:!1})}(e)}))),n<13&&i>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Fm});t.createIndex("documentKeyIndex",jm),t.createIndex("collectionGroupIndex",Um)}(e)})).next((function(){return r.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&i>=14&&(o=o.next((function(){return r.si(e,a)}))),n<15&&i>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:zm}).createIndex("sequenceNumberIndex",Hm,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Km}).createIndex("documentKeyIndex",Qm,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=jw(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),i=e.store("mutations");return n.j().next((function(n){return pm.forEach(n,(function(n){var r=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return i.j("userMutationsIndex",r).next((function(i){return pm.forEach(i,(function(i){Av(i.userId===n.userId);var r=Gk(t.serializer,i);return Fw(e,n.userId,r).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var i=[];return n.X((function(n,r){var a=new Xv(n),o=function(e){return[0,Am(e)]}(a);i.push(t.get(o).next((function(n){return n?pm.resolve():function(n){return t.put({targetId:0,path:Am(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return pm.waitFor(i)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Wm});var n=t.store("collectionParents"),i=new Sw,r=function(e){if(i.add(e)){var t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Am(r)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new Xv(e);return r(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=Ie(e,3),i=(n[0],n[1]),a=(n[2],Rm(i));return r(a.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,i){var r=Yk(i),a=Xk(t.serializer,r);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),i=[];return n.X((function(e,n){var r,a=t.store("remoteDocumentsV14"),o=(r=n,r.document?new em(Xv.fromString(r.document.name).popFirst(5)):r.noDocument?em.fromSegments(r.noDocument.path):r.unknownDocument?em.fromSegments(r.unknownDocument.path):Ov()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};i.push(a.put(s))})).next((function(){return pm.waitFor(i)}))}},{key:"si",value:function(e,t){var n=this,i=t.store("mutations"),r=ab(this.serializer),a=new bb(Eb.zs,this.serializer.fe);return i.j().next((function(e){var i=new Map;return e.forEach((function(e){var t,r=null!==(t=i.get(e.userId))&&void 0!==t?t:i_();Gk(n.serializer,e).keys().forEach((function(e){return r=r.add(e)})),i.set(e.userId,r)})),pm.forEach(i,(function(e,i){var o=new wv(i),s=aw.de(n.serializer,o),u=a.getIndexManager(o),l=Uw.de(o,n.serializer,u,a.referenceDelegate);return new fb(r,l,s,u).recalculateAndSaveOverlaysForDocumentKeys(new iy(t,Tm.ct),e).next()}))}))}}]),e}();function Tb(e){e.createObjectStore("targetDocuments",{keyPath:qm}).createIndex("documentTargetsIndex",$m,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Vm,{unique:!0}),e.createObjectStore("targetGlobal")}var Ib="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Sb=function(){function e(t,n,i,r,a,o,s,u,l,c){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(De(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=i,this.ii=a,this.window=o,this.document=s,this.ri=l,this.oi=c,this.ui=h,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new Rv(Mv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tb(this,r),this.di=n+"main",this.serializer=new Wk(u),this.wi=new mm(this.di,this.ui,new Cb(this.serializer)),this.Bs=new Hw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ab(this.serializer),this.qs=new nw,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===c&&Tv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Re(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Rv(Mv.FAILED_PRECONDITION,Ib);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new Tm(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=$t(jt().mark((function n(i){return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(i));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=$t(jt().mark((function t(n){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget($t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Ab(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(_m(t))return Cv("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Cv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return Ob(e).get("owner").next((function(e){return pm.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return Ab(e).delete(this.clientId)}},{key:"bi",value:function(){var e=$t(jt().mark((function e(){var t,n,i,r,a=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=ry(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),i=e.filter((function(e){return-1===n.indexOf(e)}));return pm.forEach(i,(function(e){return t.delete(e.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=Pe(t);try{for(n.s();!(i=n.n()).done;)r=i.value,this._i.removeItem(this.Di(r.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?pm.resolve(!0):Ob(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new Rv(Mv.FAILED_PRECONDITION,Ib);return!1}}return!(!t.networkEnabled||!t.inForeground)||Ab(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,i=!t.inForeground&&e.inForeground,r=t.networkEnabled===e.networkEnabled;if(n||i&&r)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Cv("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=$t(jt().mark((function e(){var t=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new iy(e,Tm.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Ab(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return Uw.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Aw(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return aw.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var i=this;Cv("IndexedDbPersistence","Starting transaction:",e);var r,a,o="readonly"===t?"readonly":"readwrite",s=15===(r=this.ui)?ny:14===r?ty:13===r?ey:12===r?Zm:11===r?Jm:void Ov();return this.wi.runTransaction(e,o,s,(function(r){return a=new iy(r,i.Os?i.Os.next():Tm.ct),"readwrite-primary"===t?i.Ti(a).next((function(e){return!!e||i.Ei(a)})).next((function(t){if(!t)throw Tv("Failed to obtain primary lease for action '".concat(e,"'.")),i.isPrimary=!1,i.ii.enqueueRetryable((function(){return i.fi(!1)})),new Rv(Mv.FAILED_PRECONDITION,cm);return n(a)})).next((function(e){return i.vi(a).next((function(){return e}))})):i.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return Ob(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Rv(Mv.FAILED_PRECONDITION,Ib)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ob(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=Ob(e);return n.get("owner").next((function(e){return t.Ri(e)?(Cv("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):pm.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Tv("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!ut()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Cv("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Tv("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Tv("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return mm.D()}}]),e}();function Ob(e){return ry(e,"owner")}function Ab(e){return ry(e,"clientMetadata")}function Db(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Mb=function(){function e(t,n,i,r){De(this,e),this.targetId=t,this.fromCache=n,this.Fi=i,this.Bi=r}return Re(e,null,[{key:"Li",value:function(t,n){var i,r=i_(),a=i_(),o=Pe(n.docChanges);try{for(o.s();!(i=o.n()).done;){var s=i.value;switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,r,a)}}]),e}(),Rb=function(){function e(){De(this,e),this.qi=!1}return Re(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,i){var r=this;return this.Ki(e,t).next((function(a){return a||r.Gi(e,t,i,n)})).next((function(n){return n||r.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(Dg(t))return pm.resolve(null);var i=Lg(t);return this.indexManager.getIndexType(e,i).next((function(r){return 0===r?null:(null!==t.limit&&1===r&&(t=Fg(t,null,"F"),i=Lg(t)),n.indexManager.getDocumentsMatchingTarget(e,i).next((function(r){var a=i_.apply(void 0,Vt(r));return n.Ui.getDocuments(e,a).next((function(r){return n.indexManager.getMinOffset(e,i).next((function(i){var o=n.ji(t,r);return n.zi(t,o,a,i.readTime)?n.Ki(e,Fg(t,null,"F")):n.Wi(e,o,t,i)}))}))})))}))}},{key:"Gi",value:function(e,t,n,i){var r=this;return Dg(t)||i.isEqual(Gv.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=r.ji(t,a);return r.zi(t,o,n,i)?r.Qi(e,t):(Ev()<=Qt.DEBUG&&Cv("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Vg(t)),r.Wi(e,o,t,om(i,-1)))}))}},{key:"ji",value:function(e,t){var n=new hy(Wg(e));return t.forEach((function(t,i){qg(e,i)&&(n=n.add(i))})),n}},{key:"zi",value:function(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}},{key:"Qi",value:function(e,t){return Ev()<=Qt.DEBUG&&Cv("QueryEngine","Using full collection scan to execute query:",Vg(t)),this.Ui.getDocumentsMatchingQuery(e,t,um.min())}},{key:"Wi",value:function(e,t,n,i){return this.Ui.getDocumentsMatchingQuery(e,n,i).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Pb=function(){function e(t,n,i,r){De(this,e),this.persistence=t,this.Hi=n,this.serializer=r,this.Ji=new uy(zv),this.Yi=new Hg((function(e){return bg(e)}),xg),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(i)}return Re(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fb(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function Nb(e,t,n,i){return new Pb(e,t,n,i)}function Lb(e,t){return Bb.apply(this,arguments)}function Bb(){return Bb=$t(jt().mark((function e(t,n){var i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Dv(t),e.next=3,i.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return i.mutationQueue.getAllMutationBatches(e).next((function(r){return t=r,i.tr(n),i.mutationQueue.getAllMutationBatches(e)})).next((function(n){var r,a=[],o=[],s=i_(),u=Pe(t);try{for(u.s();!(r=u.n()).done;){var l=r.value;a.push(l.batchId);var c,h=Pe(l.mutations);try{for(h.s();!(c=h.n()).done;){var d=c.value;s=s.add(d.key)}}catch(_){h.e(_)}finally{h.f()}}}catch(_){u.e(_)}finally{u.f()}var f,p=Pe(n);try{for(p.s();!(f=p.n()).done;){var v=f.value;o.push(v.batchId);var m,y=Pe(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;s=s.add(g.key)}}catch(_){y.e(_)}finally{y.f()}}}catch(_){p.e(_)}finally{p.f()}return i.localDocuments.getDocuments(e,s).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}function Fb(e,t){var n=Dv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var i=t.batch.keys(),r=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){var r=n.batch,a=r.keys(),o=pm.resolve();return a.forEach((function(e){o=o.next((function(){return i.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Av(null!==a),t.version.compareTo(a)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,r)}))}(n,e,t,r).next((function(){return r.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=i_(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,i)}))}))}function jb(e){var t=Dv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function Ub(e,t){var n=Dv(e),i=t.snapshotVersion,r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;var o=[];t.targetChanges.forEach((function(a,s){var u=r.get(s);if(u){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,s)})));var l=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?l=l.withResumeToken(my.EMPTY_BYTE_STRING,Gv.min()).withLastLimboFreeSnapshotVersion(Gv.min()):a.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(a.resumeToken,i)),r=r.insert(s,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,l,a)&&o.push(n.Bs.updateTargetData(e,l))}}));var s=Qg(),u=i_();if(t.documentUpdates.forEach((function(i){t.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),o.push(Vb(e,a,t.documentUpdates).next((function(e){s=e.nr,u=e.sr}))),!i.isEqual(Gv.min())){var l=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,i)}));o.push(l)}return pm.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.Ji=r,e}))}function Vb(e,t,n){var i=i_(),r=i_();return n.forEach((function(e){return i=i.add(e)})),t.getEntries(e,i).next((function(e){var i=Qg();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),a.isNoDocument()&&a.version.isEqual(Gv.min())?(t.removeEntry(n,a.readTime),i=i.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),i=i.insert(n,a)):Cv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:i,sr:r}}))}function qb(e,t){var n=Dv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function $b(e,t){var n=Dv(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var i;return n.Bs.getTargetData(e,t).next((function(r){return r?(i=r,pm.resolve(i)):n.Bs.allocateTargetId(e).next((function(r){return i=new $k(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,i).next((function(){return i}))}))}))})).then((function(e){var i=n.Ji.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function Wb(e,t,n){return zb.apply(this,arguments)}function zb(){return zb=$t(jt().mark((function e(t,n,i){var r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Dv(t),a=r.Ji.get(n),o=i?"readwrite":"readwrite-primary",e.prev=1,e.t0=i,e.t0){e.next=6;break}return e.next=6,r.persistence.runTransaction("Release target",o,(function(e){return r.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),_m(e.t1)){e.next=12;break}throw e.t1;case 12:Cv("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:r.Ji=r.Ji.remove(n),r.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),zb.apply(this,arguments)}function Hb(e,t,n){var i=Dv(e),r=Gv.min(),a=i_();return i.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var i=Dv(e),r=i.Yi.get(n);return void 0!==r?pm.resolve(i.Ji.get(r)):i.Bs.getTargetData(t,n)}(i,e,Lg(t)).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,i.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return i.Hi.getDocumentsMatchingQuery(e,t,n?r:Gv.min(),n?a:i_())})).next((function(e){return Gb(i,$g(t),e),{documents:e,ir:a}}))}))}function Kb(e,t){var n=Dv(e),i=Dv(n.Bs),r=n.Ji.get(t);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return i.le(e,t).next((function(e){return e?e.target:null}))}))}function Qb(e,t){var n=Dv(e),i=n.Xi.get(t)||Gv.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,om(i,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Gb(n,t,e),e}))}function Gb(e,t,n){var i=e.Xi.get(t)||Gv.min();n.forEach((function(e,t){t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.Xi.set(t,i)}function Yb(e,t,n,i){return Xb.apply(this,arguments)}function Xb(){return Xb=$t(jt().mark((function e(t,n,i,r){var a,o,s,u,l,c,h,d,f,p;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Dv(t),o=i_(),s=Qg(),u=Pe(i);try{for(u.s();!(l=u.n()).done;)c=l.value,h=n.rr(c.metadata.name),c.document&&(o=o.add(h)),(d=n.ur(c)).setReadTime(n.cr(c.metadata.readTime)),s=s.insert(h,d)}catch(v){u.e(v)}finally{u.f()}return f=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,$b(a,function(e){return Lg(Ag(Xv.fromString("__bundle__/docs/".concat(e))))}(r));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Vb(e,f,s).next((function(t){return f.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),Xb.apply(this,arguments)}function Jb(e,t){return Zb.apply(this,arguments)}function Zb(){return Zb=$t(jt().mark((function e(t,n){var i,r,a,o=arguments;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.length>2&&void 0!==o[2]?o[2]:i_(),e.next=3,$b(t,Lg(Jk(n.bundledQuery)));case 3:return r=e.sent,a=Dv(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=yk(n.readTime);if(r.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=r.withResumeToken(my.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,r.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,i,r.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Zb.apply(this,arguments)}function ex(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function tx(e,t,n){var i="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(i+="_".concat(t.uid)),i}function nx(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var ix=function(){function e(t,n,i,r){De(this,e),this.user=t,this.batchId=n,this.state=i,this.error=r}return Re(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,i){var r,a=JSON.parse(i),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(r=new Rv(a.error.code,a.error.message))),o?new e(t,n,a.state,r):(Tv("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(i)),null)}}]),e}(),rx=function(){function e(t,n,i){De(this,e),this.targetId=t,this.state=n,this.error=i}return Re(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var i,r=JSON.parse(n),a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&((a="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(i=new Rv(r.error.code,r.error.message))),a?new e(t,r.state,i):(Tv("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),ax=function(){function e(t,n){De(this,e),this.clientId=t,this.activeTargetIds=n}return Re(e,null,[{key:"ar",value:function(t,n){for(var i=JSON.parse(n),r="object"==typeof i&&i.activeTargetIds instanceof Array,a=a_(),o=0;r&&o<i.activeTargetIds.length;++o)r=Om(i.activeTargetIds[o]),a=a.add(i.activeTargetIds[o]);return r?new e(t,a):(Tv("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),ox=function(){function e(t,n){De(this,e),this.clientId=t,this.onlineState=n}return Re(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Tv("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),sx=function(){function e(){De(this,e),this.activeTargetIds=a_()}return Re(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),ux=function(){function e(t,n,i,r,a){De(this,e),this.window=t,this.ii=n,this.persistenceKey=i,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new uy(zv),this.started=!1,this.yr=[];var o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=ex(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new sx),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return Re(e,[{key:"start",value:function(){var e=$t(jt().mark((function e(){var t,n,i,r,a,o,s,u,l,c,h,d=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=Pe(t),e.prev=4,n.s();case 6:if((i=n.n()).done){e.next=14;break}if((r=i.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(ex(this.persistenceKey,r)))&&(o=ax.ar(r,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(s=this.storage.getItem(this.vr))&&(u=this.br(s))&&this.Vr(u),l=Pe(this.yr);try{for(l.s();!(c=l.n()).done;)h=c.value,this.mr(h)}catch(f){l.e(f)}finally{l.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,i){i.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(nx(this.persistenceKey,e));if(n){var i=rx.ar(e,n);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(nx(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var i=this;t.forEach((function(e){i.Cr(e)})),this.currentUser=e,n.forEach((function(e){i.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Cv("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Cv("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Cv("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Cv("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void Tv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable($t(jt().mark((function e(){var i,r,a,o,s,u,l;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return i=t.Or(n.key),e.abrupt("return",t.Fr(i,null));case 6:if(!(r=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(r.clientId,r));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(s));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}u=function(e){var t=Tm.ct;if(null!=e)try{var n=JSON.parse(e);Av("number"==typeof n),t=n}catch(e){Tv("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==Tm.ct&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return l=t.Gr(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var i=new ix(this.currentUser,e,t,n),r=tx(this.persistenceKey,this.currentUser,e);this.setItem(r,i.hr())}},{key:"Cr",value:function(e){var t=tx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var i=nx(this.persistenceKey,e),r=new rx(e,t,n);this.setItem(i,r.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return ax.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),i=Number(n[1]),r=void 0!==n[2]?n[2]:null;return ix.ar(new wv(r),i,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),i=Number(n[1]);return rx.ar(i,t)}},{key:"br",value:function(e){return ox.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:Cv("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,i=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),a=this.Sr(i),o=[],s=[];return a.forEach((function(e){r.has(e)||o.push(e)})),r.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Wr(o,s).then((function(){n.gr=i}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=a_();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),lx=function(){function e(){De(this,e),this.Hr=new sx,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Re(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new sx,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),cx=function(){function e(){De(this,e)}return Re(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),hx=function(){function e(){var t=this;De(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return Re(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){Cv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Pe(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){Cv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Pe(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),dx=null;function fx(){return null===dx?dx=268435456+Math.round(2147483648*Math.random()):dx++,"0x"+dx.toString(16)}var px={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},vx=function(){function e(t){De(this,e),this.ro=t.ro,this.oo=t.oo}return Re(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),mx="WebChannelConnection",yx=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this,e)).forceLongPolling=e.forceLongPolling,i.autoDetectLongPolling=e.autoDetectLongPolling,i.useFetchStreams=e.useFetchStreams,i.longPollingOptions=e.longPollingOptions,i}return Re(n,[{key:"Ao",value:function(e,t,n,i){var r=fx();return new Promise((function(a,o){var s=new yv;s.setWithCredentials(!0),s.listenOnce(dv.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case hv.NO_ERROR:var t=s.getResponseJson();Cv(mx,"XHR for RPC '".concat(e,"' ").concat(r," received:"),JSON.stringify(t)),a(t);break;case hv.TIMEOUT:Cv(mx,"RPC '".concat(e,"' ").concat(r," timed out")),o(new Rv(Mv.DEADLINE_EXCEEDED,"Request time out"));break;case hv.HTTP_ERROR:var n=s.getStatus();if(Cv(mx,"RPC '".concat(e,"' ").concat(r," failed with status:"),n,"response text:",s.getResponseText()),n>0){var i=s.getResponseJson();Array.isArray(i)&&(i=i[0]);var u=null==i?void 0:i.error;if(u&&u.status&&u.message){var l=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Mv).indexOf(t)>=0?t:Mv.UNKNOWN}(u.status);o(new Rv(l,u.message))}else o(new Rv(Mv.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Rv(Mv.UNAVAILABLE,"Connection failed."));break;default:Ov()}}finally{Cv(mx,"RPC '".concat(e,"' ").concat(r," completed."))}}));var u=JSON.stringify(i);Cv(mx,"RPC '".concat(e,"' ").concat(r," sending request:"),i),s.send(t,"POST",u,n,15)}))}},{key:"Ro",value:function(e,t,n){var i=fx(),r=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=lv(),o=cv(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.xmlHttpFactory=new vv({})),this.Eo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;var l=r.join("");Cv(mx,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(l),s);var c=a.createWebChannel(l,s),h=!1,d=!1,f=new vx({ro:function(t){d?Cv(mx,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),t):(h||(Cv(mx,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),c.open(),h=!0),Cv(mx,"RPC '".concat(e,"' stream ").concat(i," sending:"),t),c.send(t))},oo:function(){return c.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(c,mv.EventType.OPEN,(function(){d||Cv(mx,"RPC '".concat(e,"' stream ").concat(i," transport opened."))})),p(c,mv.EventType.CLOSE,(function(){d||(d=!0,Cv(mx,"RPC '".concat(e,"' stream ").concat(i," transport closed")),f.wo())})),p(c,mv.EventType.ERROR,(function(t){d||(d=!0,Iv(mx,"RPC '".concat(e,"' stream ").concat(i," transport errored:"),t),f.wo(new Rv(Mv.UNAVAILABLE,"The operation could not be completed")))})),p(c,mv.EventType.MESSAGE,(function(t){var n;if(!d){var r=t.data[0];Av(!!r);var a=r,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Cv(mx,"RPC '".concat(e,"' stream ").concat(i," received error:"),o);var s=o.status,u=function(e){var t=L_[e];if(void 0!==t)return z_(t)}(s),l=o.message;void 0===u&&(u=Mv.INTERNAL,l="Unknown error status: "+s+" with message "+o.message),d=!0,f.wo(new Rv(u,l)),c.close()}else Cv(mx,"RPC '".concat(e,"' stream ").concat(i," received:"),r),f._o(r)}})),p(o,fv.STAT_EVENT,(function(t){t.stat===pv.PROXY?Cv(mx,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):t.stat===pv.NOPROXY&&Cv(mx,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))})),setTimeout((function(){f.fo()}),0),f}}]),n}(function(){function e(t){De(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Re(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,i,r){var a=fx(),o=this.To(e,t);Cv("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var s={};return this.Eo(s,i,r),this.Ao(e,o,s,n).then((function(t){return Cv("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Iv("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,i,r,a){return this.Io(e,t,n,i,r)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+bv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=px[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function gx(){return"undefined"!=typeof window?window:null}function _x(){return"undefined"!=typeof document?document:null}function kx(e){return new dk(e,!0)}var wx=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;De(this,e),this.ii=t,this.timerId=n,this.Po=i,this.bo=r,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return Re(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),i=Math.max(0,Date.now()-this.Co),r=Math.max(0,n-i);r>0&&Cv("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(i," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),bx=function(){function e(t,n,i,r,a,o,s,u){De(this,e),this.ii=t,this.$o=i,this.Oo=r,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new wx(t,n)}return Re(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===Mv.RESOURCE_EXHAUSTED?(Tv(n.toString()),Tv("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===Mv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var i=Ie(t,2),r=i[0],a=i[1];e.Fo===n&&e.Zo(r,a)}),(function(n){t((function(){var t=new Rv(Mv.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,i=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){i((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){i((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){i((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No($t(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return Cv("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(Cv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),xx=function(e){Le(n,e);var t=je(n);function n(e,i,r,a,o,s){var u;return De(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,r,a,s)).serializer=o,u}return Re(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ov()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Av(void 0===t||"string"==typeof t),my.fromBase64String(t||"")):(Av(void 0===t||t instanceof Uint8Array),my.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?Mv.UNKNOWN:z_(e.code);return new Rv(t,e.message||"")}(o);n=new rk(i,r,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var l=wk(e,u.document.name),c=yk(u.document.updateTime),h=u.document.createTime?yk(u.document.createTime):Gv.min(),d=new Ky({mapValue:{fields:u.document.fields}}),f=Gy.newFoundDocument(l,c,h,d),p=u.targetIds||[],v=u.removedTargetIds||[];n=new nk(p,v,f.key,f)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=wk(e,m.document),g=m.readTime?yk(m.readTime):Gv.min(),_=Gy.newNoDocument(y,g),k=m.removedTargetIds||[];n=new nk([],k,_.key,_)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=wk(e,w.document),x=w.removedTargetIds||[];n=new nk([],x,b,null)}else{if(!("filter"in t))return Ov();t.filter;var E=t.filter;E.targetId;var C=E.count,T=void 0===C?0:C,I=E.unchangedNames,S=new $_(T,I),O=E.targetId;n=new ik(O,S)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Gv.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Gv.min():t.readTime?yk(t.readTime):Gv.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=Ek(this.serializer),t.addTarget=function(e,t){var n,i=t.target;if((n=Eg(i)?{documents:Dk(e,i)}:{query:Mk(e,i)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=vk(e,t.resumeToken);var r=fk(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Gv.min())>0){n.readTime=pk(e,t.snapshotVersion.toTimestamp());var a=fk(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ov()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=Ek(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(bx),Ex=function(e){Le(n,e);var t=je(n);function n(e,i,r,a,o,s){var u;return De(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,r,a,s)).serializer=o,u.ru=!1,u}return Re(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,ki(Be(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(Av(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(Av(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?yk(e.updateTime):yk(t);return n.isEqual(Gv.min())&&(n=yk(t)),new b_(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=yk(e.commitTime);return this.listener.cu(n,t)}return Av(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=Ek(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Ok(t.serializer,e)}))};this.Wo(n)}}]),n}(bx),Cx=function(e){Le(n,e);var t=je(n);function n(e,i,r,a){var o;return De(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=i,o.connection=r,o.serializer=a,o.lu=!1,o}return Re(n,[{key:"fu",value:function(){if(this.lu)throw new Rv(Mv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var i=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(r){var a=Ie(r,2),o=a[0],s=a[1];return i.connection.Io(e,t,n,o,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Mv.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Rv(Mv.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,i){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=Ie(a,2),s=o[0],u=o[1];return r.connection.vo(e,t,n,s,u,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Mv.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Rv(Mv.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return Re((function e(){De(this,e)}))}());var Tx=function(){function e(t,n){De(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return Re(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(Tv(t),this.mu=!1):Cv("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),Ix=Re((function e(t,n,i,r,a){var o=this;De(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){i.enqueueAndForget($t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Fx(o),!e.t0){e.next=5;break}return Cv("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Dv(t)).vu.add(4),e.next=4,Ax(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,Sx(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new Tx(i,r)}));function Sx(e){return Ox.apply(this,arguments)}function Ox(){return(Ox=$t(jt().mark((function e(t){var n,i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Fx(t)){e.next=18;break}n=Pe(t.Ru),e.prev=2,n.s();case 4:if((i=n.n()).done){e.next=10;break}return r=i.value,e.next=8,r(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function Ax(e){return Dx.apply(this,arguments)}function Dx(){return(Dx=$t(jt().mark((function e(t){var n,i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Pe(t.Ru),e.prev=1,n.s();case 3:if((i=n.n()).done){e.next=9;break}return r=i.value,e.next=7,r(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function Mx(e,t){var n=Dv(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Bx(n)?Lx(n):fE(n).Ko()&&Px(n,t))}function Rx(e,t){var n=Dv(e),i=fE(n);n.Au.delete(t),i.Ko()&&Nx(n,t),0===n.Au.size&&(i.Ko()?i.jo():Fx(n)&&n.bu.set("Unknown"))}function Px(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Gv.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fE(e).su(t)}function Nx(e,t){e.Vu.qt(t),fE(e).iu(t)}function Lx(e){e.Vu=new ok({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),fE(e).start(),e.bu.gu()}function Bx(e){return Fx(e)&&!fE(e).Uo()&&e.Au.size>0}function Fx(e){return 0===Dv(e).vu.size}function jx(e){e.Vu=void 0}function Ux(e){return Vx.apply(this,arguments)}function Vx(){return(Vx=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){Px(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qx(e,t){return $x.apply(this,arguments)}function $x(){return($x=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:jx(t),Bx(t)?(t.bu.Iu(n),Lx(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wx(e,t,n){return zx.apply(this,arguments)}function zx(){return zx=$t(jt().mark((function e(t,n,i){var r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof rk&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=$t(jt().mark((function e(t,n){var i,r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.cause,r=Pe(n.targetIds),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,i);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),r.e(e.t1);case 19:return e.prev=19,r.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Cv("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Hx(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof nk?t.Vu.Ht(n):n instanceof ik?t.Vu.ne(n):t.Vu.Xt(n),i.isEqual(Gv.min())){e.next=29;break}return e.prev=14,e.next=17,jb(t.localStore);case 17:if(r=e.sent,e.t1=i.compareTo(r)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,i){if(n.resumeToken.approximateByteSize()>0){var r=e.Au.get(i);r&&e.Au.set(i,r.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var i=e.Au.get(t);if(i){e.Au.set(t,i.withResumeToken(my.EMPTY_BYTE_STRING,i.snapshotVersion)),Nx(e,t);var r=new $k(i.target,t,n,i.sequenceNumber);Px(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,i);case 24:return e.prev=24,e.t2=e.catch(14),Cv("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Hx(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),zx.apply(this,arguments)}function Hx(e,t,n){return Kx.apply(this,arguments)}function Kx(){return(Kx=$t(jt().mark((function e(t,n,i){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_m(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,Ax(t);case 5:t.bu.set("Offline"),i||(i=function(){return jb(t.localStore)}),t.asyncQueue.enqueueRetryable($t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cv("RemoteStore","Retrying IndexedDB access"),e.next=3,i();case 3:return t.vu.delete(1),e.next=6,Sx(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qx(e,t){return t().catch((function(n){return Hx(e,n,t)}))}function Gx(e){return Yx.apply(this,arguments)}function Yx(){return(Yx=$t(jt().mark((function e(t){var n,i,r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Dv(t),i=pE(n),r=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!Xx(n)){e.next=19;break}return e.prev=3,e.next=6,qb(n.localStore,r);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&i.jo(),e.abrupt("break",19);case 10:r=a.batchId,Jx(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Hx(n,e.t0);case 17:e.next=2;break;case 19:Zx(n)&&eE(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function Xx(e){return Fx(e)&&e.Eu.length<10}function Jx(e,t){e.Eu.push(t);var n=pE(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Zx(e){return Fx(e)&&!pE(e).Uo()&&e.Eu.length>0}function eE(e){pE(e).start()}function tE(e){return nE.apply(this,arguments)}function nE(){return(nE=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:pE(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function iE(e){return rE.apply(this,arguments)}function rE(){return(rE=$t(jt().mark((function e(t){var n,i,r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=pE(t),i=Pe(t.Eu);try{for(i.s();!(r=i.n()).done;)a=r.value,n.uu(a.mutations)}catch(o){i.e(o)}finally{i.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aE(e,t,n){return oE.apply(this,arguments)}function oE(){return(oE=$t(jt().mark((function e(t,n,i){var r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.Eu.shift(),a=V_.from(r,n,i),e.next=3,Qx(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Gx(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sE(e,t){return uE.apply(this,arguments)}function uE(){return uE=$t(jt().mark((function e(t,n){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&pE(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=$t(jt().mark((function e(t,n){var i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W_(r=n.code)||r===Mv.ABORTED){e.next=7;break}return i=t.Eu.shift(),pE(t).Qo(),e.next=5,Qx(t,(function(){return t.remoteSyncer.rejectFailedWrite(i.batchId,n)}));case 5:return e.next=7,Gx(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Zx(t)&&eE(t);case 5:case"end":return e.stop()}}),e)}))),uE.apply(this,arguments)}function lE(e,t){return cE.apply(this,arguments)}function cE(){return(cE=$t(jt().mark((function e(t,n){var i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=Dv(t)).asyncQueue.verifyOperationInProgress(),Cv("RemoteStore","RemoteStore received new credentials"),r=Fx(i),i.vu.add(3),e.next=6,Ax(i);case 6:return r&&i.bu.set("Unknown"),e.next=9,i.remoteSyncer.handleCredentialChange(n);case 9:return i.vu.delete(3),e.next=12,Sx(i);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hE(e,t){return dE.apply(this,arguments)}function dE(){return(dE=$t(jt().mark((function e(t,n){var i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Dv(t),!n){e.next=7;break}return i.vu.delete(2),e.next=5,Sx(i);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return i.vu.add(2),e.next=12,Ax(i);case 12:i.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fE(e){return e.Su||(e.Su=function(e,t,n){var i=Dv(e);return i.fu(),new xx(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{uo:Ux.bind(null,e),ao:qx.bind(null,e),nu:Wx.bind(null,e)}),e.Ru.push(function(){var t=$t(jt().mark((function t(n){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),Bx(e)?Lx(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:jx(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function pE(e){return e.Du||(e.Du=function(e,t,n){var i=Dv(e);return i.fu(),new Ex(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{uo:tE.bind(null,e),ao:sE.bind(null,e),au:iE.bind(null,e),cu:aE.bind(null,e)}),e.Ru.push(function(){var t=$t(jt().mark((function t(n){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,Gx(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(Cv("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var vE=function(){function e(t,n,i,r,a){De(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new Pv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Re(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Rv(Mv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,i,r,a){var o=new e(t,n,Date.now()+i,r,a);return o.start(i),o}}]),e}();function mE(e,t){if(Tv("AsyncQueue","".concat(t,": ").concat(e)),_m(e))return new Rv(Mv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var yE=function(){function e(t){De(this,e),this.comparator=t?function(e,n){return t(e,n)||em.comparator(e.key,n.key)}:function(e,t){return em.comparator(e.key,t.key)},this.keyedMap=Yg(),this.sortedSet=new uy(this.comparator)}return Re(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();n.hasNext();){var r=n.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var i=new e;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),gE=function(){function e(){De(this,e),this.Cu=new uy(em.comparator)}return Re(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Ov():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),_E=function(){function e(t,n,i,r,a,o,s,u,l){De(this,e),this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u,this.hasCachedResults=l}return Re(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,i,r,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,yE.emptySet(n),o,i,r,!0,!1,a)}}]),e}(),kE=Re((function e(){De(this,e),this.Nu=void 0,this.listeners=[]})),wE=Re((function e(){De(this,e),this.queries=new Hg((function(e){return Ug(e)}),jg),this.onlineState="Unknown",this.ku=new Set}));function bE(e,t){return xE.apply(this,arguments)}function xE(){return xE=$t(jt().mark((function e(t,n){var i,r,a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Dv(t),r=n.query,a=!1,(o=i.queries.get(r))||(a=!0,o=new kE),!a){e.next=13;break}return e.prev=3,e.next=6,i.onListen(r);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=mE(e.t0,"Initialization of query '".concat(Vg(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:i.queries.set(r,o),o.listeners.push(n),n.Mu(i.onlineState),o.Nu&&n.$u(o.Nu)&&SE(i);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),xE.apply(this,arguments)}function EE(e,t){return CE.apply(this,arguments)}function CE(){return CE=$t(jt().mark((function e(t,n){var i,r,a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Dv(t),r=n.query,a=!1,(o=i.queries.get(r))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(i.queries.delete(r),i.onUnlisten(r)));case 6:case"end":return e.stop()}}),e)}))),CE.apply(this,arguments)}function TE(e,t){var n,i=Dv(e),r=!1,a=Pe(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=i.queries.get(s);if(u){var l,c=Pe(u.listeners);try{for(c.s();!(l=c.n()).done;){l.value.$u(o)&&(r=!0)}}catch(h){c.e(h)}finally{c.f()}u.Nu=o}}}catch(h){a.e(h)}finally{a.f()}r&&SE(i)}function IE(e,t,n){var i=Dv(e),r=i.queries.get(t);if(r){var a,o=Pe(r.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}i.queries.delete(t)}function SE(e){e.ku.forEach((function(e){e.next()}))}var OE=function(){function e(t,n,i){De(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=i||{}}return Re(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],i=Pe(e.docChanges);try{for(i.s();!(t=i.n()).done;){var r=t.value;3!==r.type&&n.push(r)}}catch(o){i.e(o)}finally{i.f()}e=new _E(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=_E.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),AE=function(){function e(t,n){De(this,e),this.Gu=t,this.byteLength=n}return Re(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),DE=function(){function e(t){De(this,e),this.serializer=t}return Re(e,[{key:"rr",value:function(e){return wk(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?Ik(this.serializer,e.document,!1):Gy.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return yk(e)}}]),e}(),ME=function(){function e(t,n,i){De(this,e),this.ju=t,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=RE(t)}return Re(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=Xv.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,i=new DE(this.serializer),r=Pe(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=i.rr(a.metadata.name),u=Pe(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=(n.get(l)||i_()).add(s);n.set(l,c)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){r.e(h)}finally{r.f()}return n}},{key:"complete",value:function(){var e=$t(jt().mark((function e(){var t,n,i,r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yb(this.localStore,new DE(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),i=Pe(this.queries),e.prev=5,i.s();case 7:if((r=i.n()).done){e.next=13;break}return a=r.value,e.next=11,Jb(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),i.e(e.t0);case 18:return e.prev=18,i.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function RE(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var PE=Re((function e(t){De(this,e),this.key=t})),NE=Re((function e(t){De(this,e),this.key=t})),LE=function(){function e(t,n){De(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=i_(),this.mutatedKeys=i_(),this.tc=Wg(t),this.ec=new yE(this.tc)}return Re(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,i=t?t.ic:new gE,r=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1,u="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((function(e,t){var c=r.get(e),h=qg(n.query,t)?t:null,d=!!c&&n.mutatedKeys.has(c.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;c&&h?c.data.isEqual(h.data)?d!==f&&(i.track({type:3,doc:h}),p=!0):n.rc(c,h)||(i.track({type:2,doc:h}),p=!0,(u&&n.tc(h,u)>0||l&&n.tc(h,l)<0)&&(s=!0)):!c&&h?(i.track({type:0,doc:h}),p=!0):c&&!h&&(i.track({type:1,doc:c}),p=!0,(u||l)&&(s=!0)),p&&(h?(o=o.add(h),a=f?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var c="F"===this.query.limitType?o.last():o.first();o=o.delete(c.key),a=a.delete(c.key),i.track({type:1,doc:c})}return{ec:o,ic:i,zi:s,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var i=this,r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ov()}};return n(e)-n(t)}(e.type,t.type)||i.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],s=0===this.Zu.size&&this.current?1:0,u=s!==this.Xu;return this.Xu=s,0!==a.length||u?{snapshot:new _E(this.query,e.ec,r,a,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new gE,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=i_(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new NE(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new PE(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=i_();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return _E.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),BE=Re((function e(t,n,i){De(this,e),this.query=t,this.targetId=n,this.view=i})),FE=Re((function e(t){De(this,e),this.key=t,this.fc=!1})),jE=function(){function e(t,n,i,r,a,o){De(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Hg((function(e){return Ug(e)}),jg),this._c=new Map,this.mc=new Set,this.gc=new uy(em.comparator),this.yc=new Map,this.Ic=new mb,this.Tc={},this.Ec=new Map,this.Ac=zw.Mn(),this.onlineState="Unknown",this.vc=void 0}return Re(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function UE(e,t){return VE.apply(this,arguments)}function VE(){return VE=$t(jt().mark((function e(t,n){var i,r,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=RC(t),!(o=i.wc.get(n))){e.next=6;break}r=o.targetId,i.sharedClientState.addLocalQueryTarget(r),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,$b(i.localStore,Lg(n));case 8:return s=e.sent,u=i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,e.next=13,qE(i,n,r,"current"===u,s.resumeToken);case 13:a=e.sent,i.isPrimaryClient&&Mx(i.remoteStore,s);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),VE.apply(this,arguments)}function qE(e,t,n,i,r){return $E.apply(this,arguments)}function $E(){return $E=$t(jt().mark((function e(t,n,i,r,a){var o,s,u,l,c,h;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,i){return function(){var e=$t(jt().mark((function e(t,n,i,r){var a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(i),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,Hb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=r&&r.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(lC(t,n.targetId,s.cc),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,i,r){return e.apply(this,arguments)}}()(t,e,n,i)},e.next=3,Hb(t.localStore,n,!0);case 3:return o=e.sent,s=new LE(n,o.ir),u=s.sc(o.documents),l=tk.createSynthesizedTargetChangeForCurrentChange(i,r&&"Offline"!==t.onlineState,a),c=s.applyChanges(u,t.isPrimaryClient,l),lC(t,i,c.cc),h=new BE(n,i,s),e.abrupt("return",(t.wc.set(n,h),t._c.has(i)?t._c.get(i).push(n):t._c.set(i,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),$E.apply(this,arguments)}function WE(e,t){return zE.apply(this,arguments)}function zE(){return(zE=$t(jt().mark((function e(t,n){var i,r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Dv(t),r=i.wc.get(n),!((a=i._c.get(r.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(i._c.set(r.targetId,a.filter((function(e){return!jg(e,n)}))),void i.wc.delete(n)));case 3:if(!i.isPrimaryClient){e.next=11;break}if(i.sharedClientState.removeLocalQueryTarget(r.targetId),e.t0=i.sharedClientState.isActiveQueryTarget(r.targetId),e.t0){e.next=9;break}return e.next=9,Wb(i.localStore,r.targetId,!1).then((function(){i.sharedClientState.clearQueryState(r.targetId),Rx(i.remoteStore,r.targetId),sC(i,r.targetId)})).catch(dm);case 9:e.next=14;break;case 11:return sC(i,r.targetId),e.next=14,Wb(i.localStore,r.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HE(e,t,n){return KE.apply(this,arguments)}function KE(){return KE=$t(jt().mark((function e(t,n,i){var r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=PC(t),e.prev=1,e.next=4,function(e,t){var n,i,r=Dv(e),a=Qv.now(),o=t.reduce((function(e,t){return e.add(t.key)}),i_());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=Qg(),u=i_();return r.Zi.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return r.localDocuments.getOverlayedDocuments(e,s)})).next((function(i){n=i;var o,s=[],u=Pe(t);try{for(u.s();!(o=u.n()).done;){var l=o.value,c=O_(l,n.get(l.key).overlayedDocument);null!=c&&s.push(new M_(l.key,c,Qy(c.value.mapValue),x_.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return r.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){i=t;var a=t.applyToLocalDocumentSet(n,u);return r.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:i.batchId,changes:Xg(n)}}))}(r.localStore,n);case 4:return a=e.sent,r.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var i=e.Tc[e.currentUser.toKey()];i||(i=new uy(zv)),i=i.insert(t,n),e.Tc[e.currentUser.toKey()]=i}(r,a.batchId,i),e.next=9,dC(r,a.changes);case 9:return e.next=11,Gx(r.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=mE(e.t0,"Failed to persist write"),i.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),KE.apply(this,arguments)}function QE(e,t){return GE.apply(this,arguments)}function GE(){return(GE=$t(jt().mark((function e(t,n){var i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Dv(t),e.prev=1,e.next=4,Ub(i.localStore,n);case 4:return r=e.sent,n.targetChanges.forEach((function(e,t){var n=i.yc.get(t);n&&(Av(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?Av(n.fc):e.removedDocuments.size>0&&(Av(n.fc),n.fc=!1))})),e.next=8,dC(i,r,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,dm(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function YE(e,t,n){var i=Dv(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){var r=[];i.wc.forEach((function(e,n){var i=n.view.Mu(t);i.snapshot&&r.push(i.snapshot)})),function(e,t){var n=Dv(e);n.onlineState=t;var i=!1;n.queries.forEach((function(e,n){var r,a=Pe(n.listeners);try{for(a.s();!(r=a.n()).done;){r.value.Mu(t)&&(i=!0)}}catch(o){a.e(o)}finally{a.f()}})),i&&SE(n)}(i.eventManager,t),r.length&&i.dc.nu(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function XE(e,t,n){return JE.apply(this,arguments)}function JE(){return JE=$t(jt().mark((function e(t,n,i){var r,a,o,s,u,l;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Dv(t)).sharedClientState.updateQueryState(n,"rejected",i),a=r.yc.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new uy(em.comparator)).insert(o,Gy.newNoDocument(o,Gv.min())),u=i_().add(o),l=new ek(Gv.min(),new Map,new uy(zv),s,u),e.next=9,QE(r,l);case 9:r.gc=r.gc.remove(o),r.yc.delete(n),hC(r),e.next=16;break;case 14:return e.next=16,Wb(r.localStore,n,!1).then((function(){return sC(r,n,i)})).catch(dm);case 16:case"end":return e.stop()}}),e)}))),JE.apply(this,arguments)}function ZE(e,t){return eC.apply(this,arguments)}function eC(){return(eC=$t(jt().mark((function e(t,n){var i,r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Dv(t),r=n.batch.batchId,e.prev=1,e.next=4,Fb(i.localStore,n);case 4:return a=e.sent,oC(i,r,null),aC(i,r),i.sharedClientState.updateMutationState(r,"acknowledged"),e.next=10,dC(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,dm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function tC(e,t,n){return nC.apply(this,arguments)}function nC(){return(nC=$t(jt().mark((function e(t,n,i){var r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Dv(t),e.prev=1,e.next=4,function(e,t){var n=Dv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var i;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Av(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,i,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i)})).next((function(){return n.localDocuments.getDocuments(e,i)}))}))}(r.localStore,n);case 4:return a=e.sent,oC(r,n,i),aC(r,n),r.sharedClientState.updateMutationState(n,"rejected",i),e.next=10,dC(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,dm(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function iC(e,t){return rC.apply(this,arguments)}function rC(){return(rC=$t(jt().mark((function e(t,n){var i,r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fx((i=Dv(t)).remoteStore)||Cv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Dv(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(i.localStore);case 5:if(-1!==(r=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=i.Ec.get(r)||[]).push(n),i.Ec.set(r,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=mE(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function aC(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function oC(e,t,n){var i=Dv(e),r=i.Tc[i.currentUser.toKey()];if(r){var a=r.get(t);a&&(n?a.reject(n):a.resolve(),r=r.remove(t)),i.Tc[i.currentUser.toKey()]=r}}function sC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var i,r=Pe(e._c.get(t));try{for(r.s();!(i=r.n()).done;){var a=i.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){r.e(o)}finally{r.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||uC(e,t)}))}function uC(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(Rx(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),hC(e))}function lC(e,t,n){var i,r=Pe(n);try{for(r.s();!(i=r.n()).done;){var a=i.value;a instanceof PE?(e.Ic.addReference(a.key,t),cC(e,a)):a instanceof NE?(Cv("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||uC(e,a.key)):Ov()}}catch(o){r.e(o)}finally{r.f()}}function cC(e,t){var n=t.key,i=n.path.canonicalString();e.gc.get(n)||e.mc.has(i)||(Cv("SyncEngine","New document in limbo: "+n),e.mc.add(i),hC(e))}function hC(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new em(Xv.fromString(t)),i=e.Ac.next();e.yc.set(i,new FE(n)),e.gc=e.gc.insert(n,i),Mx(e.remoteStore,new $k(Lg(Ag(n.path)),i,"TargetPurposeLimboResolution",Tm.ct))}}function dC(e,t,n){return fC.apply(this,arguments)}function fC(){return fC=$t(jt().mark((function e(t,n,i){var r,a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Dv(t),a=[],o=[],s=[],e.t0=r.wc.isEmpty(),e.t0){e.next=9;break}return r.wc.forEach((function(e,t){s.push(r.Rc(t,n,i).then((function(e){if((e||i)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Mb.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return r.dc.nu(a),e.next=9,function(){var e=$t(jt().mark((function e(t,n){var i,r,a,o,s,u,l,c;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Dv(t),e.prev=1,e.next=4,i.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return pm.forEach(n,(function(t){return pm.forEach(t.Fi,(function(n){return i.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return pm.forEach(t.Bi,(function(n){return i.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),_m(e.t0)){e.next=10;break}throw e.t0;case 10:Cv("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:r=Pe(n);try{for(r.s();!(a=r.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=i.Ji.get(s),l=u.snapshotVersion,c=u.withLastLimboFreeSnapshotVersion(l),i.Ji=i.Ji.insert(s,c))}catch(h){r.e(h)}finally{r.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(r.localStore,o);case 9:case"end":return e.stop()}}),e)}))),fC.apply(this,arguments)}function pC(e,t){return vC.apply(this,arguments)}function vC(){return(vC=$t(jt().mark((function e(t,n){var i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Dv(t)).currentUser.isEqual(n)){e.next=11;break}return Cv("SyncEngine","User change. New user:",n.toKey()),e.next=5,Lb(i.localStore,n);case 5:return r=e.sent,i.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new Rv(Mv.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(i),i.sharedClientState.handleUserChange(n,r.removedBatchIds,r.addedBatchIds),e.next=11,dC(i,r.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mC(e,t){var n=Dv(e),i=n.yc.get(t);if(i&&i.fc)return i_().add(i.key);var r=i_(),a=n._c.get(t);if(!a)return r;var o,s=Pe(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,l=n.wc.get(u);r=r.unionWith(l.view.nc)}}catch(c){s.e(c)}finally{s.f()}return r}function yC(e,t){return gC.apply(this,arguments)}function gC(){return(gC=$t(jt().mark((function e(t,n){var i,r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Dv(t),e.next=3,Hb(i.localStore,n.query,!0);case 3:return r=e.sent,a=n.view.hc(r),e.abrupt("return",(i.isPrimaryClient&&lC(i,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _C(e,t){return kC.apply(this,arguments)}function kC(){return(kC=$t(jt().mark((function e(t,n){var i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Dv(t),e.abrupt("return",Qb(i.localStore,n).then((function(e){return dC(i,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wC(e,t,n,i){return bC.apply(this,arguments)}function bC(){return bC=$t(jt().mark((function e(t,n,i,r){var a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Dv(t),e.next=3,function(e,t){var n=Dv(e),i=Dv(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return i.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):pm.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==i){e.next=10;break}return e.next=8,Gx(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===i||"rejected"===i?(oC(a,n,r||null),aC(a,n),function(e,t){Dv(Dv(e).mutationQueue).Cn(t)}(a.localStore,n)):Ov();case 11:return e.next=13,dC(a,o);case 13:e.next=16;break;case 15:Cv("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),bC.apply(this,arguments)}function xC(e,t){return EC.apply(this,arguments)}function EC(){return(EC=$t(jt().mark((function e(t,n){var i,r,a,o,s,u,l,c;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(RC(i=Dv(t)),PC(i),!0!==n||!0===i.vc){e.next=13;break}return r=i.sharedClientState.getAllActiveQueryTargets(),e.next=5,CC(i,r.toArray());case 5:return a=e.sent,i.vc=!0,e.next=9,hE(i.remoteStore,!0);case 9:o=Pe(a);try{for(o.s();!(s=o.n()).done;)u=s.value,Mx(i.remoteStore,u)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===i.vc){e.next=25;break}return l=[],c=Promise.resolve(),i._c.forEach((function(e,t){i.sharedClientState.isLocalQueryTarget(t)?l.push(t):c=c.then((function(){return sC(i,t),Wb(i.localStore,t,!0)})),Rx(i.remoteStore,t)})),e.next=19,c;case 19:return e.next=21,CC(i,l);case 21:return function(e){var t=Dv(e);t.yc.forEach((function(e,n){Rx(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new uy(em.comparator)}(i),i.vc=!1,e.next=25,hE(i.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CC(e,t,n){return TC.apply(this,arguments)}function TC(){return TC=$t(jt().mark((function e(t,n,i){var r,a,o,s,u,l,c,h,d,f,p,v,m,y;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Dv(t),a=[],o=[],s=Pe(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(l=u.value,c=void 0,!(h=r._c.get(l))||0===h.length){e.next=34;break}return e.next=11,$b(r.localStore,Lg(h[0]));case 11:c=e.sent,d=Pe(h),e.prev=13,d.s();case 15:if((f=d.n()).done){e.next=24;break}return p=f.value,v=r.wc.get(p),e.next=20,yC(r,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Kb(r.localStore,l);case 36:return y=e.sent,e.next=39,$b(r.localStore,y);case 39:return c=e.sent,e.next=42,qE(r,IC(y),l,!1,c.resumeToken);case 42:a.push(c);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(r.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),TC.apply(this,arguments)}function IC(e){return Og(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function SC(e){var t=Dv(e);return Dv(Dv(t.localStore).persistence).$i()}function OC(e,t,n,i){return AC.apply(this,arguments)}function AC(){return AC=$t(jt().mark((function e(t,n,i,r){var a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Dv(t)).vc){e.next=3;break}return e.abrupt("return",void Cv("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=i,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Qb(a.localStore,$g(o[0]));case 10:return s=e.sent,u=ek.createSynthesizedRemoteEventForCurrentChange(n,"current"===i,my.EMPTY_BYTE_STRING),e.next=14,dC(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,Wb(a.localStore,n,!0);case 17:return sC(a,n,r),e.abrupt("break",20);case 19:Ov();case 20:case"end":return e.stop()}}),e)}))),AC.apply(this,arguments)}function DC(e,t,n){return MC.apply(this,arguments)}function MC(){return(MC=$t(jt().mark((function e(t,n,i){var r,a,o,s,u,l,c,h,d;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=RC(t)).vc){e.next=45;break}a=Pe(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!r._c.has(s)){e.next=10;break}return Cv("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Kb(r.localStore,s);case 12:return u=e.sent,e.next=15,$b(r.localStore,u);case 15:return l=e.sent,e.next=18,qE(r,IC(u),l.targetId,!1,l.resumeToken);case 18:Mx(r.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:c=Pe(i),e.prev=30,d=jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=r._c.has(t),!e.t0){e.next=5;break}return e.next=5,Wb(r.localStore,t,!1).then((function(){Rx(r.remoteStore,t),sC(r,t)})).catch(dm);case 5:case"end":return e.stop()}}),e)})),c.s();case 33:if((h=c.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),c.e(e.t2);case 42:return e.prev=42,c.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function RC(e){var t=Dv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=QE.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=XE.bind(null,t),t.dc.nu=TE.bind(null,t.eventManager),t.dc.Pc=IE.bind(null,t.eventManager),t}function PC(e){var t=Dv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ZE.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=tC.bind(null,t),t}function NC(e,t,n){var i=Dv(e);(function(){var e=$t(jt().mark((function e(t,n,i){var r,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return r=e.sent,e.next=6,function(e,t){var n=Dv(e),i=yk(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(i)>=0}))}(t.localStore,r);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return i._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),e.abrupt("return",Promise.resolve(new Set));case 11:return i._updateProgress(RE(r)),a=new ME(r,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(s=e.sent)&&i._updateProgress(s),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,dC(t,u.Ju,void 0);case 31:return e.next=33,function(e,t){var n=Dv(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,r);case 33:return i._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Iv("SyncEngine","Loading bundle failed with ".concat(e.t0)),i._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,i){return e.apply(this,arguments)}})()(i,t,n).then((function(e){i.sharedClientState.notifyBundleLoaded(e)}))}var LC=function(){function e(){De(this,e),this.synchronizeTabs=!1}return Re(e,[{key:"initialize",value:function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=kx(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Nb(this.persistence,new Rb,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new bb(Eb.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new lx}},{key:"terminate",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),BC=function(e){Le(n,e);var t=je(n);function n(e,i,r){var a;return De(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=i,a.forceOwnership=r,a.synchronizeTabs=!1,a}return Re(n,[{key:"initialize",value:function(){var e=$t(jt().mark((function e(t){var i=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ki(Be(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,PC(this.Vc.syncEngine);case 6:return e.next=8,Gx(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Nb(this.persistence,new Rb,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Jw(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Cm(t,this.persistence);return new Em(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Db(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Bw.withCacheSize(this.cacheSizeBytes):Bw.DEFAULT;return new Sb(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,gx(),_x(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new lx}}]),n}(LC),FC=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this,e,i,!1)).Vc=e,r.cacheSizeBytes=i,r.synchronizeTabs=!0,r}return Re(n,[{key:"initialize",value:function(){var e=$t(jt().mark((function e(t){var i,r=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ki(Be(n.prototype),"initialize",this).call(this,t);case 2:if(i=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof ux,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:wC.bind(null,i),zr:OC.bind(null,i),Wr:DC.bind(null,i),$i:SC.bind(null,i),Qr:_C.bind(null,i)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xC(r.Vc.syncEngine,t);case 2:r.gcScheduler&&(t&&!r.gcScheduler.started?r.gcScheduler.start():t||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(t&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():t||r.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=gx();if(!ux.D(t))throw new Rv(Mv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Db(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ux(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(BC),jC=function(){function e(){De(this,e)}return Re(e,[{key:"initialize",value:function(){var e=$t(jt().mark((function e(t,n){var i=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return YE(i.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=pC.bind(null,this.syncEngine),e.next=12,hE(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new wE}},{key:"createDatastore",value:function(e){var t,n=kx(e.databaseInfo.databaseId),i=(t=e.databaseInfo,new yx(t));return function(e,t,n,i){return new Cx(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,i,n)}},{key:"createRemoteStore",value:function(e){var t,n,i,r,a,o=this;return t=this.localStore,n=this.datastore,i=e.asyncQueue,r=function(e){return YE(o.syncEngine,e,0)},a=hx.D()?new hx:new cx,new Ix(t,n,i,r,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,i,r,a,o){var s=new jE(e,t,n,i,r,a);return o&&(s.vc=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Dv(t),Cv("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,Ax(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function UC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return $t(jt().mark((function i(){var r;return jt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(n<e.byteLength)){i.next=3;break}return r={value:e.slice(n,n+t),done:!1},i.abrupt("return",(n+=t,r));case 3:return i.abrupt("return",{done:!0});case 4:case"end":return i.stop()}}),i)})))()},cancel:function(){return $t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var VC=function(){function e(t){De(this,e),this.observer=t,this.muted=!1}return Re(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):Tv("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),qC=function(){function e(t,n){var i=this;De(this,e),this.Cc=t,this.serializer=n,this.metadata=new Pv,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?i.metadata.resolve(e.Gu.metadata):i.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return i.metadata.reject(e)}))}return Re(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=$t(jt().mark((function e(){var t,n,i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),i=Number(n),isNaN(i)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(i);case 9:return r=e.sent,e.abrupt("return",new AE(JSON.parse(r),t.length+i));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=$t(jt().mark((function e(){var t,n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=$t(jt().mark((function e(){var t,n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),$C=function(){function e(t){De(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Re(e,[{key:"lookup",value:function(){var e=$t(jt().mark((function e(t){var n,i=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Rv(Mv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=$t(jt().mark((function e(t,n){var i,r,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Dv(t),r=Ek(i.serializer)+"/documents",a={documents:n.map((function(e){return kk(i.serializer,e)}))},e.next=5,i.vo("BatchGetDocuments",r,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=Sk(i.serializer,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());Av(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return i.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new F_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=$t(jt().mark((function e(){var t,n=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var i=em.fromPath(t);n.mutations.push(new j_(i,n.precondition(i)))})),e.next=7,function(){var e=$t(jt().mark((function e(t,n){var i,r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Dv(t),r=Ek(i.serializer)+"/documents",a={writes:n.map((function(e){return Ok(i.serializer,e)}))},e.next=3,i.Io("Commit",r,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ov();t=Gv.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Rv(Mv.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Gv.min())?x_.exists(!1):x_.updateTime(t):x_.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Gv.min()))throw new Rv(Mv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return x_.updateTime(t)}return x_.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),WC=function(){function e(t,n,i,r,a){De(this,e),this.asyncQueue=t,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=a,this.Bc=i.maxAttempts,this.qo=new wx(this.asyncQueue,"transaction_retry")}return Re(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No($t(jt().mark((function t(){var n,i;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new $C(e.datastore),(i=e.qc(n))&&i.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!Im(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!W_(t)}return!1}}]),e}(),zC=function(){function e(t,n,i,r){var a=this;De(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=wv.UNAUTHENTICATED,this.clientId=Wv.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(i,function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Cv("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(i,(function(e){return Cv("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Re(e,[{key:"getConfiguration",value:function(){var e=$t(jt().mark((function e(){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Rv(Mv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Pv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted($t(jt().mark((function n(){var i;return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),i=mE(n.t2,"Failed to shutdown persistence"),t.reject(i);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function HC(e,t){return KC.apply(this,arguments)}function KC(){return KC=$t(jt().mark((function e(t,n){var i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Cv("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return i=e.sent,e.next=6,n.initialize(i);case 6:r=i.initialUser,t.setCredentialChangeListener(function(){var e=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.isEqual(t),e.t0){e.next=5;break}return e.next=4,Lb(n.localStore,t);case 4:r=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),KC.apply(this,arguments)}function QC(e,t){return GC.apply(this,arguments)}function GC(){return(GC=$t(jt().mark((function e(t,n){var i,r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,XC(t);case 3:return i=e.sent,Cv("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return r=e.sent,e.next=10,n.initialize(i,r);case 10:t.setCredentialChangeListener((function(e){return lE(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return lE(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YC(e){return"FirebaseError"===e.name?e.code===Mv.FAILED_PRECONDITION||e.code===Mv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function XC(e){return JC.apply(this,arguments)}function JC(){return(JC=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Cv("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,HC(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),YC(n=e.t0)){e.next=13;break}throw n;case 13:return Iv("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,HC(t,new LC);case 16:e.next=21;break;case 18:return Cv("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,HC(t,new LC);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function ZC(e){return eT.apply(this,arguments)}function eT(){return(eT=$t(jt().mark((function e(t){return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Cv("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,QC(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Cv("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,QC(t,new jC);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tT(e){return XC(e).then((function(e){return e.persistence}))}function nT(e){return XC(e).then((function(e){return e.localStore}))}function iT(e){return ZC(e).then((function(e){return e.remoteStore}))}function rT(e){return ZC(e).then((function(e){return e.syncEngine}))}function aT(e){return ZC(e).then((function(e){return e.datastore}))}function oT(e){return sT.apply(this,arguments)}function sT(){return(sT=$t(jt().mark((function e(t){var n,i;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZC(t);case 2:return n=e.sent,i=n.eventManager,e.abrupt("return",(i.onListen=UE.bind(null,n.syncEngine),i.onUnlisten=WE.bind(null,n.syncEngine),i));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new Pv;return e.asyncQueue.enqueueAndForget($t(jt().mark((function r(){return jt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(e,t,n,i,r){var a=new VC({next:function(a){t.enqueueAndForget((function(){return EE(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?r.reject(new Rv(Mv.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&i&&"server"===i.source?r.reject(new Rv(Mv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(a)},error:function(e){return r.reject(e)}}),o=new OE(Ag(n.path),a,{includeMetadataChanges:!0,Ku:!0});return bE(e,o)},r.next=3,oT(e);case 3:return r.t1=r.sent,r.t2=e.asyncQueue,r.t3=t,r.t4=n,r.t5=i,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3,r.t4,r.t5));case 9:case"end":return r.stop()}}),r)})))),i.promise}function lT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new Pv;return e.asyncQueue.enqueueAndForget($t(jt().mark((function r(){return jt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(e,t,n,i,r){var a=new VC({next:function(n){t.enqueueAndForget((function(){return EE(e,o)})),n.fromCache&&"server"===i.source?r.reject(new Rv(Mv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:function(e){return r.reject(e)}}),o=new OE(n,a,{includeMetadataChanges:!0,Ku:!0});return bE(e,o)},r.next=3,oT(e);case 3:return r.t1=r.sent,r.t2=e.asyncQueue,r.t3=t,r.t4=n,r.t5=i,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3,r.t4,r.t5));case 9:case"end":return r.stop()}}),r)})))),i.promise}function cT(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var hT=new Map;function dT(e,t,n){if(!n)throw new Rv(Mv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function fT(e,t,n,i){if(!0===t&&!0===i)throw new Rv(Mv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function pT(e){if(!em.isDocumentKey(e))throw new Rv(Mv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function vT(e){if(em.isDocumentKey(e))throw new Rv(Mv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function mT(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ov()}function yT(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Rv(Mv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=mT(e);throw new Rv(Mv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function gT(e,t){if(t<=0)throw new Rv(Mv.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var _T=function(){function e(t){var n,i;if(De(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Rv(Mv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Rv(Mv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}fT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cT(null!==(i=t.experimentalLongPollingOptions)&&void 0!==i?i:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Rv(Mv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Rv(Mv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Rv(Mv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return Re(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),kT=function(){function e(t,n,i,r){De(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _T({}),this._settingsFrozen=!1}return Re(e,[{key:"app",get:function(){if(!this._app)throw new Rv(Mv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Rv(Mv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _T(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Lv;switch(e.type){case"firstParty":return new Uv(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Rv(Mv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=hT.get(e);t&&(Cv("ComponentProvider","Removing Datastore"),hT.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function wT(e,t,n){var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=yT(e,kT))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Iv("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),r.mockUserToken){var o,s;if("string"==typeof r.mockUserToken)o=r.mockUserToken,s=wv.MOCK_USER;else{o=at(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);var u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Rv(Mv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new wv(u)}e._authCredentials=new Bv(new Nv(o,s))}}var bT=function(){function e(t,n,i){De(this,e),this.converter=n,this._key=i,this.type="document",this.firestore=t}return Re(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ET(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),xT=function(){function e(t,n,i){De(this,e),this.converter=n,this._query=i,this.type="query",this.firestore=t}return Re(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ET=function(e){Le(n,e);var t=je(n);function n(e,i,r){var a;return De(this,n),(a=t.call(this,e,i,Ag(r)))._path=r,a.type="collection",a}return Re(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new bT(this.firestore,null,new em(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(xT);function CT(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=Ft(e),dT("collection","path",t),e instanceof kT){var a=Xv.fromString.apply(Xv,[t].concat(i));return vT(a),new ET(e,null,a)}if(!(e instanceof bT||e instanceof ET))throw new Rv(Mv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Xv.fromString.apply(Xv,[t].concat(i)));return vT(o),new ET(e.firestore,null,o)}function TT(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=Ft(e),1===arguments.length&&(t=Wv.A()),dT("doc","path",t),e instanceof kT){var a=Xv.fromString.apply(Xv,[t].concat(i));return pT(a),new bT(e,null,new em(a))}if(!(e instanceof bT||e instanceof ET))throw new Rv(Mv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Xv.fromString.apply(Xv,[t].concat(i)));return pT(o),new bT(e.firestore,e instanceof ET?e.converter:null,new em(o))}function IT(e,t){return e=Ft(e),t=Ft(t),(e instanceof bT||e instanceof ET)&&(t instanceof bT||t instanceof ET)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function ST(e,t){return e=Ft(e),t=Ft(t),e instanceof xT&&t instanceof xT&&e.firestore===t.firestore&&jg(e._query,t._query)&&e.converter===t.converter}var OT=function(){function e(){var t=this;De(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new wx(this,"async_queue_retry"),this.Xc=function(){var e=_x();e&&Cv("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=_x();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return Re(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=_x();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new Pv;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=$t(jt().mark((function e(){var t=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),_m(e.t0)){e.next=12;break}throw e.t0;case 12:Cv("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Tv("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var i=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var r=vE.createAndSchedule(this,e,t,n,(function(e){return i.na(e)}));return this.zc.push(r),r}},{key:"Zc",value:function(){this.Wc&&Ov()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=$t(jt().mark((function e(){var t;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=Pe(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,i=Pe(t.zc);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.skipDelay(),"all"!==e&&r.timerId===e)break}}catch(a){i.e(a)}finally{i.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function AT(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,i=e,r=Pe(["next","error","complete"]);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a in i&&"function"==typeof i[a])return!0}}catch(o){r.e(o)}finally{r.f()}return!1}(e)}var DT=function(){function e(){De(this,e),this._progressObserver={},this._taskCompletionResolver=new Pv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Re(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),MT=function(e){Le(n,e);var t=je(n);function n(e,i,r,a){var o;return De(this,n),(o=t.call(this,e,i,r,a)).type="firestore",o._queue=new OT,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return Re(n,[{key:"_terminate",value:function(){return this._firestoreClient||PT(this),this._firestoreClient.terminate()}}]),n}(kT);function RT(e){return e._firestoreClient||PT(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function PT(e){var t,n,i,r=e._freezeSettings(),a=function(e,t,n,i){return new Ey(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,cT(i.experimentalLongPollingOptions),i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new zC(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=r.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.cache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function NT(e,t,n){var i=new Pv;return e.asyncQueue.enqueue($t(jt().mark((function r(){var a;return jt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,HC(e,n);case 3:return r.next=5,QC(e,t);case 5:i.resolve(),r.next=14;break;case 8:if(r.prev=8,r.t0=r.catch(0),YC(a=r.t0)){r.next=13;break}throw a;case 13:Iv("Error enabling indexeddb cache. Falling back to memory cache: "+a),i.reject(a);case 14:case"end":return r.stop()}}),r,null,[[0,8]])})))).then((function(){return i.promise}))}function LT(e){return function(e){return e.asyncQueue.enqueue($t(jt().mark((function t(){var n,i;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tT(e);case 2:return n=t.sent,t.next=5,iT(e);case 5:return i=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Dv(e);return t.vu.delete(0),Sx(t)}(i)));case 7:case"end":return t.stop()}}),t)}))))}(RT(e=yT(e,MT)))}function BT(e){return function(e){return e.asyncQueue.enqueue($t(jt().mark((function t(){var n,i;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tT(e);case 2:return n=t.sent,t.next=5,iT(e);case 5:return i=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Dv(t)).vu.add(0),e.next=4,Ax(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(i)));case 7:case"end":return t.stop()}}),t)}))))}(RT(e=yT(e,MT)))}function FT(e,t){var n=RT(e=yT(e,MT)),i=new DT;return function(e,t,n,i){var r=function(e,t){return function(e,t){return new qC(e,t)}(function(e,t){if(e instanceof Uint8Array)return UC(e,t);if(e instanceof ArrayBuffer)return UC(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?Q_().encode(e):e),t)}(n,kx(t));e.asyncQueue.enqueueAndForget($t(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=NC,t.next=3,rT(e);case 3:t.t1=t.sent,t.t2=r,t.t3=i,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,i),i}function jT(e,t){return function(e,t){return e.asyncQueue.enqueue($t(jt().mark((function n(){return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Dv(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,nT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(RT(e=yT(e,MT)),t).then((function(t){return t?new xT(e,null,t.query):null}))}function UT(e){if(e._initialized||e._terminated)throw new Rv(Mv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var VT=function(){function e(t){De(this,e),this._byteString=t}return Re(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(my.fromBase64String(t))}catch(t){throw new Rv(Mv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(my.fromUint8Array(t))}}]),e}(),qT=function(){function e(){De(this,e);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var r=0;r<n.length;++r)if(0===n[r].length)throw new Rv(Mv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zv(n)}return Re(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var $T=Re((function e(t){De(this,e),this._methodName=t})),WT=function(){function e(t,n){if(De(this,e),!isFinite(t)||t<-90||t>90)throw new Rv(Mv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Rv(Mv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Re(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return zv(this._lat,e._lat)||zv(this._long,e._long)}}]),e}(),zT=/^__.*__$/,HT=function(){function e(t,n,i){De(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=i}return Re(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new M_(e,this.data,this.fieldMask,t,this.fieldTransforms):new D_(e,this.data,t,this.fieldTransforms)}}]),e}(),KT=function(){function e(t,n,i){De(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=i}return Re(e,[{key:"toMutation",value:function(e,t){return new M_(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function QT(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ov()}}var GT=function(){function e(t,n,i,r,a,o){De(this,e),this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Re(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:n,la:!1});return i.fa(e),i}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:n,la:!1});return i.ua(),i}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return vI(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(QT(this.ca)&&zT.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),YT=function(){function e(t,n,i){De(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||kx(t)}return Re(e,[{key:"ya",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new GT({ca:e,methodName:t,ga:n,path:Zv.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function XT(e){var t=e._freezeSettings(),n=kx(e._databaseId);return new YT(e._databaseId,!!t.ignoreUndefinedProperties,n)}function JT(e,t,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,r);hI("Data must be an object, but it was:",o,i);var s,u,l=lI(i,o);if(a.merge)s=new py(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var c,h=[],d=Pe(a.mergeFields);try{for(d.s();!(c=d.n()).done;){var f=dI(t,c.value,n);if(!o.contains(f))throw new Rv(Mv.INVALID_ARGUMENT,"Field '".concat(f,"' is specified in your field mask but missing from your input data."));mI(h,f)||h.push(f)}}catch(p){d.e(p)}finally{d.f()}s=new py(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new HT(new Ky(l),s,u)}var ZT=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}($T);function eI(e,t,n){return new GT({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var tI=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"_toFieldTransform",value:function(e){return new w_(e.path,new f_)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}($T),nI=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this,e)).pa=i,r}return Re(n,[{key:"_toFieldTransform",value:function(e){var t=eI(this,e,!0),n=this.pa.map((function(e){return uI(e,t)})),i=new p_(n);return new w_(e.path,i)}},{key:"isEqual",value:function(e){return this===e}}]),n}($T),iI=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this,e)).pa=i,r}return Re(n,[{key:"_toFieldTransform",value:function(e){var t=eI(this,e,!0),n=this.pa.map((function(e){return uI(e,t)})),i=new m_(n);return new w_(e.path,i)}},{key:"isEqual",value:function(e){return this===e}}]),n}($T),rI=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this,e)).Ia=i,r}return Re(n,[{key:"_toFieldTransform",value:function(e){var t=new g_(e.serializer,u_(e.serializer,this.Ia));return new w_(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}($T);function aI(e,t,n,i){var r=e.ya(1,t,n);hI("Data must be an object, but it was:",r,i);var a=[],o=Ky.empty();oy(i,(function(e,i){var s=pI(t,e,n);i=Ft(i);var u=r.da(s);if(i instanceof ZT)a.push(s);else{var l=uI(i,u);null!=l&&(a.push(s),o.set(s,l))}}));var s=new py(a);return new KT(o,s,r.fieldTransforms)}function oI(e,t,n,i,r,a){var o=e.ya(1,t,n),s=[dI(t,i,n)],u=[r];if(a.length%2!=0)throw new Rv(Mv.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var l=0;l<a.length;l+=2)s.push(dI(t,a[l])),u.push(a[l+1]);for(var c=[],h=Ky.empty(),d=s.length-1;d>=0;--d)if(!mI(c,s[d])){var f=s[d],p=u[d];p=Ft(p);var v=o.da(f);if(p instanceof ZT)c.push(f);else{var m=uI(p,v);null!=m&&(c.push(f),h.set(f,m))}}var y=new py(c);return new KT(h,y,o.fieldTransforms)}function sI(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return uI(n,e.ya(i?4:3,t))}function uI(e,t){if(cI(e=Ft(e)))return hI("Unsupported field value:",t,e),lI(e,t);if(e instanceof $T)return function(e,t){if(!QT(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,i=[],r=0,a=Pe(e);try{for(a.s();!(n=a.n()).done;){var o=uI(n.value,t.wa(r));null==o&&(o={nullValue:"NULL_VALUE"}),i.push(o),r++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:i}}}(e,t)}return function(e,t){if(null===(e=Ft(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return u_(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Qv.fromDate(e);return{timestampValue:pk(t.serializer,n)}}if(e instanceof Qv){var i=new Qv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:pk(t.serializer,i)}}if(e instanceof WT)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof VT)return{bytesValue:vk(t.serializer,e._byteString)};if(e instanceof bT){var r=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(r))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(r.projectId,"/").concat(r.database));return{referenceValue:gk(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(mT(e)))}(e,t)}function lI(e,t){var n={};return sy(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):oy(e,(function(e,i){var r=uI(i,t.ha(e));null!=r&&(n[e]=r)})),{mapValue:{fields:n}}}function cI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Qv||e instanceof WT||e instanceof VT||e instanceof bT||e instanceof $T)}function hI(e,t,n){if(!cI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var i=mT(n);throw"an object"===i?t._a(e+" a custom object"):t._a(e+" "+i)}}function dI(e,t,n){if((t=Ft(t))instanceof qT)return t._internalPath;if("string"==typeof t)return pI(e,t);throw vI("Field path arguments must be of type string or ",e,!1,void 0,n)}var fI=new RegExp("[~\\*/\\[\\]]");function pI(e,t,n){if(t.search(fI)>=0)throw vI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Ue(qT,Vt(t.split(".")))._internalPath}catch(i){throw vI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function vI(e,t,n,i,r){var a=i&&!i.isEmpty(),o=void 0!==r,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(i)),o&&(u+=" in document ".concat(r)),u+=")"),new Rv(Mv.INVALID_ARGUMENT,s+e+u)}function mI(e,t){return e.some((function(e){return e.isEqual(t)}))}var yI=function(){function e(t,n,i,r,a){De(this,e),this._firestore=t,this._userDataWriter=n,this._key=i,this._document=r,this._converter=a}return Re(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new bT(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new gI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(_I("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),gI=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"data",value:function(){return ki(Be(n.prototype),"data",this).call(this)}}]),n}(yI);function _I(e,t){return"string"==typeof t?pI(e,t):t instanceof qT?t._internalPath:t._delegate._internalPath}function kI(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Rv(Mv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wI=Re((function e(){De(this,e)})),bI=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n)}(wI);function xI(e,t){for(var n=[],i=arguments.length,r=new Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];t instanceof wI&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof CI})).length,n=e.filter((function(e){return e instanceof EI})).length;if(t>1||t>0&&n>0)throw new Rv(Mv.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(r));var o,s=Pe(n);try{for(s.s();!(o=s.n()).done;){e=o.value._apply(e)}}catch(u){s.e(u)}finally{s.f()}return e}var EI=function(e){Le(n,e);var t=je(n);function n(e,i,r){var a;return De(this,n),(a=t.call(this))._field=e,a._op=i,a._value=r,a.type="where",a}return Re(n,[{key:"_apply",value:function(e){var t=this._parse(e);return BI(e._query,t),new xT(e.firestore,e.converter,Bg(e._query,t))}},{key:"_parse",value:function(e){var t=XT(e.firestore),n=function(e,t,n,i,r,a,o){var s;if(r.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Rv(Mv.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){LI(o,a);var u,l=[],c=Pe(o);try{for(c.s();!(u=c.n()).done;){var h=u.value;l.push(NI(i,e,h))}}catch(d){c.e(d)}finally{c.f()}s={arrayValue:{values:l}}}else s=NI(i,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||LI(o,a),s=sI(n,"where",o,"in"===a||"not-in"===a);return ng.create(r,a,s)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,i){return new n(e,t,i)}}]),n}(bI);var CI=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this)).type=e,r._queryConstraints=i,r}return Re(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:ig.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,i=e,r=Pe(t.getFlattenedFilters());try{for(r.s();!(n=r.n()).done;){var a=n.value;BI(i,a),i=Bg(i,a)}}catch(o){r.e(o)}finally{r.f()}}(e._query,t),new xT(e.firestore,e.converter,Bg(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(wI);var TI=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this))._field=e,r._direction=i,r.type="orderBy",r}return Re(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Rv(Mv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Rv(Mv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var i=new Zy(t,n);return function(e,t){if(null===Mg(e)){var n=Rg(e);null!==n&&FI(e,n,t.field)}}(e,i),i}(e._query,this._field,this._direction);return new xT(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Sg(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(bI);var II=function(e){Le(n,e);var t=je(n);function n(e,i,r){var a;return De(this,n),(a=t.call(this)).type=e,a._limit=i,a._limitType=r,a}return Re(n,[{key:"_apply",value:function(e){return new xT(e.firestore,e.converter,Fg(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,i){return new n(e,t,i)}}]),n}(bI);var SI=function(e){Le(n,e);var t=je(n);function n(e,i,r){var a;return De(this,n),(a=t.call(this)).type=e,a._docOrFields=i,a._inclusive=r,a}return Re(n,[{key:"_apply",value:function(e){var t=PI(e,this.type,this._docOrFields,this._inclusive);return new xT(e.firestore,e.converter,function(e,t){return new Sg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,i){return new n(e,t,i)}}]),n}(bI);function OI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return SI._create("startAt",t,!0)}function AI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return SI._create("startAfter",t,!1)}var DI=function(e){Le(n,e);var t=je(n);function n(e,i,r){var a;return De(this,n),(a=t.call(this)).type=e,a._docOrFields=i,a._inclusive=r,a}return Re(n,[{key:"_apply",value:function(e){var t=PI(e,this.type,this._docOrFields,this._inclusive);return new xT(e.firestore,e.converter,function(e,t){return new Sg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,i){return new n(e,t,i)}}]),n}(bI);function MI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return DI._create("endBefore",t,!1)}function RI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return DI._create("endAt",t,!0)}function PI(e,t,n,i){if(n[0]=Ft(n[0]),n[0]instanceof yI)return function(e,t,n,i,r){if(!i)throw new Rv(Mv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=Pe(Ng(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(Ny(t,i.key));else{var l=i.data.field(u.field);if(wy(l))throw new Rv(Mv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var c=u.field.canonicalString();throw new Rv(Mv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(c,"' (used as the orderBy) does not exist."))}o.push(l)}}}catch(h){s.e(h)}finally{s.f()}return new Yy(o,r)}(e._query,e.firestore._databaseId,t,n[0]._document,i);var r=XT(e.firestore);return function(e,t,n,i,r,a){var o=e.explicitOrderBy;if(r.length>o.length)throw new Rv(Mv.INVALID_ARGUMENT,"Too many arguments provided to ".concat(i,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<r.length;u++){var l=r[u];if(o[u].field.isKeyField()){if("string"!=typeof l)throw new Rv(Mv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(i,"(), but got a ").concat(typeof l));if(!Pg(e)&&-1!==l.indexOf("/"))throw new Rv(Mv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(i,"() must be a plain document ID, but '").concat(l,"' contains a slash."));var c=e.path.child(Xv.fromString(l));if(!em.isDocumentKey(c))throw new Rv(Mv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(i,"() must result in a valid document path, but '").concat(c,"' is not because it contains an odd number of segments."));var h=new em(c);s.push(Ny(t,h))}else{var d=sI(n,i,l);s.push(d)}}return new Yy(s,a)}(e._query,e.firestore._databaseId,r,t,n,i)}function NI(e,t,n){if("string"==typeof(n=Ft(n))){if(""===n)throw new Rv(Mv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pg(t)&&-1!==n.indexOf("/"))throw new Rv(Mv.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var i=t.path.child(Xv.fromString(n));if(!em.isDocumentKey(i))throw new Rv(Mv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return Ny(e,new em(i))}if(n instanceof bT)return Ny(e,n._key);throw new Rv(Mv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(mT(n),"."))}function LI(e,t){if(!Array.isArray(e)||0===e.length)throw new Rv(Mv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function BI(e,t){if(t.isInequality()){var n=Rg(e),i=t.field;if(null!==n&&!n.isEqual(i))throw new Rv(Mv.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(i.toString(),"'"));var r=Mg(e);null!==r&&FI(e,i,r)}var a=function(e,t){var n,i=Pe(e);try{for(i.s();!(n=i.n()).done;){var r,a=Pe(n.value.getFlattenedFilters());try{for(a.s();!(r=a.n()).done;){var o=r.value;if(t.indexOf(o.op)>=0)return o.op}}catch(s){a.e(s)}finally{a.f()}}}catch(s){i.e(s)}finally{i.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Rv(Mv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Rv(Mv.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function FI(e,t,n){if(!n.isEqual(t))throw new Rv(Mv.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var jI=function(){function e(){De(this,e)}return Re(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Sy(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _y(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ky(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ov()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",i={};return oy(e,(function(e,r){i[e]=t.convertValue(r,n)})),i}},{key:"convertGeoPoint",value:function(e){return new WT(_y(e.latitude),_y(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=by(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xy(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=gy(e);return new Qv(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Xv.fromString(e);Av(qk(n));var i=new Cy(n.get(1),n.get(3)),r=new em(n.popFirst(5));return i.isEqual(t)||Tv("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),r}}]),e}();function UI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var VI=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this)).firestore=e,i}return Re(n,[{key:"convertBytes",value:function(e){return new VT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bT(this.firestore,null,t)}}]),n}(jI);var qI=function(){function e(t,n){De(this,e),this.hasPendingWrites=t,this.fromCache=n}return Re(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),$I=function(e){Le(n,e);var t=je(n);function n(e,i,r,a,o,s){var u;return De(this,n),(u=t.call(this,e,i,r,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return Re(n,[{key:"exists",value:function(){return ki(Be(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new WI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(_I("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(yI),WI=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ki(Be(n.prototype),"data",this).call(this,e)}}]),n}($I),zI=function(){function e(t,n,i,r){De(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=r,this.metadata=new qI(r.hasPendingWrites,r.fromCache),this.query=i}return Re(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(i){e.call(t,new WI(n._firestore,n._userDataWriter,i.key,i,new qI(n._snapshot.mutatedKeys.has(i.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Rv(Mv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var i=new WI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new qI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:i,oldIndex:-1,newIndex:n++}}))}var i=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new WI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new qI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),r=-1,a=-1;return 0!==t.type&&(r=i.indexOf(t.doc.key),i=i.delete(t.doc.key)),1!==t.type&&(a=(i=i.add(t.doc)).indexOf(t.doc.key)),{type:HI(t.type),doc:n,oldIndex:r,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function HI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ov()}}function KI(e,t){return e instanceof $I&&t instanceof $I?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof zI&&t instanceof zI&&e._firestore===t._firestore&&ST(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var QI=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this)).firestore=e,i}return Re(n,[{key:"convertBytes",value:function(e){return new VT(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bT(this.firestore,null,t)}}]),n}(jI);function GI(e){e=yT(e,bT);var t=yT(e.firestore,MT),n=RT(t),i=new QI(t);return function(e,t){var n=new Pv;return e.asyncQueue.enqueueAndForget($t(jt().mark((function i(){return jt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(){var e=$t(jt().mark((function e(t,n,i){var r,a;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Dv(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(r=e.sent).isFoundDocument()?i.resolve(r):r.isNoDocument()?i.resolve(null):i.reject(new Rv(Mv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=mE(e.t0,"Failed to get document '".concat(n," from cache")),i.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,i){return e.apply(this,arguments)}}(),i.next=3,nT(e);case 3:return i.t1=i.sent,i.t2=t,i.t3=n,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3));case 7:case"end":return i.stop()}}),i)})))),n.promise}(n,e._key).then((function(n){return new $I(t,i,e._key,n,new qI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function YI(e){e=yT(e,xT);var t=yT(e.firestore,MT),n=RT(t),i=new QI(t);return function(e,t){var n=new Pv;return e.asyncQueue.enqueueAndForget($t(jt().mark((function i(){return jt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(){var e=$t(jt().mark((function e(t,n,i){var r,a,o,s,u;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hb(t,n,!0);case 3:r=e.sent,a=new LE(n,r.ir),o=a.sc(r.documents),s=a.applyChanges(o,!1),i.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=mE(e.t0,"Failed to execute query '".concat(n," against cache")),i.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,i){return e.apply(this,arguments)}}(),i.next=3,nT(e);case 3:return i.t1=i.sent,i.t2=t,i.t3=n,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3));case 7:case"end":return i.stop()}}),i)})))),n.promise}(n,e._query).then((function(n){return new zI(t,i,e,n)}))}function XI(e,t,n){e=yT(e,bT);var i=yT(e.firestore,MT),r=UI(e.converter,t,n);return tS(i,[JT(XT(i),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,x_.none())])}function JI(e,t,n){e=yT(e,bT);for(var i=yT(e.firestore,MT),r=XT(i),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return tS(i,[("string"==typeof(t=Ft(t))||t instanceof qT?oI(r,"updateDoc",e._key,t,n,o):aI(r,"updateDoc",e._key,t)).toMutation(e._key,x_.exists(!0))])}function ZI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,a,o;e=Ft(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||AT(n[u])||(s=n[u],u++);var l,c,h,d={includeMetadataChanges:s.includeMetadataChanges};if(AT(n[u])){var f=n[u];n[u]=null===(r=f.next)||void 0===r?void 0:r.bind(f),n[u+1]=null===(a=f.error)||void 0===a?void 0:a.bind(f),n[u+2]=null===(o=f.complete)||void 0===o?void 0:o.bind(f)}if(e instanceof bT)c=yT(e.firestore,MT),h=Ag(e._key.path),l={next:function(t){n[u]&&n[u](nS(c,e,t))},error:n[u+1],complete:n[u+2]};else{var p=yT(e,xT);c=yT(p.firestore,MT),h=p._query;var v=new QI(c);l={next:function(e){n[u]&&n[u](new zI(c,v,p,e))},error:n[u+1],complete:n[u+2]},kI(e._query)}return function(e,t,n,i){var r=new VC(i),a=new OE(t,r,n);return e.asyncQueue.enqueueAndForget($t(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=bE,t.next=3,oT(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){r.Dc(),e.asyncQueue.enqueueAndForget($t(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=EE,t.next=3,oT(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(RT(c),h,d,l)}function eS(e,t){return function(e,t){var n=new VC(t);return e.asyncQueue.enqueueAndForget($t(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Dv(e).ku.add(t),t.next()},t.next=3,oT(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget($t(jt().mark((function t(){return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Dv(e).ku.delete(t)},t.next=3,oT(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(RT(e=yT(e,MT)),AT(t)?t:{next:t})}function tS(e,t){return function(e,t){var n=new Pv;return e.asyncQueue.enqueueAndForget($t(jt().mark((function i(){return jt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=HE,i.next=3,rT(e);case 3:return i.t1=i.sent,i.t2=t,i.t3=n,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3));case 7:case"end":return i.stop()}}),i)})))),n.promise}(RT(e),t)}function nS(e,t,n){var i=n.docs.get(t._key),r=new QI(e);return new $I(e,r,t._key,i,new qI(n.hasPendingWrites,n.fromCache),t.converter)}var iS={maxAttempts:5},rS=function(){function e(t,n){De(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=XT(t)}return Re(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var i=aS(e,this._firestore),r=UI(i.converter,t,n),a=JT(this._dataReader,"WriteBatch.set",i._key,r,null!==i.converter,n);return this._mutations.push(a.toMutation(i._key,x_.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var i,r=aS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return i="string"==typeof(t=Ft(t))||t instanceof qT?oI(this._dataReader,"WriteBatch.update",r._key,t,n,o):aI(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,x_.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=aS(e,this._firestore);return this._mutations=this._mutations.concat(new F_(t._key,x_.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Rv(Mv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function aS(e,t){if((e=Ft(e)).firestore!==t)throw new Rv(Mv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var oS=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this,e,i))._firestore=e,r}return Re(n,[{key:"get",value:function(e){var t=this,i=aS(e,this._firestore),r=new QI(this._firestore);return ki(Be(n.prototype),"get",this).call(this,e).then((function(e){return new $I(t._firestore,r,i._key,e._document,new qI(!1,!1),i.converter)}))}}]),n}(function(){function e(t,n){De(this,e),this._firestore=t,this._transaction=n,this._dataReader=XT(t)}return Re(e,[{key:"get",value:function(e){var t=this,n=aS(e,this._firestore),i=new VI(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ov();var r=e[0];if(r.isFoundDocument())return new yI(t._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new yI(t._firestore,i,n._key,null,n.converter);throw Ov()}))}},{key:"set",value:function(e,t,n){var i=aS(e,this._firestore),r=UI(i.converter,t,n),a=JT(this._dataReader,"Transaction.set",i._key,r,null!==i.converter,n);return this._transaction.set(i._key,a),this}},{key:"update",value:function(e,t,n){for(var i,r=aS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return i="string"==typeof(t=Ft(t))||t instanceof qT?oI(this._dataReader,"Transaction.update",r._key,t,n,o):aI(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}},{key:"delete",value:function(e){var t=aS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function sS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new nI("arrayUnion",t)}function uS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new iI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){bv=e}(Vn),Pn(new Wt("firestore",(function(e,n){var i=n.instanceIdentifier,r=n.options,a=e.getProvider("app").getImmediate(),o=new MT(new Fv(e.getProvider("auth-internal")),new qv(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Rv(Mv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cy(e.options.projectId,t)}(a,i),a);return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o}),"PUBLIC").setMultipleInstances(!0)),Kn(kv,"3.12.0",e),Kn(kv,"3.12.0","esm2017")}();function lS(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Rv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function cS(){if("undefined"===typeof Uint8Array)throw new Rv("unimplemented","Uint8Arrays are not available in this environment.")}function hS(){if("undefined"==typeof atob)throw new Rv("unimplemented","Blobs are unavailable in Firestore in this environment.")}var dS=function(){function e(t){De(this,e),this._delegate=t}return Re(e,[{key:"toBase64",value:function(){return hS(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return cS(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return hS(),new e(VT.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return cS(),new e(VT.fromUint8Array(t))}}]),e}();function fS(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,i=e,r=Pe(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a in i&&"function"===typeof i[a])return!0}}catch(o){r.e(o)}finally{r.f()}return!1}(e,["next","error","complete"])}var pS=function(){function e(){De(this,e)}return Re(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){UT(e=yT(e,MT));var n=RT(e);if(n._uninitializedComponentsProvider)throw new Rv(Mv.FAILED_PRECONDITION,"SDK cache is already specified.");Iv("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var i=e._freezeSettings(),r=new jC;return NT(n,r,new BC(r,i.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){UT(e=yT(e,MT));var t=RT(e);if(t._uninitializedComponentsProvider)throw new Rv(Mv.FAILED_PRECONDITION,"SDK cache is already specified.");Iv("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),i=new jC;return NT(t,i,new FC(i,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Rv(Mv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Pv;return e._queue.enqueueAndForgetEvenWhileRestricted($t(jt().mark((function n(){return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=$t(jt().mark((function e(t){var n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mm.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,mm.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Db(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),vS=function(){function e(t,n,i){var r=this;De(this,e),this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Cy||(this._appCompat=t)}return Re(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Iv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};wT(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return LT(this._delegate)}},{key:"disableNetwork",value:function(){return BT(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&fT("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new Pv;return e.asyncQueue.enqueueAndForget($t(jt().mark((function n(){return jt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=iC,n.next=3,rT(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(RT(yT(this._delegate,MT)))}},{key:"onSnapshotsInSync",value:function(e){return eS(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Rv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new OS(this,CT(this._delegate,e))}catch(t){throw wS(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new kS(this,TT(this._delegate,e))}catch(t){throw wS(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new TS(this,function(e,t){if(e=yT(e,kT),dT("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Rv(Mv.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new xT(e,null,function(e){return new Sg(Xv.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw wS(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=yT(e,MT);var i=Object.assign(Object.assign({},iS),n);return function(e){if(e.maxAttempts<1)throw new Rv(Mv.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(e,t,n){var i=new Pv;return e.asyncQueue.enqueueAndForget($t(jt().mark((function r(){var a;return jt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,aT(e);case 2:a=r.sent,new WC(e.asyncQueue,a,n,t,i).run();case 4:case"end":return r.stop()}}),r)})))),i.promise}(RT(e),(function(n){return t(new oS(e,n))}),i)}(this._delegate,(function(n){return e(new yS(t,n))}))}},{key:"batch",value:function(){var e=this;return RT(this._delegate),new gS(new rS(this._delegate,(function(t){return tS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return FT(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return jT(this._delegate,e).then((function(e){return e?new TS(t,e):null}))}}]),e}(),mS=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this)).firestore=e,i}return Re(n,[{key:"convertBytes",value:function(e){return new dS(new VT(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return kS.forKey(t,this.firestore,null)}}]),n}(jI);var yS=function(){function e(t,n){De(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new mS(t)}return Re(e,[{key:"get",value:function(e){var t=this,n=AS(e);return this._delegate.get(n).then((function(e){return new ES(t._firestore,new $I(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var i=AS(e);return n?(lS("Transaction.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}},{key:"update",value:function(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),a=3;a<i;a++)r[a-3]=arguments[a];var o,s=AS(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(r));return this}},{key:"delete",value:function(e){var t=AS(e);return this._delegate.delete(t),this}}]),e}(),gS=function(){function e(t){De(this,e),this._delegate=t}return Re(e,[{key:"set",value:function(e,t,n){var i=AS(e);return n?(lS("WriteBatch.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}},{key:"update",value:function(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),a=3;a<i;a++)r[a-3]=arguments[a];var o,s=AS(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(r));return this}},{key:"delete",value:function(e){var t=AS(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),_S=function(){function e(t,n,i){De(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=i}return Re(e,[{key:"fromFirestore",value:function(e,t){var n=new WI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new CS(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var i=e.INSTANCES,r=i.get(t);r||(r=new WeakMap,i.set(t,r));var a=r.get(n);return a||(a=new e(t,new mS(t),n),r.set(n,a)),a}}]),e}();_S.INSTANCES=new WeakMap;var kS=function(){function e(t,n){De(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new mS(t)}return Re(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new OS(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new OS(this.firestore,CT(this._delegate,e))}catch(t){throw wS(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ft(e))instanceof bT&&IT(this._delegate,e)}},{key:"set",value:function(e,t){t=lS("DocumentReference.set",t);try{return t?XI(this._delegate,e,t):XI(this._delegate,e)}catch(n){throw wS(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];try{return 1===arguments.length?JI(this._delegate,e):JI.apply(void 0,[this._delegate,e,t].concat(i))}catch(a){throw wS(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return tS(yT((e=this._delegate).firestore,MT),[new F_(e._key,x_.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=bS(n),a=xS(n,(function(t){return new ES(e.firestore,new $I(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return ZI(this._delegate,r,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?GI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=yT(e,bT);var t=yT(e.firestore,MT);return uT(RT(t),e._key,{source:"server"}).then((function(n){return nS(t,e,n)}))}(this._delegate):function(e){e=yT(e,bT);var t=yT(e.firestore,MT);return uT(RT(t),e._key).then((function(n){return nS(t,e,n)}))}(this._delegate)).then((function(e){return new ES(t.firestore,new $I(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(_S.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,i){if(t.length%2!==0)throw new Rv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new bT(n._delegate,i,new em(t)))}},{key:"forKey",value:function(t,n,i){return new e(n,new bT(n._delegate,i,t))}}]),e}();function wS(e,t,n){return e.message=e.message.replace(t,n),e}function bS(e){var t,n=Pe(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;if("object"===typeof i&&!fS(i))return i}}catch(r){n.e(r)}finally{n.f()}return{}}function xS(e,t){var n,i,r;return{next:function(e){r.next&&r.next(t(e))},error:null===(n=(r=fS(e[0])?e[0]:fS(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}var ES=function(){function e(t,n){De(this,e),this._firestore=t,this._delegate=n}return Re(e,[{key:"ref",get:function(){return new kS(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return KI(this._delegate,e._delegate)}}]),e}(),CS=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||Ov(),t}}]),n}(ES),TS=function(){function e(t,n){De(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new mS(t)}return Re(e,[{key:"where",value:function(t,n,i){try{return new e(this.firestore,xI(this._delegate,function(e,t,n){var i=t,r=_I("where",e);return EI._create(r,i,n)}(t,n,i)))}catch(r){throw wS(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,xI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=_I("orderBy",e);return TI._create(n,t)}(t,n)))}catch(i){throw wS(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,xI(this._delegate,(gT("limit",n=t),II._create("limit",n,"F"))))}catch(i){throw wS(i,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,xI(this._delegate,(gT("limitToLast",n=t),II._create("limitToLast",n,"L"))))}catch(i){throw wS(i,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,xI(this._delegate,OI.apply(void 0,arguments)))}catch(t){throw wS(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,xI(this._delegate,AI.apply(void 0,arguments)))}catch(t){throw wS(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,xI(this._delegate,MI.apply(void 0,arguments)))}catch(t){throw wS(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,xI(this._delegate,RI.apply(void 0,arguments)))}catch(t){throw wS(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return ST(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?YI(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=yT(e,xT);var t=yT(e.firestore,MT),n=RT(t),i=new QI(t);return lT(n,e._query,{source:"server"}).then((function(n){return new zI(t,i,e,n)}))}(this._delegate):function(e){e=yT(e,xT);var t=yT(e.firestore,MT),n=RT(t),i=new QI(t);return kI(e._query),lT(n,e._query).then((function(n){return new zI(t,i,e,n)}))}(this._delegate)).then((function(e){return new SS(t.firestore,new zI(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=bS(n),a=xS(n,(function(t){return new SS(e.firestore,new zI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return ZI(this._delegate,r,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(_S.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),IS=function(){function e(t,n){De(this,e),this._firestore=t,this._delegate=n}return Re(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new CS(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),SS=function(){function e(t,n){De(this,e),this._firestore=t,this._delegate=n}return Re(e,[{key:"query",get:function(){return new TS(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new CS(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new IS(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(i){e.call(t,new CS(n._firestore,i))}))}},{key:"isEqual",value:function(e){return KI(this._delegate,e._delegate)}}]),e}(),OS=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this,e,i)).firestore=e,r._delegate=i,r}return Re(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new kS(this.firestore,e):null}},{key:"doc",value:function(e){try{return new kS(this.firestore,void 0===e?TT(this._delegate):TT(this._delegate,e))}catch(t){throw wS(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=yT(e.firestore,MT),i=TT(e),r=UI(e.converter,t);return tS(n,[JT(XT(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,x_.exists(!1))]).then((function(){return i}))}(this._delegate,e).then((function(e){return new kS(t.firestore,e)}))}},{key:"isEqual",value:function(e){return IT(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(_S.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(TS);function AS(e){return yT(e,bT)}var DS=function(){function e(){De(this,e);for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this._delegate=Ue(qT,n)}return Re(e,[{key:"isEqual",value:function(e){return(e=Ft(e))instanceof qT&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Zv.keyField().canonicalString())}}]),e}(),MS=function(){function e(t){De(this,e),this._delegate=t}return Re(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new tI("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new ZT("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=sS.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=uS.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new rI("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),RS={Firestore:vS,GeoPoint:WT,Timestamp:Qv,Blob:dS,Transaction:yS,WriteBatch:gS,DocumentReference:kS,DocumentSnapshot:ES,Query:TS,QueryDocumentSnapshot:CS,QuerySnapshot:SS,CollectionReference:OS,FieldPath:DS,FieldValue:MS,setLogLevel:function(e){var t;t=e,xv.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Wt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("firestore").getImmediate();return t(n,i)}),"PUBLIC").setServiceProps(Object.assign({},RS)))}(e,(function(e,t){return new vS(e,t,new pS)})),e.registerVersion("@firebase/firestore-compat","0.3.9")}(_i);var PS="@firebase/database",NS="0.14.4",LS="";function BS(e){LS=e}var FS=function(){function e(t){De(this,e),this.domStorage_=t,this.prefix_="firebase:"}return Re(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),gt(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:yt(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),jS=function(){function e(){De(this,e),this.cache_={},this.isInMemoryStorage=!0}return Re(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return kt(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),US=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new FS(t)}}catch(n){}return new jS},VS=US("localStorage"),qS=US("sessionStorage"),$S=new tn("@firebase/database"),WS=function(){var e=1;return function(){return e++}}(),zS=function(e){var t=function(e){for(var t=[],n=0,i=0;i<e.length;i++){var r=e.charCodeAt(i);if(r>=55296&&r<=56319){var a=r-55296;i++,ze(i<e.length,"Surrogate pair missing trail surrogate."),r=65536+(a<<10)+(e.charCodeAt(i)-56320)}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t}(e),n=new Ot;n.update(t);var i=n.digest();return Qe.encodeByteArray(i)},HS=function e(){for(var t="",n=0;n<arguments.length;n++){var i=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(i)||i&&"object"===typeof i&&"number"===typeof i.length?t+=e.apply(null,i):t+="object"===typeof i?gt(i):i,t+=" "}return t},KS=null,QS=!0,GS=function(e,t){ze(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?($S.logLevel=Qt.VERBOSE,KS=$S.log.bind($S),t&&qS.set("logging_enabled",!0)):"function"===typeof e?KS=e:(KS=null,qS.remove("logging_enabled"))},YS=function(){if(!0===QS&&(QS=!1,null===KS&&!0===qS.get("logging_enabled")&&GS(!0)),KS){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=HS.apply(null,t);KS(i)}},XS=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];YS.apply(void 0,[e].concat(n))}},JS=function(){var e="FIREBASE INTERNAL ERROR: "+HS.apply(void 0,arguments);$S.error(e)},ZS=function(){var e="FIREBASE FATAL ERROR: ".concat(HS.apply(void 0,arguments));throw $S.error(e),new Error(e)},eO=function(){var e="FIREBASE WARNING: "+HS.apply(void 0,arguments);$S.warn(e)},tO=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},nO="[MIN_NAME]",iO="[MAX_NAME]",rO=function(e,t){if(e===t)return 0;if(e===nO||t===iO)return-1;if(t===nO||e===iO)return 1;var n=dO(e),i=dO(t);return null!==n?null!==i?n-i===0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1},aO=function(e,t){return e===t?0:e<t?-1:1},oO=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+gt(t))},sO=function e(t){if("object"!==typeof t||null===t)return gt(t);var n=[];for(var i in t)n.push(i);n.sort();for(var r="{",a=0;a<n.length;a++)0!==a&&(r+=","),r+=gt(n[a]),r+=":",r+=e(t[n[a]]);return r+="}"},uO=function(e,t){var n=e.length;if(n<=t)return[e];for(var i=[],r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function lO(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var cO=function(e){ze(!tO(e),"Invalid JSON number");var t,n,i,r,a,o=1023;0===e?(n=0,i=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(r=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,i=Math.round(e*Math.pow(2,52-r)-Math.pow(2,52))):(n=0,i=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),l="";for(a=0;a<64;a+=8){var c=parseInt(u.substr(a,8),2).toString(16);1===c.length&&(c="0"+c),l+=c}return l.toLowerCase()};var hO=new RegExp("^-?(0*)\\d{1,10}$"),dO=function(e){if(hO.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},fO=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw eO("Exception was thrown by user callback.",e),t}),Math.floor(0))}},pO=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},vO=function(){function e(t,n){var i=this;De(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return i.appCheck=e}))}return Re(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,i){setTimeout((function(){t.appCheck?t.getToken(e).then(n,i):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){eO('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),mO=function(){function e(t,n,i){var r=this;De(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit((function(e){return r.auth_=e}))}return Re(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(YS("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,i){setTimeout((function(){t.auth_?t.getToken(e).then(n,i):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',eO(e)}}]),e}(),yO=function(){function e(t){De(this,e),this.accessToken=t}return Re(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();yO.OWNER="owner";var gO="5",_O=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,kO="ac",wO="websocket",bO="long_polling",xO=function(){function e(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];De(this,e),this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=VS.get("host:"+t)||this._host}return Re(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&VS.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function EO(e,t,n){var i;if(ze("string"===typeof t,"typeof type must == string"),ze("object"===typeof n,"typeof params must == object"),t===wO)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==bO)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var r=[];return lO(n,(function(e,t){r.push(e+"="+t)})),i+r.join("&")}var CO=function(){function e(){De(this,e),this.counters_={}}return Re(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;kt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Ze(void 0,this.counters_)}}]),e}(),TO={},IO={};function SO(e){var t=e.toString();return TO[t]||(TO[t]=new CO),TO[t]}var OO=function(){function e(t){De(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return Re(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var i=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&fO((function(){n.onMessage_(e[t])}))},i=0;i<e.length;++i)t(i);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===i())break}}}]),e}(),AO="start",DO=function(){function e(t,n,i,r,a,o,s){var u=this;De(this,e),this.connId=t,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=XS(t),this.stats_=SO(n),this.urlFn=function(e){return u.appCheckToken&&(e[kO]=u.appCheckToken),EO(n,bO,e)}}return Re(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new OO(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(dt()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new MO((function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,r===AO)n.id=a,n.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[AO]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=gO,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[kO]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&_O.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=gt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Ye(t),i=uO(n,1840),r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!dt()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=gt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!dt()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),MO=function(){function e(t,n,i,r){if(De(this,e),this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,dt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=WS(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){YS("frame writing exception"),s.stack&&YS(s.stack),YS(s)}}}return Re(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",i=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var r=this.pendingSegs.shift();n=n+"&seg"+i+"="+r.seg+"&ts"+i+"="+r.ts+"&d"+i+"="+r.d,i++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var i=function(){n.outstandingRequests.delete(t),n.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(r),i()}))}},{key:"addTag",value:function(e,t){var n=this;dt()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var i=n.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){var e=i.readyState;e&&"loaded"!==e&&"complete"!==e||(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=function(){YS("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(i)}catch(r){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||YS("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),RO=null;"undefined"!==typeof MozWebSocket?RO=MozWebSocket:"undefined"!==typeof WebSocket&&(RO=WebSocket);var PO=function(){function e(t,n,i,r,a,o,s){De(this,e),this.connId=t,this.applicationId=i,this.appCheckToken=r,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=XS(this.connId),this.stats_=SO(n),this.connURL=e.connectionURL_(n,o,s,r,i),this.nodeAdmin=n.nodeAdmin}return Re(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,VS.set("previous_websocket_failure",!0);try{var i;if(dt()){var r=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":"Firebase/".concat(gO,"/").concat(LS,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_apiKey:"AIzaSyDuVxcj871XrI0PbnVKZGApPV1LHSzsZWA",REACT_APP_appId:"1:51556035661:web:5eb6609ab3ea61fea5c004",REACT_APP_authDomain:"y76-librarymanagementsystem.firebaseapp.com",REACT_APP_messagingSenderId:"51556035661",REACT_APP_projectId:"y76-librarymanagementsystem",REACT_APP_storageBucket:"y76-librarymanagementsystem.appspot.com"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o})}this.mySock=new RO(this.connURL,[],i)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){VS.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=yt(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(ze(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=gt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=uO(t,16384);n.length>1&&this.sendString_(String(n.length));for(var i=0;i<n.length;i++)this.sendString_(n[i])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,i,r){var a={};return a.v=gO,!dt()&&"undefined"!==typeof location&&location.hostname&&_O.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),i&&(a[kO]=i),r&&(a.p=r),EO(e,wO,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==RO&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return VS.isInMemoryStorage||!0===VS.get("previous_websocket_failure")}}]),e}();PO.responsesRequiredToBeHealthy=2,PO.healthyTimeout=3e4;var NO=function(){function e(t){De(this,e),this.initTransports_(t)}return Re(e,[{key:"initTransports_",value:function(t){var n=PO&&PO.isAvailable(),i=n&&!PO.previouslyFailed();if(t.webSocketOnly&&(n||eO("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[PO];else{var r,a=this.transports_=[],o=Pe(e.ALL_TRANSPORTS);try{for(o.s();!(r=o.n()).done;){var s=r.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[DO,PO]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();NO.globalTransportInitialized_=!1;var LO=function(){function e(t,n,i,r,a,o,s,u,l,c){De(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=XS("c:"+this.id+":"),this.transportManager_=new NO(n),this.log_("Connection created"),this.start_()}return Re(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,i)}),Math.floor(0));var r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=pO((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(r)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=oO("t",e),n=oO("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=oO("t",e),n=oO("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=oO("t",e);if("d"in e){var n=e.d;if("h"===t){var i=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?JS("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):JS("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),gO!==n&&eO("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),pO((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):pO((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(VS.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),BO=function(){function e(){De(this,e)}return Re(e,[{key:"put",value:function(e,t,n,i){}},{key:"merge",value:function(e,t,n,i){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),FO=function(){function e(t){De(this,e),this.allowedEvents_=t,this.listeners_={},ze(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return Re(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=Vt(this.listeners_[e]),n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,i)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var i=this.getInitialEvent(e);i&&t.apply(n,i)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var i=this.listeners_[e]||[],r=0;r<i.length;r++)if(i[r].callback===t&&(!n||n===i[r].context))return void i.splice(r,1)}},{key:"validateEventType_",value:function(e){ze(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),jO=function(e){Le(n,e);var t=je(n);function n(){var e;return De(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||st()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Re(n,[{key:"getInitialEvent",value:function(e){return ze("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(FO),UO=32,VO=768,qO=function(){function e(t,n){if(De(this,e),void 0===n){this.pieces_=t.split("/");for(var i=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return Re(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function $O(){return new qO("")}function WO(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function zO(e){return e.pieces_.length-e.pieceNum_}function HO(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new qO(e.pieces_,t)}function KO(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function QO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function GO(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new qO(t,0)}function YO(e,t){for(var n=[],i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof qO)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new qO(n,0)}function XO(e){return e.pieceNum_>=e.pieces_.length}function JO(e,t){var n=WO(e),i=WO(t);if(null===n)return t;if(n===i)return JO(HO(e),HO(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function ZO(e,t){for(var n=QO(e,0),i=QO(t,0),r=0;r<n.length&&r<i.length;r++){var a=rO(n[r],i[r]);if(0!==a)return a}return n.length===i.length?0:n.length<i.length?-1:1}function eA(e,t){if(zO(e)!==zO(t))return!1;for(var n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function tA(e,t){var n=e.pieceNum_,i=t.pieceNum_;if(zO(e)>zO(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}var nA=Re((function e(t,n){De(this,e),this.errorPrefix_=n,this.parts_=QO(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var i=0;i<this.parts_.length;i++)this.byteLength_+=Bt(this.parts_[i]);iA(this)}));function iA(e){if(e.byteLength_>VO)throw new Error(e.errorPrefix_+"has a key path longer than "+VO+" bytes ("+e.byteLength_+").");if(e.parts_.length>UO)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+UO+") or object contains a cycle "+rA(e))}function rA(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var aA=function(e){Le(n,e);var t=je(n);function n(){var e,i,r;return De(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(r="visibilitychange",i="hidden"):"undefined"!==typeof document.mozHidden?(r="mozvisibilitychange",i="mozHidden"):"undefined"!==typeof document.msHidden?(r="msvisibilitychange",i="msHidden"):"undefined"!==typeof document.webkitHidden&&(r="webkitvisibilitychange",i="webkitHidden")),e.visible_=!0,r&&document.addEventListener(r,(function(){var t=!document[i];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return Re(n,[{key:"getInitialEvent",value:function(e){return ze("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(FO),oA=1e3,sA=function(e){Le(n,e);var t=je(n);function n(e,i,r,a,o,s,u,l){var c;if(De(this,n),(c=t.call(this)).repoInfo_=e,c.applicationId_=i,c.onDataUpdate_=r,c.onConnectStatus_=a,c.onServerInfoUpdate_=o,c.authTokenProvider_=s,c.appCheckTokenProvider_=u,c.authOverride_=l,c.id=n.nextPersistentConnectionId_++,c.log_=XS("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingGets_=[],c.outstandingPutCount_=0,c.outstandingGetCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=oA,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.appCheckToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.invalidAppCheckTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,l&&!dt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return aA.getInstance().on("visible",c.onVisible_,Ne(c)),-1===e.host.indexOf("fblocal")&&jO.getInstance().on("online",c.onOnline_,Ne(c)),c}return Re(n,[{key:"sendRequest",value:function(e,t,n){var i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(gt(r)),ze(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new rt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}},{key:"listen",value:function(e,t,n,i){this.initConnection_();var r=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+r),this.listens.has(a)||this.listens.set(a,new Map),ze(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ze(!this.listens.get(a).has(r),"listen() called twice for same path/queryId.");var o={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(a).set(r,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(i){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(i)}))}},{key:"sendListen_",value:function(e){var t=this,i=e.query,r=i._path.toString(),a=i._queryIdentifier;this.log_("Listen on "+r+" for "+a);var o={p:r};e.tag&&(o.q=i._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,i),(t.listens.get(r)&&t.listens.get(r).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(r,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=_t(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=_t(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"===typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(n,i,(function(n){var i=n.s,r=n.d||"error";e.authToken_===t&&("ok"===i?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(i,r))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,i=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,i)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),ze(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);var r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,i){var r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,(function(e){i&&setTimeout((function(){i(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,i){this.putInternal("p",e,t,n,i)}},{key:"merge",value:function(e,t,n,i){this.putInternal("m",e,t,n,i)}},{key:"putInternal",value:function(e,t,n,i,r){this.initConnection_();var a={p:t,d:n};void 0!==r&&(a.h=r),this.outstandingPuts_.push({action:e,request:a,onComplete:i}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,(function(i){t.log_(n+" response",i),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),r&&r(i.s,i.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+gt(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):JS("Unrecognized action received from server: "+gt(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;ze(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=oA,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=oA,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=oA),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=$t(jt().mark((function e(){var t,i,r,a,o,s,u,l,c,h,d,f,p,v,m=this;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,s=!1,u=null,l=function(){u?u.close():(s=!0,r())},c=function(e){ze(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)},this.realtime_={close:l,sendRequest:c},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,f=Ie(d,2),p=f[0],v=f[1],s?YS("getToken() completed but was canceled"):(YS("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,u=new LO(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,i,r,(function(e){eO(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),s||(this.repoInfo_.nodeAdmin&&eO(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){YS("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){YS("Resuming connection for reason: "+e),delete this.interruptReasons_[e],bt(this.interruptReasons_)&&(this.reconnectDelay_=oA,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return sO(e)})).join("$"):"default";var i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,i=new qO(e).toString();if(this.listens.has(i)){var r=this.listens.get(i);n=r.get(t),r.delete(t),0===r.size&&this.listens.delete(i)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){YS("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){YS("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=Pe(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,i=Pe(e.value.values());try{for(i.s();!(n=i.n()).done;){var r=n.value;this.sendListen_(r)}}catch(u){i.e(u)}finally{i.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";dt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+LS.replace(/\./g,"-")]=1,st()?e["framework.cordova"]=1:ct()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=jO.getInstance().currentlyOnline();return bt(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&kt(e,"w")){var n=wt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var i='".indexOn": "'+t._queryParams.getIndex().toString()+'"',r=t._path.toString();eO("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(i," at ")+"".concat(r," to your security rules for better performance."))}}}}]),n}(BO);sA.nextPersistentConnectionId_=0,sA.nextConnectionId_=0;var uA,lA=function(){function e(t,n){De(this,e),this.name=t,this.node=n}return Re(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),cA=function(){function e(){De(this,e)}return Re(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new lA(nO,e),i=new lA(nO,t);return 0!==this.compare(n,i)}},{key:"minPost",value:function(){return lA.MIN}}]),e}(),hA=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"compare",value:function(e,t){return rO(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw He("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return lA.MIN}},{key:"maxPost",value:function(){return new lA(iO,uA)}},{key:"makePost",value:function(e,t){return ze("string"===typeof e,"KeyIndex indexValue must always be a string."),new lA(e,uA)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return uA},set:function(e){uA=e}}]),n}(cA),dA=new hA,fA=function(){function e(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;De(this,e),this.isReverse_=r,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?i(t.key,n):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return Re(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),pA=function(){function e(t,n,i,r,a){De(this,e),this.key=t,this.value=n,this.color=null!=i?i:e.RED,this.left=null!=r?r:yA.EMPTY_NODE,this.right=null!=a?a:yA.EMPTY_NODE}return Re(e,[{key:"copy",value:function(t,n,i,r,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var i=this,r=n(e,i.key);return(i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return yA.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,i;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return yA.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();pA.RED=!0,pA.BLACK=!1;var vA,mA=function(){function e(){De(this,e)}return Re(e,[{key:"copy",value:function(e,t,n,i,r){return this}},{key:"insert",value:function(e,t,n){return new pA(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),yA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;De(this,e),this.comparator_=t,this.root_=n}return Re(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,pA.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,pA.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,i=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new fA(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new fA(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new fA(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new fA(this.root_,null,this.comparator_,!0,e)}}]),e}();function gA(e,t){return rO(e.name,t.name)}function _A(e,t){return rO(e,t)}yA.EMPTY_NODE=new mA;var kA,wA,bA,xA=function(e){return"number"===typeof e?"number:"+cO(e):"string:"+e},EA=function(e){if(e.isLeafNode()){var t=e.val();ze("string"===typeof t||"number"===typeof t||"object"===typeof t&&kt(t,".sv"),"Priority must be a string or number.")}else ze(e===vA||e.isEmpty(),"priority of unexpected type.");ze(e===vA||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},CA=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;De(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,ze(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),EA(this.priorityNode_)}return Re(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return XO(t)?this:".priority"===WO(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var i=WO(t);return null===i?n:n.isEmpty()&&".priority"!==i?this:(ze(".priority"!==i||1===zO(t),".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(HO(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+xA(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?cO(this.value_):this.value_,this.lazyHash_=zS(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(ze(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,i=typeof this.value_,r=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(i);return ze(r>=0,"Unknown leaf type: "+n),ze(a>=0,"Unknown leaf type: "+i),r===a?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-r}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return kA},set:function(e){kA=e}}]),e}();CA.VALUE_TYPE_ORDER=["object","boolean","number","string"];var TA,IA,SA=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?rO(e.name,t.name):r}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return lA.MIN}},{key:"maxPost",value:function(){return new lA(iO,new CA("[PRIORITY-POST]",bA))}},{key:"makePost",value:function(e,t){var n=wA(e);return new lA(t,new CA("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(cA),OA=new SA,AA=Math.log(2),DA=function(){function e(t){De(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/AA,10)),this.current_=this.count-1;var i,r=(i=this.count,parseInt(Array(i+1).join("1"),2));this.bits_=t+1&r}return Re(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),MA=function(e,t,n,i){e.sort(t);var r=function t(i,r){var a,o,s=r-i;if(0===s)return null;if(1===s)return a=e[i],o=n?n(a):a,new pA(o,a.node,pA.BLACK,null,null);var u=parseInt(s/2,10)+i,l=t(i,u),c=t(u+1,r);return a=e[u],o=n?n(a):a,new pA(o,a.node,pA.BLACK,l,c)},a=function(t){for(var i=null,a=null,o=e.length,s=function(t,i){var a=o-t,s=o;o-=t;var l=r(a+1,s),c=e[a],h=n?n(c):c;u(new pA(h,c.node,i,null,l))},u=function(e){i?(i.left=e,i=e):(a=e,i=e)},l=0;l<t.count;++l){var c=t.nextBitIsOne(),h=Math.pow(2,t.count-(l+1));c?s(h,pA.BLACK):(s(h,pA.BLACK),s(h,pA.RED))}return a}(new DA(e.length));return new yA(i||t,a)},RA={},PA=function(){function e(t,n){De(this,e),this.indexes_=t,this.indexSet_=n}return Re(e,[{key:"get",value:function(e){var t=wt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof yA?t:null}},{key:"hasIndex",value:function(e){return kt(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){ze(t!==dA,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var i,r=[],a=!1,o=n.getIterator(lA.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),r.push(s),s=o.getNext();i=a?MA(r,t.getCompare()):RA;var u=t.toString(),l=Object.assign({},this.indexSet_);l[u]=t;var c=Object.assign({},this.indexes_);return c[u]=i,new e(c,l)}},{key:"addToIndexes",value:function(t,n){var i=this;return new e(xt(this.indexes_,(function(e,r){var a=wt(i.indexSet_,r);if(ze(a,"Missing index implementation for "+r),e===RA){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(lA.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),MA(o,a.getCompare())}return RA}var l=n.get(t.name),c=e;return l&&(c=c.remove(new lA(t.name,l))),c.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(xt(this.indexes_,(function(e){if(e===RA)return e;var i=n.get(t.name);return i?e.remove(new lA(t.name,i)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return ze(RA&&OA,"ChildrenNode.ts has not been loaded"),TA=TA||new e({".priority":RA},{".priority":OA})}}]),e}(),NA=function(){function e(t,n,i){De(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&EA(this.priorityNode_),this.children_.isEmpty()&&ze(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Re(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||IA}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?IA:t}},{key:"getChild",value:function(e){var t=WO(e);return null===t?this:this.getImmediateChild(t).getChild(HO(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(ze(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var i,r,a=new lA(t,n);n.isEmpty()?(i=this.children_.remove(t),r=this.indexMap_.removeFromIndexes(a,this.children_)):(i=this.children_.insert(t,n),r=this.indexMap_.addToIndexes(a,this.children_));var o=i.isEmpty()?IA:this.priorityNode_;return new e(i,o,r)}},{key:"updateChild",value:function(e,t){var n=WO(e);if(null===n)return t;ze(".priority"!==WO(e)||1===zO(e),".priority must be the last token in a path");var i=this.getImmediateChild(n).updateChild(HO(e),t);return this.updateImmediateChild(n,i)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},i=0,r=0,a=!0;if(this.forEachChild(OA,(function(o,s){n[o]=s.val(t),i++,a&&e.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):a=!1})),!t&&a&&r<2*i){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+xA(this.getPriority().val())+":"),this.forEachChild(OA,(function(t,n){var i=n.hash();""!==i&&(e+=":"+t+":"+i)})),this.lazyHash_=""===e?"":zS(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var i=this.resolveIndex_(n);if(i){var r=i.getPredecessorKey(new lA(e,t));return r?r.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new lA(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new lA(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var i=this.children_.getIteratorFrom(e.name,lA.Wrap),r=i.peek();null!=r&&t.compare(r,e)<0;)i.getNext(),r=i.peek();return i}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var i=this.children_.getReverseIteratorFrom(e.name,lA.Wrap),r=i.peek();null!=r&&t.compare(r,e)>0;)i.getNext(),r=i.peek();return i}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===LA?-1:0}},{key:"withIndex",value:function(t){if(t===dA||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===dA||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(OA),i=t.getIterator(OA),r=n.getNext(),a=i.getNext();r&&a;){if(r.name!==a.name||!r.node.equals(a.node))return!1;r=n.getNext(),a=i.getNext()}return null===r&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===dA?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return IA||(IA=new e(new yA(_A),null,PA.Default))}}]),e}();NA.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var LA=new(function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.call(this,new yA(_A),NA.EMPTY_NODE,PA.Default)}return Re(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return NA.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(NA));Object.defineProperties(lA,{MIN:{value:new lA(nO,NA.EMPTY_NODE)},MAX:{value:new lA(iO,LA)}}),hA.__EMPTY_NODE=NA.EMPTY_NODE,CA.__childrenNodeConstructor=NA,vA=LA,function(e){bA=e}(LA);var BA=!0;function FA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return NA.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),ze(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new CA(e,FA(t));if(e instanceof Array||!BA){var n=NA.EMPTY_NODE;return lO(e,(function(t,i){if(kt(e,t)&&"."!==t.substring(0,1)){var r=FA(i);!r.isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(t,r))}})),n.updatePriority(FA(t))}var i=[],r=!1;if(lO(e,(function(e,t){if("."!==e.substring(0,1)){var n=FA(t);n.isEmpty()||(r=r||!n.getPriority().isEmpty(),i.push(new lA(e,n)))}})),0===i.length)return NA.EMPTY_NODE;var a=MA(i,gA,(function(e){return e.name}),_A);if(r){var o=MA(i,OA.getCompare());return new NA(a,FA(t),new PA({".priority":o},{".priority":OA}))}return new NA(a,FA(t),PA.Default)}!function(e){wA=e}(FA);var jA=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this)).indexPath_=e,ze(!XO(e)&&".priority"!==WO(e),"Can't create PathIndex with empty path or .priority key"),i}return Re(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?rO(e.name,t.name):r}},{key:"makePost",value:function(e,t){var n=FA(e),i=NA.EMPTY_NODE.updateChild(this.indexPath_,n);return new lA(t,i)}},{key:"maxPost",value:function(){var e=NA.EMPTY_NODE.updateChild(this.indexPath_,LA);return new lA(iO,e)}},{key:"toString",value:function(){return QO(this.indexPath_,0).join("/")}}]),n}(cA),UA=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?rO(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return lA.MIN}},{key:"maxPost",value:function(){return lA.MAX}},{key:"makePost",value:function(e,t){var n=FA(e);return new lA(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(cA),VA=new UA;function qA(e){return{type:"value",snapshotNode:e}}function $A(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function WA(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function zA(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var HA=function(){function e(t){De(this,e),this.index_=t}return Re(e,[{key:"updateChild",value:function(e,t,n,i,r,a){ze(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(i).equals(n.getChild(i))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(WA(t,o)):ze(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange($A(t,n)):a.trackChildChange(zA(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(OA,(function(e,i){t.hasChild(e)||n.trackChildChange(WA(e,i))})),t.isLeafNode()||t.forEachChild(OA,(function(t,i){if(e.hasChild(t)){var r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(zA(t,i,r))}else n.trackChildChange($A(t,i))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?NA.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),KA=function(){function e(t){De(this,e),this.indexedFilter_=new HA(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return Re(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){var t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}},{key:"updateChild",value:function(e,t,n,i,r,a){return this.matches(new lA(t,n))||(n=NA.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=NA.EMPTY_NODE);var i=t.withIndex(this.index_);i=i.updatePriority(NA.EMPTY_NODE);var r=this;return t.forEachChild(OA,(function(e,t){r.matches(new lA(e,t))||(i=i.updateImmediateChild(e,NA.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,i,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),QA=function(){function e(t){var n=this;De(this,e),this.withinDirectionalStart=function(e){return n.reverse_?n.withinEndPost(e):n.withinStartPost(e)},this.withinDirectionalEnd=function(e){return n.reverse_?n.withinStartPost(e):n.withinEndPost(e)},this.withinStartPost=function(e){var t=n.index_.compare(n.rangedFilter_.getStartPost(),e);return n.startIsInclusive_?t<=0:t<0},this.withinEndPost=function(e){var t=n.index_.compare(e,n.rangedFilter_.getEndPost());return n.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new KA(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}return Re(e,[{key:"updateChild",value:function(e,t,n,i,r,a){return this.rangedFilter_.matches(new lA(t,n))||(n=NA.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,a):this.fullLimitUpdateChild_(e,t,n,r,a)}},{key:"updateFullNode",value:function(e,t,n){var i;if(t.isLeafNode()||t.isEmpty())i=NA.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var r;i=NA.EMPTY_NODE.withIndex(this.index_),r=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;r.hasNext()&&a<this.limit_;){var o=r.getNext();if(this.withinDirectionalStart(o)){if(!this.withinDirectionalEnd(o))break;i=i.updateImmediateChild(o.name,o.node),a++}}}else{var s;i=(i=t.withIndex(this.index_)).updatePriority(NA.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);for(var u=0;s.hasNext();){var l=s.getNext();u<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?u++:i=i.updateImmediateChild(l.name,NA.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,i,r){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;ze(s.numChildren()===this.limit_,"");var u=new lA(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),d=i.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===t||s.hasChild(d.name));)d=i.getChildAfterChild(this.index_,d,this.reverse_);var f=null==d?1:a(d,u);if(c&&!n.isEmpty()&&f>=0)return null!=r&&r.trackChildChange(zA(t,n,h)),s.updateImmediateChild(t,n);null!=r&&r.trackChildChange(WA(t,h));var p=s.updateImmediateChild(t,NA.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=r&&r.trackChildChange($A(d.name,d.node)),p.updateImmediateChild(d.name,d.node)):p}return n.isEmpty()?e:c&&a(l,u)>=0?(null!=r&&(r.trackChildChange(WA(l.name,l.node)),r.trackChildChange($A(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,NA.EMPTY_NODE)):e}}]),e}(),GA=function(){function e(){De(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=OA}return Re(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return ze(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return ze(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:nO}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return ze(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return ze(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:iO}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return ze(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===OA}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function YA(e,t,n){var i=e.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=n?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function XA(e,t,n){var i=e.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==n?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function JA(e,t){var n=e.copy();return n.index_=t,n}function ZA(e){var t,n={};if(e.isDefault())return n;if(e.index_===OA?t="$priority":e.index_===VA?t="$value":e.index_===dA?t="$key":(ze(e.index_ instanceof jA,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=gt(t),e.startSet_){var i=e.startAfterSet_?"startAfter":"startAt";n[i]=gt(e.indexStartValue_),e.startNameSet_&&(n[i]+=","+gt(e.indexStartName_))}if(e.endSet_){var r=e.endBeforeSet_?"endBefore":"endAt";n[r]=gt(e.indexEndValue_),e.endNameSet_&&(n[r]+=","+gt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function eD(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==OA&&(t.i=e.index_.toString()),t}var tD=function(e){Le(n,e);var t=je(n);function n(e,i,r,a){var o;return De(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=i,o.authTokenProvider_=r,o.appCheckTokenProvider_=a,o.log_=XS("p:rest:"),o.listens_={},o}return Re(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,i,r){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,i),u={};this.listens_[s]=u;var l=ZA(e._queryParams);this.restRequest_(o+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,i),wt(a.listens_,s)===u)&&r(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var i=n.getListenId_(e,t);delete this.listens_[i]}},{key:"get",value:function(e){var t=this,n=ZA(e._queryParams),i=e._path.toString(),r=new rt;return this.restRequest_(i+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))})),r.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(r){var a=Ie(r,2),o=a[0],s=a[1];o&&o.accessToken&&(n.auth=o.accessToken),s&&s.token&&(n.ac=s.token);var u=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Tt(n);t.log_("Sending REST request for "+u);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(i&&4===l.readyState){t.log_("REST Response for "+u+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=yt(l.responseText)}catch(n){eO("Failed to parse JSON response for "+u+": "+l.responseText)}i(null,e)}else 401!==l.status&&404!==l.status&&eO("Got unsuccessful REST response for "+u+" Status: "+l.status),i(l.status);i=null}},l.open("GET",u,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(ze(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(BO),nD=function(){function e(){De(this,e),this.rootNode_=NA.EMPTY_NODE}return Re(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function iD(){return{value:null,children:new Map}}function rD(e,t,n){if(XO(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var i=WO(t);e.children.has(i)||e.children.set(i,iD()),rD(e.children.get(i),t=HO(t),n)}}function aD(e,t){if(XO(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(OA,(function(t,n){rD(e,new qO(t),n)})),aD(e,t)}if(e.children.size>0){var i=WO(t);if(t=HO(t),e.children.has(i))aD(e.children.get(i),t)&&e.children.delete(i);return 0===e.children.size}return!0}function oD(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,i){oD(i,new qO(t.toString()+"/"+e),n)}))}var sD,uD=function(){function e(t){De(this,e),this.collection_=t,this.last_=null}return Re(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&lO(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),lD=function(){function e(t,n){De(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new uD(t);var i=1e4+2e4*Math.random();pO(this.reportStats_.bind(this),Math.floor(i))}return Re(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},i=!1;lO(t,(function(t,r){r>0&&kt(e.statsToReport_,t)&&(n[t]=r,i=!0)})),i&&this.server_.reportStats(n),pO(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function cD(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(sD||(sD={}));var hD,dD=function(){function e(t,n,i){De(this,e),this.path=t,this.affectedTree=n,this.revert=i,this.type=sD.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return Re(e,[{key:"operationForChild",value:function(t){if(XO(this.path)){if(null!=this.affectedTree.value)return ze(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new qO(t));return new e($O(),n,this.revert)}return ze(WO(this.path)===t,"operationForChild called for unrelated child."),new e(HO(this.path),this.affectedTree,this.revert)}}]),e}(),fD=function(){function e(t,n){De(this,e),this.source=t,this.path=n,this.type=sD.LISTEN_COMPLETE}return Re(e,[{key:"operationForChild",value:function(t){return XO(this.path)?new e(this.source,$O()):new e(this.source,HO(this.path))}}]),e}(),pD=function(){function e(t,n,i){De(this,e),this.source=t,this.path=n,this.snap=i,this.type=sD.OVERWRITE}return Re(e,[{key:"operationForChild",value:function(t){return XO(this.path)?new e(this.source,$O(),this.snap.getImmediateChild(t)):new e(this.source,HO(this.path),this.snap)}}]),e}(),vD=function(){function e(t,n,i){De(this,e),this.source=t,this.path=n,this.children=i,this.type=sD.MERGE}return Re(e,[{key:"operationForChild",value:function(t){if(XO(this.path)){var n=this.children.subtree(new qO(t));return n.isEmpty()?null:n.value?new pD(this.source,$O(),n.value):new e(this.source,$O(),n)}return ze(WO(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,HO(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),mD=function(){function e(t,n,i){De(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=i}return Re(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(XO(e))return this.isFullyInitialized()&&!this.filtered_;var t=WO(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),yD=Re((function e(t){De(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function gD(e,t,n,i,r,a){var o=i.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw He("Should only compare child_ events.");var i=new lA(t.childName,t.snapshotNode),r=new lA(n.childName,n.snapshotNode);return e.index_.compare(i,r)}(e,t,n)})),o.forEach((function(n){var i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);r.forEach((function(r){r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))}))}))}function _D(e,t){return{eventCache:e,serverCache:t}}function kD(e,t,n,i){return _D(new mD(t,n,i),e.serverCache)}function wD(e,t,n,i){return _D(e.eventCache,new mD(t,n,i))}function bD(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function xD(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var ED=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(hD||(hD=new yA(aO)),hD);De(this,e),this.value=t,this.children=n}return Re(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:$O(),value:this.value};if(XO(e))return null;var n=WO(e),i=this.children.get(n);if(null!==i){var r=i.findRootMostMatchingPathAndValue(HO(e),t);return null!=r?{path:YO(new qO(n),r.path),value:r.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(XO(t))return this;var n=WO(t),i=this.children.get(n);return null!==i?i.subtree(HO(t)):new e(null)}},{key:"set",value:function(t,n){if(XO(t))return new e(n,this.children);var i=WO(t),r=(this.children.get(i)||new e(null)).set(HO(t),n),a=this.children.insert(i,r);return new e(this.value,a)}},{key:"remove",value:function(t){if(XO(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=WO(t),i=this.children.get(n);if(i){var r,a=i.remove(HO(t));return r=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&r.isEmpty()?new e(null):new e(this.value,r)}return this}},{key:"get",value:function(e){if(XO(e))return this.value;var t=WO(e),n=this.children.get(t);return n?n.get(HO(e)):null}},{key:"setTree",value:function(t,n){if(XO(t))return n;var i,r=WO(t),a=(this.children.get(r)||new e(null)).setTree(HO(t),n);return i=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new e(this.value,i)}},{key:"fold",value:function(e){return this.fold_($O(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(i,r){n[i]=r.fold_(YO(e,i),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,$O(),t)}},{key:"findOnPath_",value:function(e,t,n){var i=!!this.value&&n(t,this.value);if(i)return i;if(XO(e))return null;var r=WO(e),a=this.children.get(r);return a?a.findOnPath_(HO(e),YO(t,r),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,$O(),t)}},{key:"foreachOnPath_",value:function(t,n,i){if(XO(t))return this;this.value&&i(n,this.value);var r=WO(t),a=this.children.get(r);return a?a.foreachOnPath_(HO(t),YO(n,r),i):new e(null)}},{key:"foreach",value:function(e){this.foreach_($O(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,i){i.foreach_(YO(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return lO(t,(function(e,t){n=n.set(new qO(e),t)})),n}}]),e}(),CD=function(){function e(t){De(this,e),this.writeTree_=t}return Re(e,null,[{key:"empty",value:function(){return new e(new ED(null))}}]),e}();function TD(e,t,n){if(XO(t))return new CD(new ED(n));var i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){var r=i.path,a=i.value,o=JO(r,t);return a=a.updateChild(o,n),new CD(e.writeTree_.set(r,a))}var s=new ED(n),u=e.writeTree_.setTree(t,s);return new CD(u)}function ID(e,t,n){var i=e;return lO(n,(function(e,n){i=TD(i,YO(t,e),n)})),i}function SD(e,t){if(XO(t))return CD.empty();var n=e.writeTree_.setTree(t,new ED(null));return new CD(n)}function OD(e,t){return null!=AD(e,t)}function AD(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(JO(n.path,t)):null}function DD(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(OA,(function(e,n){t.push(new lA(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new lA(e,n.value))})),t}function MD(e,t){if(XO(t))return e;var n=AD(e,t);return new CD(null!=n?new ED(n):e.writeTree_.subtree(t))}function RD(e){return e.writeTree_.isEmpty()}function PD(e,t){return ND($O(),e.writeTree_,t)}function ND(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var i=null;return t.children.inorderTraversal((function(t,r){".priority"===t?(ze(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=ND(YO(e,t),r,n)})),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(YO(e,".priority"),i)),n}function LD(e,t){return GD(t,e)}function BD(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));ze(n>=0,"removeWrite called with nonexistent writeId.");var i=e.allWrites[n];e.allWrites.splice(n,1);for(var r=i.visible,a=!1,o=e.allWrites.length-1;r&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&FD(s,i.path)?r=!1:tA(i.path,s.path)&&(a=!0)),o--}if(r){if(a)return function(e){e.visibleWrites=UD(e.allWrites,jD,$O()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;i.snap?e.visibleWrites=SD(e.visibleWrites,i.path):lO(i.children,(function(t){e.visibleWrites=SD(e.visibleWrites,YO(i.path,t))}));return!0}return!1}function FD(e,t){if(e.snap)return tA(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&tA(YO(e.path,n),t))return!0;return!1}function jD(e){return e.visible}function UD(e,t,n){for(var i=CD.empty(),r=0;r<e.length;++r){var a=e[r];if(t(a)){var o=a.path,s=void 0;if(a.snap)tA(n,o)?i=TD(i,s=JO(n,o),a.snap):tA(o,n)&&(s=JO(o,n),i=TD(i,$O(),a.snap.getChild(s)));else{if(!a.children)throw He("WriteRecord should have .snap or .children");if(tA(n,o))i=ID(i,s=JO(n,o),a.children);else if(tA(o,n))if(XO(s=JO(o,n)))i=ID(i,$O(),a.children);else{var u=wt(a.children,WO(s));if(u){var l=u.getChild(HO(s));i=TD(i,$O(),l)}}}}}return i}function VD(e,t,n,i,r){if(i||r){var a=MD(e.visibleWrites,t);if(!r&&RD(a))return n;if(r||null!=n||OD(a,$O())){return PD(UD(e.allWrites,(function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(tA(e.path,t)||tA(t,e.path))}),t),n||NA.EMPTY_NODE)}return null}var o=AD(e.visibleWrites,t);if(null!=o)return o;var s=MD(e.visibleWrites,t);return RD(s)?n:null!=n||OD(s,$O())?PD(s,n||NA.EMPTY_NODE):null}function qD(e,t,n,i){return VD(e.writeTree,e.treePath,t,n,i)}function $D(e,t){return function(e,t,n){var i=NA.EMPTY_NODE,r=AD(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(OA,(function(e,t){i=i.updateImmediateChild(e,t)})),i;if(n){var a=MD(e.visibleWrites,t);return n.forEachChild(OA,(function(e,t){var n=PD(MD(a,new qO(e)),t);i=i.updateImmediateChild(e,n)})),DD(a).forEach((function(e){i=i.updateImmediateChild(e.name,e.node)})),i}return DD(MD(e.visibleWrites,t)).forEach((function(e){i=i.updateImmediateChild(e.name,e.node)})),i}(e.writeTree,e.treePath,t)}function WD(e,t,n,i){return function(e,t,n,i,r){ze(i||r,"Either existingEventSnap or existingServerSnap must exist");var a=YO(t,n);if(OD(e.visibleWrites,a))return null;var o=MD(e.visibleWrites,a);return RD(o)?r.getChild(n):PD(o,r.getChild(n))}(e.writeTree,e.treePath,t,n,i)}function zD(e,t){return function(e,t){return AD(e.visibleWrites,t)}(e.writeTree,YO(e.treePath,t))}function HD(e,t,n,i,r,a){return function(e,t,n,i,r,a,o){var s,u=MD(e.visibleWrites,t),l=AD(u,$O());if(null!=l)s=l;else{if(null==n)return[];s=PD(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),d=a?s.getReverseIteratorFrom(i,o):s.getIteratorFrom(i,o),f=d.getNext();f&&c.length<r;)0!==h(f,i)&&c.push(f),f=d.getNext();return c}(e.writeTree,e.treePath,t,n,i,r,a)}function KD(e,t,n){return function(e,t,n,i){var r=YO(t,n),a=AD(e.visibleWrites,r);return null!=a?a:i.isCompleteForChild(n)?PD(MD(e.visibleWrites,r),i.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function QD(e,t){return GD(YO(e.treePath,t),e.writeTree)}function GD(e,t){return{treePath:e,writeTree:t}}var YD=function(){function e(){De(this,e),this.changeMap=new Map}return Re(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;ze("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),ze(".priority"!==n,"Only non-priority child changes can be tracked.");var i=this.changeMap.get(n);if(i){var r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,zA(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,WA(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,$A(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw He("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,zA(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),XD=new(function(){function e(){De(this,e)}return Re(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),JD=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;De(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=i}return Re(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new mD(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return KD(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:xD(this.viewCache_),r=HD(this.writes_,i,t,1,n,e);return 0===r.length?null:r[0]}}]),e}();function ZD(e,t,n,i,r){var a,o,s=new YD;if(n.type===sD.OVERWRITE){var u=n;u.source.fromUser?a=nM(e,t,u.path,u.snap,i,r,s):(ze(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!XO(u.path),a=tM(e,t,u.path,u.snap,i,r,o,s))}else if(n.type===sD.MERGE){var l=n;l.source.fromUser?a=function(e,t,n,i,r,a,o){var s=t;return i.foreach((function(i,u){var l=YO(n,i);iM(t,WO(l))&&(s=nM(e,s,l,u,r,a,o))})),i.foreach((function(i,u){var l=YO(n,i);iM(t,WO(l))||(s=nM(e,s,l,u,r,a,o))})),s}(e,t,l.path,l.children,i,r,s):(ze(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=aM(e,t,l.path,l.children,i,r,o,s))}else if(n.type===sD.ACK_USER_WRITE){var c=n;a=c.revert?function(e,t,n,i,r,a){var o;if(null!=zD(i,n))return t;var s,u=new JD(i,t,r),l=t.eventCache.getNode();if(XO(n)||".priority"===WO(n)){var c;if(t.serverCache.isFullyInitialized())c=qD(i,xD(t));else{var h=t.serverCache.getNode();ze(h instanceof NA,"serverChildren would be complete if leaf node"),c=$D(i,h)}s=e.filter.updateFullNode(l,c,a)}else{var d=WO(n),f=KD(i,d,t.serverCache);null==f&&t.serverCache.isCompleteForChild(d)&&(f=l.getImmediateChild(d)),(s=null!=f?e.filter.updateChild(l,d,f,HO(n),u,a):t.eventCache.getNode().hasChild(d)?e.filter.updateChild(l,d,NA.EMPTY_NODE,HO(n),u,a):l).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=qD(i,xD(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=zD(i,$O()),kD(t,s,o,e.filter.filtersNodes())}(e,t,c.path,i,r,s):function(e,t,n,i,r,a,o){if(null!=zD(r,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=i.value){if(XO(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return tM(e,t,n,u.getNode().getChild(n),r,a,s,o);if(XO(n)){var l=new ED(null);return u.getNode().forEachChild(dA,(function(e,t){l=l.set(new qO(e),t)})),aM(e,t,n,l,r,a,s,o)}return t}var c=new ED(null);return i.foreach((function(e,t){var i=YO(n,e);u.isCompleteForPath(i)&&(c=c.set(e,u.getNode().getChild(i)))})),aM(e,t,n,c,r,a,s,o)}(e,t,c.path,c.affectedTree,i,r,s)}else{if(n.type!==sD.LISTEN_COMPLETE)throw He("Unknown operation type: "+n.type);a=function(e,t,n,i,r){var a=t.serverCache,o=wD(t,a.getNode(),a.isFullyInitialized()||XO(n),a.isFiltered());return eM(e,o,n,i,XD,r)}(e,t,n.path,i,s)}var h=s.getChanges();return function(e,t,n){var i=t.eventCache;if(i.isFullyInitialized()){var r=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=bD(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&n.push(qA(bD(t)))}}(t,a,h),{viewCache:a,changes:h}}function eM(e,t,n,i,r,a){var o,s,u=t.eventCache;if(null!=zD(i,n))return t;if(XO(n))if(ze(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=xD(t),c=$D(i,l instanceof NA?l:NA.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),c,a)}else{var h=qD(i,xD(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var d=WO(n);if(".priority"===d){ze(1===zO(n),"Can't have a priority with additional path components");var f=u.getNode(),p=WD(i,n,f,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(f,p):u.getNode()}else{var v,m=HO(n);if(u.isCompleteForChild(d)){s=t.serverCache.getNode();var y=WD(i,n,u.getNode(),s);v=null!=y?u.getNode().getImmediateChild(d).updateChild(m,y):u.getNode().getImmediateChild(d)}else v=KD(i,d,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),d,v,m,r,a):u.getNode()}}return kD(t,o,u.isFullyInitialized()||XO(n),e.filter.filtersNodes())}function tM(e,t,n,i,r,a,o,s){var u,l=t.serverCache,c=o?e.filter:e.filter.getIndexedFilter();if(XO(n))u=c.updateFullNode(l.getNode(),i,null);else if(c.filtersNodes()&&!l.isFiltered()){var h=l.getNode().updateChild(n,i);u=c.updateFullNode(l.getNode(),h,null)}else{var d=WO(n);if(!l.isCompleteForPath(n)&&zO(n)>1)return t;var f=HO(n),p=l.getNode().getImmediateChild(d).updateChild(f,i);u=".priority"===d?c.updatePriority(l.getNode(),p):c.updateChild(l.getNode(),d,p,f,XD,null)}var v=wD(t,u,l.isFullyInitialized()||XO(n),c.filtersNodes());return eM(e,v,n,r,new JD(r,v,a),s)}function nM(e,t,n,i,r,a,o){var s,u,l=t.eventCache,c=new JD(r,t,a);if(XO(n))u=e.filter.updateFullNode(t.eventCache.getNode(),i,o),s=kD(t,u,!0,e.filter.filtersNodes());else{var h=WO(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),i),s=kD(t,u,l.isFullyInitialized(),l.isFiltered());else{var d,f=HO(n),p=l.getNode().getImmediateChild(h);if(XO(f))d=i;else{var v=c.getCompleteChild(h);d=null!=v?".priority"===KO(f)&&v.getChild(GO(f)).isEmpty()?v:v.updateChild(f,i):NA.EMPTY_NODE}if(p.equals(d))s=t;else s=kD(t,e.filter.updateChild(l.getNode(),h,d,f,c,o),l.isFullyInitialized(),e.filter.filtersNodes())}}return s}function iM(e,t){return e.eventCache.isCompleteForChild(t)}function rM(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function aM(e,t,n,i,r,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,l=t;u=XO(n)?i:new ED(null).setTree(n,i);var c=t.serverCache.getNode();return u.children.inorderTraversal((function(n,i){if(c.hasChild(n)){var u=rM(0,t.serverCache.getNode().getImmediateChild(n),i);l=tM(e,l,new qO(n),u,r,a,o,s)}})),u.children.inorderTraversal((function(n,i){var u=!t.serverCache.isCompleteForChild(n)&&null===i.value;if(!c.hasChild(n)&&!u){var h=rM(0,t.serverCache.getNode().getImmediateChild(n),i);l=tM(e,l,new qO(n),h,r,a,o,s)}})),l}var oM,sM=function(){function e(t,n){De(this,e),this.query_=t,this.eventRegistrations_=[];var i,r=this.query_._queryParams,a=new HA(r.getIndex()),o=(i=r).loadsAllData()?new HA(i.getIndex()):i.hasLimit()?new QA(i):new KA(i);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,l=a.updateFullNode(NA.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(NA.EMPTY_NODE,u.getNode(),null),h=new mD(l,s.isFullyInitialized(),a.filtersNodes()),d=new mD(c,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=_D(d,h),this.eventGenerator_=new yD(this.query_)}return Re(e,[{key:"query",get:function(){return this.query_}}]),e}();function uM(e,t){var n=xD(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!XO(t)&&!n.getImmediateChild(WO(t)).isEmpty())?n.getChild(t):null}function lM(e){return 0===e.eventRegistrations_.length}function cM(e,t,n){var i=[];if(n){ze(null==t,"A cancel should cancel all event registrations.");var r=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,r);t&&i.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return i}function hM(e,t,n,i){t.type===sD.MERGE&&null!==t.source.queryId&&(ze(xD(e.viewCache_),"We should always have a full cache before handling merges"),ze(bD(e.viewCache_),"Missing event cache, even though we have a server cache"));var r,a,o=e.viewCache_,s=ZD(e.processor_,o,t,n,i);return r=e.processor_,a=s.viewCache,ze(a.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),ze(a.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed"),ze(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,dM(e,s.changes,s.viewCache.eventCache.getNode(),null)}function dM(e,t,n,i){var r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){var r=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),gD(e,r,"child_removed",t,i,n),gD(e,r,"child_added",t,i,n),gD(e,r,"child_moved",a,i,n),gD(e,r,"child_changed",t,i,n),gD(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}var fM,pM=Re((function e(){De(this,e),this.views=new Map}));function vM(e,t,n,i){var r=t.source.queryId;if(null!==r){var a=e.views.get(r);return ze(null!=a,"SyncTree gave us an op for an invalid query."),hM(a,t,n,i)}var o,s=[],u=Pe(e.views.values());try{for(u.s();!(o=u.n()).done;){var l=o.value;s=s.concat(hM(l,t,n,i))}}catch(c){u.e(c)}finally{u.f()}return s}function mM(e,t,n,i,r){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=qD(n,r?i:null),u=!1;s?u=!0:i instanceof NA?(s=$D(n,i),u=!1):(s=NA.EMPTY_NODE,u=!1);var l=_D(new mD(s,u,!1),new mD(i,r,!1));return new sM(t,l)}return o}function yM(e,t,n,i,r,a){var o=mM(e,t,i,r,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(OA,(function(e,t){i.push($A(e,t))})),n.isFullyInitialized()&&i.push(qA(n.getNode())),dM(e,i,n.getNode(),t)}(o,n)}function gM(e,t,n,i){var r=t._queryIdentifier,a=[],o=[],s=xM(e);if("default"===r){var u,l=Pe(e.views.entries());try{for(l.s();!(u=l.n()).done;){var c=Ie(u.value,2),h=c[0],d=c[1];o=o.concat(cM(d,n,i)),lM(d)&&(e.views.delete(h),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(p){l.e(p)}finally{l.f()}}else{var f=e.views.get(r);f&&(o=o.concat(cM(f,n,i)),lM(f)&&(e.views.delete(r),f.query._queryParams.loadsAllData()||a.push(f.query)))}return s&&!xM(e)&&a.push(new(ze(oM,"Reference.ts has not been loaded"),oM)(t._repo,t._path)),{removed:a,events:o}}function _M(e){var t,n=[],i=Pe(e.views.values());try{for(i.s();!(t=i.n()).done;){var r=t.value;r.query._queryParams.loadsAllData()||n.push(r)}}catch(a){i.e(a)}finally{i.f()}return n}function kM(e,t){var n,i=null,r=Pe(e.views.values());try{for(r.s();!(n=r.n()).done;){var a=n.value;i=i||uM(a,t)}}catch(o){r.e(o)}finally{r.f()}return i}function wM(e,t){if(t._queryParams.loadsAllData())return EM(e);var n=t._queryIdentifier;return e.views.get(n)}function bM(e,t){return null!=wM(e,t)}function xM(e){return null!=EM(e)}function EM(e){var t,n=Pe(e.views.values());try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.query._queryParams.loadsAllData())return i}}catch(r){n.e(r)}finally{n.f()}return null}var CM=1,TM=Re((function e(t){De(this,e),this.listenProvider_=t,this.syncPointTree_=new ED(null),this.pendingWriteTree_={visibleWrites:CD.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function IM(e,t,n,i,r){return function(e,t,n,i,r){ze(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=TD(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,r),r?LM(e,new pD({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function SM(e,t,n,i){!function(e,t,n,i){ze(i>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:i,visible:!0}),e.visibleWrites=ID(e.visibleWrites,t,n),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i);var r=ED.fromObject(n);return LM(e,new vD({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}function OM(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=function(e,t){for(var n=0;n<e.allWrites.length;n++){var i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(BD(e.pendingWriteTree_,t)){var r=new ED(null);return null!=i.snap?r=r.set($O(),!0):lO(i.children,(function(e){r=r.set(new qO(e),!0)})),LM(e,new dD(i.path,r,n))}return[]}function AM(e,t,n){return LM(e,new pD({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function DM(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),s=[];if(o&&("default"===t._queryIdentifier||bM(o,t))){var u=gM(o,t,n,i);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(a));var l=u.removed;if(s=u.events,!r){var c=-1!==l.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return xM(t)}));if(c&&!h){var d=e.syncPointTree_.subtree(a);if(!d.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&xM(t))return[EM(t)];var i=[];return t&&(i=_M(t)),lO(n,(function(e,t){i=i.concat(t)})),i}))}(d),p=0;p<f.length;++p){var v=f[p],m=v.query,y=jM(e,v);e.listenProvider_.startListening(zM(m),UM(e,m),y.hashFn,y.onComplete)}}if(!h&&l.length>0&&!i)if(c){e.listenProvider_.stopListening(zM(t),null)}else l.forEach((function(t){var n=e.queryToTagMap.get(VM(t));e.listenProvider_.stopListening(zM(t),n)}))}!function(e,t){for(var n=0;n<t.length;++n){var i=t[n];if(!i._queryParams.loadsAllData()){var r=VM(i),a=e.queryToTagMap.get(r);e.queryToTagMap.delete(r),e.tagToQueryMap.delete(a)}}}(e,l)}return s}function MM(e,t,n,i){var r=qM(e,i);if(null!=r){var a=$M(r),o=a.path,s=a.queryId,u=JO(o,t);return WM(e,o,new pD(cD(s),u,n))}return[]}function RM(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=JO(e,r);a=a||kM(t,n),o=o||xM(t)}));var s,u=e.syncPointTree_.get(r);(u?(o=o||xM(u),a=a||kM(u,$O())):(u=new pM,e.syncPointTree_=e.syncPointTree_.set(r,u)),null!=a)?s=!0:(s=!1,a=NA.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=kM(t,$O());n&&(a=a.updateImmediateChild(e,n))})));var l=bM(u,t);if(!l&&!t._queryParams.loadsAllData()){var c=VM(t);ze(!e.queryToTagMap.has(c),"View does not exist, but we have a tag");var h=CM++;e.queryToTagMap.set(c,h),e.tagToQueryMap.set(h,c)}var d=yM(u,t,n,LD(e.pendingWriteTree_,r),a,s);if(!l&&!o&&!i){var f=wM(u,t);d=d.concat(function(e,t,n){var i=t._path,r=UM(e,t),a=jM(e,n),o=e.listenProvider_.startListening(zM(t),r,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(i);if(r)ze(!xM(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!XO(e)&&t&&xM(t))return[EM(t).query];var i=[];return t&&(i=i.concat(_M(t).map((function(e){return e.query})))),lO(n,(function(e,t){i=i.concat(t)})),i})),l=0;l<u.length;++l){var c=u[l];e.listenProvider_.stopListening(zM(c),UM(e,c))}return o}(e,t,f))}return d}function PM(e,t,n){var i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(function(e,n){var i=kM(n,JO(e,t));if(i)return i}));return VD(i,t,r,n,!0)}function NM(e,t){var n=t._path,i=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var r=JO(e,n);i=i||kM(t,r)}));var r=e.syncPointTree_.get(n);r?i=i||kM(r,$O()):(r=new pM,e.syncPointTree_=e.syncPointTree_.set(n,r));var a=null!=i,o=a?new mD(i,!0,!1):null;return function(e){return bD(e.viewCache_)}(mM(r,t,LD(e.pendingWriteTree_,t._path),a?o.getNode():NA.EMPTY_NODE,a))}function LM(e,t){return BM(t,e.syncPointTree_,null,LD(e.pendingWriteTree_,$O()))}function BM(e,t,n,i){if(XO(e.path))return FM(e,t,n,i);var r=t.get($O());null==n&&null!=r&&(n=kM(r,$O()));var a=[],o=WO(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var l=n?n.getImmediateChild(o):null,c=QD(i,o);a=a.concat(BM(s,u,l,c))}return r&&(a=a.concat(vM(r,e,i,n))),a}function FM(e,t,n,i){var r=t.get($O());null==n&&null!=r&&(n=kM(r,$O()));var a=[];return t.children.inorderTraversal((function(t,r){var o=n?n.getImmediateChild(t):null,s=QD(i,t),u=e.operationForChild(t);u&&(a=a.concat(FM(u,r,o,s)))})),r&&(a=a.concat(vM(r,e,i,n))),a}function jM(e,t){var n=t.query,i=UM(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||NA.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return i?function(e,t,n){var i=qM(e,n);if(i){var r=$M(i),a=r.path,o=r.queryId,s=JO(a,t);return WM(e,a,new fD(cD(o),s))}return[]}(e,n._path,i):function(e,t){return LM(e,new fD({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var r=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return DM(e,n,null,r)}}}function UM(e,t){var n=VM(t);return e.queryToTagMap.get(n)}function VM(e){return e._path.toString()+"$"+e._queryIdentifier}function qM(e,t){return e.tagToQueryMap.get(t)}function $M(e){var t=e.indexOf("$");return ze(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new qO(e.substr(0,t))}}function WM(e,t,n){var i=e.syncPointTree_.get(t);return ze(i,"Missing sync point for query tag that we're tracking"),vM(i,n,LD(e.pendingWriteTree_,t),null)}function zM(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(ze(fM,"Reference.ts has not been loaded"),fM)(e._repo,e._path):e}var HM=function(){function e(t){De(this,e),this.node_=t}return Re(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),KM=function(){function e(t,n){De(this,e),this.syncTree_=t,this.path_=n}return Re(e,[{key:"getImmediateChild",value:function(t){var n=YO(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return PM(this.syncTree_,this.path_)}}]),e}(),QM=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},GM=function(e,t,n){return e&&"object"===typeof e?(ze(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?YM(e[".sv"],t,n):"object"===typeof e[".sv"]?XM(e[".sv"],t):void ze(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},YM=function(e,t,n){if("timestamp"===e)return n.timestamp;ze(!1,"Unexpected server value: "+e)},XM=function(e,t,n){e.hasOwnProperty("increment")||ze(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var i=e.increment;"number"!==typeof i&&ze(!1,"Unexpected increment value: "+i);var r=t.node();if(ze(null!==r&&"undefined"!==typeof r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;var a=r.getValue();return"number"!==typeof a?i:a+i},JM=function(e,t,n,i){return eR(t,new KM(n,e),i)},ZM=function(e,t,n){return eR(e,new HM(t),n)};function eR(e,t,n){var i,r=e.getPriority().val(),a=GM(r,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=GM(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new CA(s,FA(a)):e}var u=e;return i=u,a!==u.getPriority().val()&&(i=i.updatePriority(new CA(a))),u.forEachChild(OA,(function(e,r){var a=eR(r,t.getImmediateChild(e),n);a!==r&&(i=i.updateImmediateChild(e,a))})),i}var tR=Re((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};De(this,e),this.name=t,this.parent=n,this.node=i}));function nR(e,t){for(var n=t instanceof qO?t:new qO(t),i=e,r=WO(n);null!==r;){var a=wt(i.node.children,r)||{children:{},childCount:0};i=new tR(r,i,a),r=WO(n=HO(n))}return i}function iR(e){return e.node.value}function rR(e,t){e.node.value=t,lR(e)}function aR(e){return e.node.childCount>0}function oR(e,t){lO(e.node.children,(function(n,i){t(new tR(n,e,i))}))}function sR(e,t,n,i){n&&!i&&t(e),oR(e,(function(e){sR(e,t,!0,i)})),n&&i&&t(e)}function uR(e){return new qO(null===e.parent?e.name:uR(e.parent)+"/"+e.name)}function lR(e){null!==e.parent&&function(e,t,n){var i=function(e){return void 0===iR(e)&&!aR(e)}(n),r=kt(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,lR(e)):i||r||(e.node.children[t]=n.node,e.node.childCount++,lR(e))}(e.parent,e.name,e)}var cR=/[\[\].#$\/\u0000-\u001F\u007F]/,hR=/[\[\].#$\u0000-\u001F\u007F]/,dR=10485760,fR=function(e){return"string"===typeof e&&0!==e.length&&!cR.test(e)},pR=function(e){return"string"===typeof e&&0!==e.length&&!hR.test(e)},vR=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!tO(e)||e&&"object"===typeof e&&kt(e,".sv")},mR=function(e,t,n,i){i&&void 0===t||yR(Pt(e,"value"),t,n)},yR=function e(t,n,i){var r=i instanceof qO?new nA(i,t):i;if(void 0===n)throw new Error(t+"contains undefined "+rA(r));if("function"===typeof n)throw new Error(t+"contains a function "+rA(r)+" with contents = "+n.toString());if(tO(n))throw new Error(t+"contains "+n.toString()+" "+rA(r));if("string"===typeof n&&n.length>dR/3&&Bt(n)>dR)throw new Error(t+"contains a string greater than "+dR+" utf8 bytes "+rA(r)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(lO(n,(function(n,i){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!fR(n)))throw new Error(t+" contains an invalid key ("+n+") "+rA(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Bt(t),iA(e)}(r,n),e(t,i,r),function(e){var t=e.parts_.pop();e.byteLength_-=Bt(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),a&&o)throw new Error(t+' contains ".value" child '+rA(r)+" in addition to actual children.")}},gR=function(e,t,n,i){if(!i||void 0!==t){var r=Pt(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");var a=[];lO(t,(function(e,t){var i=new qO(e);if(yR(r,t,YO(n,i)),".priority"===KO(i)&&!vR(t))throw new Error(r+"contains an invalid value for '"+i.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(i)})),function(e,t){var n,i;for(n=0;n<t.length;n++)for(var r=QO(i=t[n]),a=0;a<r.length;a++)if(".priority"===r[a]&&a===r.length-1);else if(!fR(r[a]))throw new Error(e+"contains an invalid key ("+r[a]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(ZO);var o=null;for(n=0;n<t.length;n++){if(i=t[n],null!==o&&tA(o,i))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+i.toString());o=i}}(r,a)}},_R=function(e,t,n){if(!n||void 0!==t){if(tO(t))throw new Error(Pt(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!vR(t))throw new Error(Pt(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},kR=function(e,t,n,i){if((!i||void 0!==n)&&!fR(n))throw new Error(Pt(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},wR=function(e,t,n,i){if((!i||void 0!==n)&&!pR(n))throw new Error(Pt(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},bR=function(e,t,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),wR(e,t,n,i)},xR=function(e,t){if(".info"===WO(t))throw new Error(e+" failed = Can't modify data under /.info/")},ER=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!fR(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),pR(e)}(n))throw new Error(Pt(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},CR=Re((function e(){De(this,e),this.eventLists_=[],this.recursionDepth_=0}));function TR(e,t){for(var n=null,i=0;i<t.length;i++){var r=t[i],a=r.getPath();null===n||eA(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(r)}n&&e.eventLists_.push(n)}function IR(e,t,n){TR(e,n),OR(e,(function(e){return eA(e,t)}))}function SR(e,t,n){TR(e,n),OR(e,(function(e){return tA(e,t)||tA(t,e)}))}function OR(e,t){e.recursionDepth_++;for(var n=!0,i=0;i<e.eventLists_.length;i++){var r=e.eventLists_[i];if(r)t(r.path)?(AR(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function AR(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var i=n.getEventRunner();KS&&YS("event: "+n.toString()),fO(i)}}}var DR="repo_interrupt",MR=25,RR=function(){function e(t,n,i,r){De(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new CR,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=iD(),this.transactionQueueTree_=new tR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return Re(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function PR(e,t,n){if(e.stats_=SO(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new tD(e.repoInfo_,(function(t,n,i,r){BR(e,t,n,i,r)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return FR(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{gt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new sA(e.repoInfo_,t,(function(t,n,i,r){BR(e,t,n,i,r)}),(function(t){FR(e,t)}),(function(t){!function(e,t){lO(t,(function(t,n){jR(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return IO[n]||(IO[n]=t()),IO[n]}(e.repoInfo_,(function(){return new lD(e.stats_,e.server_)})),e.infoData_=new nD,e.infoSyncTree_=new TM({startListening:function(t,n,i,r){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=AM(e.infoSyncTree_,t._path,o),setTimeout((function(){r("ok")}),0)),a},stopListening:function(){}}),jR(e,"connected",!1),e.serverSyncTree_=new TM({startListening:function(t,n,i,r){return e.server_.listen(t,i,n,(function(n,i){var a=r(n,i);SR(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function NR(e){var t=e.infoData_.getNode(new qO(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function LR(e){return QM({timestamp:NR(e)})}function BR(e,t,n,i,r){e.dataUpdateCount++;var a=new qO(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(r)if(i){var s=xt(n,(function(e){return FA(e)}));o=function(e,t,n,i){var r=qM(e,i);if(r){var a=$M(r),o=a.path,s=a.queryId,u=JO(o,t),l=ED.fromObject(n);return WM(e,o,new vD(cD(s),u,l))}return[]}(e.serverSyncTree_,a,s,r)}else{var u=FA(n);o=MM(e.serverSyncTree_,a,u,r)}else if(i){var l=xt(n,(function(e){return FA(e)}));o=function(e,t,n){var i=ED.fromObject(n);return LM(e,new vD({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,a,l)}else{var c=FA(n);o=AM(e.serverSyncTree_,a,c)}var h=a;o.length>0&&(h=YR(e,a)),SR(e.eventQueue_,h,o)}function FR(e,t){jR(e,"connected",t),!1===t&&function(e){HR(e,"onDisconnectEvents");var t=LR(e),n=iD();oD(e.onDisconnect_,$O(),(function(i,r){var a=JM(i,r,e.serverSyncTree_,t);rD(n,i,a)}));var i=[];oD(n,$O(),(function(t,n){i=i.concat(AM(e.serverSyncTree_,t,n));var r=tP(e,t);YR(e,r)})),e.onDisconnect_=iD(),SR(e.eventQueue_,$O(),i)}(e)}function jR(e,t,n){var i=new qO("/.info/"+t),r=FA(n);e.infoData_.updateSnapshot(i,r);var a=AM(e.infoSyncTree_,i,r);SR(e.eventQueue_,i,a)}function UR(e){return e.nextWriteId_++}function VR(e,t,n,i,r){HR(e,"set",{path:t.toString(),value:n,priority:i});var a=LR(e),o=FA(n,i),s=PM(e.serverSyncTree_,t),u=ZM(o,s,a),l=UR(e),c=IM(e.serverSyncTree_,t,u,l,!0);TR(e.eventQueue_,c),e.server_.put(t.toString(),o.val(!0),(function(n,i){var a="ok"===n;a||eO("set at "+t+" failed: "+n);var o=OM(e.serverSyncTree_,l,!a);SR(e.eventQueue_,t,o),KR(e,r,n,i)}));var h=tP(e,t);YR(e,h),SR(e.eventQueue_,h,[])}function qR(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(i,r){"ok"===i&&aD(e.onDisconnect_,t),KR(e,n,i,r)}))}function $R(e,t,n,i){var r=FA(n);e.server_.onDisconnectPut(t.toString(),r.val(!0),(function(n,a){"ok"===n&&rD(e.onDisconnect_,t,r),KR(e,i,n,a)}))}function WR(e,t,n){var i;i=".info"===WO(t._path)?DM(e.infoSyncTree_,t,n):DM(e.serverSyncTree_,t,n),IR(e.eventQueue_,t._path,i)}function zR(e){e.persistentConnection_&&e.persistentConnection_.interrupt(DR)}function HR(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];YS.apply(void 0,[t].concat(i))}function KR(e,t,n,i){t&&fO((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),r=e;i&&(r+=": "+i);var a=new Error(r);a.code=e,t(a)}}))}function QR(e,t,n){return PM(e.serverSyncTree_,t,n)||NA.EMPTY_NODE}function GR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||eP(e,t),iR(t)){var n=JR(e,t);ze(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var i=n.map((function(e){return e.currentWriteId})),r=QR(e,t,i),a=r,o=r.hash(),s=0;s<n.length;s++){var u=n[s];ze(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var l=JO(t,u.path);a=a.updateChild(l,u.currentOutputSnapshotRaw)}var c=a.val(!0),h=t;e.server_.put(h.toString(),c,(function(i){HR(e,"transaction put response",{path:h.toString(),status:i});var r=[];if("ok"===i){for(var a=[],o=function(t){n[t].status=2,r=r.concat(OM(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);eP(e,nR(e.transactionQueueTree_,t)),GR(e,e.transactionQueueTree_),SR(e.eventQueue_,t,r);for(var u=0;u<a.length;u++)fO(a[u])}else{if("datastale"===i)for(var l=0;l<n.length;l++)3===n[l].status?n[l].status=4:n[l].status=0;else{eO("transaction at "+h.toString()+" failed: "+i);for(var c=0;c<n.length;c++)n[c].status=4,n[c].abortReason=i}YR(e,t)}}),o)}(e,uR(t),n)}else aR(t)&&oR(t,(function(t){GR(e,t)}))}function YR(e,t){var n=XR(e,t),i=uR(n);return function(e,t,n){if(0===t.length)return;for(var i=[],r=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u,l=t[a],c=JO(n,l.path),h=!1;if(ze(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,s=l.abortReason,r=r.concat(OM(e.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=MR)h=!0,s="maxretry",r=r.concat(OM(e.serverSyncTree_,l.currentWriteId,!0));else{var d=QR(e,l.path,o);l.currentInputSnapshot=d;var f=t[a].update(d.val());if(void 0!==f){yR("transaction failed: Data returned ",f,l.path);var p=FA(f);"object"===typeof f&&null!=f&&kt(f,".priority")||(p=p.updatePriority(d.getPriority()));var v=l.currentWriteId,m=LR(e),y=ZM(p,d,m);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=y,l.currentWriteId=UR(e),o.splice(o.indexOf(v),1),r=(r=r.concat(IM(e.serverSyncTree_,l.path,y,l.currentWriteId,l.applyLocally))).concat(OM(e.serverSyncTree_,v,!0))}else h=!0,s="nodata",r=r.concat(OM(e.serverSyncTree_,l.currentWriteId,!0))}SR(e.eventQueue_,n,r),r=[],h&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===s?i.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):i.push((function(){return t[a].onComplete(new Error(s),!1,null)}))))},u=0;u<t.length;u++)s(u);eP(e,e.transactionQueueTree_);for(var l=0;l<i.length;l++)fO(i[l]);GR(e,e.transactionQueueTree_)}(e,JR(e,n),i),i}function XR(e,t){var n,i=e.transactionQueueTree_;for(n=WO(t);null!==n&&void 0===iR(i);)i=nR(i,n),n=WO(t=HO(t));return i}function JR(e,t){var n=[];return ZR(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function ZR(e,t,n){var i=iR(t);if(i)for(var r=0;r<i.length;r++)n.push(i[r]);oR(t,(function(t){ZR(e,t,n)}))}function eP(e,t){var n=iR(t);if(n){for(var i=0,r=0;r<n.length;r++)2!==n[r].status&&(n[i]=n[r],i++);n.length=i,rR(t,n.length>0?n:void 0)}oR(t,(function(t){eP(e,t)}))}function tP(e,t){var n=uR(XR(e,t)),i=nR(e.transactionQueueTree_,t);return function(e,t,n){for(var i=n?e:e.parent;null!==i;){if(t(i))return!0;i=i.parent}}(i,(function(t){nP(e,t)})),nP(e,i),sR(i,(function(t){nP(e,t)})),n}function nP(e,t){var n=iR(t);if(n){for(var i=[],r=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(ze(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(ze(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(OM(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?rR(t,void 0):n.length=a+1,SR(e.eventQueue_,uR(t),r);for(var s=0;s<i.length;s++)fO(i[s])}}var iP=function(e,t){var n=rP(e),i=n.namespace;"firebase.com"===n.domain&&ZS(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||ZS("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&eO("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new xO(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new qO(n.pathString)}},rP=function(e){var t="",n="",i="",r="",a="",o=!0,s="https",u=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(s=e.substring(0,l-1),e=e.substring(l+2));var c=e.indexOf("/");-1===c&&(c=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(c,h)),c<h&&(r=function(e){for(var t="",n=e.split("/"),i=0;i<n.length;i++)if(n[i].length>0){var r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(a){}t+="/"+r}return t}(e.substring(c,h)));var d=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,i=Pe(e.split("&"));try{for(i.s();!(n=i.n()).done;){var r=n.value;if(0!==r.length){var a=r.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):eO("Invalid query segment '".concat(r,"' in query '").concat(e,"'"))}}}catch(o){i.e(o)}finally{i.f()}return t}(e.substring(Math.min(e.length,h)));(l=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(l+1),10)):l=t.length;var f=t.slice(0,l);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{var p=t.indexOf(".");i=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=i}"ns"in d&&(a=d.ns)}return{host:t,port:u,domain:n,subdomain:i,secure:o,scheme:s,pathString:r,namespace:a}},aP="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",oP=function(){var e=0,t=[];return function(n){var i,r=n===e;e=n;var a=new Array(8);for(i=7;i>=0;i--)a[i]=aP.charAt(n%64),n=Math.floor(n/64);ze(0===n,"Cannot push at time == 0");var o=a.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=aP.charAt(t[i]);return ze(20===o.length,"nextPushId: Length should be 20."),o}}(),sP=function(){function e(t,n,i,r){De(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=i,this.prevName=r}return Re(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+gt(this.snapshot.exportVal())}}]),e}(),uP=function(){function e(t,n,i){De(this,e),this.eventRegistration=t,this.error=n,this.path=i}return Re(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),lP=function(){function e(t,n){De(this,e),this.snapshotCallback=t,this.cancelCallback=n}return Re(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return ze(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),cP=function(){function e(t,n){De(this,e),this._repo=t,this._path=n}return Re(e,[{key:"cancel",value:function(){var e=new rt;return qR(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){xR("OnDisconnect.remove",this._path);var e=new rt;return $R(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){xR("OnDisconnect.set",this._path),mR("OnDisconnect.set",e,this._path,!1);var t=new rt;return $R(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){xR("OnDisconnect.setWithPriority",this._path),mR("OnDisconnect.setWithPriority",e,this._path,!1),_R("OnDisconnect.setWithPriority",t,!1);var n=new rt;return function(e,t,n,i,r){var a=FA(n,i);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,i){"ok"===n&&rD(e.onDisconnect_,t,a),KR(0,r,n,i)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){xR("OnDisconnect.update",this._path),gR("OnDisconnect.update",e,this._path,!1);var t=new rt;return function(e,t,n,i){if(bt(n))return YS("onDisconnect().update() called with empty data.  Don't do anything."),void KR(0,i,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(r,a){"ok"===r&&lO(n,(function(n,i){var r=FA(i);rD(e.onDisconnect_,YO(t,n),r)})),KR(0,i,r,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),hP=function(){function e(t,n,i,r){De(this,e),this._repo=t,this._path=n,this._queryParams=i,this._orderByCalled=r}return Re(e,[{key:"key",get:function(){return XO(this._path)?null:KO(this._path)}},{key:"ref",get:function(){return new vP(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=eD(this._queryParams),t=sO(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return eD(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Ft(t))instanceof e))return!1;var n=this._repo===t._repo,i=eA(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return n&&i&&r}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function dP(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function fP(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===dA){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==nO)throw new Error(i);if("string"!==typeof t)throw new Error(r)}if(e.hasEnd()){if(e.getIndexEndName()!==iO)throw new Error(i);if("string"!==typeof n)throw new Error(r)}}else if(e.getIndex()===OA){if(null!=t&&!vR(t)||null!=n&&!vR(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ze(e.getIndex()instanceof jA||e.getIndex()===VA,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function pP(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var vP=function(e){Le(n,e);var t=je(n);function n(e,i){return De(this,n),t.call(this,e,i,new GA,!1)}return Re(n,[{key:"parent",get:function(){var e=GO(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(hP),mP=function(){function e(t,n,i){De(this,e),this._node=t,this.ref=n,this._index=i}return Re(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new qO(t),i=_P(this.ref,t);return new e(this._node.getChild(n),i,OA)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(i,r){return t(new e(r,_P(n.ref,i),OA))}))}},{key:"hasChild",value:function(e){var t=new qO(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function yP(e,t){return(e=Ft(e))._checkNotDeleted("ref"),void 0!==t?_P(e._root,t):e._root}function gP(e,t){(e=Ft(e))._checkNotDeleted("refFromURL");var n=iP(t,e._repo.repoInfo_.nodeAdmin);ER("refFromURL",n);var i=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||i.host===e._repo.repoInfo_.host||ZS("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+e._repo.repoInfo_.host+")"),yP(e,n.path.toString())}function _P(e,t){return null===WO((e=Ft(e))._path)?bR("child","path",t,!1):wR("child","path",t,!1),new vP(e._repo,YO(e._path,t))}function kP(e,t){e=Ft(e),xR("set",e._path),mR("set",t,e._path,!1);var n=new rt;return VR(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function wP(e,t){gR("update",t,e._path,!1);var n=new rt;return function(e,t,n,i){HR(e,"update",{path:t.toString(),value:n});var r=!0,a=LR(e),o={};if(lO(n,(function(n,i){r=!1,o[n]=JM(YO(t,n),FA(i),e.serverSyncTree_,a)})),r)YS("update() called with empty data.  Don't do anything."),KR(0,i,"ok",void 0);else{var s=UR(e),u=SM(e.serverSyncTree_,t,o,s);TR(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,r){var a="ok"===n;a||eO("update at "+t+" failed: "+n);var o=OM(e.serverSyncTree_,s,!a),u=o.length>0?YR(e,t):t;SR(e.eventQueue_,u,o),KR(0,i,n,r)})),lO(n,(function(n){var i=tP(e,YO(t,n));YR(e,i)})),SR(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function bP(e){e=Ft(e);var t=new lP((function(){})),n=new xP(t);return function(e,t,n){var i=NM(e.serverSyncTree_,t);return null!=i?Promise.resolve(i):e.server_.get(t).then((function(i){var r,a=FA(i).withIndex(t._queryParams.getIndex());if(RM(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())r=AM(e.serverSyncTree_,t._path,a);else{var o=UM(e.serverSyncTree_,t);r=MM(e.serverSyncTree_,t._path,a,o)}return SR(e.eventQueue_,t._path,r),DM(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return HR(e,"get for query "+gt(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new mP(t,new vP(e._repo,e._path),e._queryParams.getIndex())}))}var xP=function(){function e(t){De(this,e),this.callbackContext=t}return Re(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new sP("value",this,new mP(e.snapshotNode,new vP(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new uP(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),EP=function(){function e(t,n){De(this,e),this.eventType=t,this.callbackContext=n}return Re(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new uP(this,e,t):null}},{key:"createEvent",value:function(e,t){ze(null!=e.childName,"Child events should have a childName.");var n=_P(new vP(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new sP(e.type,this,new mP(e.snapshotNode,n,i),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function CP(e,t,n,i,r){var a;if("object"===typeof i&&(a=void 0,r=i),"function"===typeof i&&(a=i),r&&r.onlyOnce){var o=n,s=function(t,n){WR(e._repo,e,l),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new lP(n,a||void 0),l="value"===t?new xP(u):new EP(t,u);return function(e,t,n){var i;i=".info"===WO(t._path)?RM(e.infoSyncTree_,t,n):RM(e.serverSyncTree_,t,n),IR(e.eventQueue_,t._path,i)}(e._repo,e,l),function(){return WR(e._repo,e,l)}}function TP(e,t,n,i){return CP(e,"value",t,n,i)}function IP(e,t,n,i){return CP(e,"child_added",t,n,i)}function SP(e,t,n,i){return CP(e,"child_changed",t,n,i)}function OP(e,t,n,i){return CP(e,"child_moved",t,n,i)}function AP(e,t,n,i){return CP(e,"child_removed",t,n,i)}function DP(e,t,n){var i=null,r=n?new lP(n):null;"value"===t?i=new xP(r):t&&(i=new EP(t,r)),WR(e._repo,e,i)}var MP=Re((function e(){De(this,e)})),RP=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this))._value=e,r._key=i,r}return Re(n,[{key:"_apply",value:function(e){mR("endAt",this._value,e._path,!0);var t=XA(e._queryParams,this._value,this._key);if(pP(t),fP(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hP(e._repo,e._path,t,e._orderByCalled)}}]),n}(MP);var PP=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this))._value=e,r._key=i,r}return Re(n,[{key:"_apply",value:function(e){mR("endBefore",this._value,e._path,!1);var t=function(e,t,n){var i;return(i=e.index_===dA||n?XA(e,t,n):XA(e,t,nO)).endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(pP(t),fP(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hP(e._repo,e._path,t,e._orderByCalled)}}]),n}(MP);var NP=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this))._value=e,r._key=i,r}return Re(n,[{key:"_apply",value:function(e){mR("startAt",this._value,e._path,!0);var t=YA(e._queryParams,this._value,this._key);if(pP(t),fP(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new hP(e._repo,e._path,t,e._orderByCalled)}}]),n}(MP);var LP=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this))._value=e,r._key=i,r}return Re(n,[{key:"_apply",value:function(e){mR("startAfter",this._value,e._path,!1);var t=function(e,t,n){var i;return(i=e.index_===dA||n?YA(e,t,n):YA(e,t,iO)).startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(pP(t),fP(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new hP(e._repo,e._path,t,e._orderByCalled)}}]),n}(MP);var BP=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this))._limit=e,i}return Re(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new hP(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(MP);var FP=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this))._limit=e,i}return Re(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new hP(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(MP);var jP=function(e){Le(n,e);var t=je(n);function n(e){var i;return De(this,n),(i=t.call(this))._path=e,i}return Re(n,[{key:"_apply",value:function(e){dP(e,"orderByChild");var t=new qO(this._path);if(XO(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new jA(t),i=JA(e._queryParams,n);return fP(i),new hP(e._repo,e._path,i,!0)}}]),n}(MP);var UP=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"_apply",value:function(e){dP(e,"orderByKey");var t=JA(e._queryParams,dA);return fP(t),new hP(e._repo,e._path,t,!0)}}]),n}(MP);var VP=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"_apply",value:function(e){dP(e,"orderByPriority");var t=JA(e._queryParams,OA);return fP(t),new hP(e._repo,e._path,t,!0)}}]),n}(MP);var qP=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"_apply",value:function(e){dP(e,"orderByValue");var t=JA(e._queryParams,VA);return fP(t),new hP(e._repo,e._path,t,!0)}}]),n}(MP);var $P=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this))._value=e,r._key=i,r}return Re(n,[{key:"_apply",value:function(e){if(mR("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new RP(this._value,this._key)._apply(new NP(this._value,this._key)._apply(e))}}]),n}(MP);function WP(e){for(var t=Ft(e),n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(var a=0,o=i;a<o.length;a++){t=o[a]._apply(t)}return t}!function(e){ze(!oM,"__referenceConstructor has already been defined"),oM=e}(vP),function(e){ze(!fM,"__referenceConstructor has already been defined"),fM=e}(vP);var zP="FIREBASE_DATABASE_EMULATOR_HOST",HP={},KP=!1;function QP(e,t,n,i,r){var a=i||e.options.databaseURL;void 0===a&&(e.options.projectId||ZS("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),YS("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=iP(a,r),u=s.repoInfo,l=void 0;"undefined"!==typeof process&&(l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_apiKey:"AIzaSyDuVxcj871XrI0PbnVKZGApPV1LHSzsZWA",REACT_APP_appId:"1:51556035661:web:5eb6609ab3ea61fea5c004",REACT_APP_authDomain:"y76-librarymanagementsystem.firebaseapp.com",REACT_APP_messagingSenderId:"51556035661",REACT_APP_projectId:"y76-librarymanagementsystem",REACT_APP_storageBucket:"y76-librarymanagementsystem.appspot.com"}[zP]),l?(o=!0,a="http://".concat(l,"?ns=").concat(u.namespace),u=(s=iP(a,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new yO(yO.OWNER):new mO(e.name,e.options,t);ER("Invalid Firebase Database URL",s),XO(s.path)||ZS("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,i){var r=HP[t.name];r||(r={},HP[t.name]=r);var a=r[e.toURLString()];a&&ZS("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new RR(e,KP,n,i),r[e.toURLString()]=a,a}(u,e,c,new vO(e.name,n));return new GP(h,e)}var GP=function(){function e(t,n){De(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return Re(e,[{key:"_repo",get:function(){return this._instanceStarted||(PR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new vP(this._repo,$O())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=HP[t];n&&n[e.key]===e||ZS("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),zR(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&ZS("Cannot call "+e+" on a deleted database.")}}]),e}();function YP(){NO.IS_TRANSPORT_INITIALIZED&&eO("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function XP(){YP(),DO.forceDisallow()}function JP(){YP(),PO.forceDisallow(),DO.forceAllow()}function ZP(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=Ft(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&ZS("Cannot call useEmulator() after instance has already been initialized.");var r=e._repoInternal,a=void 0;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&ZS('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new yO(yO.OWNER);else if(i.mockUserToken){var o="string"===typeof i.mockUserToken?i.mockUserToken:at(i.mockUserToken,e.app.options.projectId);a=new yO(o)}!function(e,t,n,i){e.repoInfo_=new xO("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}(r,t,n,a)}function eN(e){var t;(e=Ft(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(DR)}function tN(e,t){GS(e,t)}var nN={".sv":"timestamp"};var iN=function(){function e(t,n){De(this,e),this.committed=t,this.snapshot=n}return Re(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function rN(e,t,n){var i;if(e=Ft(e),xR("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var r=null===(i=null===n||void 0===n?void 0:n.applyLocally)||void 0===i||i,a=new rt,o=TP(e,(function(){}));return function(e,t,n,i,r,a){HR(e,"transaction on "+t);var o={path:t,update:n,onComplete:i,status:null,order:WS(),applyLocally:a,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=QR(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{yR("transaction failed: Data returned ",u,o.path),o.status=0;var l,c=nR(e.transactionQueueTree_,t),h=iR(c)||[];h.push(o),rR(c,h),"object"===typeof u&&null!==u&&kt(u,".priority")?(l=wt(u,".priority"),ze(vR(l),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):l=(PM(e.serverSyncTree_,t)||NA.EMPTY_NODE).getPriority().val();var d=LR(e),f=FA(u,l),p=ZM(f,s,d);o.currentOutputSnapshotRaw=f,o.currentOutputSnapshotResolved=p,o.currentWriteId=UR(e);var v=IM(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);SR(e.eventQueue_,t,v),GR(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,i){var r=null;t?a.reject(t):(r=new mP(i,new vP(e._repo,e._path),OA),a.resolve(new iN(n,r)))}),o,r),a.promise}sA.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},sA.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){BS(Vn),Pn(new Wt("database",(function(e,t){var n=t.instanceIdentifier;return QP(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Kn(PS,NS,e),Kn(PS,NS,"esm2017")}();var aN=new tn("@firebase/database-compat"),oN=function(e){var t="FIREBASE WARNING: "+e;aN.warn(t)},sN=function(){function e(t){De(this,e),this._delegate=t}return Re(e,[{key:"cancel",value:function(e){Rt("OnDisconnect.cancel",0,1,arguments.length),Nt("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){Rt("OnDisconnect.remove",0,1,arguments.length),Nt("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){Rt("OnDisconnect.set",1,2,arguments.length),Nt("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){Rt("OnDisconnect.setWithPriority",2,3,arguments.length),Nt("OnDisconnect.setWithPriority","onComplete",n,!0);var i=this._delegate.setWithPriority(e,t);return n&&i.then((function(){return n(null)}),(function(e){return n(e)})),i}},{key:"update",value:function(e,t){if(Rt("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},i=0;i<e.length;++i)n[""+i]=e[i];e=n,oN("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Nt("OnDisconnect.update","onComplete",t,!0);var r=this._delegate.update(e);return t&&r.then((function(){return t(null)}),(function(e){return t(e)})),r}}]),e}(),uN=function(){function e(t,n){De(this,e),this.committed=t,this.snapshot=n}return Re(e,[{key:"toJSON",value:function(){return Rt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),lN=function(){function e(t,n){De(this,e),this._database=t,this._delegate=n}return Re(e,[{key:"val",value:function(){return Rt("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return Rt("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return Rt("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return Rt("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return Rt("DataSnapshot.child",0,1,arguments.length),t=String(t),wR("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return Rt("DataSnapshot.hasChild",1,1,arguments.length),wR("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return Rt("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return Rt("DataSnapshot.forEach",1,1,arguments.length),Nt("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(i){return t(new e(n._database,i))}))}},{key:"hasChildren",value:function(){return Rt("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return Rt("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return Rt("DataSnapshot.ref",0,0,arguments.length),new hN(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),cN=function(){function e(t,n){De(this,e),this.database=t,this._delegate=n}return Re(e,[{key:"on",value:function(t,n,i,r){var a,o=this;Rt("Query.on",2,4,arguments.length),Nt("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",i,r),u=function(e,t){n.call(s.context,new lN(o.database,e),t)};u.userCallback=n,u.context=s.context;var l=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return TP(this._delegate,u,l),n;case"child_added":return IP(this._delegate,u,l),n;case"child_removed":return AP(this._delegate,u,l),n;case"child_changed":return SP(this._delegate,u,l),n;case"child_moved":return OP(this._delegate,u,l),n;default:throw new Error(Pt("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(Rt("Query.off",0,3,arguments.length),function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Pt(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",e,!0),Nt("Query.off","callback",t,!0),Lt("Query.off","context",n,!0),t){var i=function(){};i.userCallback=t,i.context=n,DP(this._delegate,e,i)}else DP(this._delegate,e)}},{key:"get",value:function(){var e=this;return bP(this._delegate).then((function(t){return new lN(e.database,t)}))}},{key:"once",value:function(t,n,i,r){var a=this;Rt("Query.once",1,4,arguments.length),Nt("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",i,r),s=new rt,u=function(e,t){var i=new lN(a.database,e);n&&n.call(o.context,i,t),s.resolve(i)};u.userCallback=n,u.context=o.context;var l=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":TP(this._delegate,u,l,{onlyOnce:!0});break;case"child_added":IP(this._delegate,u,l,{onlyOnce:!0});break;case"child_removed":AP(this._delegate,u,l,{onlyOnce:!0});break;case"child_changed":SP(this._delegate,u,l,{onlyOnce:!0});break;case"child_moved":OP(this._delegate,u,l,{onlyOnce:!0});break;default:throw new Error(Pt("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return Rt("Query.limitToFirst",1,1,arguments.length),new e(this.database,WP(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new BP(e)}(t)))}},{key:"limitToLast",value:function(t){return Rt("Query.limitToLast",1,1,arguments.length),new e(this.database,WP(this._delegate,function(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new FP(e)}(t)))}},{key:"orderByChild",value:function(t){return Rt("Query.orderByChild",1,1,arguments.length),new e(this.database,WP(this._delegate,function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return wR("orderByChild","path",e,!1),new jP(e)}(t)))}},{key:"orderByKey",value:function(){return Rt("Query.orderByKey",0,0,arguments.length),new e(this.database,WP(this._delegate,new UP))}},{key:"orderByPriority",value:function(){return Rt("Query.orderByPriority",0,0,arguments.length),new e(this.database,WP(this._delegate,new VP))}},{key:"orderByValue",value:function(){return Rt("Query.orderByValue",0,0,arguments.length),new e(this.database,WP(this._delegate,new qP))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Rt("Query.startAt",0,2,arguments.length),new e(this.database,WP(this._delegate,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return kR("startAt","key",t,!0),new NP(e,t)}(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Rt("Query.startAfter",0,2,arguments.length),new e(this.database,WP(this._delegate,function(e,t){return kR("startAfter","key",t,!0),new LP(e,t)}(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Rt("Query.endAt",0,2,arguments.length),new e(this.database,WP(this._delegate,function(e,t){return kR("endAt","key",t,!0),new RP(e,t)}(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Rt("Query.endBefore",0,2,arguments.length),new e(this.database,WP(this._delegate,function(e,t){return kR("endBefore","key",t,!0),new PP(e,t)}(t,n)))}},{key:"equalTo",value:function(t,n){return Rt("Query.equalTo",1,2,arguments.length),new e(this.database,WP(this._delegate,function(e,t){return kR("equalTo","key",t,!0),new $P(e,t)}(t,n)))}},{key:"toString",value:function(){return Rt("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return Rt("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(Rt("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new hN(this.database,new vP(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var i={cancel:void 0,context:void 0};if(t&&n)i.cancel=t,Nt(e,"cancel",i.cancel,!0),i.context=n,Lt(e,"context",i.context,!0);else if(t)if("object"===typeof t&&null!==t)i.context=t;else{if("function"!==typeof t)throw new Error(Pt(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}}]),e}(),hN=function(e){Le(n,e);var t=je(n);function n(e,i){var r;return De(this,n),(r=t.call(this,e,new hP(i._repo,i._path,new GA,!1))).database=e,r._delegate=i,r}return Re(n,[{key:"getKey",value:function(){return Rt("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return Rt("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,_P(this._delegate,e))}},{key:"getParent",value:function(){Rt("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return Rt("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){Rt("Reference.set",1,2,arguments.length),Nt("Reference.set","onComplete",t,!0);var n=kP(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(Rt("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},i=0;i<e.length;++i)n[""+i]=e[i];e=n,oN("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xR("Reference.update",this._delegate._path),Nt("Reference.update","onComplete",t,!0);var r=wP(this._delegate,e);return t&&r.then((function(){return t(null)}),(function(e){return t(e)})),r}},{key:"setWithPriority",value:function(e,t,n){Rt("Reference.setWithPriority",2,3,arguments.length),Nt("Reference.setWithPriority","onComplete",n,!0);var i=function(e,t,n){if(xR("setWithPriority",e._path),mR("setWithPriority",t,e._path,!1),_R("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var i=new rt;return VR(e._repo,e._path,t,n,i.wrapCallback((function(){}))),i.promise}(this._delegate,e,t);return n&&i.then((function(){return n(null)}),(function(e){return n(e)})),i}},{key:"remove",value:function(e){Rt("Reference.remove",0,1,arguments.length),Nt("Reference.remove","onComplete",e,!0);var t,n=(t=this._delegate,xR("remove",t._path),kP(t,null));return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n}},{key:"transaction",value:function(e,t,n){var i=this;Rt("Reference.transaction",1,3,arguments.length),Nt("Reference.transaction","transactionUpdate",e,!1),Nt("Reference.transaction","onComplete",t,!0),function(e,t,n,i){if((!i||void 0!==n)&&"boolean"!==typeof n)throw new Error(Pt(e,t)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);var r=rN(this._delegate,e,{applyLocally:n}).then((function(e){return new uN(e.committed,new lN(i.database,e.snapshot))}));return t&&r.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),r}},{key:"setPriority",value:function(e,t){Rt("Reference.setPriority",1,2,arguments.length),Nt("Reference.setPriority","onComplete",t,!0);var n=function(e,t){e=Ft(e),xR("setPriority",e._path),_R("setPriority",t,!1);var n=new rt;return VR(e._repo,YO(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var i=this;Rt("Reference.push",0,2,arguments.length),Nt("Reference.push","onComplete",t,!0);var r=function(e,t){e=Ft(e),xR("push",e._path),mR("push",t,e._path,!0);var n,i=NR(e._repo),r=oP(i),a=_P(e,r),o=_P(e,r);return n=null!=t?kP(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}(this._delegate,e),a=r.then((function(e){return new n(i.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,r);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return xR("Reference.onDisconnect",this._delegate._path),new sN(new cP(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(cN),dN=function(){function e(t,n){var i=this;De(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return i._delegate._delete()},forceWebSockets:XP,forceLongPolling:JP}}return Re(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ZP(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(Rt("database.ref",0,1,arguments.length),e instanceof hN){var t=gP(this._delegate,e.toString());return new hN(this,t)}var n=yP(this._delegate,e);return new hN(this,n)}},{key:"refFromURL",value:function(e){Rt("database.refFromURL",1,1,arguments.length);var t=gP(this._delegate,e);return new hN(this,t)}},{key:"goOffline",value:function(){return Rt("database.goOffline",0,0,arguments.length),function(e){(e=Ft(e))._checkNotDeleted("goOffline"),zR(e._repo)}(this._delegate)}},{key:"goOnline",value:function(){return Rt("database.goOnline",0,0,arguments.length),eN(this._delegate)}}]),e}();dN.ServerValue={TIMESTAMP:nN,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var fN=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,i=e.version,r=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;BS(i);var u=new Ht("auth-internal",new Gt("database-standalone"));return u.setComponent(new Wt("auth-internal",(function(){return r}),"PRIVATE")),{instance:new dN(QP(t,u,void 0,n,s),t),namespace:a}}}),pN=dN.ServerValue;!function(e){e.INTERNAL.registerComponent(new Wt("database-compat",(function(e,t){var n=t.instanceIdentifier,i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:n});return new dN(r,i)}),"PUBLIC").setServiceProps({Reference:hN,Query:cN,Database:dN,DataSnapshot:lN,enableLogging:tN,INTERNAL:fN,ServerValue:pN}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.3.4")}(_i);var vN,mN="firebasestorage.googleapis.com",yN="storageBucket",gN=function(e){Le(n,e);var t=je(n);function n(e,i){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return De(this,n),(r=t.call(this,_N(e),"Firebase Storage: ".concat(i," (").concat(_N(e),")"))).status_=a,r.customData={serverResponse:null},r._baseMessage=r.message,Object.setPrototypeOf(Ne(r),n.prototype),r}return Re(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return _N(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(pt);function _N(e){return"storage/"+e}function kN(){return new gN(vN.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function wN(){return new gN(vN.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bN(){return new gN(vN.CANCELED,"User canceled the upload/download.")}function xN(){return new gN(vN.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function EN(e){return new gN(vN.INVALID_ARGUMENT,e)}function CN(){return new gN(vN.APP_DELETED,"The Firebase app was deleted.")}function TN(e){return new gN(vN.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function IN(e,t){return new gN(vN.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function SN(e){throw new gN(vN.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(vN||(vN={}));var ON,AN=function(){function e(t,n){De(this,e),this.bucket=t,this.path_=n}return Re(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var i,r;try{i=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===i.path)return i;throw r=t,new gN(vN.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}},{key:"makeFromUrl",value:function(t,n){var i=null,r="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===mN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],l=0;l<u.length;l++){var c=u[l],h=c.regex.exec(t);if(h){var d=h[c.indices.bucket],f=h[c.indices.path];f||(f=""),i=new e(d,f),c.postModify(i);break}}if(null==i)throw function(e){return new gN(vN.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return i}}]),e}(),DN=function(){function e(t){De(this,e),this.promise_=Promise.reject(t)}return Re(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function MN(e){return"string"===typeof e||e instanceof String}function RN(e){return PN()&&e instanceof Blob}function PN(){return"undefined"!==typeof Blob&&!ut()}function NN(e,t,n,i){if(i<t)throw EN("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(i>n)throw EN("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function LN(e,t,n){var i=t;return null==n&&(i="https://".concat(t)),"".concat(n,"://").concat(i,"/v0").concat(e)}function BN(e){var t=encodeURIComponent,n="?";for(var i in e){if(e.hasOwnProperty(i))n=n+(t(i)+"="+t(e[i]))+"&"}return n=n.slice(0,-1)}function FN(e,t){var n=e>=500&&e<600,i=-1!==[408,429].indexOf(e),r=-1!==t.indexOf(e);return n||i||r}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(ON||(ON={}));var jN=function(){function e(t,n,i,r,a,o,s,u,l,c,h){var d=this,f=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];De(this,e),this.url_=t,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return Re(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var i=e.resolve_,r=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?i():i(o)}catch(u){r(u)}else if(null!==a){var s=kN();s.serverResponse=a.getErrorText(),e.errorCallback_?r(e.errorCallback_(a,s)):r(s)}else{if(n.canceled)r(e.appDelete_?CN():bN());else r(wN())}};this.canceled_?t(0,new UN(!1,null,!0)):this.backoffId_=function(e,t,n){var i=1,r=null,a=null,o=!1,s=0;function u(){return 2===s}var l=!1;function c(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(null,n)}}function h(t){r=setTimeout((function(){r=null,e(f,u())}),t)}function d(){a&&clearTimeout(a)}function f(e){if(l)d();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e)return d(),void c.call.apply(c,[null,e].concat(n));var a;if(u()||o)return d(),void c.call.apply(c,[null,e].concat(n));i<64&&(i*=2),1===s?(s=2,a=0):a=1e3*(i+Math.random()),h(a)}}var p=!1;function v(e){p||(p=!0,d(),l||(null!==r?(e||(s=2),clearTimeout(r),h(0)):e||(s=1)))}return h(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new UN(!1,null,!0));else{var i=e.connectionFactory_();e.pendingConnection_=i;var r=function(t){var n=t.loaded,i=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,i)};null!==e.progressCallback_&&i.addUploadProgressListener(r),i.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&i.removeUploadProgressListener(r),e.pendingConnection_=null;var n=i.getErrorCode()===ON.NO_ERROR,a=i.getStatus();if(!n||FN(a,e.additionalRetryCodes_)&&e.retry){var o=i.getErrorCode()===ON.ABORT;t(!1,new UN(!1,null,o))}else{var s=-1!==e.successCodes_.indexOf(a);t(!0,new UN(s,i))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),UN=Re((function e(t,n,i){De(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}));function VN(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function qN(){for(var e=VN(),t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(void 0!==e){for(var r=new e,a=0;a<n.length;a++)r.append(n[a]);return r.getBlob()}if(PN())return new Blob(n);throw new gN(vN.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function $N(e){if("undefined"===typeof atob)throw t="base-64",new gN(vN.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var WN={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},zN=Re((function e(t,n){De(this,e),this.data=t,this.contentType=n||null}));function HN(e,t){switch(e){case WN.RAW:return new zN(KN(t));case WN.BASE64:case WN.BASE64URL:return new zN(QN(e,t));case WN.DATA_URL:return new zN(function(e){var t=new GN(e);return t.base64?QN(WN.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw IN(WN.DATA_URL,"Malformed data URL.")}return KN(t)}(t.rest)}(t),new GN(t).contentType)}throw kN()}function KN(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|63&i);else if(55296===(64512&i))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))i=65536|(1023&i)<<10|1023&e.charCodeAt(++n),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i);else t.push(239,191,189);else 56320===(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function QN(e,t){switch(e){case WN.BASE64:var n=-1!==t.indexOf("-"),i=-1!==t.indexOf("_");if(n||i)throw IN(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case WN.BASE64URL:var r=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(r||a)throw IN(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=$N(t)}catch(l){if(l.message.includes("polyfill"))throw l;throw IN(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var GN=Re((function e(t){De(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw IN(WN.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var i=n[1]||null;null!=i&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}));var YN=function(){function e(t,n){De(this,e);var i=0,r="";RN(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}return Re(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(RN(this.data_)){var i=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===i?null:new e(i)}var r=new Uint8Array(this.data_.buffer,t,n-t);return new e(r,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(PN()){var r=n.map((function(t){return t instanceof e?t.data_:t}));return new e(qN.apply(null,r))}var a=n.map((function(e){return MN(e)?HN(WN.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function XN(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function JN(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function ZN(e,t){return t}var eL=Re((function e(t,n,i,r){De(this,e),this.server=t,this.local=n||t,this.writable=!!i,this.xform=r||ZN})),tL=null;function nL(){if(tL)return tL;var e=[];e.push(new eL("bucket")),e.push(new eL("generation")),e.push(new eL("metageneration")),e.push(new eL("name","fullPath",!0));var t=new eL("name");t.xform=function(e,t){return function(e){return!MN(e)||e.length<2?e:JN(e)}(t)},e.push(t);var n=new eL("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new eL("timeCreated")),e.push(new eL("updated")),e.push(new eL("md5Hash",null,!0)),e.push(new eL("cacheControl",null,!0)),e.push(new eL("contentDisposition",null,!0)),e.push(new eL("contentEncoding",null,!0)),e.push(new eL("contentLanguage",null,!0)),e.push(new eL("contentType",null,!0)),e.push(new eL("metadata","customMetadata",!0)),tL=e}function iL(e,t,n){for(var i={type:"file"},r=n.length,a=0;a<r;a++){var o=n[a];i[o.local]=o.xform(i,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,i=e.fullPath,r=new AN(n,i);return t._makeStorageReference(r)}})}(i,e),i}function rL(e,t,n){var i=XN(t);return null===i?null:iL(e,i,n)}function aL(e,t){for(var n={},i=t.length,r=0;r<i;r++){var a=t[r];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var oL="prefixes",sL="items";function uL(e,t,n){var i=XN(n);return null===i?null:function(e,t,n){var i={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[oL]){var r,a=Pe(n[oL]);try{for(a.s();!(r=a.n()).done;){var o=r.value.replace(/\/$/,""),s=e._makeStorageReference(new AN(t,o));i.prefixes.push(s)}}catch(d){a.e(d)}finally{a.f()}}if(n[sL]){var u,l=Pe(n[sL]);try{for(l.s();!(u=l.n()).done;){var c=u.value,h=e._makeStorageReference(new AN(t,c.name));i.items.push(h)}}catch(d){l.e(d)}finally{l.f()}}return i}(e,t,i)}var lL=Re((function e(t,n,i,r){De(this,e),this.url=t,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function cL(e){if(!e)throw kN()}function hL(e,t){return function(n,i){var r=rL(e,i,t);return cL(null!==r),r}}function dL(e,t){return function(n,i){var r=rL(e,i,t);return cL(null!==r),function(e,t,n,i){var r=XN(t);if(null===r)return null;if(!MN(r.downloadTokens))return null;var a=r.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var r=e.bucket,a=e.fullPath;return LN("/b/"+o(r)+"/o/"+o(a),n,i)+BN({alt:"media",token:t})}))[0]}(r,i,e.host,e._protocol)}}function fL(e){return function(t,n){var i,r,a;return 401===t.getStatus()?i=t.getErrorText().includes("Firebase App Check token is invalid")?new gN(vN.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new gN(vN.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,i=new gN(vN.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=e.path,i=new gN(vN.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):i=n,i.status=t.getStatus(),i.serverResponse=n.serverResponse,i}}function pL(e){var t=fL(e);return function(n,i){var r,a=t(n,i);return 404===n.getStatus()&&(r=e.path,a=new gN(vN.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")),a.serverResponse=i.serverResponse,a}}function vL(e,t,n){var i=LN(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,a=new lL(i,"GET",hL(e,n),r);return a.errorHandler=pL(t),a}function mL(e,t,n,i,r){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),i&&(a.pageToken=i),r&&(a.maxResults=r);var o=LN(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new lL(o,"GET",function(e,t){return function(n,i){var r=uL(e,t,i);return cL(null!==r),r}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=fL(t),u}function yL(e,t,n){var i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}function gL(e,t,n,i,r){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=yL(t,i,r),l="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+aL(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",c="\r\n--"+s+"--",h=YN.getBlob(l,i,c);if(null===h)throw xN();var d={name:u.fullPath},f=LN(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new lL(f,"POST",hL(e,n),p);return v.urlParams=d,v.headers=o,v.body=h.uploadData(),v.errorHandler=fL(t),v}var _L=Re((function e(t,n,i,r){De(this,e),this.current=t,this.total=n,this.finalized=!!i,this.metadata=r||null}));function kL(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(i){cL(!1)}return cL(!!n&&-1!==(t||["active"]).indexOf(n)),n}var wL=262144;function bL(e,t,n,i,r,a,o,s){var u=new _L(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=i.size()),i.size()!==u.total)throw new gN(vN.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var l=u.total-u.current,c=l;r>0&&(c=Math.min(c,r));var h=u.current,d=h+c,f={"X-Goog-Upload-Command":0===c?"finalize":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=i.slice(h,d);if(null===p)throw xN();var v=t.maxUploadRetryTime,m=new lL(n,"POST",(function(e,n){var r,o=kL(e,["active","final"]),s=u.current+c,l=i.size();return r="final"===o?hL(t,a)(e,n):null,new _L(s,l,"final"===o,r)}),v);return m.headers=f,m.body=p.uploadData(),m.progressCallback=s||null,m.errorHandler=fL(e),m}var xL={STATE_CHANGED:"state_changed"},EL={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function CL(e){switch(e){case"running":case"pausing":case"canceling":return EL.RUNNING;case"paused":return EL.PAUSED;case"success":return EL.SUCCESS;case"canceled":return EL.CANCELED;default:return EL.ERROR}}var TL=Re((function e(t,n,i){De(this,e);var r=function(e){return"function"===typeof e}(t)||null!=n||null!=i;if(r)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==i&&void 0!==i?i:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function IL(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var SL=null,OL=function(){function e(){var t=this;De(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ON.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=ON.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=ON.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return Re(e,[{key:"send",value:function(e,t,n,i){if(this.sent_)throw SN("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(var r in i)i.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,i[r].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw SN("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw SN("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw SN("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw SN("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),AL=function(e){Le(n,e);var t=je(n);function n(){return De(this,n),t.apply(this,arguments)}return Re(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(OL);function DL(){return SL?SL():new AL}var ML=function(){function e(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;De(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=r,this._mappings=nL(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(i._request=void 0,i._chunkMultiplier=1,e._codeEquals(vN.CANCELED))i._needToFetchStatus=!0,i.completeTransitions_();else{var t=i.isExponentialBackoffExpired();if(FN(e.status,[])){if(!t)return i.sleepTime=Math.max(2*i.sleepTime,1e3),i._needToFetchStatus=!0,void i.completeTransitions_();e=wN()}i._error=e,i._transition("error")}},this._metadataErrorHandler=function(e){i._request=void 0,e._codeEquals(vN.CANCELED)?i.completeTransitions_():(i._error=e,i._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){i._resolve=e,i._reject=t,i._start()})),this._promise.then(null,(function(){}))}return Re(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var i=Ie(n,2),r=i[0],a=i[1];switch(t._state){case"running":e(r,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var i=function(e,t,n,i,r){var a=t.bucketOnlyServerUrl(),o=yL(t,i,r),s={name:o.fullPath},u=LN(a,e.host,e._protocol),l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(i.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},c=aL(o,n),h=e.maxUploadRetryTime,d=new lL(u,"POST",(function(e){var t;kL(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){cL(!1)}return cL(MN(t)),t}),h);return d.urlParams=s,d.headers=l,d.body=c,d.errorHandler=fL(t),d}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),r=e._ref.storage._makeRequest(i,DL,t,n);e._request=r,r.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,i){var r=function(e,t,n,i){var r=e.maxUploadRetryTime,a=new lL(n,"POST",(function(e){var t=kL(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){cL(!1)}n||cL(!1);var r=Number(n);return cL(!isNaN(r)),new _L(r,i.size(),"final"===t)}),r);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=fL(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(r,DL,n,i);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=wL*this._chunkMultiplier,n=new _L(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((function(r,a){var o;try{o=bL(e._ref._location,e._ref.storage,i,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,DL,r,a,!1);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(wL*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var i=vL(e._ref.storage,e._ref._location,e._mappings),r=e._ref.storage._makeRequest(i,DL,t,n);e._request=r,r.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var i=gL(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),r=e._ref.storage._makeRequest(i,DL,t,n);e._request=r,r.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=bN(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=CL(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,i){var r=this,a=new TL(t||void 0,n||void 0,i||void 0);return this._addObserver(a),function(){r._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(CL(this._state)){case EL.SUCCESS:IL(this._resolve.bind(null,this.snapshot))();break;case EL.CANCELED:case EL.ERROR:IL(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(CL(this._state)){case EL.RUNNING:case EL.PAUSED:e.next&&IL(e.next.bind(e,this.snapshot))();break;case EL.SUCCESS:e.complete&&IL(e.complete.bind(e))();break;default:e.error&&IL(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),RL=function(){function e(t,n){De(this,e),this._service=t,this._location=n instanceof AN?n:AN.makeFromUrl(n,t.host)}return Re(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new AN(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return JN(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new AN(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw TN(e)}}]),e}();function PL(e,t,n){return NL.apply(this,arguments)}function NL(){return(NL=$t(jt().mark((function e(t,n,i){var r,a,o,s;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:i},e.next=3,LL(t,o);case 3:if(s=e.sent,(r=n.prefixes).push.apply(r,Vt(s.prefixes)),(a=n.items).push.apply(a,Vt(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,PL(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function LL(e,t){null!=t&&"number"===typeof t.maxResults&&NN("options.maxResults",1,1e3,t.maxResults);var n=t||{},i=mL(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(i,DL)}function BL(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,i){var r=LN(t.fullServerUrl(),e.host,e._protocol),a=aL(n,i),o=e.maxOperationRetryTime,s=new lL(r,"PATCH",hL(e,i),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=pL(t),s}(e.storage,e._location,t,nL());return e.storage.makeRequestWithTokens(n,DL)}function FL(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var i=LN(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,a=new lL(i,"GET",dL(e,n),r);return a.errorHandler=pL(t),a}(e.storage,e._location,nL());return e.storage.makeRequestWithTokens(t,DL).then((function(e){if(null===e)throw new gN(vN.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function jL(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=LN(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,r=new lL(n,"DELETE",(function(e,t){}),i);return r.successCodes=[200,204],r.errorHandler=pL(t),r}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,DL)}function UL(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),i=new AN(e._location.bucket,n);return new RL(e.storage,i)}function VL(e,t){if(e instanceof WL){var n=e;if(null==n._bucket)throw new gN(vN.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yN+"' property when initializing the app?");var i=new RL(n,n._bucket);return null!=t?VL(i,t):i}return void 0!==t?UL(e,t):e}function qL(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof WL)return new RL(e,t);throw EN("To use ref(service, url), the first argument must be a Storage instance.")}return VL(e,t)}function $L(e,t){var n=null===t||void 0===t?void 0:t[yN];return null==n?null:AN.makeFromBucketSpec(n,e)}var WL=function(){function e(t,n,i,r,a){De(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=a,this._bucket=null,this._host=mN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?AN.makeFromBucketSpec(r,this._host):$L(this._host,this.app.options)}return Re(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=AN.makeFromBucketSpec(this._url,e):this._bucket=$L(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){NN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){NN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=$t(jt().mark((function e(){var t,n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=$t(jt().mark((function e(){var t,n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new RL(this,e)}},{key:"_makeRequest",value:function(e,t,n,i){var r=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new DN(CN());var o=function(e,t,n,i,r,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=BN(e.urlParams),u=e.url+s,l=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(l,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(l,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(l,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(l,i),new jN(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}(e,this._appId,n,i,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return r._requests.delete(o)}),(function(){return r._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=$t(jt().mark((function e(t,n){var i,r,a,o;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return i=e.sent,r=Ie(i,2),a=r[0],o=r[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),zL="@firebase/storage",HL="0.11.2",KL="storage";function QL(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new ML(e,new YN(t),n)}(e=Ft(e),t,n)}function GL(e){return function(e){e._throwIfRoot("getMetadata");var t=vL(e.storage,e._location,nL());return e.storage.makeRequestWithTokens(t,DL)}(e=Ft(e))}function YL(e){return function(e){var t={prefixes:[],items:[]};return PL(e,t).then((function(){return t}))}(e=Ft(e))}function XL(e,t){return qL(e=Ft(e),t)}function JL(e,t,n){!function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var r=i.mockUserToken;r&&(e._overrideAuthToken="string"===typeof r?r:at(r,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function ZL(e,t){var n=t.instanceIdentifier,i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new WL(i,r,a,n,Vn)}Pn(new Wt(KL,ZL,"PUBLIC").setMultipleInstances(!0)),Kn(zL,HL,""),Kn(zL,HL,"esm2017");var eB=function(){function e(t,n,i){De(this,e),this._delegate=t,this.task=n,this.ref=i}return Re(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),tB=function(){function e(t,n){De(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Re(e,[{key:"snapshot",get:function(){return new eB(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new eB(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,i){var r=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new eB(e,r,r._ref))}:{next:t.next?function(e){return t.next(new eB(e,r,r._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,i||void 0)}}]),e}(),nB=function(){function e(t,n){De(this,e),this._delegate=t,this._service=n}return Re(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new iB(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new iB(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),iB=function(){function e(t,n){De(this,e),this._delegate=t,this.storage=n}return Re(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return UL(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new tB(QL(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WN.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var i=HN(t,e),r=Object.assign({},n);return null==r.contentType&&null!=i.contentType&&(r.contentType=i.contentType),new tB(new ML(this._delegate,new YN(i.data,!0),r),this)}},{key:"listAll",value:function(){var e=this;return YL(this._delegate).then((function(t){return new nB(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return LL(e=Ft(e),t)}(this._delegate,e||void 0).then((function(e){return new nB(e,t.storage)}))}},{key:"getMetadata",value:function(){return GL(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return BL(e=Ft(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return FL(Ft(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),jL(Ft(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw TN(e)}}]),e}(),rB=function(){function e(t,n){De(this,e),this.app=t,this._delegate=n}return Re(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(aB(e))throw EN("ref() expected a child path but got a URL, use refFromURL instead.");return new iB(XL(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!aB(e))throw EN("refFromURL() expected a full URL but got a child path, use ref() instead.");try{AN.makeFromUrl(e,this._delegate.host)}catch(t){throw EN("refFromUrl() expected a valid full URL but got an invalid one.")}return new iB(XL(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};JL(this._delegate,e,t,n)}}]),e}();function aB(e){return/^[A-Za-z]+:\/\//.test(e)}function oB(e,t){var n=t.instanceIdentifier,i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("storage").getImmediate({identifier:n});return new rB(i,r)}!function(e){var t={TaskState:EL,TaskEvent:xL,StringFormat:WN,Storage:rB,Reference:iB};e.INTERNAL.registerComponent(new Wt("storage-compat",oB,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(_i);var sB={apiKey:"AIzaSyDuVxcj871XrI0PbnVKZGApPV1LHSzsZWA",authDomain:"y76-librarymanagementsystem.firebaseapp.com",databaseURL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_apiKey:"AIzaSyDuVxcj871XrI0PbnVKZGApPV1LHSzsZWA",REACT_APP_appId:"1:51556035661:web:5eb6609ab3ea61fea5c004",REACT_APP_authDomain:"y76-librarymanagementsystem.firebaseapp.com",REACT_APP_messagingSenderId:"51556035661",REACT_APP_projectId:"y76-librarymanagementsystem",REACT_APP_storageBucket:"y76-librarymanagementsystem.appspot.com"}.REACT_APP_databaseURL,projectId:"y76-librarymanagementsystem",storageBucket:"y76-librarymanagementsystem.appspot.com",messagingSenderId:"51556035661",appId:"1:51556035661:web:5eb6609ab3ea61fea5c004"};_i.initializeApp(sB);var uB=_i,lB=n(184),cB=t.createContext(),hB=function(e){var n=e.children,i=Ie((0,t.useState)(null),2),r=i[0],a=i[1];return(0,t.useEffect)((function(){var e=uB.auth().onAuthStateChanged((function(e){console.log("AuthProvider: Auth state changed, user:",e),a(e)}));return function(){return e()}}),[]),console.log("AuthProvider: Rendering, user:",r),(0,lB.jsx)(cB.Provider,{value:{user:r,setUser:a},children:n})},dB=n.p+"static/media/loadingSpinner.e9b45fb6bd1d9855ceba.gif",fB=function(){var e=fe(),n=Ie((0,t.useState)([]),2),i=n[0],r=n[1],a=Ie((0,t.useState)(!1),2),o=a[0],s=a[1],u=Ie((0,t.useState)(""),2),l=u[0],c=u[1];return(0,t.useEffect)((function(){s(!0);var e=uB.firestore().collection("books").onSnapshot((function(e){var t=e.docs.map((function(e){return rn({id:e.id},e.data())}));r(t),s(!1)}),(function(e){console.log("Error in snapshot listener:",e)}));return function(){return e()}}),[]),o?(0,lB.jsx)("div",{className:"spinner",children:(0,lB.jsx)("img",{src:dB,alt:"loading-spinner"})}):(0,lB.jsx)("div",{children:(0,lB.jsxs)("div",{className:"search-wrapper",children:["/dashboard"!==e.pathname&&(0,lB.jsx)(ke,{to:"/",className:"waves-effect waves-light btn blue darken-3 hoverable",style:{marginRight:"10px"},children:"RETURN TO DASHBOARD"}),(0,lB.jsxs)("div",{className:"search-field",children:[(0,lB.jsx)("input",{id:"title",type:"text",className:"search-bar",value:l,onChange:function(e){return c(e.target.value)}}),(0,lB.jsx)("label",{htmlFor:"title",children:"Search by title"})]}),(0,lB.jsx)("div",{className:"row",style:{padding:"16px"},children:i.length>0?i.filter((function(e){return e.title&&e.title.toLowerCase().includes(l.toLowerCase())})).map((function(e){return(0,lB.jsx)("div",{className:"col s12 m4",children:(0,lB.jsxs)("div",{className:"card grey lighten-5 z-depth-1 hoverable",children:[(0,lB.jsx)("div",{className:"card-image",children:(0,lB.jsx)("img",{src:e.imageURL,style:{height:"250px"},alt:e.author})}),(0,lB.jsx)("div",{className:"card-action center",style:{overflow:"hidden"},children:(0,lB.jsxs)(ke,{to:"book/".concat(e.id),className:"btn black darken-1 hoverable",children:["View Details"," ",(0,lB.jsx)("i",{className:"material-icons right",children:"arrow_forward"})]})})]})},e.id)})):(0,lB.jsx)("h3",{children:"No books available"})})]})})},pB=function(){var e=fe(),n=Ie((0,t.useState)([]),2),i=n[0],r=n[1],a=Ie((0,t.useState)(!1),2),o=a[0],s=a[1],u=Ie((0,t.useState)(""),2),l=u[0],c=u[1];return(0,t.useEffect)((function(){s(!0);var e=uB.firestore().collection("authors").onSnapshot((function(e){var t=e.docs.map((function(e){return rn({id:e.id},e.data())}));r(t),s(!1)}),(function(e){console.log("Error in snapshot listener:",e)}));return function(){return e()}}),[]),o?(0,lB.jsx)("div",{className:"spinner",children:(0,lB.jsx)("img",{src:dB,alt:"loading-spinner"})}):(0,lB.jsxs)("div",{children:["// Link to the dashboard",(0,lB.jsxs)("div",{className:"search-wrapper",children:["/dashboard"!==e.pathname&&(0,lB.jsx)(ke,{to:"/",className:"waves-effect waves-light btn blue darken-3 hoverable",style:{marginRight:"10px"},children:"RETURN TO DASHBOARD"}),(0,lB.jsxs)("div",{className:"search-field",children:[(0,lB.jsx)("input",{id:"name",type:"text",className:"search-bar",value:l,onChange:function(e){return c(e.target.value)}}),(0,lB.jsx)("label",{htmlFor:"name",children:"Search by author name"})]}),"// Display the list of authors",(0,lB.jsx)("div",{className:"row",style:{padding:"16px"},children:i.length>0?i.filter((function(e){return e.name&&e.name.toLowerCase().includes(l.toLowerCase())})).map((function(e){return(0,lB.jsx)("div",{className:"col s12 m4",children:(0,lB.jsxs)("div",{className:"card grey lighten-5 z-depth-1 hoverable",children:[(0,lB.jsxs)("div",{className:"card-content author-card-content",children:[(0,lB.jsx)("h4",{children:e.name}),(0,lB.jsx)("p",{className:"dob-text",children:e.dob}),(0,lB.jsx)("p",{className:"bio-text",children:e.biography})]}),(0,lB.jsxs)("div",{className:"card-action center",style:{overflow:"hidden"},children:["// Link to the author's details",(0,lB.jsxs)(ke,{to:"/author/".concat(e.id),className:"btn black darken-1 hoverable",children:["View Details"," ",(0,lB.jsx)("i",{className:"material-icons right",children:"arrow_forward"})]})]})]})},e.id)})):(0,lB.jsx)("h3",{children:"No authors available"})})]})]})},vB=function(e){var n=(0,t.useContext)(cB).user;return(0,t.useEffect)((function(){n||e.history.push("/login")}),[n,e.history]),(0,lB.jsxs)("div",{className:"row",children:[(0,lB.jsxs)("div",{className:"col s12 m2 left-panel",children:[(0,lB.jsx)("h4",{children:"Manage Library"}),(0,lB.jsxs)("div",{className:"button-row",children:[(0,lB.jsxs)(ke,{to:"/add/book",className:"waves-effect waves-light btn green darken-3 hoverable",style:{margin:"10px 0px"},children:["ADD BOOK ",(0,lB.jsx)("i",{className:"material-icons right",children:"add"})]}),(0,lB.jsxs)(ke,{to:"/add/author",className:"waves-effect waves-light btn green darken-3 hoverable",style:{margin:"10px 0px"},children:["ADD AUTHOR ",(0,lB.jsx)("i",{className:"material-icons right",children:"add"})]})]}),(0,lB.jsxs)("div",{className:"button-row",children:[(0,lB.jsxs)(ke,{to:"/books",className:"waves-effect waves-light btn green darken-3 hoverable",style:{margin:"10px 0px"},children:["VIEW BOOKS ",(0,lB.jsx)("i",{className:"material-icons right",children:"visibility"})]}),(0,lB.jsxs)(ke,{to:"/authors",className:"waves-effect waves-light btn green darken-3 hoverable",style:{margin:"10px 0px"},children:["VIEW AUTHORS ",(0,lB.jsx)("i",{className:"material-icons right",children:"visibility"})]})]})]}),(0,lB.jsx)("div",{className:"col s12 m10 right-panel",children:(0,lB.jsxs)("div",{className:"book-author-container",children:[(0,lB.jsx)(fB,{}),(0,lB.jsx)(pB,{})," //  Render the book list and author list"]})})]})},mB=function(){var e=(0,t.useContext)(cB).user;return console.log("NavBar user:",e),(0,lB.jsx)("div",{className:"navbar-fixed",children:(0,lB.jsx)("nav",{className:"black darken-4",children:(0,lB.jsxs)("div",{className:"container nav-wrapper",children:[(0,lB.jsx)(ke,{to:"/dashboard",children:(0,lB.jsx)("span",{className:"brand-logo",children:"Library System"})}),null!==e?(0,lB.jsx)("ul",{className:"right",children:(0,lB.jsx)("li",{children:(0,lB.jsx)("button",{className:"btn black-text waves-effect waves-teal red",onClick:function(){return uB.auth().signOut()},children:"Logout"})})}):null]})})})},yB=function(){return(0,lB.jsx)("footer",{className:"black darken-4",children:(0,lB.jsx)("div",{className:"center",children:(0,lB.jsxs)("p",{className:"white-text",children:["\xa9 Abdullah Al-Kheshen | Y-76_Library-Management-System | May-2023"," "]})})})},gB=n(851),_B=n.n(gB),kB=function(e){var n=(0,t.useContext)(cB).user,i=Ie((0,t.useState)(""),2),r=i[0],a=i[1],o=Ie((0,t.useState)(""),2),s=o[0],u=o[1];(0,t.useEffect)((function(){n&&e.history.push("/dashboard")}),[n,e.history]);var l=function(){var t=$t(jt().mark((function t(n){var i;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,uB.auth().signInWithEmailAndPassword(r,s);case 4:i=t.sent,console.log("Login: signInWithEmailAndPassword response:",i),i.user&&e.history.push("/dashboard"),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),_B().toast({html:"".concat(t.t0.message),classes:"red rounded"});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return(0,lB.jsx)("div",{className:"row",children:(0,lB.jsx)("div",{className:"col s12 m6 offset-m3",children:(0,lB.jsx)("div",{className:"card hoverable",children:(0,lB.jsxs)("div",{className:"card-content",children:[(0,lB.jsx)("h5",{className:"center",children:"Login to Dashboard"}),(0,lB.jsxs)("form",{onSubmit:l,children:[(0,lB.jsxs)("div",{className:"row",children:[(0,lB.jsxs)("div",{className:"input-field col s12 m8 offset-m2",children:[(0,lB.jsx)("i",{className:"material-icons prefix",children:"email"}),(0,lB.jsx)("input",{id:"email",type:"email",className:"validate",value:r,onChange:function(e){return a(e.target.value)}}),(0,lB.jsx)("label",{htmlFor:"email",children:"Email"})]}),(0,lB.jsxs)("div",{className:"input-field col s12 m8 offset-m2",children:[(0,lB.jsx)("i",{className:"material-icons prefix",children:"keyboard_hide"}),(0,lB.jsx)("input",{id:"password",type:"password",className:"validate",value:s,onChange:function(e){return u(e.target.value)}}),(0,lB.jsx)("label",{htmlFor:"password",children:"Password"})]})]}),(0,lB.jsxs)("div",{className:"card-action center",style:{overflow:"hidden"},children:[(0,lB.jsxs)("button",{className:"waves-effect waves-light btn",style:{margin:"18px"},type:"submit",children:["Login",(0,lB.jsx)("i",{className:"material-icons right",children:"add_circle_outline"})]}),(0,lB.jsxs)("button",{className:"waves-effect waves-light btn red",type:"reset",onClick:function(){a(""),u("")},children:["Reset ",(0,lB.jsx)("i",{className:"material-icons right",children:"cancel"})]})]})]})]})})})})},wB=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/login";return function(i){return(0,t.useContext)(cB).user?(0,lB.jsx)(e,rn({},i)):(0,lB.jsx)(ee,{to:n})}},bB=wB((function(e){var n=(0,t.useContext)(cB).user,i=Ie((0,t.useState)({title:"",author:"",date_published:"",description:"",status:"drafted"}),2),r=i[0],a=i[1],o=Ie((0,t.useState)([]),2),s=o[0],u=o[1],l=Ie((0,t.useState)(""),2),c=l[0],h=l[1],d=Ie((0,t.useState)(""),2),f=d[0],p=d[1],v=Ie((0,t.useState)(""),2),m=v[0],y=v[1],g=Ie((0,t.useState)(!1),2),_=g[0],k=g[1],w=r.title,b=r.author,x=r.date_published,E=r.description;(0,t.useEffect)((function(){n||(e.history.push("/login"),alert("You must be logged in to add a book.")),uB.firestore().collection("authors").get().then((function(e){var t=e.docs.map((function(e){return rn({id:e.id},e.data())}));u(t),_B().AutoInit()}))}),[n,e.history]);var C=function(e){return function(t){a(rn(rn({},r),{},Ae({},e,t.target.value)))}},T=function(){a({title:"",author:"",date_published:"",description:""}),h("")};return _?(0,lB.jsx)("div",{className:"spinner",children:(0,lB.jsx)("img",{src:dB,alt:"loading-spinner"})}):(0,lB.jsx)("div",{className:"row",children:(0,lB.jsxs)("div",{className:"col s12 m8 offset-m2",children:[(0,lB.jsxs)(ke,{to:"/dashboard",className:"waves-effect waves-light btn",children:[(0,lB.jsx)("i",{className:"material-icons left",children:"arrow_back"}),"Back to dashboard"]}),(0,lB.jsx)("br",{}),"// Show the form to add a new book",(0,lB.jsx)("div",{className:"card",children:(0,lB.jsxs)("div",{className:"card-content",children:[(0,lB.jsx)("h3",{className:"card-title center",children:"Add New Book"}),(0,lB.jsxs)("div",{className:"row",children:[(0,lB.jsx)("div",{className:"col s12 m7",children:(0,lB.jsxs)("form",{encType:"multipart/form-data",onSubmit:function(e){if(e.preventDefault(),_B().AutoInit(),c){var t=c.type;if(["image/gif","image/jpeg","image/jpg","image/png"].includes(t)){k(!0);var n=uB.storage().ref("images/".concat(f)).put(c);n.on("state_changed",(function(){}),(function(e){console.log(e)}),(function(){n.snapshot.ref.getDownloadURL().then((function(e){var t={title:w,author:b,date_published:x,description:E,imageURL:e};uB.firestore().collection("books").add(t).then((function(){_B().toast({html:"Book added succesfully",classes:"green darken-1 rounded"}),k(!1),T(),h("")})).catch((function(){_B().toast({html:"Something went wrong. Please try again.",classes:"red darken-1 rounded"}),k(!1)}))}))}))}else alert("Not a valid file. Please choose an image.")}else alert("You must choose an image.")},children:[(0,lB.jsxs)("div",{className:"row",children:[(0,lB.jsxs)("div",{className:"input-field col s6",children:[(0,lB.jsx)("input",{id:"title",type:"text",className:"validate",onChange:C("title"),value:w}),(0,lB.jsx)("label",{htmlFor:"title",children:"Title"})]}),(0,lB.jsxs)("div",{className:"input-field col s6",children:[(0,lB.jsxs)("select",{id:"author",className:"validate",onChange:C("author"),value:b,children:[(0,lB.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Choose your option"}),s.map((function(e){return(0,lB.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),(0,lB.jsx)("label",{htmlFor:"author",children:"Author"})]}),"// Date picker",(0,lB.jsxs)("div",{className:"input-field col s4",children:[(0,lB.jsx)("input",{id:"date_published",type:"date",class:"datepicker",className:"validate",onChange:C("date_published"),value:x}),(0,lB.jsx)("label",{htmlFor:"date_published",children:"Date Published"})]}),"// Textarea for description",(0,lB.jsxs)("div",{className:"input-field col s12",children:[(0,lB.jsx)("textarea",{id:"description",className:"materialize-textarea",onChange:C("description"),value:E}),(0,lB.jsx)("label",{htmlFor:"description",children:"Description"})]})]}),"// File upload for cover image",(0,lB.jsxs)("div",{className:"file-field input-field",children:[(0,lB.jsxs)("div",{className:"btn purple darken-4",children:[(0,lB.jsx)("span",{children:"Upload Cover Image"}),(0,lB.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];h(t),t&&(y(URL.createObjectURL(t)),p(t.name))},accept:"image/*"})]}),"// Show the image name",(0,lB.jsx)("div",{className:"file-path-wrapper",children:(0,lB.jsx)("input",{className:"file-path validate",type:"text"})})]}),"// div to hold the submit and reset buttons",(0,lB.jsxs)("div",{children:[(0,lB.jsxs)("button",{className:"waves-effect waves-light btn",style:{margin:"8px 18px"},type:"submit",children:["ADD BOOK"," ",(0,lB.jsx)("i",{className:"material-icons right",children:"add_circle_outline"})]}),(0,lB.jsxs)("button",{className:"waves-effect waves-light btn red",type:"reset",onClick:T,children:["Reset ",(0,lB.jsx)("i",{className:"material-icons right",children:"cancel"})]})]})]})}),"// Show the image preview",(0,lB.jsxs)("div",{className:"col s12 m5 center",children:[(0,lB.jsx)("p",{children:"Cover Image"}),(0,lB.jsx)("img",{src:m,alt:f,className:"responsive-img"})]})]})]})})]})})}),"/login"),xB=function(e){var n="withRouter("+(e.displayName||e.name)+")",i=function(n){var i=n.wrappedComponentRef,r=j(n,["wrappedComponentRef"]);return t.createElement(K.Consumer,null,(function(n){return n||m(!1),t.createElement(e,u({},r,n,{ref:i}))}))};return i.displayName=n,i.WrappedComponent=e,V()(i,e)}((function(e){var n=(0,t.useContext)(cB).user,i=e.book,r=e.id,a=e.setEditMode,o=Ie((0,t.useState)(""),2),s=o[0],u=o[1],l=Ie((0,t.useState)([]),2),c=l[0],h=l[1],d=Ie((0,t.useState)(""),2),f=d[0],p=d[1],v=Ie((0,t.useState)(""),2),m=v[0],y=v[1],g=Ie((0,t.useState)(""),2),_=g[0],k=g[1],w=Ie((0,t.useState)(""),2),b=w[0],x=w[1],E=Ie((0,t.useState)(""),2),C=E[0],T=E[1],I=Ie((0,t.useState)(""),2),S=I[0],O=I[1];(0,t.useEffect)((function(){n||e.history.push("/"),i&&(u(i.title||""),p(i.author||""),y(i.date_published||""),k(i.description||""),O(i.imageURL||"")),A()}),[n,e.history,i]);var A=function(){var e=$t(jt().mark((function e(){var t,n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uB.firestore().collection("authors").get();case 2:t=e.sent,n=t.docs.map((function(e){return rn({id:e.id},e.data())})),h(n),_B().AutoInit(),_B().updateTextFields();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){uB.firestore().collection("books").doc(r).update({title:s,author:f,date_published:m,description:_,imageURL:e}).then((function(){_B().toast({html:"Book updated successfully",classes:"green"}),a(!1)})).catch((function(e){console.error("Error updating book: ",e)}))},M=function(e,t){return t(e.target.value)};return(0,lB.jsx)("form",{onSubmit:function(e){if(e.preventDefault(),b){var t=uB.storage().ref("images/".concat(C)).put(b);t.on("state_changed",(function(){}),(function(e){console.log(e)}),(function(){t.snapshot.ref.getDownloadURL().then((function(e){D(e)}))}))}else D(S)},className:"col s12 m8 offset-m2 l6 offset-l3",children:(0,lB.jsxs)("div",{className:"row",children:[(0,lB.jsxs)("div",{className:"col s12 m6 l6",children:[(0,lB.jsxs)("div",{className:"file-field input-field",children:[(0,lB.jsxs)("div",{className:"btn purple darken-4",children:[(0,lB.jsx)("span",{children:"Update Book Image"}),(0,lB.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&(x(e.target.files[0]),T(e.target.files[0].name),O(URL.createObjectURL(e.target.files[0])))}})]}),(0,lB.jsx)("div",{className:"file-path-wrapper",children:(0,lB.jsx)("input",{className:"file-path validate",type:"text"})})]}),S&&(0,lB.jsx)("img",{src:S,alt:"Preview",className:"responsive-img"})]}),(0,lB.jsxs)("div",{className:"col s12 m6 l6",children:[(0,lB.jsxs)("div",{className:"input-field",children:[(0,lB.jsx)("input",{id:"title",type:"text",value:s,onChange:function(e){return M(e,u)}}),(0,lB.jsx)("label",{htmlFor:"title",children:"Title"})]}),(0,lB.jsxs)("div",{className:"input-field",children:[(0,lB.jsxs)("select",{value:f,onChange:function(e){return M(e,p)},children:[(0,lB.jsx)("option",{value:"",disabled:!0,children:"Choose an author"}),c.map((function(e){return(0,lB.jsx)("option",{value:e.name,children:e.name},e.id)}))]}),(0,lB.jsx)("label",{children:"Author"})]}),(0,lB.jsxs)("div",{className:"input-field",children:[(0,lB.jsx)("input",{id:"date",type:"text",className:"datepicker",value:m,onChange:function(e){return M(e,y)}}),(0,lB.jsx)("label",{htmlFor:"date",children:"Date Published"})]}),(0,lB.jsxs)("div",{className:"input-field",children:[(0,lB.jsx)("textarea",{id:"description",className:"materialize-textarea",value:_,style:{height:"100px"},onChange:function(e){return M(e,k)}}),(0,lB.jsx)("label",{htmlFor:"description",children:"Description"})]}),(0,lB.jsx)("button",{className:"btn waves-effect waves-light",type:"submit",children:"Update Book"}),(0,lB.jsx)(ke,{to:"/dashboard",className:"btn red darken-2",onClick:function(){return a(!1)},style:{margin:"8px 18px"},children:"Cancel"})]})]})})})),EB=function(e){var n=(0,t.useContext)(cB).user,i=Ie((0,t.useState)(),2),r=i[0],a=i[1],o=Ie((0,t.useState)(null),2),s=o[0],u=o[1],l=Ie((0,t.useState)(!1),2),c=l[0],h=l[1],d=e.match.params.id;console.log("Book ID in BookDetails:",d),(0,t.useEffect)((function(){if(n||e.history.push("/login"),console.log("Book ID before Firestore fetch:",d),d){var t=uB.firestore().collection("books").doc(d).onSnapshot((function(e){a(e.data());var t=e.data();a(t),t.author?uB.firestore().collection("authors").doc(e.data().author).get().then((function(e){e.exists?u(e.data()):u({name:"Author not found"})})):console.error("Author ID is undefined in book data")}));return function(){return t()}}console.error("Book ID is undefined before Firestore fetch")}),[n,e.history,d]);return(0,lB.jsxs)("div",{className:"container",children:[c?null:(0,lB.jsxs)(ke,{to:"/dashboard",className:"waves-effect waves-light btn",children:[(0,lB.jsx)("i",{className:"material-icons left",children:"arrow_back"}),"Back to dashboard"]}),r&&s?c?(0,lB.jsx)(xB,{book:r,id:d,setEditMode:h}):(0,lB.jsxs)("div",{className:"row card",children:[(0,lB.jsx)("div",{className:"col m4",children:(0,lB.jsx)("h3",{className:"center",style:{marginRight:"50px"},children:(0,lB.jsx)("img",{src:r.imageURL,alt:r.title,className:"responsive-img"})})}),(0,lB.jsxs)("div",{className:"col m6",children:[(0,lB.jsxs)("div",{className:"actions",children:[(0,lB.jsx)("h4",{children:"Details"}),c?null:(0,lB.jsxs)("div",{children:[(0,lB.jsxs)("button",{disabled:!r,className:"btn waves-effect waves-light green",type:"submit",name:"action",style:{marginRight:"15px"},onClick:function(){h(!c)},children:["Edit",(0,lB.jsx)("i",{className:"material-icons right",children:"edit"})]}),(0,lB.jsxs)("button",{className:"btn waves-effect waves-light red",type:"submit",name:"action",onClick:function(){window.confirm("Are you sure to delete this book?")&&(console.log("Book ID before delete:",d),uB.firestore().collection("books").doc(d).delete().then((function(){e.history.replace("/books")})).catch((function(e){console.error("Error removing document: ",e)})))},children:["Delete",(0,lB.jsx)("i",{className:"material-icons right",children:"delete"})]})]})]}),(0,lB.jsxs)("div",{className:"row",children:["// Display the book details",(0,lB.jsxs)("div",{className:"col",children:[(0,lB.jsxs)("h6",{children:[(0,lB.jsx)("strong",{children:"Title: "}),r.title]}),(0,lB.jsxs)("h6",{children:[(0,lB.jsx)("strong",{children:"Author: "}),s.name]})]}),(0,lB.jsxs)("div",{className:"col",children:[(0,lB.jsxs)("h6",{children:[(0,lB.jsx)("strong",{children:"Date: "}),r.date_published]}),(0,lB.jsxs)("h6",{children:[(0,lB.jsx)("strong",{children:"Description: "}),r.description]})]})]})]})]}):(0,lB.jsx)("div",{className:"spinner",children:(0,lB.jsx)("img",{src:dB,alt:"loading-spinner"})})]})},CB=function(){var e=Ie((0,t.useState)(""),2),n=e[0],i=e[1],r=Ie((0,t.useState)(""),2),a=r[0],o=r[1],s=Ie((0,t.useState)(""),2),u=s[0],l=s[1];return(0,lB.jsxs)("div",{className:"container",children:["// Link to the dashboard",(0,lB.jsxs)(ke,{to:"/dashboard",className:"waves-effect waves-light btn",children:[(0,lB.jsx)("i",{className:"material-icons left",children:"arrow_back"}),"Back to dashboard"]}),(0,lB.jsx)("h3",{children:"Add New Author"}),"// Form to add a new author",(0,lB.jsxs)("form",{onSubmit:function(e){e.preventDefault(),uB.firestore().collection("authors").where("name","==",n).get().then((function(e){if(!e.empty)return console.log("An author with this name already exists."),void alert("An author with this name already exists.");uB.firestore().collection("authors").add({name:n,dob:a,biography:u}).then((function(e){console.log("Author added with ID: ",e.id),i(""),o(""),l("")}))}))},children:["// Input fields for the author's name, date of birth, and biography",(0,lB.jsx)("label",{children:"Name"}),(0,lB.jsx)("input",{type:"text",value:n,onChange:function(e){return i(e.currentTarget.value)}}),(0,lB.jsx)("label",{children:"Date of Birth"}),(0,lB.jsx)("input",{type:"date",value:a,onChange:function(e){return o(e.currentTarget.value)}}),(0,lB.jsx)("label",{children:"Biography"}),(0,lB.jsx)("textarea",{value:u,onChange:function(e){return l(e.currentTarget.value)}}),(0,lB.jsx)("button",{type:"submit",className:"btn",children:"Submit"})]})]})},TB=n(370),IB=n.n(TB),SB=function(e){var n=Ie((0,t.useState)(""),2),i=n[0],r=n[1],a=Ie((0,t.useState)(""),2),o=a[0],s=a[1],u=Ie((0,t.useState)(""),2),l=u[0],c=u[1];(0,t.useEffect)((function(){var t=function(){var t=$t(jt().mark((function t(){var n,i,a;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=uB.firestore(),t.next=3,n.collection("authors").doc(e.match.params.id).get();case 3:(i=t.sent).exists?(a=i.data(),r(a.name),s(a.dob),c(a.biography)):console.log("No such document!");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.match.params.id]),(0,t.useEffect)((function(){IB().updateTextFields()}),[i,o,l]);return(0,lB.jsx)("div",{className:"container edit-author",children:(0,lB.jsxs)("form",{onSubmit:function(t){t.preventDefault(),function(t){uB.firestore().collection("authors").where("name","==",i).get().then((function(n){n.empty||n.forEach((function(e){e.id===t||console.log("An author with this name already exists.")})),uB.firestore().collection("authors").doc(t).set({name:i,dob:o,biography:l}).then((function(){e.history.push("/author/".concat(t))}))}))}(e.match.params.id)},className:"col s12",children:[(0,lB.jsxs)("div",{className:"row",children:[(0,lB.jsxs)("div",{className:"input-field col s6",children:[(0,lB.jsx)("input",{id:"name",type:"text",value:i,onChange:function(e){return r(e.target.value)},className:"validate"}),(0,lB.jsx)("label",{htmlFor:"name",children:"Name"})]}),(0,lB.jsxs)("div",{className:"input-field col s6",children:[(0,lB.jsx)("input",{id:"dob",type:"text",value:o,onChange:function(e){return s(e.target.value)},className:"validate"}),(0,lB.jsx)("label",{htmlFor:"dob",children:"Date of Birth"})]})]}),(0,lB.jsx)("div",{className:"row",children:(0,lB.jsxs)("div",{className:"input-field col s12",children:[(0,lB.jsx)("textarea",{id:"biography",className:"materialize-textarea validate",value:l,onChange:function(e){return c(e.target.value)}}),(0,lB.jsx)("label",{htmlFor:"biography",children:"Biography"})]})}),"// Display the buttons to submit the form, cancel the form, and go back to the dashboard",(0,lB.jsxs)("div",{className:"buttons-wrapper",children:[(0,lB.jsx)("button",{type:"submit",className:"btn custom-green white-text mt-3",children:"Update Author"}),(0,lB.jsx)(ke,{to:"/author/".concat(e.match.params.id),className:"btn custom-grey white-text mt-3",children:"Cancel"}),(0,lB.jsx)(ke,{to:"/dashboard",className:"btn custom-blue white-text mt-3",children:"Back to Dashboard"})]})]})})},OB=function(e){var n=Ie((0,t.useState)(null),2),i=n[0],r=n[1];(0,t.useEffect)((function(){var t=function(){var t=$t(jt().mark((function t(){var n,i,a;return jt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=uB.firestore(),t.next=3,n.collection("authors").doc(e.match.params.id).get();case 3:(i=t.sent).exists?(a=i.data(),r(a)):console.log("No such document!");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e.match.params.id]);return(0,lB.jsxs)("div",{className:"container center-content",children:["// Link to the dashboard",(0,lB.jsxs)(ke,{to:"/dashboard",className:"waves-effect waves-light btn",children:[(0,lB.jsx)("i",{className:"material-icons left",children:"arrow_back"}),"Back to dashboard"]}),"// Display the author's details if the author exists",i?(0,lB.jsxs)("div",{children:["// Display the author's name, date of birth, and biography",(0,lB.jsx)("h2",{children:i.name}),(0,lB.jsx)("p",{children:i.dob}),(0,lB.jsx)("p",{children:i.biography}),(0,lB.jsx)(ke,{to:"/edit/author/".concat(e.match.params.id),className:"btn green white-text",children:"Edit"}),"// Delete the author",(0,lB.jsx)("button",{className:"btn red white-text",onClick:function(){return function(t){uB.firestore().collection("authors").doc(t).delete().then((function(){e.history.push("/dashboard")})).catch((function(e){console.error("Error removing document: ",e)}))}(e.match.params.id)},children:"Delete"})]}):(0,lB.jsx)("p",{children:"Loading..."})]})};var AB=function(){return(0,lB.jsx)(pe,{children:(0,lB.jsxs)("div",{className:"App",children:[(0,lB.jsx)(mB,{}),(0,lB.jsxs)(he,{children:[(0,lB.jsx)(ae,{path:"/dashboard",component:vB}),(0,lB.jsx)(ae,{path:"/add/book",component:bB}),(0,lB.jsx)(ae,{path:"/book/:id",component:EB}),(0,lB.jsx)(ae,{path:"/books",component:fB}),(0,lB.jsx)(ae,{path:"/add/author",component:CB}),(0,lB.jsx)(ae,{path:"/author/:id",component:OB}),(0,lB.jsx)(ae,{path:"/edit/author/:id",component:SB}),(0,lB.jsx)(ae,{path:"/authors",component:pB}),(0,lB.jsx)(ae,{path:"/books",component:fB}),(0,lB.jsx)(ae,{path:"/",component:kB})]}),(0,lB.jsx)(yB,{})]})})},DB=n(647);i.render((0,lB.jsx)(hB,{children:(0,lB.jsx)(AB,{})}),document.getElementById("root")),DB.unregister()}()}();
//# sourceMappingURL=main.a71ecab5.js.map